<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="https://www.omg.org/spec/DMN/20191111/MODEL/"
             xmlns:camunda="http://camunda.org/schema/1.0/dmn"
             id="Definitions_REC005"
             name="Reconstrucao Pos-Trauma"
             namespace="http://camunda.org/schema/1.0/dmn">

  <!--
    ===============================================================================
    TUSS: REC-005
    Procedimento: Reconstrucao de Sequelas Traumaticas
    Especialidade: Cirurgia Reconstrutiva / Cirurgia Plastica
    Versao: 3.0.0-TIER1
    Data: 2026-02-07
    ===============================================================================

    INDICACOES CLINICAS (SBCP 2022):
    - Sequelas de trauma facial
    - Perda de substancia pos-traumatica
    - Deformidades osseas pos-fratura
    - Sequelas de mordedura animal
    - Lesoes mutilantes de membros

    CLASSIFICACAO:
    - URGENTE: Lesoes com exposicao de estruturas nobres
    - ELETIVO: Sequelas consolidadas

    REFERENCIAS TECNICAS:
    - SBCP 2022 - Reconstrucao Traumatica
    - SBCCP 2021 - Trauma Facial
    - ACS Trauma Guidelines 2023
    - ASPS 2023 - Reconstructive Ladder

    ===============================================================================
  -->

  <decision id="Decision_REC005" name="Regra Clinica - Reconstrucao Pos-Trauma">
    <decisionTable id="DecisionTable_REC005" hitPolicy="FIRST">

      <!-- ========== INPUTS (5) ========== -->

      <input id="Input_tipoTrauma" label="Tipo de Trauma" camunda:inputVariable="tipoTrauma">
        <inputExpression id="InputExpression_tipoTrauma" typeRef="string">
          <text>tipoTrauma</text>
        </inputExpression>
        <inputValues id="InputValues_tipoTrauma">
          <text>"TraumaFacial","PerdaSubstancia","FraturaConsolidadaDeformidade","MordeduraAnimal","LesaoMutilante","AvulsaoCouroCouro","LaceraoComplexa"</text>
        </inputValues>
      </input>

      <input id="Input_estruturasExpostas" label="Estruturas Expostas/Afetadas" camunda:inputVariable="estruturasExpostas">
        <inputExpression id="InputExpression_estruturasExpostas" typeRef="string">
          <text>estruturasExpostas</text>
        </inputExpression>
        <inputValues id="InputValues_estruturasExpostas">
          <text>"Osso","Tendao","Nervo","Vaso","Articulacao","Nenhuma"</text>
        </inputValues>
      </input>

      <input id="Input_momentoReconstrucao" label="Momento da Reconstrucao" camunda:inputVariable="momentoReconstrucao">
        <inputExpression id="InputExpression_momentoReconstrucao" typeRef="string">
          <text>momentoReconstrucao</text>
        </inputExpression>
        <inputValues id="InputValues_momentoReconstrucao">
          <text>"Agudo","Subagudo","Tardio"</text>
        </inputValues>
      </input>

      <input id="Input_limitacaoFuncional" label="Limitacao Funcional" camunda:inputVariable="limitacaoFuncional">
        <inputExpression id="InputExpression_limitacaoFuncional" typeRef="string">
          <text>limitacaoFuncional</text>
        </inputExpression>
        <inputValues id="InputValues_limitacaoFuncional">
          <text>"PerdasFuncaoTotal","PerdasFuncaoParcial","MinimaLimitacao","SemLimitacao"</text>
        </inputValues>
      </input>

      <input id="Input_procedimentoProposto" label="Procedimento Proposto" camunda:inputVariable="procedimentoProposto">
        <inputExpression id="InputExpression_procedimentoProposto" typeRef="string">
          <text>procedimentoProposto</text>
        </inputExpression>
        <inputValues id="InputValues_procedimentoProposto">
          <text>"RetalhoLocal","RetalhoRegional","RetalhoMicrocirurgico","Enxerto","OsteotomiaCorretiva","Revisao"</text>
        </inputValues>
      </input>

      <!-- ========== OUTPUTS (3 - Padrao TIER-1) ========== -->

      <output id="Output_resultado" label="Resultado" name="resultado" typeRef="string">
        <outputValues id="OutputValues_resultado">
          <text>"Aprovado","Reprovado","Pendente"</text>
        </outputValues>
      </output>

      <output id="Output_observacao" label="Observacao Clinica" name="observacao" typeRef="string" />

      <output id="Output_fundamentacao" label="Fundamentacao Tecnica" name="fundamentacao" typeRef="string" />

      <!-- Output 4: Alertas Desperdicio -->
      <output id="Output_alertasDesperdicio" label="Alertas de Desperdicio" name="alertasDesperdicio" typeRef="string">
        <outputValues id="OutputValues_alertasDesperdicio">
          <text>"NENHUM","DUP","FREQ","ESC","DOC","PROT","MULTI"</text>
        </outputValues>
      </output>

      <!-- Output 5: Acao Recomendada -->
      <output id="Output_acaoRecomendada" label="Acao Recomendada" name="acaoRecomendada" typeRef="string">
        <outputValues id="OutputValues_acaoRecomendada">
          <text>"APROVAR","NEGAR","SOLICITAR_INFO","AGUARDAR_PRAZO","SUGERIR_ALTERNATIVA"</text>
        </outputValues>
      </output>

      <!-- ========== RULES ========== -->

      <!-- APROVACOES URGENTES -->
      <rule id="Rule_Aprovado_ExposicaoOssea">
        <description>Aprovado Urgente: Exposicao ossea</description>
        <inputEntry id="InputEntry_EO_1"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_EO_2"><text>"Osso"</text></inputEntry>
        <inputEntry id="InputEntry_EO_3"><text>"Agudo","Subagudo"</text></inputEntry>
        <inputEntry id="InputEntry_EO_4"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_EO_5"><text>-</text></inputEntry>
        <outputEntry id="OutputEntry_EO_resultado"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OutputEntry_EO_observacao"><text>"URGENTE - Exposicao ossea requer cobertura para prevenir osteomielite"</text></outputEntry>
        <outputEntry id="OutputEntry_EO_fundamentacao"><text>"ACS 2023, SBCP 2022 - Cobertura de osso exposto e urgencia reconstrutiva"</text></outputEntry>
      <outputEntry id="OE_Aprovado_ExposicaoOssea_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Aprovado_ExposicaoOssea_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <rule id="Rule_Aprovado_ExposicaoTendaoNervo">
        <description>Aprovado Urgente: Exposicao de tendao ou nervo</description>
        <inputEntry id="InputEntry_ETN_1"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_ETN_2"><text>"Tendao","Nervo"</text></inputEntry>
        <inputEntry id="InputEntry_ETN_3"><text>"Agudo","Subagudo"</text></inputEntry>
        <inputEntry id="InputEntry_ETN_4"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_ETN_5"><text>-</text></inputEntry>
        <outputEntry id="OutputEntry_ETN_resultado"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OutputEntry_ETN_observacao"><text>"URGENTE - Estruturas nobres expostas requerem cobertura imediata"</text></outputEntry>
        <outputEntry id="OutputEntry_ETN_fundamentacao"><text>"SBCP 2022 - Tendao e nervo expostos dessecam em 24-48h sem cobertura"</text></outputEntry>
      <outputEntry id="OE_Aprovado_ExposicaoTendaoNervo_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Aprovado_ExposicaoTendaoNervo_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <rule id="Rule_Aprovado_LesaoMutilante">
        <description>Aprovado: Lesao mutilante de membro</description>
        <inputEntry id="InputEntry_LM_1"><text>"LesaoMutilante"</text></inputEntry>
        <inputEntry id="InputEntry_LM_2"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_LM_3"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_LM_4"><text>"PerdasFuncaoTotal","PerdasFuncaoParcial"</text></inputEntry>
        <inputEntry id="InputEntry_LM_5"><text>-</text></inputEntry>
        <outputEntry id="OutputEntry_LM_resultado"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OutputEntry_LM_observacao"><text>"Lesao mutilante com perda funcional - reconstrucao para restaurar funcao"</text></outputEntry>
        <outputEntry id="OutputEntry_LM_fundamentacao"><text>"SBCP 2022, ASPS 2023 - Reconstrucao funcional e prioridade em lesoes mutilantes"</text></outputEntry>
      <outputEntry id="OE_Aprovado_LesaoMutilante_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Aprovado_LesaoMutilante_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <!-- APROVACOES ELETIVAS -->
      <rule id="Rule_Aprovado_TraumaFacial">
        <description>Aprovado: Sequela de trauma facial com deformidade</description>
        <inputEntry id="InputEntry_TF_1"><text>"TraumaFacial"</text></inputEntry>
        <inputEntry id="InputEntry_TF_2"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_TF_3"><text>"Tardio"</text></inputEntry>
        <inputEntry id="InputEntry_TF_4"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_TF_5"><text>-</text></inputEntry>
        <outputEntry id="OutputEntry_TF_resultado"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OutputEntry_TF_observacao"><text>"Deformidade facial pos-traumatica - reconstrucao para restaurar contorno"</text></outputEntry>
        <outputEntry id="OutputEntry_TF_fundamentacao"><text>"SBCCP 2021 - Sequelas faciais tem impacto funcional e psicossocial"</text></outputEntry>
      <outputEntry id="OE_Aprovado_TraumaFacial_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Aprovado_TraumaFacial_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <rule id="Rule_Aprovado_FraturaDeformidade">
        <description>Aprovado: Fratura consolidada com deformidade funcional</description>
        <inputEntry id="InputEntry_FD_1"><text>"FraturaConsolidadaDeformidade"</text></inputEntry>
        <inputEntry id="InputEntry_FD_2"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_FD_3"><text>"Tardio"</text></inputEntry>
        <inputEntry id="InputEntry_FD_4"><text>"PerdasFuncaoParcial","MinimaLimitacao"</text></inputEntry>
        <inputEntry id="InputEntry_FD_5"><text>"OsteotomiaCorretiva"</text></inputEntry>
        <outputEntry id="OutputEntry_FD_resultado"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OutputEntry_FD_observacao"><text>"Deformidade ossea pos-fratura com indicacao de osteotomia corretiva"</text></outputEntry>
        <outputEntry id="OutputEntry_FD_fundamentacao"><text>"SBCP 2022 - Osteotomia corretiva indicada para consolidacao viciosa funcional"</text></outputEntry>
      <outputEntry id="OE_Aprovado_FraturaDeformidade_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Aprovado_FraturaDeformidade_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <rule id="Rule_Aprovado_MordeduraAnimal">
        <description>Aprovado: Sequela de mordedura animal</description>
        <inputEntry id="InputEntry_MA_1"><text>"MordeduraAnimal"</text></inputEntry>
        <inputEntry id="InputEntry_MA_2"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_MA_3"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_MA_4"><text>"PerdasFuncaoParcial","MinimaLimitacao"</text></inputEntry>
        <inputEntry id="InputEntry_MA_5"><text>-</text></inputEntry>
        <outputEntry id="OutputEntry_MA_resultado"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OutputEntry_MA_observacao"><text>"Reconstrucao de sequela de mordedura com perda tecidual"</text></outputEntry>
        <outputEntry id="OutputEntry_MA_fundamentacao"><text>"SBCP 2022 - Mordeduras frequentemente causam perdas complexas"</text></outputEntry>
      <outputEntry id="OE_Aprovado_MordeduraAnimal_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Aprovado_MordeduraAnimal_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <rule id="Rule_Aprovado_PerdaSubstancia">
        <description>Aprovado: Perda de substancia pos-traumatica</description>
        <inputEntry id="InputEntry_PS_1"><text>"PerdaSubstancia"</text></inputEntry>
        <inputEntry id="InputEntry_PS_2"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_PS_3"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_PS_4"><text>not("SemLimitacao")</text></inputEntry>
        <inputEntry id="InputEntry_PS_5"><text>-</text></inputEntry>
        <outputEntry id="OutputEntry_PS_resultado"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OutputEntry_PS_observacao"><text>"Perda de substancia traumatica requerendo reconstrucao"</text></outputEntry>
        <outputEntry id="OutputEntry_PS_fundamentacao"><text>"ASPS 2023 - Reconstructive ladder: enxerto, retalho local, regional, livre"</text></outputEntry>
      <outputEntry id="OE_Aprovado_PerdaSubstancia_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Aprovado_PerdaSubstancia_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <!-- REPROVACOES -->
      <rule id="Rule_Reprovado_SemLimitacaoRecente">
        <description>Reprovado: Cicatriz recente sem limitacao funcional</description>
        <inputEntry id="InputEntry_SLR_1"><text>"LaceraoComplexa"</text></inputEntry>
        <inputEntry id="InputEntry_SLR_2"><text>"Nenhuma"</text></inputEntry>
        <inputEntry id="InputEntry_SLR_3"><text>"Subagudo"</text></inputEntry>
        <inputEntry id="InputEntry_SLR_4"><text>"SemLimitacao"</text></inputEntry>
        <inputEntry id="InputEntry_SLR_5"><text>"Revisao"</text></inputEntry>
        <outputEntry id="OutputEntry_SLR_resultado"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OutputEntry_SLR_observacao"><text>"Cicatriz ainda em maturacao e sem limitacao - aguardar 12 meses"</text></outputEntry>
        <outputEntry id="OutputEntry_SLR_fundamentacao"><text>"SBCP 2022 - Revisao de cicatriz so apos maturacao completa"</text></outputEntry>
      <outputEntry id="OE_Reprovado_SemLimitacaoRecente_4"><text>"PROT"</text></outputEntry>
        <outputEntry id="OE_Reprovado_SemLimitacaoRecente_5"><text>"NEGAR"</text></outputEntry>
      </rule>

      <!-- PENDENTE -->
      <rule id="Rule_Pendente_AvaliacaoEspecializada">
        <description>Pendente: Requer avaliacao de equipe especializada</description>
        <inputEntry id="InputEntry_AE_1"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_AE_2"><text>"Vaso","Articulacao"</text></inputEntry>
        <inputEntry id="InputEntry_AE_3"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_AE_4"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_AE_5"><text>"RetalhoMicrocirurgico"</text></inputEntry>
        <outputEntry id="OutputEntry_AE_resultado"><text>"Pendente"</text></outputEntry>
        <outputEntry id="OutputEntry_AE_observacao"><text>"Lesao complexa - avaliar com equipe de microcirurgia"</text></outputEntry>
        <outputEntry id="OutputEntry_AE_fundamentacao"><text>"SBCP 2022 - Microcirurgia requer centro de referencia"</text></outputEntry>
      <outputEntry id="OE_Pendente_AvaliacaoEspecializada_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Pendente_AvaliacaoEspecializada_5"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>

      <!-- FALLBACK RULE -->
      <rule id="Rule_Fallback_REC005">
        <description>Regra padrao - Analise adicional necessaria</description>
        <inputEntry id="InputEntry_Fallback_1"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_Fallback_2"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_Fallback_3"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_Fallback_4"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_Fallback_5"><text>-</text></inputEntry>
        <outputEntry id="OutputEntry_Fallback_resultado"><text>"Pendente"</text></outputEntry>
        <outputEntry id="OutputEntry_Fallback_observacao"><text>"Avaliar caso com equipe de cirurgia reconstrutiva"</text></outputEntry>
        <outputEntry id="OutputEntry_Fallback_fundamentacao"><text>"SBCP 2022 - Reconstrucao traumatica requer planejamento individualizado"</text></outputEntry>
      <outputEntry id="OE_Fallback_REC005_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Fallback_REC005_5"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>

    </decisionTable>
  </decision>
</definitions>
