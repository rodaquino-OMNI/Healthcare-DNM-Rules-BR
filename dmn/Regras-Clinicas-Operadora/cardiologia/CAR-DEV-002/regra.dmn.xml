<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="https://www.omg.org/spec/DMN/20191111/MODEL/" xmlns:dmndi="https://www.omg.org/spec/DMN/20191111/DMNDI/" xmlns:dc="http://www.omg.org/spec/DMN/20180521/DC/" xmlns:modeler="http://camunda.org/schema/modeler/1.0" xmlns:di="http://www.omg.org/spec/DMN/20180521/DI/" id="Definitions_CAR_DEV_002" name="DRD" namespace="http://camunda.org/schema/1.0/dmn" exporter="Camunda Modeler" exporterVersion="5.0.0" modeler:executionPlatform="Camunda Cloud" modeler:executionPlatformVersion="8.0.0">
  <decision id="Decision_CAR_DEV_002" name="CDI Monocameral vs Bicameral">
    <decisionTable id="DecisionTable_CAR_DEV_002" hitPolicy="FIRST">
      <input id="Input_atrialFibrillation" label="Fibrilação Atrial Permanente">
        <inputExpression id="InputExpression_atrialFibrillation" typeRef="boolean">
          <text>hasAtrialFibrillation</text>
        </inputExpression>
      </input>
      <input id="Input_avBlock" label="Bloqueio AV Avançado">
        <inputExpression id="InputExpression_avBlock" typeRef="boolean">
          <text>hasAvBlock</text>
        </inputExpression>
      </input>
      <input id="Input_sinusNode" label="Disfunção Nó Sinusal">
        <inputExpression id="InputExpression_sinusNode" typeRef="boolean">
          <text>hasSinusNodeDysfunction</text>
        </inputExpression>
      </input>
      <input id="Input_lvef" label="FEVE ≤ 35%">
        <inputExpression id="InputExpression_lvef" typeRef="boolean">
          <text>hasReducedLvef</text>
        </inputExpression>
      </input>
      <input id="Input_vasovagal" label="Síncope Vasovagal Recorrente">
        <inputExpression id="InputExpression_vasovagal" typeRef="boolean">
          <text>hasRecurrentVasovagal</text>
        </inputExpression>
      </input>
      <output id="Output_resultado" name="resultado" typeRef="string">
        <outputValues id="UnaryTests_resultado">
          <text>"APROVADO_VVI","APROVADO_DDD","PENDENTE_CRT","Reprovado"</text>
        </outputValues>
      </output>
      <output id="Output_observacao" name="observacao" typeRef="string"/>
      <output id="Output_fundamentacao" name="fundamentacao" typeRef="string"/>
      <output id="Output_alertasDesperdicio" label="Alertas de Desperdício" name="alertasDesperdicio" typeRef="string">
        <outputValues id="OutputValues_alertasDesperdicio">
          <text>"NENHUM","DUP","FREQ","ESC","DOC","PROT","MULTI"</text>
        </outputValues>
      </output>

      <output id="Output_acaoRecomendada" label="Ação Recomendada" name="acaoRecomendada" typeRef="string">
        <outputValues id="OutputValues_acaoRecomendada">
          <text>"APROVAR","NEGAR","SOLICITAR_INFO","AGUARDAR_PRAZO","SUGERIR_ALTERNATIVA"</text>
        </outputValues>
      </output>


      <!-- CDI Monocameral (VVI) - Indicações -->
      <rule id="Rule_VVI_PermanentAF">
        <description>VVI indicado: FA permanente sem necessidade AV</description>
        <inputEntry id="UnaryTests_atrialFibrillation_1">
          <text>true</text>
        </inputEntry>
        <inputEntry id="UnaryTests_avBlock_1">
          <text>false</text>
        </inputEntry>
        <inputEntry id="UnaryTests_sinusNode_1">
          <text>-</text>
        </inputEntry>
        <inputEntry id="UnaryTests_lvef_1">
          <text>-</text>
        </inputEntry>
        <inputEntry id="UnaryTests_vasovagal_1">
          <text>false</text>
        </inputEntry>
        <outputEntry id="LiteralExpression_resultado_1">
          <text>"APROVADO_VVI"</text>
        </outputEntry>
        <outputEntry id="LiteralExpression_observacao_1">
          <text>"CDI monocameral (VVI) indicado para FA permanente. SBC: sistema unicameral suficiente sem atividade atrial organizada (NE=IA)"</text>
        </outputEntry>
      <outputEntry id="LiteralExpression_fundamentacao_1">
          <text>"Conforme protocolo ANS/TISS 2024"</text>
        </outputEntry>        <outputEntry id="OutputEntry_Rule_VVI_PermanentAF_alertasDesperdicio"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OutputEntry_Rule_VVI_PermanentAF_acaoRecomendada"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>

      <rule id="Rule_VVI_NoAVSync">
        <description>VVI aceitável: sem necessidade sincronia AV</description>
        <inputEntry id="UnaryTests_atrialFibrillation_2">
          <text>false</text>
        </inputEntry>
        <inputEntry id="UnaryTests_avBlock_2">
          <text>false</text>
        </inputEntry>
        <inputEntry id="UnaryTests_sinusNode_2">
          <text>false</text>
        </inputEntry>
        <inputEntry id="UnaryTests_lvef_2">
          <text>false</text>
        </inputEntry>
        <inputEntry id="UnaryTests_vasovagal_2">
          <text>false</text>
        </inputEntry>
        <outputEntry id="LiteralExpression_resultado_2">
          <text>"APROVADO_VVI"</text>
        </outputEntry>
        <outputEntry id="LiteralExpression_observacao_2">
          <text>"CDI monocameral aceitável (ritmo estável + FEVE preservada). Menor custo sem comprometimento clínico"</text>
        </outputEntry>
      <outputEntry id="LiteralExpression_fundamentacao_2">
          <text>"Conforme protocolo ANS/TISS 2024"</text>
        </outputEntry>        <outputEntry id="OutputEntry_Rule_VVI_NoAVSync_alertasDesperdicio"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OutputEntry_Rule_VVI_NoAVSync_acaoRecomendada"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>

      <!-- CDI Bicameral (DDD) - Indicações -->
      <rule id="Rule_DDD_AVBlock">
        <description>DDD obrigatório: bloqueio AV avançado</description>
        <inputEntry id="UnaryTests_atrialFibrillation_3">
          <text>false</text>
        </inputEntry>
        <inputEntry id="UnaryTests_avBlock_3">
          <text>true</text>
        </inputEntry>
        <inputEntry id="UnaryTests_sinusNode_3">
          <text>-</text>
        </inputEntry>
        <inputEntry id="UnaryTests_lvef_3">
          <text>-</text>
        </inputEntry>
        <inputEntry id="UnaryTests_vasovagal_3">
          <text>-</text>
        </inputEntry>
        <outputEntry id="LiteralExpression_resultado_3">
          <text>"APROVADO_DDD"</text>
        </outputEntry>
        <outputEntry id="LiteralExpression_observacao_3">
          <text>"CDI bicameral (DDD) obrigatório para BAV avançado. ACC/AHA: preservação sincronia AV previne síndrome marcapasso (NE=IA)"</text>
        </outputEntry>
      <outputEntry id="LiteralExpression_fundamentacao_3">
          <text>"Conforme protocolo ANS/TISS 2024"</text>
        </outputEntry>        <outputEntry id="OutputEntry_Rule_DDD_AVBlock_alertasDesperdicio"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OutputEntry_Rule_DDD_AVBlock_acaoRecomendada"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>

      <rule id="Rule_DDD_SinusNode">
        <description>DDD indicado: disfunção nó sinusal</description>
        <inputEntry id="UnaryTests_atrialFibrillation_4">
          <text>false</text>
        </inputEntry>
        <inputEntry id="UnaryTests_avBlock_4">
          <text>false</text>
        </inputEntry>
        <inputEntry id="UnaryTests_sinusNode_4">
          <text>true</text>
        </inputEntry>
        <inputEntry id="UnaryTests_lvef_4">
          <text>-</text>
        </inputEntry>
        <inputEntry id="UnaryTests_vasovagal_4">
          <text>-</text>
        </inputEntry>
        <outputEntry id="LiteralExpression_resultado_4">
          <text>"APROVADO_DDD"</text>
        </outputEntry>
        <outputEntry id="LiteralExpression_observacao_4">
          <text>"CDI bicameral indicado (bradicardia sinusal). ESC: DDD melhora qualidade de vida e reduz FA incidente (NE=IB)"</text>
        </outputEntry>
      <outputEntry id="LiteralExpression_fundamentacao_4">
          <text>"Conforme protocolo ANS/TISS 2024"</text>
        </outputEntry>        <outputEntry id="OutputEntry_Rule_DDD_SinusNode_alertasDesperdicio"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OutputEntry_Rule_DDD_SinusNode_acaoRecomendada"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>

      <rule id="Rule_DDD_Vasovagal">
        <description>DDD preferencial: síncopes vasovagais recorrentes</description>
        <inputEntry id="UnaryTests_atrialFibrillation_5">
          <text>false</text>
        </inputEntry>
        <inputEntry id="UnaryTests_avBlock_5">
          <text>false</text>
        </inputEntry>
        <inputEntry id="UnaryTests_sinusNode_5">
          <text>false</text>
        </inputEntry>
        <inputEntry id="UnaryTests_lvef_5">
          <text>false</text>
        </inputEntry>
        <inputEntry id="UnaryTests_vasovagal_5">
          <text>true</text>
        </inputEntry>
        <outputEntry id="LiteralExpression_resultado_5">
          <text>"APROVADO_DDD"</text>
        </outputEntry>
        <outputEntry id="LiteralExpression_observacao_5">
          <text>"CDI bicameral preferencial (síncopes vasovagais recorrentes). Estimulação atrial prevê resposta cardioinibidora"</text>
        </outputEntry>
      <outputEntry id="LiteralExpression_fundamentacao_5">
          <text>"Conforme protocolo ANS/TISS 2024"</text>
        </outputEntry>        <outputEntry id="OutputEntry_Rule_DDD_Vasovagal_alertasDesperdicio"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OutputEntry_Rule_DDD_Vasovagal_acaoRecomendada"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>

      <!-- TRC (Terapia de Ressincronização Cardíaca) -->
      <rule id="Rule_CRT_Indication">
        <description>Considerar TRC se FEVE reduzida + distúrbio condução</description>
        <inputEntry id="UnaryTests_atrialFibrillation_6">
          <text>false</text>
        </inputEntry>
        <inputEntry id="UnaryTests_avBlock_6">
          <text>true</text>
        </inputEntry>
        <inputEntry id="UnaryTests_sinusNode_6">
          <text>-</text>
        </inputEntry>
        <inputEntry id="UnaryTests_lvef_6">
          <text>true</text>
        </inputEntry>
        <inputEntry id="UnaryTests_vasovagal_6">
          <text>-</text>
        </inputEntry>
        <outputEntry id="LiteralExpression_resultado_6">
          <text>"PENDENTE_CRT"</text>
        </outputEntry>
        <outputEntry id="LiteralExpression_observacao_6">
          <text>"Avaliar TRC-D (FEVE≤35% + BAV). Verificar QRS≥150ms e BRE. Encaminhar para ecocardiograma + eletrocardiograma"</text>
        </outputEntry>
      <outputEntry id="LiteralExpression_fundamentacao_6">
          <text>"Conforme protocolo ANS/TISS 2024"</text>
        </outputEntry>        <outputEntry id="OutputEntry_Rule_CRT_Indication_alertasDesperdicio"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OutputEntry_Rule_CRT_Indication_acaoRecomendada"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>

      <rule id="Rule_CRT_SinusLVEF">
        <description>Considerar TRC se disfunção sinusal + FEVE reduzida</description>
        <inputEntry id="UnaryTests_atrialFibrillation_7">
          <text>false</text>
        </inputEntry>
        <inputEntry id="UnaryTests_avBlock_7">
          <text>false</text>
        </inputEntry>
        <inputEntry id="UnaryTests_sinusNode_7">
          <text>true</text>
        </inputEntry>
        <inputEntry id="UnaryTests_lvef_7">
          <text>true</text>
        </inputEntry>
        <inputEntry id="UnaryTests_vasovagal_7">
          <text>-</text>
        </inputEntry>
        <outputEntry id="LiteralExpression_resultado_7">
          <text>"PENDENTE_CRT"</text>
        </outputEntry>
        <outputEntry id="LiteralExpression_observacao_7">
          <text>"Avaliar TRC-D (FEVE≤35% + bradicardia). Verificar critérios dissincronia. Necessária avaliação cardiologista especializado"</text>
        </outputEntry>
      <outputEntry id="LiteralExpression_fundamentacao_7">
          <text>"Conforme protocolo ANS/TISS 2024"</text>
        </outputEntry>        <outputEntry id="OutputEntry_Rule_CRT_SinusLVEF_alertasDesperdicio"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OutputEntry_Rule_CRT_SinusLVEF_acaoRecomendada"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>

      <!-- Regra de Fallback -->
      <rule id="Rule_Default_Fallback">
        <description>Fallback padrão</description>
        <inputEntry id="UnaryTests_atrialFibrillation_fallback">
          <text>-</text>
        </inputEntry>
        <inputEntry id="UnaryTests_avBlock_fallback">
          <text>-</text>
        </inputEntry>
        <inputEntry id="UnaryTests_sinusNode_fallback">
          <text>-</text>
        </inputEntry>
        <inputEntry id="UnaryTests_lvef_fallback">
          <text>-</text>
        </inputEntry>
        <inputEntry id="UnaryTests_vasovagal_fallback">
          <text>-</text>
        </inputEntry>
        <outputEntry id="LiteralExpression_resultado_fallback">
          <text>"Pendente"</text>
        </outputEntry>
        <outputEntry id="LiteralExpression_observacao_fallback">
          <text>"Caso atípico. Necessária avaliação eletrofisiologista para seleção dispositivo"</text>
        </outputEntry>
      <outputEntry id="LiteralExpression_fundamentacao_fallback">
          <text>"Conforme protocolo ANS/TISS 2024"</text>
        </outputEntry>        <outputEntry id="OutputEntry_Rule_Default_Fallback_alertasDesperdicio"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OutputEntry_Rule_Default_Fallback_acaoRecomendada"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>
    </decisionTable>
  </decision>

  <dmndi:DMNDI>
    <dmndi:DMNDiagram>
      <dmndi:DMNShape dmnElementRef="Decision_CAR_DEV_002">
        <dc:Bounds height="80" width="180" x="160" y="100"/>
      </dmndi:DMNShape>
    </dmndi:DMNDiagram>
  </dmndi:DMNDI>
</definitions>
