<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="https://www.omg.org/spec/DMN/20191111/MODEL/" xmlns:dmndi="https://www.omg.org/spec/DMN/20191111/DMNDI/" xmlns:dc="http://www.omg.org/spec/DMN/20180521/DC/" xmlns:modeler="http://camunda.org/schema/modeler/1.0" xmlns:di="http://www.omg.org/spec/DMN/20180521/DI/" id="Definitions_CAR_INT_003" name="DRD" namespace="http://camunda.org/schema/1.0/dmn" exporter="Camunda Modeler" exporterVersion="5.0.0" modeler:executionPlatform="Camunda Cloud" modeler:executionPlatformVersion="8.0.0">
  <decision id="Decision_CAR_INT_003" name="Indicação Cateterismo Cardíaco Diagnóstico">
    <decisionTable id="DecisionTable_CAR_INT_003" hitPolicy="FIRST">
      <input id="Input_functionalTest" label="Resultado Teste Funcional">
        <inputExpression id="InputExpression_functionalTest" typeRef="string">
          <text>functionalTestResult</text>
        </inputExpression>
        <inputValues id="UnaryTests_functionalTest">
          <text>"HIGH_RISK","POSITIVE","INCONCLUSIVE","NEGATIVE","NOT_DONE"</text>
        </inputValues>
      </input>
      <input id="Input_clinicalRisk" label="Risco Clínico (Escore)">
        <inputExpression id="InputExpression_clinicalRisk" typeRef="string">
          <text>clinicalRiskCategory</text>
        </inputExpression>
        <inputValues id="UnaryTests_clinicalRisk">
          <text>"HIGH","INTERMEDIATE","LOW"</text>
        </inputValues>
      </input>
      <input id="Input_symptomClass" label="Classe Sintomática">
        <inputExpression id="InputExpression_symptomClass" typeRef="string">
          <text>symptomClass</text>
        </inputExpression>
        <inputValues id="UnaryTests_symptomClass">
          <text>"TYPICAL_ANGINA","ATYPICAL","DYSPNEA","ASYMPTOMATIC"</text>
        </inputValues>
      </input>
      <input id="Input_lvef" label="FEVE &lt; 40%">
        <inputExpression id="InputExpression_lvef" typeRef="boolean">
          <text>hasReducedLvef</text>
        </inputExpression>
      </input>
      <input id="Input_refractoryTreatment" label="Refratário Tratamento Clínico">
        <inputExpression id="InputExpression_refractoryTreatment" typeRef="boolean">
          <text>isRefractoryTreatment</text>
        </inputExpression>
      </input>
      <output id="Output_resultado" name="resultado" typeRef="string">
        <outputValues id="UnaryTests_resultado">
          <text>"APROVADO_CATE","REPROVADO_CATE","PENDENTE_TESTE"</text>
        </outputValues>
      </output>
      <output id="Output_observacao" name="observacao" typeRef="string"/>
      <output id="Output_fundamentacao" name="fundamentacao" typeRef="string"/>
      <output id="Output_alertasDesperdicio" label="Alertas de Desperdício" name="alertasDesperdicio" typeRef="string">
        <outputValues id="OutputValues_alertasDesperdicio">
          <text>"NENHUM","DUP","FREQ","ESC","DOC","PROT","MULTI"</text>
        </outputValues>
      </output>

      <output id="Output_acaoRecomendada" label="Ação Recomendada" name="acaoRecomendada" typeRef="string">
        <outputValues id="OutputValues_acaoRecomendada">
          <text>"APROVAR","NEGAR","SOLICITAR_INFO","AGUARDAR_PRAZO","SUGERIR_ALTERNATIVA"</text>
        </outputValues>
      </output>


      <!-- Cateterismo Aprovado - Alto Risco -->
      <rule id="Rule_CATE_HighRiskTest">
        <description>Cateterismo obrigatório: teste alto risco</description>
        <inputEntry id="UnaryTests_functionalTest_1">
          <text>"HIGH_RISK"</text>
        </inputEntry>
        <inputEntry id="UnaryTests_clinicalRisk_1">
          <text>-</text>
        </inputEntry>
        <inputEntry id="UnaryTests_symptomClass_1">
          <text>-</text>
        </inputEntry>
        <inputEntry id="UnaryTests_lvef_1">
          <text>-</text>
        </inputEntry>
        <inputEntry id="UnaryTests_refractoryTreatment_1">
          <text>-</text>
        </inputEntry>
        <outputEntry id="LiteralExpression_resultado_1">
          <text>"APROVADO_CATE"</text>
        </outputEntry>
        <outputEntry id="LiteralExpression_observacao_1">
          <text>"Cateterismo urgente (teste alto risco). Duke &gt;11/Score COURAGE: mortalidade anual &gt;3%. Revascularização precoce melhora prognóstico"</text>
        </outputEntry>
      <outputEntry id="LiteralExpression_fundamentacao_1">
          <text>"Conforme protocolo ANS/TISS 2024"</text>
        </outputEntry>        <outputEntry id="OutputEntry_Rule_CATE_HighRiskTest_alertasDesperdicio"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OutputEntry_Rule_CATE_HighRiskTest_acaoRecomendada"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>

      <rule id="Rule_CATE_HighRisk_Refractory">
        <description>Cateterismo obrigatório: alto risco clínico + refratário</description>
        <inputEntry id="UnaryTests_functionalTest_2">
          <text>"POSITIVE","INCONCLUSIVE","NOT_DONE"</text>
        </inputEntry>
        <inputEntry id="UnaryTests_clinicalRisk_2">
          <text>"HIGH"</text>
        </inputEntry>
        <inputEntry id="UnaryTests_symptomClass_2">
          <text>"TYPICAL_ANGINA"</text>
        </inputEntry>
        <inputEntry id="UnaryTests_lvef_2">
          <text>-</text>
        </inputEntry>
        <inputEntry id="UnaryTests_refractoryTreatment_2">
          <text>true</text>
        </inputEntry>
        <outputEntry id="LiteralExpression_resultado_2">
          <text>"APROVADO_CATE"</text>
        </outputEntry>
        <outputEntry id="LiteralExpression_observacao_2">
          <text>"Cateterismo indicado (alto risco + angina refratária). ACC/AHA Classe IA: revascularização indicada para controle sintomas"</text>
        </outputEntry>
      <outputEntry id="LiteralExpression_fundamentacao_2">
          <text>"Conforme protocolo ANS/TISS 2024"</text>
        </outputEntry>        <outputEntry id="OutputEntry_Rule_CATE_HighRisk_Refractory_alertasDesperdicio"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OutputEntry_Rule_CATE_HighRisk_Refractory_acaoRecomendada"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>

      <rule id="Rule_CATE_LVEF_Typical">
        <description>Cateterismo indicado: disfunção VE + angina típica</description>
        <inputEntry id="UnaryTests_functionalTest_3">
          <text>"POSITIVE"</text>
        </inputEntry>
        <inputEntry id="UnaryTests_clinicalRisk_3">
          <text>-</text>
        </inputEntry>
        <inputEntry id="UnaryTests_symptomClass_3">
          <text>"TYPICAL_ANGINA"</text>
        </inputEntry>
        <inputEntry id="UnaryTests_lvef_3">
          <text>true</text>
        </inputEntry>
        <inputEntry id="UnaryTests_refractoryTreatment_3">
          <text>-</text>
        </inputEntry>
        <outputEntry id="LiteralExpression_resultado_3">
          <text>"APROVADO_CATE"</text>
        </outputEntry>
        <outputEntry id="LiteralExpression_observacao_3">
          <text>"Cateterismo indicado (FEVE&lt;40% + angina típica + teste+). ESC: revascularização melhora sobrevida em disfunção VE (NE=IB)"</text>
        </outputEntry>
      <outputEntry id="LiteralExpression_fundamentacao_3">
          <text>"Conforme protocolo ANS/TISS 2024"</text>
        </outputEntry>        <outputEntry id="OutputEntry_Rule_CATE_LVEF_Typical_alertasDesperdicio"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OutputEntry_Rule_CATE_LVEF_Typical_acaoRecomendada"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>

      <rule id="Rule_CATE_Intermediate_Positive">
        <description>Cateterismo indicado: risco intermediário + teste positivo</description>
        <inputEntry id="UnaryTests_functionalTest_4">
          <text>"POSITIVE"</text>
        </inputEntry>
        <inputEntry id="UnaryTests_clinicalRisk_4">
          <text>"INTERMEDIATE"</text>
        </inputEntry>
        <inputEntry id="UnaryTests_symptomClass_4">
          <text>"TYPICAL_ANGINA","ATYPICAL"</text>
        </inputEntry>
        <inputEntry id="UnaryTests_lvef_4">
          <text>false</text>
        </inputEntry>
        <inputEntry id="UnaryTests_refractoryTreatment_4">
          <text>-</text>
        </inputEntry>
        <outputEntry id="LiteralExpression_resultado_4">
          <text>"APROVADO_CATE"</text>
        </outputEntry>
        <outputEntry id="LiteralExpression_observacao_4">
          <text>"Cateterismo indicado (risco intermediário + teste ergométrico positivo). Estratificação anatômica necessária"</text>
        </outputEntry>
      <outputEntry id="LiteralExpression_fundamentacao_4">
          <text>"Conforme protocolo ANS/TISS 2024"</text>
        </outputEntry>        <outputEntry id="OutputEntry_Rule_CATE_Intermediate_Positive_alertasDesperdicio"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OutputEntry_Rule_CATE_Intermediate_Positive_acaoRecomendada"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>

      <rule id="Rule_CATE_Refractory_Typical">
        <description>Cateterismo indicado: angina típica refratária</description>
        <inputEntry id="UnaryTests_functionalTest_5">
          <text>"POSITIVE","INCONCLUSIVE"</text>
        </inputEntry>
        <inputEntry id="UnaryTests_clinicalRisk_5">
          <text>"INTERMEDIATE","HIGH"</text>
        </inputEntry>
        <inputEntry id="UnaryTests_symptomClass_5">
          <text>"TYPICAL_ANGINA"</text>
        </inputEntry>
        <inputEntry id="UnaryTests_lvef_5">
          <text>false</text>
        </inputEntry>
        <inputEntry id="UnaryTests_refractoryTreatment_5">
          <text>true</text>
        </inputEntry>
        <outputEntry id="LiteralExpression_resultado_5">
          <text>"APROVADO_CATE"</text>
        </outputEntry>
        <outputEntry id="LiteralExpression_observacao_5">
          <text>"Cateterismo indicado (angina típica refratária a tratamento clínico otimizado). SBC: avaliar revascularização (NE=IA)"</text>
        </outputEntry>
      <outputEntry id="LiteralExpression_fundamentacao_5">
          <text>"Conforme protocolo ANS/TISS 2024"</text>
        </outputEntry>        <outputEntry id="OutputEntry_Rule_CATE_Refractory_Typical_alertasDesperdicio"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OutputEntry_Rule_CATE_Refractory_Typical_acaoRecomendada"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>

      <!-- Cateterismo Reprovado -->
      <rule id="Rule_Reject_LowRisk_Negative">
        <description>Cateterismo reprovado: baixo risco + teste negativo</description>
        <inputEntry id="UnaryTests_functionalTest_6">
          <text>"NEGATIVE"</text>
        </inputEntry>
        <inputEntry id="UnaryTests_clinicalRisk_6">
          <text>"LOW"</text>
        </inputEntry>
        <inputEntry id="UnaryTests_symptomClass_6">
          <text>"ATYPICAL","ASYMPTOMATIC"</text>
        </inputEntry>
        <inputEntry id="UnaryTests_lvef_6">
          <text>false</text>
        </inputEntry>
        <inputEntry id="UnaryTests_refractoryTreatment_6">
          <text>false</text>
        </inputEntry>
        <outputEntry id="LiteralExpression_resultado_6">
          <text>"REPROVADO_CATE"</text>
        </outputEntry>
        <outputEntry id="LiteralExpression_observacao_6">
          <text>"Cateterismo reprovado (baixo risco + teste negativo). ACC/AHA: tratamento clínico otimizado suficiente. Risco &lt;1%/ano"</text>
        </outputEntry>
      <outputEntry id="LiteralExpression_fundamentacao_6">
          <text>"Conforme protocolo ANS/TISS 2024"</text>
        </outputEntry>        <outputEntry id="OutputEntry_Rule_Reject_LowRisk_Negative_alertasDesperdicio"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OutputEntry_Rule_Reject_LowRisk_Negative_acaoRecomendada"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>

      <rule id="Rule_Reject_Asymptomatic_Negative">
        <description>Cateterismo reprovado: assintomático + teste negativo</description>
        <inputEntry id="UnaryTests_functionalTest_7">
          <text>"NEGATIVE"</text>
        </inputEntry>
        <inputEntry id="UnaryTests_clinicalRisk_7">
          <text>"LOW","INTERMEDIATE"</text>
        </inputEntry>
        <inputEntry id="UnaryTests_symptomClass_7">
          <text>"ASYMPTOMATIC"</text>
        </inputEntry>
        <inputEntry id="UnaryTests_lvef_7">
          <text>false</text>
        </inputEntry>
        <inputEntry id="UnaryTests_refractoryTreatment_7">
          <text>false</text>
        </inputEntry>
        <outputEntry id="LiteralExpression_resultado_7">
          <text>"REPROVADO_CATE"</text>
        </outputEntry>
        <outputEntry id="LiteralExpression_observacao_7">
          <text>"Cateterismo reprovado (assintomático + teste funcional negativo). Sem benefício revascularização em DAC estável assintomática"</text>
        </outputEntry>
      <outputEntry id="LiteralExpression_fundamentacao_7">
          <text>"Conforme protocolo ANS/TISS 2024"</text>
        </outputEntry>        <outputEntry id="OutputEntry_Rule_Reject_Asymptomatic_Negative_alertasDesperdicio"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OutputEntry_Rule_Reject_Asymptomatic_Negative_acaoRecomendada"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>

      <rule id="Rule_Reject_Atypical_NotDone">
        <description>Cateterismo reprovado: sintoma atípico sem teste</description>
        <inputEntry id="UnaryTests_functionalTest_8">
          <text>"NOT_DONE"</text>
        </inputEntry>
        <inputEntry id="UnaryTests_clinicalRisk_8">
          <text>"LOW"</text>
        </inputEntry>
        <inputEntry id="UnaryTests_symptomClass_8">
          <text>"ATYPICAL","DYSPNEA"</text>
        </inputEntry>
        <inputEntry id="UnaryTests_lvef_8">
          <text>false</text>
        </inputEntry>
        <inputEntry id="UnaryTests_refractoryTreatment_8">
          <text>false</text>
        </inputEntry>
        <outputEntry id="LiteralExpression_resultado_8">
          <text>"REPROVADO_CATE"</text>
        </outputEntry>
        <outputEntry id="LiteralExpression_observacao_8">
          <text>"Cateterismo reprovado (sintoma atípico + baixo risco). Necessário teste funcional estratificação antes de cateterismo"</text>
        </outputEntry>
      <outputEntry id="LiteralExpression_fundamentacao_8">
          <text>"Conforme protocolo ANS/TISS 2024"</text>
        </outputEntry>        <outputEntry id="OutputEntry_Rule_Reject_Atypical_NotDone_alertasDesperdicio"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OutputEntry_Rule_Reject_Atypical_NotDone_acaoRecomendada"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>

      <!-- Pendências - Necessário Teste Funcional -->
      <rule id="Rule_Pending_IntermediateRisk">
        <description>Pendente: risco intermediário sem teste</description>
        <inputEntry id="UnaryTests_functionalTest_9">
          <text>"NOT_DONE"</text>
        </inputEntry>
        <inputEntry id="UnaryTests_clinicalRisk_9">
          <text>"INTERMEDIATE"</text>
        </inputEntry>
        <inputEntry id="UnaryTests_symptomClass_9">
          <text>"TYPICAL_ANGINA","ATYPICAL"</text>
        </inputEntry>
        <inputEntry id="UnaryTests_lvef_9">
          <text>false</text>
        </inputEntry>
        <inputEntry id="UnaryTests_refractoryTreatment_9">
          <text>false</text>
        </inputEntry>
        <outputEntry id="LiteralExpression_resultado_9">
          <text>"PENDENTE_TESTE"</text>
        </outputEntry>
        <outputEntry id="LiteralExpression_observacao_9">
          <text>"Solicitar teste ergométrico/cintilografia/eco stress (risco intermediário). Cateterismo depende do resultado estratificação"</text>
        </outputEntry>
      <outputEntry id="LiteralExpression_fundamentacao_9">
          <text>"Conforme protocolo ANS/TISS 2024"</text>
        </outputEntry>        <outputEntry id="OutputEntry_Rule_Pending_IntermediateRisk_alertasDesperdicio"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OutputEntry_Rule_Pending_IntermediateRisk_acaoRecomendada"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>

      <rule id="Rule_Pending_Inconclusive">
        <description>Pendente: teste inconclusivo - método complementar</description>
        <inputEntry id="UnaryTests_functionalTest_10">
          <text>"INCONCLUSIVE"</text>
        </inputEntry>
        <inputEntry id="UnaryTests_clinicalRisk_10">
          <text>"LOW","INTERMEDIATE"</text>
        </inputEntry>
        <inputEntry id="UnaryTests_symptomClass_10">
          <text>"TYPICAL_ANGINA","ATYPICAL"</text>
        </inputEntry>
        <inputEntry id="UnaryTests_lvef_10">
          <text>false</text>
        </inputEntry>
        <inputEntry id="UnaryTests_refractoryTreatment_10">
          <text>false</text>
        </inputEntry>
        <outputEntry id="LiteralExpression_resultado_10">
          <text>"PENDENTE_TESTE"</text>
        </outputEntry>
        <outputEntry id="LiteralExpression_observacao_10">
          <text>"Solicitar método complementar (teste inconclusivo). Opções: cintilografia, eco stress, AngioTC, RMC stress"</text>
        </outputEntry>
      <outputEntry id="LiteralExpression_fundamentacao_10">
          <text>"Conforme protocolo ANS/TISS 2024"</text>
        </outputEntry>        <outputEntry id="OutputEntry_Rule_Pending_Inconclusive_alertasDesperdicio"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OutputEntry_Rule_Pending_Inconclusive_acaoRecomendada"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>

      <!-- Regra de Fallback -->
      <rule id="Rule_Default_Fallback">
        <description>Fallback padrão</description>
        <inputEntry id="UnaryTests_functionalTest_fallback">
          <text>-</text>
        </inputEntry>
        <inputEntry id="UnaryTests_clinicalRisk_fallback">
          <text>-</text>
        </inputEntry>
        <inputEntry id="UnaryTests_symptomClass_fallback">
          <text>-</text>
        </inputEntry>
        <inputEntry id="UnaryTests_lvef_fallback">
          <text>-</text>
        </inputEntry>
        <inputEntry id="UnaryTests_refractoryTreatment_fallback">
          <text>-</text>
        </inputEntry>
        <outputEntry id="LiteralExpression_resultado_fallback">
          <text>"PENDENTE_TESTE"</text>
        </outputEntry>
        <outputEntry id="LiteralExpression_observacao_fallback">
          <text>"Avaliação cardiologista necessária. Estratificação de risco e teste funcional antes de cateterismo diagnóstico"</text>
        </outputEntry>
      <outputEntry id="LiteralExpression_fundamentacao_fallback">
          <text>"Conforme protocolo ANS/TISS 2024"</text>
        </outputEntry>        <outputEntry id="OutputEntry_Rule_Default_Fallback_alertasDesperdicio"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OutputEntry_Rule_Default_Fallback_acaoRecomendada"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>
    </decisionTable>
  </decision>

  <dmndi:DMNDI>
    <dmndi:DMNDiagram>
      <dmndi:DMNShape dmnElementRef="Decision_CAR_INT_003">
        <dc:Bounds height="80" width="180" x="160" y="100"/>
      </dmndi:DMNShape>
    </dmndi:DMNDiagram>
  </dmndi:DMNDI>
</definitions>
