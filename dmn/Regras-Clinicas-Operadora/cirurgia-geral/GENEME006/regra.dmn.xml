<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="https://www.omg.org/spec/DMN/20191111/MODEL/"
             xmlns:camunda="http://camunda.org/schema/1.0/dmn"
             id="Definitions_GEN_EME_006"
             name="Laparotomia por Trauma - Indicacoes"
             namespace="http://camunda.org/schema/1.0/dmn">

  <!--
    ===============================================================================
    CODIGO: GEN-EME-006
    Procedimento: Laparotomia Exploradora por Trauma Abdominal
    Especialidade: Cirurgia Geral - Trauma
    Versao: 3.0.0-TIER1
    Data: 2026-02-07
    ===============================================================================

    INDICACOES CIRURGICAS:
    - Trauma penetrante com instabilidade hemodinamica
    - Trauma contuso com FAST positivo e instabilidade
    - Peritonite traumatica
    - Evisceracao
    - Ar livre intraperitoneal pos-trauma
    - Lesao diafragmatica traumatica

    CONTRAINDICACOES RELATIVAS:
    - Trauma contuso estavel com FAST negativo (observacao)
    - Lesao de orgao solido grau baixo estavel (tratamento nao-operatorio)

    REFERENCIAS TECNICAS:
    - ACS ATLS 10th Edition 2018
    - EAST Guidelines 2023 - Blunt Abdominal Trauma
    - WTA Guidelines 2020 - Hollow Viscus Injury

    ===============================================================================
  -->

  <decision id="Decision_GEN_EME_006" name="Regra Clinica - Laparotomia por Trauma">
    <decisionTable id="DecisionTable_GEN_EME_006" hitPolicy="FIRST">

      <!-- ========== INPUTS (5) ========== -->

      <input id="Input_mecanismoTrauma" label="Mecanismo do Trauma" camunda:inputVariable="mecanismoTrauma">
        <inputExpression id="InputExpression_mecanismoTrauma" typeRef="string">
          <text>mecanismoTrauma</text>
        </inputExpression>
        <inputValues id="InputValues_mecanismoTrauma">
          <text>"Penetrante_FAB","Penetrante_FAF","Contuso","NaoDefinido"</text>
        </inputValues>
      </input>

      <input id="Input_statusHemodinamico" label="Status Hemodinamico" camunda:inputVariable="statusHemodinamico">
        <inputExpression id="InputExpression_statusHemodinamico" typeRef="string">
          <text>statusHemodinamico</text>
        </inputExpression>
        <inputValues id="InputValues_statusHemodinamico">
          <text>"Estavel","ResponsivoVolume","TransientResponder","NaoResponsivo"</text>
        </inputValues>
      </input>

      <input id="Input_fastResult" label="Resultado FAST" camunda:inputVariable="fastResult">
        <inputExpression id="InputExpression_fastResult" typeRef="string">
          <text>fastResult</text>
        </inputExpression>
        <inputValues id="InputValues_fastResult">
          <text>"Positivo","Negativo","Inconclusivo","NaoRealizado"</text>
        </inputValues>
      </input>

      <input id="Input_sinaisPeritonite" label="Sinais de Peritonite" camunda:inputVariable="sinaisPeritonite">
        <inputExpression id="InputExpression_sinaisPeritonite" typeRef="boolean">
          <text>sinaisPeritonite</text>
        </inputExpression>
      </input>

      <input id="Input_evisceracao" label="Evisceracao Presente" camunda:inputVariable="evisceracao">
        <inputExpression id="InputExpression_evisceracao" typeRef="boolean">
          <text>evisceracao</text>
        </inputExpression>
      </input>

      <!-- ========== OUTPUTS (3) ========== -->

      <output id="Output_resultado" label="Resultado" name="resultado" typeRef="string">
        <outputValues id="OutputValues_resultado">
          <text>"Aprovado","Reprovado","Pendente"</text>
        </outputValues>
      </output>

      <output id="Output_observacao" label="Observacao Clinica" name="observacao" typeRef="string" />

      <output id="Output_fundamentacao" label="Fundamentacao Tecnica" name="fundamentacao" typeRef="string" />

      <!-- Output 4: Alertas Desperdicio -->
      <output id="Output_alertasDesperdicio" label="Alertas de Desperdicio" name="alertasDesperdicio" typeRef="string">
        <outputValues id="OutputValues_alertasDesperdicio">
          <text>"NENHUM","DUP","FREQ","ESC","DOC","PROT","MULTI"</text>
        </outputValues>
      </output>

      <!-- Output 5: Acao Recomendada -->
      <output id="Output_acaoRecomendada" label="Acao Recomendada" name="acaoRecomendada" typeRef="string">
        <outputValues id="OutputValues_acaoRecomendada">
          <text>"APROVAR","NEGAR","SOLICITAR_INFO","AGUARDAR_PRAZO","SUGERIR_ALTERNATIVA"</text>
        </outputValues>
      </output>

      <!-- ========== REGRAS DE REPROVACAO ========== -->

      <rule id="Rule_Reprovado_ContusoEstavel">
        <description>Reprovado: Trauma contuso estavel com FAST negativo</description>
        <inputEntry id="IE_Rep1_1"><text>"Contuso"</text></inputEntry>
        <inputEntry id="IE_Rep1_2"><text>"Estavel"</text></inputEntry>
        <inputEntry id="IE_Rep1_3"><text>"Negativo"</text></inputEntry>
        <inputEntry id="IE_Rep1_4"><text>false</text></inputEntry>
        <inputEntry id="IE_Rep1_5"><text>false</text></inputEntry>
        <outputEntry id="OE_Rep1_1"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OE_Rep1_2"><text>"Trauma contuso estavel com FAST negativo - observacao clinica ou TC de abdome indicados, nao laparotomia"</text></outputEntry>
        <outputEntry id="OE_Rep1_3"><text>"EAST Guidelines 2023 - Manejo nao-operatorio de trauma contuso estavel"</text></outputEntry>
      <outputEntry id="OE_Reprovado_ContusoEstavel_4"><text>"PROT"</text></outputEntry>
        <outputEntry id="OE_Reprovado_ContusoEstavel_5"><text>"NEGAR"</text></outputEntry>
      </rule>

      <rule id="Rule_Reprovado_SemDocumentacao">
        <description>Reprovado: Sem avaliacao FAST em trauma contuso estavel</description>
        <inputEntry id="IE_Rep2_1"><text>"Contuso"</text></inputEntry>
        <inputEntry id="IE_Rep2_2"><text>"Estavel"</text></inputEntry>
        <inputEntry id="IE_Rep2_3"><text>"NaoRealizado"</text></inputEntry>
        <inputEntry id="IE_Rep2_4"><text>false</text></inputEntry>
        <inputEntry id="IE_Rep2_5"><text>false</text></inputEntry>
        <outputEntry id="OE_Rep2_1"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OE_Rep2_2"><text>"Paciente estavel sem avaliacao por FAST ou TC - realizar propedeutica antes de indicar laparotomia"</text></outputEntry>
        <outputEntry id="OE_Rep2_3"><text>"ACS ATLS 10th Edition - Avaliacao sistematica antes de intervencao"</text></outputEntry>
      <outputEntry id="OE_Reprovado_SemDocumentacao_4"><text>"PROT"</text></outputEntry>
        <outputEntry id="OE_Reprovado_SemDocumentacao_5"><text>"NEGAR"</text></outputEntry>
      </rule>

      <!-- ========== REGRAS DE APROVACAO ========== -->

      <rule id="Rule_Aprovado_Evisceracao">
        <description>Aprovado: Evisceracao traumatica</description>
        <inputEntry id="IE_Apr1_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr1_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr1_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr1_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr1_5"><text>true</text></inputEntry>
        <outputEntry id="OE_Apr1_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Apr1_2"><text>"Evisceracao traumatica - laparotomia de emergencia obrigatoria"</text></outputEntry>
        <outputEntry id="OE_Apr1_3"><text>"ACS ATLS 10th Edition - Evisceracao e indicacao absoluta de laparotomia"</text></outputEntry>
      <outputEntry id="OE_Aprovado_Evisceracao_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Aprovado_Evisceracao_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <rule id="Rule_Aprovado_Peritonite">
        <description>Aprovado: Peritonite traumatica</description>
        <inputEntry id="IE_Apr2_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr2_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr2_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr2_4"><text>true</text></inputEntry>
        <inputEntry id="IE_Apr2_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Apr2_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Apr2_2"><text>"Peritonite pos-trauma indica lesao de viscera oca - laparotomia exploradora"</text></outputEntry>
        <outputEntry id="OE_Apr2_3"><text>"WTA Guidelines 2020 - Peritonite traumatica e indicacao cirurgica"</text></outputEntry>
      <outputEntry id="OE_Aprovado_Peritonite_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Aprovado_Peritonite_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <rule id="Rule_Aprovado_PenetranteInstavel">
        <description>Aprovado: Trauma penetrante com instabilidade</description>
        <inputEntry id="IE_Apr3_1"><text>"Penetrante_FAB","Penetrante_FAF"</text></inputEntry>
        <inputEntry id="IE_Apr3_2"><text>"TransientResponder","NaoResponsivo"</text></inputEntry>
        <inputEntry id="IE_Apr3_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr3_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr3_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Apr3_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Apr3_2"><text>"Trauma penetrante abdominal com instabilidade hemodinamica - laparotomia de emergencia"</text></outputEntry>
        <outputEntry id="OE_Apr3_3"><text>"ACS ATLS 10th Edition - Indicacao classica de laparotomia por trauma"</text></outputEntry>
      <outputEntry id="OE_Aprovado_PenetranteInstavel_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Aprovado_PenetranteInstavel_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <rule id="Rule_Aprovado_FASTPositivoInstavel">
        <description>Aprovado: FAST positivo com instabilidade</description>
        <inputEntry id="IE_Apr4_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr4_2"><text>"TransientResponder","NaoResponsivo"</text></inputEntry>
        <inputEntry id="IE_Apr4_3"><text>"Positivo"</text></inputEntry>
        <inputEntry id="IE_Apr4_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr4_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Apr4_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Apr4_2"><text>"FAST positivo em paciente hemodinamicamente instavel - laparotomia para controle de hemorragia"</text></outputEntry>
        <outputEntry id="OE_Apr4_3"><text>"EAST Guidelines 2023 - FAST positivo com instabilidade e indicacao de laparotomia"</text></outputEntry>
      <outputEntry id="OE_Aprovado_FASTPositivoInstavel_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Aprovado_FASTPositivoInstavel_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <!-- ========== REGRA FALLBACK ========== -->

      <rule id="Rule_Fallback_GEN_EME_006">
        <description>Pendente: Avaliacao adicional necessaria</description>
        <inputEntry id="IE_FB_1"><text>-</text></inputEntry>
        <inputEntry id="IE_FB_2"><text>-</text></inputEntry>
        <inputEntry id="IE_FB_3"><text>-</text></inputEntry>
        <inputEntry id="IE_FB_4"><text>-</text></inputEntry>
        <inputEntry id="IE_FB_5"><text>-</text></inputEntry>
        <outputEntry id="OE_FB_1"><text>"Pendente"</text></outputEntry>
        <outputEntry id="OE_FB_2"><text>"Avaliacao adicional necessaria - considerar TC de abdome se paciente estavel"</text></outputEntry>
        <outputEntry id="OE_FB_3"><text>"ACS ATLS 10th Edition - Reavaliacao secundaria em trauma"</text></outputEntry>
      <outputEntry id="OE_Fallback_GEN_EME_006_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Fallback_GEN_EME_006_5"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>

    </decisionTable>
  </decision>
</definitions>
