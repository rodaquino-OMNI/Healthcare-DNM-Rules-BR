<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="https://www.omg.org/spec/DMN/20191111/MODEL/"
             xmlns:camunda="http://camunda.org/schema/1.0/dmn"
             id="Definitions_GEN_EME_008"
             name="Fasciite Necrosante - Desbridamento Precoce"
             namespace="http://camunda.org/schema/1.0/dmn">

  <!--
    ===============================================================================
    CODIGO: GEN-EME-008
    Procedimento: Fasciite Necrosante - Desbridamento Cirurgico de Emergencia
    Especialidade: Cirurgia Geral - Infeccoes Necrosantes
    Versao: 3.0.0-TIER1
    Data: 2026-02-07
    ===============================================================================

    INDICACOES CIRURGICAS:
    - Diagnostico clinico de fasciite necrosante
    - LRINEC score >= 6 (alto risco)
    - Crepitacao subcutanea
    - Necrose cutanea visivel
    - Bolhas hemorragicas
    - Sindrome do compartimento associada

    CONTRAINDICACOES RELATIVAS:
    - Celulite simples sem necrose (antibioticos apenas)
    - Erisipela sem sinais de necrose profunda

    REFERENCIAS TECNICAS:
    - IDSA Guidelines 2023 - Skin and Soft Tissue Infections
    - WSES Guidelines 2018 - Necrotizing Soft Tissue Infections
    - SIS Guidelines 2020

    ===============================================================================
  -->

  <decision id="Decision_GEN_EME_008" name="Regra Clinica - Fasciite Necrosante">
    <decisionTable id="DecisionTable_GEN_EME_008" hitPolicy="FIRST">

      <!-- ========== INPUTS (5) ========== -->

      <input id="Input_lrinecScore" label="LRINEC Score" camunda:inputVariable="lrinecScore">
        <inputExpression id="InputExpression_lrinecScore" typeRef="number">
          <text>lrinecScore</text>
        </inputExpression>
      </input>

      <input id="Input_sinaisClinicos" label="Sinais Clinicos de Necrose" camunda:inputVariable="sinaisClinicos">
        <inputExpression id="InputExpression_sinaisClinicos" typeRef="string">
          <text>sinaisClinicos</text>
        </inputExpression>
        <inputValues id="InputValues_sinaisClinicos">
          <text>"NecroseCutanea","Crepitacao","BolhasHemorragicas","DorDesproporcional","Eritema","Ausente"</text>
        </inputValues>
      </input>

      <input id="Input_imagemTC" label="Achados em TC" camunda:inputVariable="imagemTC">
        <inputExpression id="InputExpression_imagemTC" typeRef="string">
          <text>imagemTC</text>
        </inputExpression>
        <inputValues id="InputValues_imagemTC">
          <text>"GasSubcutaneo","EspessamentoFascial","Colecao","Normal","NaoRealizada"</text>
        </inputValues>
      </input>

      <input id="Input_sepsePresentedoente" label="Sinais de Sepse" camunda:inputVariable="sepsePresentedoente">
        <inputExpression id="InputExpression_sepsePresentedoente" typeRef="string">
          <text>sepsePresentedoente</text>
        </inputExpression>
        <inputValues id="InputValues_sepsePresentedoente">
          <text>"ChoqueSeptico","SepseSevera","SIRS","Ausente"</text>
        </inputValues>
      </input>

      <input id="Input_progressaoRapida" label="Progressao Rapida (horas)" camunda:inputVariable="progressaoRapida">
        <inputExpression id="InputExpression_progressaoRapida" typeRef="boolean">
          <text>progressaoRapida</text>
        </inputExpression>
      </input>

      <!-- ========== OUTPUTS (3) ========== -->

      <output id="Output_resultado" label="Resultado" name="resultado" typeRef="string">
        <outputValues id="OutputValues_resultado">
          <text>"Aprovado","Reprovado","Pendente"</text>
        </outputValues>
      </output>

      <output id="Output_observacao" label="Observacao Clinica" name="observacao" typeRef="string" />

      <output id="Output_fundamentacao" label="Fundamentacao Tecnica" name="fundamentacao" typeRef="string" />

      <!-- Output 4: Alertas Desperdicio -->
      <output id="Output_alertasDesperdicio" label="Alertas de Desperdicio" name="alertasDesperdicio" typeRef="string">
        <outputValues id="OutputValues_alertasDesperdicio">
          <text>"NENHUM","DUP","FREQ","ESC","DOC","PROT","MULTI"</text>
        </outputValues>
      </output>

      <!-- Output 5: Acao Recomendada -->
      <output id="Output_acaoRecomendada" label="Acao Recomendada" name="acaoRecomendada" typeRef="string">
        <outputValues id="OutputValues_acaoRecomendada">
          <text>"APROVAR","NEGAR","SOLICITAR_INFO","AGUARDAR_PRAZO","SUGERIR_ALTERNATIVA"</text>
        </outputValues>
      </output>

      <!-- ========== REGRAS DE REPROVACAO ========== -->

      <rule id="Rule_Reprovado_CeluliteSimples">
        <description>Reprovado: Celulite simples sem sinais de necrose</description>
        <inputEntry id="IE_Rep1_1"><text>&lt; 6</text></inputEntry>
        <inputEntry id="IE_Rep1_2"><text>"Eritema","Ausente"</text></inputEntry>
        <inputEntry id="IE_Rep1_3"><text>"Normal"</text></inputEntry>
        <inputEntry id="IE_Rep1_4"><text>"Ausente","SIRS"</text></inputEntry>
        <inputEntry id="IE_Rep1_5"><text>false</text></inputEntry>
        <outputEntry id="OE_Rep1_1"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OE_Rep1_2"><text>"Celulite simples sem sinais de necrose - tratamento com antibioticos intravenosos, nao cirurgico"</text></outputEntry>
        <outputEntry id="OE_Rep1_3"><text>"IDSA Guidelines 2023 - Diferenciacao entre celulite e fasciite necrosante"</text></outputEntry>
      <outputEntry id="OE_Reprovado_CeluliteSimples_4"><text>"PROT"</text></outputEntry>
        <outputEntry id="OE_Reprovado_CeluliteSimples_5"><text>"NEGAR"</text></outputEntry>
      </rule>

      <rule id="Rule_Reprovado_SemDocumentacao">
        <description>Reprovado: Diagnostico incerto sem imagem</description>
        <inputEntry id="IE_Rep2_1"><text>&lt; 6</text></inputEntry>
        <inputEntry id="IE_Rep2_2"><text>"DorDesproporcional"</text></inputEntry>
        <inputEntry id="IE_Rep2_3"><text>"NaoRealizada"</text></inputEntry>
        <inputEntry id="IE_Rep2_4"><text>"Ausente"</text></inputEntry>
        <inputEntry id="IE_Rep2_5"><text>false</text></inputEntry>
        <outputEntry id="OE_Rep2_1"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OE_Rep2_2"><text>"Diagnostico incerto - realizar TC para confirmacao antes de desbridamento extenso"</text></outputEntry>
        <outputEntry id="OE_Rep2_3"><text>"WSES Guidelines 2018 - Imagem pode auxiliar no diagnostico quando disponivel"</text></outputEntry>
      <outputEntry id="OE_Reprovado_SemDocumentacao_4"><text>"PROT"</text></outputEntry>
        <outputEntry id="OE_Reprovado_SemDocumentacao_5"><text>"NEGAR"</text></outputEntry>
      </rule>

      <!-- ========== REGRAS DE APROVACAO ========== -->

      <rule id="Rule_Aprovado_NecroseCutanea">
        <description>Aprovado: Necrose cutanea visivel</description>
        <inputEntry id="IE_Apr1_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr1_2"><text>"NecroseCutanea"</text></inputEntry>
        <inputEntry id="IE_Apr1_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr1_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr1_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Apr1_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Apr1_2"><text>"Necrose cutanea visivel - desbridamento cirurgico de emergencia, nao atrasar por exames"</text></outputEntry>
        <outputEntry id="OE_Apr1_3"><text>"IDSA Guidelines 2023 - Necrose cutanea e indicacao de desbridamento imediato"</text></outputEntry>
      <outputEntry id="OE_Aprovado_NecroseCutanea_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Aprovado_NecroseCutanea_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <rule id="Rule_Aprovado_Crepitacao">
        <description>Aprovado: Crepitacao subcutanea</description>
        <inputEntry id="IE_Apr2_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr2_2"><text>"Crepitacao"</text></inputEntry>
        <inputEntry id="IE_Apr2_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr2_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr2_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Apr2_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Apr2_2"><text>"Crepitacao subcutanea indica gas em tecidos - desbridamento cirurgico de emergencia"</text></outputEntry>
        <outputEntry id="OE_Apr2_3"><text>"WSES Guidelines 2018 - Crepitacao e sinal patognomonico de infeccao necrosante"</text></outputEntry>
      <outputEntry id="OE_Aprovado_Crepitacao_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Aprovado_Crepitacao_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <rule id="Rule_Aprovado_LRINECAlto">
        <description>Aprovado: LRINEC score elevado com sinais clinicos</description>
        <inputEntry id="IE_Apr3_1"><text>&gt;= 6</text></inputEntry>
        <inputEntry id="IE_Apr3_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr3_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr3_4"><text>"SepseSevera","ChoqueSeptico"</text></inputEntry>
        <inputEntry id="IE_Apr3_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Apr3_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Apr3_2"><text>"LRINEC &gt;= 6 com sepse indica alta probabilidade de fasciite necrosante - exploracao cirurgica"</text></outputEntry>
        <outputEntry id="OE_Apr3_3"><text>"SIS Guidelines 2020 - LRINEC como ferramenta de triagem para desbridamento"</text></outputEntry>
      <outputEntry id="OE_Aprovado_LRINECAlto_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Aprovado_LRINECAlto_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <rule id="Rule_Aprovado_ProgressaoRapida">
        <description>Aprovado: Progressao rapida com sinais inflamatorios</description>
        <inputEntry id="IE_Apr4_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr4_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr4_3"><text>"GasSubcutaneo","EspessamentoFascial"</text></inputEntry>
        <inputEntry id="IE_Apr4_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr4_5"><text>true</text></inputEntry>
        <outputEntry id="OE_Apr4_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Apr4_2"><text>"Progressao rapida com achados de imagem sugestivos - exploracao cirurgica de urgencia"</text></outputEntry>
        <outputEntry id="OE_Apr4_3"><text>"WSES Guidelines 2018 - Progressao rapida e red flag para necrose"</text></outputEntry>
      <outputEntry id="OE_Aprovado_ProgressaoRapida_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Aprovado_ProgressaoRapida_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <!-- ========== REGRA FALLBACK ========== -->

      <rule id="Rule_Fallback_GEN_EME_008">
        <description>Pendente: Alta suspeita requer avaliacao urgente</description>
        <inputEntry id="IE_FB_1"><text>-</text></inputEntry>
        <inputEntry id="IE_FB_2"><text>-</text></inputEntry>
        <inputEntry id="IE_FB_3"><text>-</text></inputEntry>
        <inputEntry id="IE_FB_4"><text>-</text></inputEntry>
        <inputEntry id="IE_FB_5"><text>-</text></inputEntry>
        <outputEntry id="OE_FB_1"><text>"Pendente"</text></outputEntry>
        <outputEntry id="OE_FB_2"><text>"Alta suspeita clinica requer avaliacao cirurgica urgente - na duvida, explorar cirurgicamente"</text></outputEntry>
        <outputEntry id="OE_FB_3"><text>"IDSA Guidelines 2023 - Baixo limiar para exploracao cirurgica em casos suspeitos"</text></outputEntry>
      <outputEntry id="OE_Fallback_GEN_EME_008_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Fallback_GEN_EME_008_5"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>

    </decisionTable>
  </decision>
</definitions>
