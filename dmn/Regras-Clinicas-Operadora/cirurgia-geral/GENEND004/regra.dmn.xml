<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="https://www.omg.org/spec/DMN/20191111/MODEL/"
             xmlns:camunda="http://camunda.org/schema/1.0/dmn"
             id="Definitions_GEN_END_004"
             name="Adrenalectomia - Tumores Funcionais"
             namespace="http://camunda.org/schema/1.0/dmn">

  <!--
    ===============================================================================
    CODIGO: GEN-END-004
    Procedimento: Adrenalectomia por Tumores Adrenais Funcionais
    Especialidade: Cirurgia Geral - Cirurgia Endocrina
    Versao: 3.0.0-TIER1
    Data: 2026-02-07
    ===============================================================================

    INDICACOES CIRURGICAS:
    - Feocromocitoma/Paraganglioma
    - Sindrome de Cushing por adenoma adrenal
    - Aldosteronoma (Sindrome de Conn)
    - Carcinoma adrenocortical
    - Incidentaloma funcional

    CONTRAINDICACOES:
    - Incidentaloma nao funcional < 4 cm com caracteristicas benignas
    - Metastase adrenal isolada sem indicacao cirurgica

    REFERENCIAS TECNICAS:
    - Endocrine Society Guidelines - Adrenal Incidentaloma 2016
    - AAES Guidelines - Adrenalectomy 2013
    - ESE/ENSAT Guidelines 2018

    ===============================================================================
  -->

  <decision id="Decision_GEN_END_004" name="Regra Clinica - Adrenalectomia Tumor Funcional">
    <decisionTable id="DecisionTable_GEN_END_004" hitPolicy="FIRST">

      <!-- ========== INPUTS (5) ========== -->

      <input id="Input_tipoTumor" label="Tipo de Tumor Adrenal" camunda:inputVariable="tipoTumor">
        <inputExpression id="InputExpression_tipoTumor" typeRef="string">
          <text>tipoTumor</text>
        </inputExpression>
        <inputValues id="InputValues_tipoTumor">
          <text>"Feocromocitoma","Aldosteronoma","CushingAdenoma","Carcinoma","Incidentaloma","Metastase"</text>
        </inputValues>
      </input>

      <input id="Input_funcionalidade" label="Status Funcional" camunda:inputVariable="funcionalidade">
        <inputExpression id="InputExpression_funcionalidade" typeRef="string">
          <text>funcionalidade</text>
        </inputExpression>
        <inputValues id="InputValues_funcionalidade">
          <text>"Funcional","NaoFuncional","SubclinicalCushing"</text>
        </inputValues>
      </input>

      <input id="Input_tamanhoTumor" label="Tamanho do Tumor (cm)" camunda:inputVariable="tamanhoTumor">
        <inputExpression id="InputExpression_tamanhoTumor" typeRef="number">
          <text>tamanhoTumor</text>
        </inputExpression>
      </input>

      <input id="Input_caracteristicasImagem" label="Caracteristicas de Imagem" camunda:inputVariable="caracteristicasImagem">
        <inputExpression id="InputExpression_caracteristicasImagem" typeRef="string">
          <text>caracteristicasImagem</text>
        </inputExpression>
        <inputValues id="InputValues_caracteristicasImagem">
          <text>"Benigno","Indeterminado","Suspeito","Maligno"</text>
        </inputValues>
      </input>

      <input id="Input_testesBioquimicos" label="Testes Bioquimicos" camunda:inputVariable="testesBioquimicos">
        <inputExpression id="InputExpression_testesBioquimicos" typeRef="string">
          <text>testesBioquimicos</text>
        </inputExpression>
        <inputValues id="InputValues_testesBioquimicos">
          <text>"Positivo","Negativo","Inconclusivo","NaoRealizado"</text>
        </inputValues>
      </input>

      <!-- ========== OUTPUTS (3) ========== -->

      <output id="Output_resultado" label="Resultado" name="resultado" typeRef="string">
        <outputValues id="OutputValues_resultado">
          <text>"Aprovado","Reprovado","Pendente"</text>
        </outputValues>
      </output>

      <output id="Output_observacao" label="Observacao Clinica" name="observacao" typeRef="string" />

      <output id="Output_fundamentacao" label="Fundamentacao Tecnica" name="fundamentacao" typeRef="string" />

      <!-- Output 4: Alertas Desperdicio -->
      <output id="Output_alertasDesperdicio" label="Alertas de Desperdicio" name="alertasDesperdicio" typeRef="string">
        <outputValues id="OutputValues_alertasDesperdicio">
          <text>"NENHUM","DUP","FREQ","ESC","DOC","PROT","MULTI"</text>
        </outputValues>
      </output>

      <!-- Output 5: Acao Recomendada -->
      <output id="Output_acaoRecomendada" label="Acao Recomendada" name="acaoRecomendada" typeRef="string">
        <outputValues id="OutputValues_acaoRecomendada">
          <text>"APROVAR","NEGAR","SOLICITAR_INFO","AGUARDAR_PRAZO","SUGERIR_ALTERNATIVA"</text>
        </outputValues>
      </output>

      <!-- ========== REGRAS DE REPROVACAO ========== -->

      <rule id="Rule_Reprovado_IncidentalomaPequeno">
        <description>Reprovado: Incidentaloma nao funcional pequeno</description>
        <inputEntry id="IE_Rep1_1"><text>"Incidentaloma"</text></inputEntry>
        <inputEntry id="IE_Rep1_2"><text>"NaoFuncional"</text></inputEntry>
        <inputEntry id="IE_Rep1_3"><text>&lt; 4</text></inputEntry>
        <inputEntry id="IE_Rep1_4"><text>"Benigno"</text></inputEntry>
        <inputEntry id="IE_Rep1_5"><text>"Negativo"</text></inputEntry>
        <outputEntry id="OE_Rep1_1"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OE_Rep1_2"><text>"Incidentaloma nao funcional &lt; 4cm com caracteristicas benignas - seguimento por imagem"</text></outputEntry>
        <outputEntry id="OE_Rep1_3"><text>"Endocrine Society 2016 - Observacao para incidentalomas benignos pequenos"</text></outputEntry>
      <outputEntry id="OE_Reprovado_IncidentalomaPequeno_4"><text>"PROT"</text></outputEntry>
        <outputEntry id="OE_Reprovado_IncidentalomaPequeno_5"><text>"NEGAR"</text></outputEntry>
      </rule>

      <rule id="Rule_Reprovado_SemAvaliacao">
        <description>Reprovado: Avaliacao bioquimica incompleta</description>
        <inputEntry id="IE_Rep2_1"><text>"Incidentaloma"</text></inputEntry>
        <inputEntry id="IE_Rep2_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep2_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep2_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep2_5"><text>"NaoRealizado"</text></inputEntry>
        <outputEntry id="OE_Rep2_1"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OE_Rep2_2"><text>"Avaliacao bioquimica obrigatoria antes de indicacao cirurgica"</text></outputEntry>
        <outputEntry id="OE_Rep2_3"><text>"AAES 2013 - Funcionalidade deve ser excluida em todo incidentaloma"</text></outputEntry>
      <outputEntry id="OE_Reprovado_SemAvaliacao_4"><text>"PROT"</text></outputEntry>
        <outputEntry id="OE_Reprovado_SemAvaliacao_5"><text>"NEGAR"</text></outputEntry>
      </rule>

      <!-- ========== REGRAS DE APROVACAO ========== -->

      <rule id="Rule_Aprovado_Feocromocitoma">
        <description>Aprovado: Feocromocitoma confirmado</description>
        <inputEntry id="IE_Apr1_1"><text>"Feocromocitoma"</text></inputEntry>
        <inputEntry id="IE_Apr1_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr1_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr1_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr1_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Apr1_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Apr1_2"><text>"Feocromocitoma confirmado - adrenalectomia indicada apos preparo com alfa-bloqueador"</text></outputEntry>
        <outputEntry id="OE_Apr1_3"><text>"Endocrine Society 2014 - Todo feocromocitoma deve ser ressecado"</text></outputEntry>
      <outputEntry id="OE_Aprovado_Feocromocitoma_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Aprovado_Feocromocitoma_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <rule id="Rule_Aprovado_Aldosteronoma">
        <description>Aprovado: Aldosteronoma unilateral</description>
        <inputEntry id="IE_Apr2_1"><text>"Aldosteronoma"</text></inputEntry>
        <inputEntry id="IE_Apr2_2"><text>"Funcional"</text></inputEntry>
        <inputEntry id="IE_Apr2_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr2_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr2_5"><text>"Positivo"</text></inputEntry>
        <outputEntry id="OE_Apr2_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Apr2_2"><text>"Aldosteronoma unilateral confirmado - adrenalectomia laparoscopica indicada"</text></outputEntry>
        <outputEntry id="OE_Apr2_3"><text>"Endocrine Society 2016 - Cirurgia e curativa para aldosteronoma unilateral"</text></outputEntry>
      <outputEntry id="OE_Aprovado_Aldosteronoma_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Aprovado_Aldosteronoma_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <rule id="Rule_Aprovado_CushingAdenoma">
        <description>Aprovado: Sindrome de Cushing por adenoma</description>
        <inputEntry id="IE_Apr3_1"><text>"CushingAdenoma"</text></inputEntry>
        <inputEntry id="IE_Apr3_2"><text>"Funcional"</text></inputEntry>
        <inputEntry id="IE_Apr3_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr3_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr3_5"><text>"Positivo"</text></inputEntry>
        <outputEntry id="OE_Apr3_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Apr3_2"><text>"Sindrome de Cushing por adenoma adrenal - adrenalectomia unilateral indicada"</text></outputEntry>
        <outputEntry id="OE_Apr3_3"><text>"Endocrine Society 2015 - Cirurgia e tratamento de escolha para Cushing adrenal"</text></outputEntry>
      <outputEntry id="OE_Aprovado_CushingAdenoma_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Aprovado_CushingAdenoma_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <rule id="Rule_Aprovado_SuspeitoCarcinoma">
        <description>Aprovado: Suspeita de carcinoma adrenocortical</description>
        <inputEntry id="IE_Apr4_1"><text>"Carcinoma"</text></inputEntry>
        <inputEntry id="IE_Apr4_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr4_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr4_4"><text>"Maligno","Suspeito"</text></inputEntry>
        <inputEntry id="IE_Apr4_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Apr4_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Apr4_2"><text>"Suspeita de carcinoma adrenocortical - adrenalectomia aberta indicada"</text></outputEntry>
        <outputEntry id="OE_Apr4_3"><text>"ESE/ENSAT 2018 - Cirurgia R0 e essencial para ACC"</text></outputEntry>
      <outputEntry id="OE_Aprovado_SuspeitoCarcinoma_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Aprovado_SuspeitoCarcinoma_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <rule id="Rule_Aprovado_IncidentalomaGrande">
        <description>Aprovado: Incidentaloma > 4cm ou indeterminado</description>
        <inputEntry id="IE_Apr5_1"><text>"Incidentaloma"</text></inputEntry>
        <inputEntry id="IE_Apr5_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr5_3"><text>&gt;= 4</text></inputEntry>
        <inputEntry id="IE_Apr5_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr5_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Apr5_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Apr5_2"><text>"Incidentaloma &gt;= 4cm - adrenalectomia recomendada pelo risco de malignidade"</text></outputEntry>
        <outputEntry id="OE_Apr5_3"><text>"Endocrine Society 2016 - Tamanho &gt; 4cm aumenta risco de ACC"</text></outputEntry>
      <outputEntry id="OE_Aprovado_IncidentalomaGrande_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Aprovado_IncidentalomaGrande_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <!-- ========== REGRA FALLBACK ========== -->

      <rule id="Rule_Fallback_GEN_END_004">
        <description>Pendente: Avaliacao bioquimica completa</description>
        <inputEntry id="IE_FB_1"><text>-</text></inputEntry>
        <inputEntry id="IE_FB_2"><text>-</text></inputEntry>
        <inputEntry id="IE_FB_3"><text>-</text></inputEntry>
        <inputEntry id="IE_FB_4"><text>-</text></inputEntry>
        <inputEntry id="IE_FB_5"><text>-</text></inputEntry>
        <outputEntry id="OE_FB_1"><text>"Pendente"</text></outputEntry>
        <outputEntry id="OE_FB_2"><text>"Completar avaliacao bioquimica (metanefrinas, cortisol, aldosterona/renina)"</text></outputEntry>
        <outputEntry id="OE_FB_3"><text>"Endocrine Society 2016 - Workup hormonal completo obrigatorio"</text></outputEntry>
      <outputEntry id="OE_Fallback_GEN_END_004_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Fallback_GEN_END_004_5"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>

    </decisionTable>
  </decision>
</definitions>
