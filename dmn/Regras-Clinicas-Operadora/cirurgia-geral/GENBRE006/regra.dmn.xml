<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="https://www.omg.org/spec/DMN/20191111/MODEL/"
             xmlns:camunda="http://camunda.org/schema/1.0/dmn"
             id="Definitions_GEN_BRE_006"
             name="Mamoplastia Redutora - Necessidade Medica"
             namespace="http://camunda.org/schema/1.0/dmn">

  <!--
    ===============================================================================
    CODIGO: GEN-BRE-006
    Procedimento: Mamoplastia Redutora - Criterios de Necessidade Medica
    Especialidade: Cirurgia Geral/Plastica
    Versao: 3.0.0-TIER1
    Data: 2026-02-07
    ===============================================================================

    INDICACOES MEDICAS:
    - Dor cervical, dorsal ou cefaleia cronica por macromastia
    - Intertrigo submamario cronico refratario
    - Parestesias de membros superiores
    - Deformidade postural documentada
    - Peso a ser ressecado >= 500g por mama (Schnur scale)

    CONTRAINDICACOES:
    - IMC > 35 (risco aumentado de complicacoes)
    - Tabagismo ativo
    - Planejamento de gestacao proxima
    - Expectativa exclusivamente estetica (nao medica)

    REFERENCIAS TECNICAS:
    - Schnur Sliding Scale
    - SBM/SBCP Guidelines 2023
    - ANS Guidelines - Cobertura de Mamoplastia Redutora

    ===============================================================================
  -->

  <decision id="Decision_GEN_BRE_006" name="Regra Clinica - Mamoplastia Redutora">
    <decisionTable id="DecisionTable_GEN_BRE_006" hitPolicy="FIRST">

      <!-- ========== INPUTS (5) ========== -->

      <input id="Input_sintomasClinicos" label="Sintomas Clinicos Documentados" camunda:inputVariable="sintomasClinicos">
        <inputExpression id="InputExpression_sintomasClinicos" typeRef="string">
          <text>sintomasClinicos</text>
        </inputExpression>
        <inputValues id="InputValues_sintomasClinicos">
          <text>"DorCervicoDorsal","Intertrigo","Parestesias","CefaleiaCronica","Multiplos","Ausente"</text>
        </inputValues>
      </input>

      <input id="Input_pesoResseccao" label="Peso Estimado de Resseccao por Mama (g)" camunda:inputVariable="pesoResseccao">
        <inputExpression id="InputExpression_pesoResseccao" typeRef="number">
          <text>pesoResseccao</text>
        </inputExpression>
      </input>

      <input id="Input_imc" label="IMC da Paciente" camunda:inputVariable="imc">
        <inputExpression id="InputExpression_imc" typeRef="number">
          <text>imc</text>
        </inputExpression>
      </input>

      <input id="Input_tratamentosConservadores" label="Tratamentos Conservadores Realizados" camunda:inputVariable="tratamentosConservadores">
        <inputExpression id="InputExpression_tratamentosConservadores" typeRef="string">
          <text>tratamentosConservadores</text>
        </inputExpression>
        <inputValues id="InputValues_tratamentosConservadores">
          <text>"FalhouApos6Meses","EmAndamento","NaoRealizado"</text>
        </inputValues>
      </input>

      <input id="Input_tabagismo" label="Tabagismo" camunda:inputVariable="tabagismo">
        <inputExpression id="InputExpression_tabagismo" typeRef="boolean">
          <text>tabagismo</text>
        </inputExpression>
      </input>

      <!-- ========== OUTPUTS (3) ========== -->

      <output id="Output_resultado" label="Resultado" name="resultado" typeRef="string">
        <outputValues id="OutputValues_resultado">
          <text>"Aprovado","Reprovado","Pendente"</text>
        </outputValues>
      </output>

      <output id="Output_observacao" label="Observacao Clinica" name="observacao" typeRef="string" />

      <output id="Output_fundamentacao" label="Fundamentacao Tecnica" name="fundamentacao" typeRef="string" />

      <!-- Output 4: Alertas Desperdicio -->
      <output id="Output_alertasDesperdicio" label="Alertas de Desperdicio" name="alertasDesperdicio" typeRef="string">
        <outputValues id="OutputValues_alertasDesperdicio">
          <text>"NENHUM","DUP","FREQ","ESC","DOC","PROT","MULTI"</text>
        </outputValues>
      </output>

      <!-- Output 5: Acao Recomendada -->
      <output id="Output_acaoRecomendada" label="Acao Recomendada" name="acaoRecomendada" typeRef="string">
        <outputValues id="OutputValues_acaoRecomendada">
          <text>"APROVAR","NEGAR","SOLICITAR_INFO","AGUARDAR_PRAZO","SUGERIR_ALTERNATIVA"</text>
        </outputValues>
      </output>

      <!-- ========== REGRAS DE REPROVACAO ========== -->

      <rule id="Rule_Reprovado_ObesidadeGrave">
        <description>Reprovado: IMC > 35</description>
        <inputEntry id="IE_Rep1_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep1_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep1_3"><text>&gt; 35</text></inputEntry>
        <inputEntry id="IE_Rep1_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep1_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Rep1_1"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OE_Rep1_2"><text>"IMC &gt; 35 - otimizar peso antes de mamoplastia redutora para minimizar complicacoes"</text></outputEntry>
        <outputEntry id="OE_Rep1_3"><text>"SBM/SBCP 2023 - Reducao de peso previa recomendada em obesidade"</text></outputEntry>
      <outputEntry id="OE_Reprovado_ObesidadeGrave_4"><text>"PROT"</text></outputEntry>
        <outputEntry id="OE_Reprovado_ObesidadeGrave_5"><text>"NEGAR"</text></outputEntry>
      </rule>

      <rule id="Rule_Reprovado_SemSintomas">
        <description>Reprovado: Ausencia de sintomas clinicos</description>
        <inputEntry id="IE_Rep2_1"><text>"Ausente"</text></inputEntry>
        <inputEntry id="IE_Rep2_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep2_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep2_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep2_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Rep2_1"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OE_Rep2_2"><text>"Ausencia de sintomas clinicos documentados - procedimento exclusivamente estetico"</text></outputEntry>
        <outputEntry id="OE_Rep2_3"><text>"ANS Guidelines - Cobertura apenas para indicacao medica documentada"</text></outputEntry>
      <outputEntry id="OE_Reprovado_SemSintomas_4"><text>"PROT"</text></outputEntry>
        <outputEntry id="OE_Reprovado_SemSintomas_5"><text>"NEGAR"</text></outputEntry>
      </rule>

      <rule id="Rule_Reprovado_TabagismoAtivo">
        <description>Reprovado: Tabagismo ativo</description>
        <inputEntry id="IE_Rep3_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep3_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep3_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep3_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep3_5"><text>true</text></inputEntry>
        <outputEntry id="OE_Rep3_1"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OE_Rep3_2"><text>"Tabagismo ativo - cessar por 4-6 semanas antes de cirurgia"</text></outputEntry>
        <outputEntry id="OE_Rep3_3"><text>"SBCP 2023 - Tabagismo aumenta risco de necrose e deiscencia"</text></outputEntry>
      <outputEntry id="OE_Reprovado_TabagismoAtivo_4"><text>"PROT"</text></outputEntry>
        <outputEntry id="OE_Reprovado_TabagismoAtivo_5"><text>"NEGAR"</text></outputEntry>
      </rule>

      <!-- ========== REGRAS DE APROVACAO ========== -->

      <rule id="Rule_Aprovado_Schnur500g">
        <description>Aprovado: Peso >= 500g com sintomas</description>
        <inputEntry id="IE_Apr1_1"><text>"DorCervicoDorsal","Multiplos"</text></inputEntry>
        <inputEntry id="IE_Apr1_2"><text>&gt;= 500</text></inputEntry>
        <inputEntry id="IE_Apr1_3"><text>&lt;= 35</text></inputEntry>
        <inputEntry id="IE_Apr1_4"><text>"FalhouApos6Meses"</text></inputEntry>
        <inputEntry id="IE_Apr1_5"><text>false</text></inputEntry>
        <outputEntry id="OE_Apr1_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Apr1_2"><text>"Criterios de necessidade medica preenchidos - mamoplastia redutora indicada"</text></outputEntry>
        <outputEntry id="OE_Apr1_3"><text>"Schnur Sliding Scale + ANS Guidelines - Cobertura por indicacao medica"</text></outputEntry>
      <outputEntry id="OE_Aprovado_Schnur500g_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Aprovado_Schnur500g_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <rule id="Rule_Aprovado_IntertrigoCronico">
        <description>Aprovado: Intertrigo cronico refratario</description>
        <inputEntry id="IE_Apr2_1"><text>"Intertrigo"</text></inputEntry>
        <inputEntry id="IE_Apr2_2"><text>&gt;= 400</text></inputEntry>
        <inputEntry id="IE_Apr2_3"><text>&lt;= 35</text></inputEntry>
        <inputEntry id="IE_Apr2_4"><text>"FalhouApos6Meses"</text></inputEntry>
        <inputEntry id="IE_Apr2_5"><text>false</text></inputEntry>
        <outputEntry id="OE_Apr2_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Apr2_2"><text>"Intertrigo cronico refratario a tratamento conservador - indicacao medica"</text></outputEntry>
        <outputEntry id="OE_Apr2_3"><text>"SBM/SBCP 2023 - Dermatite de repeticao e criterio de necessidade"</text></outputEntry>
      <outputEntry id="OE_Aprovado_IntertrigoCronico_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Aprovado_IntertrigoCronico_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <rule id="Rule_Aprovado_ParestesiasMMSS">
        <description>Aprovado: Parestesias de membros superiores</description>
        <inputEntry id="IE_Apr3_1"><text>"Parestesias"</text></inputEntry>
        <inputEntry id="IE_Apr3_2"><text>&gt;= 400</text></inputEntry>
        <inputEntry id="IE_Apr3_3"><text>&lt;= 35</text></inputEntry>
        <inputEntry id="IE_Apr3_4"><text>"FalhouApos6Meses"</text></inputEntry>
        <inputEntry id="IE_Apr3_5"><text>false</text></inputEntry>
        <outputEntry id="OE_Apr3_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Apr3_2"><text>"Parestesias de MMSS por tracao do plexo braquial - indicacao medica"</text></outputEntry>
        <outputEntry id="OE_Apr3_3"><text>"Documentacao neurologica de suporte recomendada"</text></outputEntry>
      <outputEntry id="OE_Aprovado_ParestesiasMMSS_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Aprovado_ParestesiasMMSS_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <rule id="Rule_Aprovado_SintomasMultiplos">
        <description>Aprovado: Multiplos sintomas documentados</description>
        <inputEntry id="IE_Apr4_1"><text>"Multiplos"</text></inputEntry>
        <inputEntry id="IE_Apr4_2"><text>&gt;= 300</text></inputEntry>
        <inputEntry id="IE_Apr4_3"><text>&lt;= 35</text></inputEntry>
        <inputEntry id="IE_Apr4_4"><text>"FalhouApos6Meses"</text></inputEntry>
        <inputEntry id="IE_Apr4_5"><text>false</text></inputEntry>
        <outputEntry id="OE_Apr4_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Apr4_2"><text>"Multiplos sintomas clinicos documentados com falha de tratamento conservador"</text></outputEntry>
        <outputEntry id="OE_Apr4_3"><text>"Schnur Scale ajustado - sintomas multiplos fortalecem indicacao"</text></outputEntry>
      <outputEntry id="OE_Aprovado_SintomasMultiplos_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Aprovado_SintomasMultiplos_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <!-- ========== REGRA FALLBACK ========== -->

      <rule id="Rule_Fallback_GEN_BRE_006">
        <description>Pendente: Documentacao adicional necessaria</description>
        <inputEntry id="IE_FB_1"><text>-</text></inputEntry>
        <inputEntry id="IE_FB_2"><text>-</text></inputEntry>
        <inputEntry id="IE_FB_3"><text>-</text></inputEntry>
        <inputEntry id="IE_FB_4"><text>-</text></inputEntry>
        <inputEntry id="IE_FB_5"><text>-</text></inputEntry>
        <outputEntry id="OE_FB_1"><text>"Pendente"</text></outputEntry>
        <outputEntry id="OE_FB_2"><text>"Documentacao de tratamentos conservadores e fotografias clinicas necessarias"</text></outputEntry>
        <outputEntry id="OE_FB_3"><text>"ANS Guidelines - Necessidade de documentacao completa para cobertura"</text></outputEntry>
      <outputEntry id="OE_Fallback_GEN_BRE_006_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Fallback_GEN_BRE_006_5"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>

    </decisionTable>
  </decision>
</definitions>
