<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="https://www.omg.org/spec/DMN/20191111/MODEL/"
             xmlns:camunda="http://camunda.org/schema/1.0/dmn"
             id="Definitions_GEN_BRE_007"
             name="Cirurgia de Ginecomastia - Criterios"
             namespace="http://camunda.org/schema/1.0/dmn">

  <!--
    ===============================================================================
    CODIGO: GEN-BRE-007
    Procedimento: Tratamento Cirurgico da Ginecomastia - Criterios
    Especialidade: Cirurgia Geral/Plastica
    Versao: 3.0.0-TIER1
    Data: 2026-02-07
    ===============================================================================

    INDICACOES:
    - Ginecomastia persistente > 12 meses sem regressao
    - Dor ou desconforto local
    - Impacto psicologico significativo documentado
    - Exclusao de causas secundarias trat√°veis
    - Grau II-III de Simon ou equivalente

    CONTRAINDICACOES:
    - Ginecomastia fisiologica puberal recente (< 12 meses)
    - Causas secundarias nao tratadas (drogas, tumores)
    - Obesidade como causa principal (pseudoginecomastia)
    - Expectativas irrealistas

    REFERENCIAS TECNICAS:
    - Simon Classification
    - ASPS Guidelines 2021
    - Endocrine Society Guidelines 2018

    ===============================================================================
  -->

  <decision id="Decision_GEN_BRE_007" name="Regra Clinica - Cirurgia Ginecomastia">
    <decisionTable id="DecisionTable_GEN_BRE_007" hitPolicy="FIRST">

      <!-- ========== INPUTS (5) ========== -->

      <input id="Input_grauSimon" label="Grau de Ginecomastia (Simon)" camunda:inputVariable="grauSimon">
        <inputExpression id="InputExpression_grauSimon" typeRef="string">
          <text>grauSimon</text>
        </inputExpression>
        <inputValues id="InputValues_grauSimon">
          <text>"Grau_I","Grau_IIa","Grau_IIb","Grau_III"</text>
        </inputValues>
      </input>

      <input id="Input_duracaoMeses" label="Duracao da Condicao (meses)" camunda:inputVariable="duracaoMeses">
        <inputExpression id="InputExpression_duracaoMeses" typeRef="number">
          <text>duracaoMeses</text>
        </inputExpression>
      </input>

      <input id="Input_avaliacaoEndocrina" label="Avaliacao Endocrina" camunda:inputVariable="avaliacaoEndocrina">
        <inputExpression id="InputExpression_avaliacaoEndocrina" typeRef="string">
          <text>avaliacaoEndocrina</text>
        </inputExpression>
        <inputValues id="InputValues_avaliacaoEndocrina">
          <text>"Normal","CausaSecundariaTratada","CausaSecundariaNaoTratada","NaoRealizada"</text>
        </inputValues>
      </input>

      <input id="Input_sintomasLocais" label="Sintomas Locais" camunda:inputVariable="sintomasLocais">
        <inputExpression id="InputExpression_sintomasLocais" typeRef="string">
          <text>sintomasLocais</text>
        </inputExpression>
        <inputValues id="InputValues_sintomasLocais">
          <text>"Dor","Sensibilidade","Assimetria","Ausente"</text>
        </inputValues>
      </input>

      <input id="Input_impactoPsicologico" label="Impacto Psicologico Documentado" camunda:inputVariable="impactoPsicologico">
        <inputExpression id="InputExpression_impactoPsicologico" typeRef="boolean">
          <text>impactoPsicologico</text>
        </inputExpression>
      </input>

      <!-- ========== OUTPUTS (3) ========== -->

      <output id="Output_resultado" label="Resultado" name="resultado" typeRef="string">
        <outputValues id="OutputValues_resultado">
          <text>"Aprovado","Reprovado","Pendente"</text>
        </outputValues>
      </output>

      <output id="Output_observacao" label="Observacao Clinica" name="observacao" typeRef="string" />

      <output id="Output_fundamentacao" label="Fundamentacao Tecnica" name="fundamentacao" typeRef="string" />

      <!-- Output 4: Alertas Desperdicio -->
      <output id="Output_alertasDesperdicio" label="Alertas de Desperdicio" name="alertasDesperdicio" typeRef="string">
        <outputValues id="OutputValues_alertasDesperdicio">
          <text>"NENHUM","DUP","FREQ","ESC","DOC","PROT","MULTI"</text>
        </outputValues>
      </output>

      <!-- Output 5: Acao Recomendada -->
      <output id="Output_acaoRecomendada" label="Acao Recomendada" name="acaoRecomendada" typeRef="string">
        <outputValues id="OutputValues_acaoRecomendada">
          <text>"APROVAR","NEGAR","SOLICITAR_INFO","AGUARDAR_PRAZO","SUGERIR_ALTERNATIVA"</text>
        </outputValues>
      </output>

      <!-- ========== REGRAS DE REPROVACAO ========== -->

      <rule id="Rule_Reprovado_Recente">
        <description>Reprovado: Ginecomastia recente - aguardar regressao</description>
        <inputEntry id="IE_Rep1_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep1_2"><text>&lt; 12</text></inputEntry>
        <inputEntry id="IE_Rep1_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep1_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep1_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Rep1_1"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OE_Rep1_2"><text>"Ginecomastia com menos de 12 meses - aguardar possivel regressao espontanea"</text></outputEntry>
        <outputEntry id="OE_Rep1_3"><text>"Endocrine Society 2018 - Ginecomastia puberal pode regredir em ate 2 anos"</text></outputEntry>
      <outputEntry id="OE_Reprovado_Recente_4"><text>"PROT"</text></outputEntry>
        <outputEntry id="OE_Reprovado_Recente_5"><text>"NEGAR"</text></outputEntry>
      </rule>

      <rule id="Rule_Reprovado_CausaNaoTratada">
        <description>Reprovado: Causa secundaria nao tratada</description>
        <inputEntry id="IE_Rep2_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep2_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep2_3"><text>"CausaSecundariaNaoTratada"</text></inputEntry>
        <inputEntry id="IE_Rep2_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep2_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Rep2_1"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OE_Rep2_2"><text>"Causa secundaria identificada e nao tratada - tratar causa base primeiro"</text></outputEntry>
        <outputEntry id="OE_Rep2_3"><text>"Endocrine Society 2018 - Excluir e tratar causas secundarias"</text></outputEntry>
      <outputEntry id="OE_Reprovado_CausaNaoTratada_4"><text>"PROT"</text></outputEntry>
        <outputEntry id="OE_Reprovado_CausaNaoTratada_5"><text>"NEGAR"</text></outputEntry>
      </rule>

      <rule id="Rule_Reprovado_SemAvaliacao">
        <description>Reprovado: Sem avaliacao endocrina</description>
        <inputEntry id="IE_Rep3_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep3_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep3_3"><text>"NaoRealizada"</text></inputEntry>
        <inputEntry id="IE_Rep3_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep3_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Rep3_1"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OE_Rep3_2"><text>"Avaliacao endocrina obrigatoria antes de tratamento cirurgico"</text></outputEntry>
        <outputEntry id="OE_Rep3_3"><text>"ASPS Guidelines 2021 - Hormonal workup pre-operatorio necessario"</text></outputEntry>
      <outputEntry id="OE_Reprovado_SemAvaliacao_4"><text>"PROT"</text></outputEntry>
        <outputEntry id="OE_Reprovado_SemAvaliacao_5"><text>"NEGAR"</text></outputEntry>
      </rule>

      <!-- ========== REGRAS DE APROVACAO ========== -->

      <rule id="Rule_Aprovado_GrauIIIII">
        <description>Aprovado: Grau IIb-III com duracao adequada</description>
        <inputEntry id="IE_Apr1_1"><text>"Grau_IIb","Grau_III"</text></inputEntry>
        <inputEntry id="IE_Apr1_2"><text>&gt;= 12</text></inputEntry>
        <inputEntry id="IE_Apr1_3"><text>"Normal","CausaSecundariaTratada"</text></inputEntry>
        <inputEntry id="IE_Apr1_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr1_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Apr1_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Apr1_2"><text>"Ginecomastia grau IIb-III persistente - mastectomia subcutanea indicada"</text></outputEntry>
        <outputEntry id="OE_Apr1_3"><text>"Simon Classification - Graus moderados a severos requerem cirurgia"</text></outputEntry>
      <outputEntry id="OE_Aprovado_GrauIIIII_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Aprovado_GrauIIIII_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <rule id="Rule_Aprovado_DorLocal">
        <description>Aprovado: Dor local significativa</description>
        <inputEntry id="IE_Apr2_1"><text>"Grau_I","Grau_IIa","Grau_IIb"</text></inputEntry>
        <inputEntry id="IE_Apr2_2"><text>&gt;= 12</text></inputEntry>
        <inputEntry id="IE_Apr2_3"><text>"Normal","CausaSecundariaTratada"</text></inputEntry>
        <inputEntry id="IE_Apr2_4"><text>"Dor"</text></inputEntry>
        <inputEntry id="IE_Apr2_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Apr2_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Apr2_2"><text>"Ginecomastia sintomatica com dor local - tratamento cirurgico indicado"</text></outputEntry>
        <outputEntry id="OE_Apr2_3"><text>"ASPS Guidelines 2021 - Dor e criterio de indicacao"</text></outputEntry>
      <outputEntry id="OE_Aprovado_DorLocal_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Aprovado_DorLocal_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <rule id="Rule_Aprovado_ImpactoPsicologico">
        <description>Aprovado: Impacto psicologico significativo</description>
        <inputEntry id="IE_Apr3_1"><text>"Grau_IIa","Grau_IIb","Grau_III"</text></inputEntry>
        <inputEntry id="IE_Apr3_2"><text>&gt;= 12</text></inputEntry>
        <inputEntry id="IE_Apr3_3"><text>"Normal","CausaSecundariaTratada"</text></inputEntry>
        <inputEntry id="IE_Apr3_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr3_5"><text>true</text></inputEntry>
        <outputEntry id="OE_Apr3_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Apr3_2"><text>"Impacto psicologico documentado - tratamento cirurgico apropriado"</text></outputEntry>
        <outputEntry id="OE_Apr3_3"><text>"ASPS Guidelines 2021 - Impacto psicossocial e criterio valido"</text></outputEntry>
      <outputEntry id="OE_Aprovado_ImpactoPsicologico_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Aprovado_ImpactoPsicologico_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <rule id="Rule_Aprovado_CausaTratadaPersistente">
        <description>Aprovado: Persistencia apos tratamento de causa</description>
        <inputEntry id="IE_Apr4_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr4_2"><text>&gt;= 18</text></inputEntry>
        <inputEntry id="IE_Apr4_3"><text>"CausaSecundariaTratada"</text></inputEntry>
        <inputEntry id="IE_Apr4_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr4_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Apr4_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Apr4_2"><text>"Ginecomastia persistente apos tratamento de causa - fibrose provavelmente irreversivel"</text></outputEntry>
        <outputEntry id="OE_Apr4_3"><text>"Endocrine Society 2018 - Ginecomastia cronica pode necessitar cirurgia"</text></outputEntry>
      <outputEntry id="OE_Aprovado_CausaTratadaPersistente_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Aprovado_CausaTratadaPersistente_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <!-- ========== REGRA FALLBACK ========== -->

      <rule id="Rule_Fallback_GEN_BRE_007">
        <description>Pendente: Avaliacao endocrina completa</description>
        <inputEntry id="IE_FB_1"><text>-</text></inputEntry>
        <inputEntry id="IE_FB_2"><text>-</text></inputEntry>
        <inputEntry id="IE_FB_3"><text>-</text></inputEntry>
        <inputEntry id="IE_FB_4"><text>-</text></inputEntry>
        <inputEntry id="IE_FB_5"><text>-</text></inputEntry>
        <outputEntry id="OE_FB_1"><text>"Pendente"</text></outputEntry>
        <outputEntry id="OE_FB_2"><text>"Avaliacao endocrina e exclusao de causas secundarias necessarias"</text></outputEntry>
        <outputEntry id="OE_FB_3"><text>"Endocrine Society 2018 - Workup hormonal recomendado"</text></outputEntry>
      <outputEntry id="OE_Fallback_GEN_BRE_007_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Fallback_GEN_BRE_007_5"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>

    </decisionTable>
  </decision>
</definitions>
