<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="https://www.omg.org/spec/DMN/20191111/MODEL/"
             xmlns:dmndi="https://www.omg.org/spec/DMN/20191111/DMNDI/"
             xmlns:dc="http://www.omg.org/spec/DD/20100524/DC/"
             xmlns:di="http://www.omg.org/spec/DD/20100524/DI/"
             id="Definitions_GEN_HEP_001"
             name="Colecistectomia - Colelitíase Sintomática"
             namespace="http://camunda.org/schema/1.0/dmn"
             exporter="Camunda Modeler"
             exporterVersion="5.0.0">
  <!--
    GEN-HEP-001 - Colecistectomia para Colelitiase Sintomatica
    Versao: 1.0.0 (2026-02-07)
    Especialidade: Cirurgia Geral - Hepatobiliar
    Categoria: Procedimentos Cirurgicos

    Indicacoes Clinicas (SAGES 2023 / CBC 2022):
    - Colelitiase sintomatica com colicas biliares recorrentes documentadas
    - Complicacoes previas: pancreatite biliar, colangite, colecistite
    - Vesicula com parede espessada ou calculos maiores que 3cm (risco neoplasico)
    - Colelitiase em paciente com anemia falciforme

    Contraindicacoes:
    - Paciente assintomatico sem fatores de risco (exceto indicacoes especificas)
    - Risco cirurgico ASA V sem urgencia comprovada
    - Ausencia de documentacao de sintomatologia

    Documentacao Obrigatoria:
    - Ultrassonografia abdominal confirmando colelitiase
    - Historico clinico documentando episodios de colica biliar
    - Avaliacao pre-operatoria com classificacao ASA
    - Laudo de indicacao cirurgica por especialista

    Referencias Normativas:
    - SAGES Guidelines 2023 - Cholecystectomy
    - CBC 2022 - Consenso Brasileiro de Cirurgia Biliar
    - DUT ANS 2024 - Colecistectomia
  -->

  <decision id="Decision_GEN_HEP_001" name="Criterios de Autorizacao - Colecistectomia Colelitiase Sintomatica">
    <decisionTable id="DecisionTable_GEN_HEP_001" hitPolicy="FIRST">

      <!-- Input 1: Diagnostico Confirmado (CID-10) -->
      <input id="Input_diagnosticoConfirmado" label="Diagnostico Confirmado (CID-10)">
        <inputExpression id="InputExpr_diagnosticoConfirmado" typeRef="string">
          <text>diagnosticoConfirmado</text>
        </inputExpression>
        <inputValues id="InputValues_diagnosticoConfirmado">
          <text>"K80.0","K80.1","K80.2","K80.3","K80.4","K80.5","K80.8"</text>
        </inputValues>
      </input>

      <!-- Input 2: Sintomatologia Documentada -->
      <input id="Input_sintomatologia" label="Sintomatologia Documentada">
        <inputExpression id="InputExpr_sintomatologia" typeRef="string">
          <text>sintomatologiaDocumentada</text>
        </inputExpression>
        <inputValues id="InputValues_sintomatologia">
          <text>"Colica_Biliar_Recorrente","Pancreatite_Biliar_Previa","Colangite_Previa","Colecistite_Previa","Assintomatico","Nao_Documentado"</text>
        </inputValues>
      </input>

      <!-- Input 3: Ultrassonografia Confirmando Colelitiase -->
      <input id="Input_usAbdominal" label="USG Abdominal com Colelitiase">
        <inputExpression id="InputExpr_usAbdominal" typeRef="boolean">
          <text>usgAbdominalPositivo</text>
        </inputExpression>
      </input>

      <!-- Input 4: Risco Cirurgico (ASA) -->
      <input id="Input_riscoCirurgico" label="Classificacao de Risco Cirurgico (ASA)">
        <inputExpression id="InputExpr_riscoCirurgico" typeRef="string">
          <text>riscoCirurgico</text>
        </inputExpression>
        <inputValues id="InputValues_riscoCirurgico">
          <text>"ASA_I","ASA_II","ASA_III","ASA_IV","ASA_V"</text>
        </inputValues>
      </input>

      <!-- Input 5: Laudo de Indicacao -->
      <input id="Input_laudoIndicacao" label="Laudo de Indicacao Cirurgica Anexado">
        <inputExpression id="InputExpr_laudoIndicacao" typeRef="boolean">
          <text>laudoIndicacao</text>
        </inputExpression>
      </input>

      <!-- Output 1: Resultado -->
      <output id="Output_resultado" label="Resultado" name="resultado" typeRef="string">
        <outputValues id="OutputValues_resultado">
          <text>"Aprovado","Reprovado","Pendente"</text>
        </outputValues>
      </output>

      <!-- Output 2: Observacao -->
      <output id="Output_observacao" label="Observacao Clinica" name="observacao" typeRef="string" />

      <!-- Output 3: Fundamentacao -->
      <output id="Output_fundamentacao" label="Fundamentacao Legal/Tecnica" name="fundamentacao" typeRef="string" />

      <!-- Output 4: Alertas Desperdicio -->
      <output id="Output_alertasDesperdicio" label="Alertas de Desperdicio" name="alertasDesperdicio" typeRef="string">
        <outputValues id="OutputValues_alertasDesperdicio">
          <text>"NENHUM","DUP","FREQ","ESC","DOC","PROT","MULTI"</text>
        </outputValues>
      </output>

      <!-- Output 5: Acao Recomendada -->
      <output id="Output_acaoRecomendada" label="Acao Recomendada" name="acaoRecomendada" typeRef="string">
        <outputValues id="OutputValues_acaoRecomendada">
          <text>"APROVAR","NEGAR","SOLICITAR_INFO","AGUARDAR_PRAZO","SUGERIR_ALTERNATIVA"</text>
        </outputValues>
      </output>

      <!-- ============================================== -->
      <!-- REGRAS DE REPROVACAO (PRIMEIRA PRIORIDADE)    -->
      <!-- ============================================== -->

      <rule id="Rule_GEN_HEP_001_Reprovado_ASA_V">
        <description>Reprovado - Risco cirurgico ASA V proibitivo sem urgencia</description>
        <inputEntry id="IE_Rep1_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep1_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep1_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep1_4"><text>"ASA_V"</text></inputEntry>
        <inputEntry id="IE_Rep1_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Rep1_1"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OE_Rep1_2"><text>"Paciente classificado ASA V apresenta risco cirurgico proibitivo. Procedimento eletivo contraindicado - considerar apenas em emergencia absoluta."</text></outputEntry>
        <outputEntry id="OE_Rep1_3"><text>"ASA Classification Guidelines - Risco Cirurgico Proibitivo"</text></outputEntry>
      <outputEntry id="OE_GEN_HEP_001_Reprovado_ASA_V_4"><text>"PROT"</text></outputEntry>
        <outputEntry id="OE_GEN_HEP_001_Reprovado_ASA_V_5"><text>"NEGAR"</text></outputEntry>
      </rule>

      <rule id="Rule_GEN_HEP_001_Reprovado_SemLaudo">
        <description>Reprovado - Ausencia de laudo de indicacao cirurgica</description>
        <inputEntry id="IE_Rep2_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep2_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep2_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep2_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep2_5"><text>false</text></inputEntry>
        <outputEntry id="OE_Rep2_1"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OE_Rep2_2"><text>"Laudo de indicacao cirurgica com justificativa clinica detalhada e obrigatorio para autorizacao do procedimento."</text></outputEntry>
        <outputEntry id="OE_Rep2_3"><text>"RN 465/2021 Art. 5 - Documentacao Minima Obrigatoria"</text></outputEntry>
      <outputEntry id="OE_GEN_HEP_001_Reprovado_SemLaudo_4"><text>"PROT"</text></outputEntry>
        <outputEntry id="OE_GEN_HEP_001_Reprovado_SemLaudo_5"><text>"NEGAR"</text></outputEntry>
      </rule>

      <rule id="Rule_GEN_HEP_001_Reprovado_SemUSG">
        <description>Reprovado - Ausencia de confirmacao ultrassonografica</description>
        <inputEntry id="IE_Rep3_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep3_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep3_3"><text>false</text></inputEntry>
        <inputEntry id="IE_Rep3_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep3_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Rep3_1"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OE_Rep3_2"><text>"Ultrassonografia abdominal confirmando colelitiase e requisito obrigatorio para indicacao de colecistectomia."</text></outputEntry>
        <outputEntry id="OE_Rep3_3"><text>"SAGES 2023 - Diagnostic Criteria for Cholecystectomy"</text></outputEntry>
      <outputEntry id="OE_GEN_HEP_001_Reprovado_SemUSG_4"><text>"PROT"</text></outputEntry>
        <outputEntry id="OE_GEN_HEP_001_Reprovado_SemUSG_5"><text>"NEGAR"</text></outputEntry>
      </rule>

      <rule id="Rule_GEN_HEP_001_Reprovado_Assintomatico">
        <description>Reprovado - Paciente assintomatico sem indicacao especifica</description>
        <inputEntry id="IE_Rep4_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep4_2"><text>"Assintomatico"</text></inputEntry>
        <inputEntry id="IE_Rep4_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep4_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep4_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Rep4_1"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OE_Rep4_2"><text>"Colelitiase assintomatica nao tem indicacao de colecistectomia eletiva, exceto em casos especificos (anemia falciforme, vesicula em porcelana, calculos grandes). Documentar indicacao especifica se aplicavel."</text></outputEntry>
        <outputEntry id="OE_Rep4_3"><text>"SAGES 2023 - Asymptomatic Gallstones Management"</text></outputEntry>
      <outputEntry id="OE_GEN_HEP_001_Reprovado_Assintomatico_4"><text>"PROT"</text></outputEntry>
        <outputEntry id="OE_GEN_HEP_001_Reprovado_Assintomatico_5"><text>"NEGAR"</text></outputEntry>
      </rule>

      <!-- ============================================== -->
      <!-- REGRAS DE APROVACAO                           -->
      <!-- ============================================== -->

      <rule id="Rule_GEN_HEP_001_Aprovado_ColicaBiliar">
        <description>Aprovado - Colica biliar recorrente documentada</description>
        <inputEntry id="IE_Apr1_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr1_2"><text>"Colica_Biliar_Recorrente"</text></inputEntry>
        <inputEntry id="IE_Apr1_3"><text>true</text></inputEntry>
        <inputEntry id="IE_Apr1_4"><text>"ASA_I","ASA_II","ASA_III","ASA_IV"</text></inputEntry>
        <inputEntry id="IE_Apr1_5"><text>true</text></inputEntry>
        <outputEntry id="OE_Apr1_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Apr1_2"><text>"Colelitiase sintomatica com colica biliar recorrente documentada. Indicacao cirurgica validada conforme diretrizes SAGES 2023."</text></outputEntry>
        <outputEntry id="OE_Apr1_3"><text>"SAGES 2023 / CBC 2022 - Symptomatic Cholelithiasis"</text></outputEntry>
      <outputEntry id="OE_GEN_HEP_001_Aprovado_ColicaBiliar_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_GEN_HEP_001_Aprovado_ColicaBiliar_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <rule id="Rule_GEN_HEP_001_Aprovado_PancreatiteBiliar">
        <description>Aprovado - Historico de pancreatite biliar</description>
        <inputEntry id="IE_Apr2_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr2_2"><text>"Pancreatite_Biliar_Previa"</text></inputEntry>
        <inputEntry id="IE_Apr2_3"><text>true</text></inputEntry>
        <inputEntry id="IE_Apr2_4"><text>"ASA_I","ASA_II","ASA_III","ASA_IV"</text></inputEntry>
        <inputEntry id="IE_Apr2_5"><text>true</text></inputEntry>
        <outputEntry id="OE_Apr2_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Apr2_2"><text>"Historico de pancreatite biliar indica colecistectomia para prevencao de recorrencia. Prioridade elevada conforme diretrizes."</text></outputEntry>
        <outputEntry id="OE_Apr2_3"><text>"SAGES 2023 / IAP Guidelines - Post-Biliary Pancreatitis Cholecystectomy"</text></outputEntry>
      <outputEntry id="OE_GEN_HEP_001_Aprovado_PancreatiteBiliar_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_GEN_HEP_001_Aprovado_PancreatiteBiliar_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <rule id="Rule_GEN_HEP_001_Aprovado_Colangite">
        <description>Aprovado - Historico de colangite</description>
        <inputEntry id="IE_Apr3_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr3_2"><text>"Colangite_Previa"</text></inputEntry>
        <inputEntry id="IE_Apr3_3"><text>true</text></inputEntry>
        <inputEntry id="IE_Apr3_4"><text>"ASA_I","ASA_II","ASA_III","ASA_IV"</text></inputEntry>
        <inputEntry id="IE_Apr3_5"><text>true</text></inputEntry>
        <outputEntry id="OE_Apr3_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Apr3_2"><text>"Historico de colangite aguda indica colecistectomia para prevencao de novos episodios. Indicacao cirurgica validada."</text></outputEntry>
        <outputEntry id="OE_Apr3_3"><text>"Tokyo Guidelines 2018 / SAGES 2023 - Post-Cholangitis Cholecystectomy"</text></outputEntry>
      <outputEntry id="OE_GEN_HEP_001_Aprovado_Colangite_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_GEN_HEP_001_Aprovado_Colangite_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <rule id="Rule_GEN_HEP_001_Aprovado_Colecistite">
        <description>Aprovado - Historico de colecistite</description>
        <inputEntry id="IE_Apr4_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr4_2"><text>"Colecistite_Previa"</text></inputEntry>
        <inputEntry id="IE_Apr4_3"><text>true</text></inputEntry>
        <inputEntry id="IE_Apr4_4"><text>"ASA_I","ASA_II","ASA_III","ASA_IV"</text></inputEntry>
        <inputEntry id="IE_Apr4_5"><text>true</text></inputEntry>
        <outputEntry id="OE_Apr4_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Apr4_2"><text>"Historico de colecistite aguda indica colecistectomia intervalar para prevencao de recorrencia. Indicacao validada."</text></outputEntry>
        <outputEntry id="OE_Apr4_3"><text>"SAGES 2023 - Interval Cholecystectomy Post-Cholecystitis"</text></outputEntry>
      <outputEntry id="OE_GEN_HEP_001_Aprovado_Colecistite_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_GEN_HEP_001_Aprovado_Colecistite_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <!-- ============================================== -->
      <!-- REGRA DE PENDENCIA                            -->
      <!-- ============================================== -->

      <rule id="Rule_GEN_HEP_001_Pendente_SintomaNaoDocumentado">
        <description>Pendente - Sintomatologia nao adequadamente documentada</description>
        <inputEntry id="IE_Pend1_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Pend1_2"><text>"Nao_Documentado"</text></inputEntry>
        <inputEntry id="IE_Pend1_3"><text>true</text></inputEntry>
        <inputEntry id="IE_Pend1_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Pend1_5"><text>true</text></inputEntry>
        <outputEntry id="OE_Pend1_1"><text>"Pendente"</text></outputEntry>
        <outputEntry id="OE_Pend1_2"><text>"Sintomatologia nao adequadamente documentada. Anexar historico clinico detalhando episodios de colica biliar, frequencia e caracteristicas."</text></outputEntry>
        <outputEntry id="OE_Pend1_3"><text>"SAGES 2023 - Documentation Requirements"</text></outputEntry>
      <outputEntry id="OE_GEN_HEP_001_Pendente_SintomaNaoDocumentado_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_GEN_HEP_001_Pendente_SintomaNaoDocumentado_5"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>

      <!-- ============================================== -->
      <!-- REGRA FALLBACK                                -->
      <!-- ============================================== -->

      <rule id="Rule_GEN_HEP_001_Fallback">
        <description>Fallback - Caso requer analise manual</description>
        <inputEntry id="IE_Fallback_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Fallback_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Fallback_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Fallback_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Fallback_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Fallback_1"><text>"Pendente"</text></outputEntry>
        <outputEntry id="OE_Fallback_2"><text>"Caso requer analise manual por auditor medico especializado. Criterios de autorizacao automatica nao atendidos."</text></outputEntry>
        <outputEntry id="OE_Fallback_3"><text>"Processo de auditoria medica especializada conforme RN 428/2017"</text></outputEntry>
      <outputEntry id="OE_GEN_HEP_001_Fallback_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_GEN_HEP_001_Fallback_5"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>

    </decisionTable>
  </decision>
</definitions>
