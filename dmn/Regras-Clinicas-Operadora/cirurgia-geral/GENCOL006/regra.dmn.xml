<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="https://www.omg.org/spec/DMN/20191111/MODEL/"
             xmlns:dmndi="https://www.omg.org/spec/DMN/20191111/DMNDI/"
             xmlns:dc="http://www.omg.org/spec/DD/20100524/DC/"
             xmlns:di="http://www.omg.org/spec/DD/20100524/DI/"
             id="Definitions_GEN_COL_006"
             name="Fistula Anal - Classificacao de Parks"
             namespace="http://camunda.org/schema/1.0/dmn"
             exporter="Camunda Modeler"
             exporterVersion="5.0.0">
  <!--
    GEN-COL-006 - Fistula Anal - Criterios pela Classificacao de Parks
    Versao: 1.0.0 (2026-02-07)
    Especialidade: Cirurgia Geral - Coloproctologia
    Categoria: Procedimentos Cirurgicos

    Classificacao de Parks:
    - Interesfincteriana: Entre esfincter interno e externo
    - Transesfincteriana: Atravessa esfincter externo
    - Supraesfincteriana: Passa sobre esfincter externo
    - Extraesfincteriana: Fora do complexo esfincteriano

    Fatores Complicadores:
    - Fistula ramificada
    - Fistula em ferradura
    - Doenca de Crohn associada
    - Fistulas recorrentes

    Opcoes Terapeuticas:
    - Fistulotomia: Fistulas simples, baixas
    - Seton: Fistulas altas, complexas
    - LIFT: Transesfincteriana
    - Flap de avanco: Fistulas complexas
    - Cola de fibrina/plugs: Alternativas menos invasivas

    Documentacao Obrigatoria:
    - RNM pelve ou US endoanal
    - Classificacao de Parks
    - Avaliacaco de funcao esfincter

    Referencias Normativas:
    - ASCRS Clinical Practice Guidelines 2016
    - ESCP Fistula-in-Ano Guidelines 2020
  -->

  <decision id="Decision_GEN_COL_006" name="Criterios de Autorizacao - Fistula Anal">
    <decisionTable id="DecisionTable_GEN_COL_006" hitPolicy="FIRST">

      <!-- Input 1: Classificacao Parks -->
      <input id="Input_parks" label="Classificacao de Parks">
        <inputExpression id="InputExpr_parks" typeRef="string">
          <text>classificacaoParks</text>
        </inputExpression>
        <inputValues id="InputValues_parks">
          <text>"Interesfincteriana","Transesfincteriana","Supraesfincteriana","Extraesfincteriana","Nao_Classificada"</text>
        </inputValues>
      </input>

      <!-- Input 2: Complexidade -->
      <input id="Input_complexidade" label="Complexidade">
        <inputExpression id="InputExpr_complexidade" typeRef="string">
          <text>complexidade</text>
        </inputExpression>
        <inputValues id="InputValues_complexidade">
          <text>"Simples","Ramificada","Ferradura","Recorrente"</text>
        </inputValues>
      </input>

      <!-- Input 3: Imagem (RNM/US) -->
      <input id="Input_imagem" label="RNM Pelve ou US Endoanal">
        <inputExpression id="InputExpr_imagem" typeRef="boolean">
          <text>imagemRealizada</text>
        </inputExpression>
      </input>

      <!-- Input 4: Doenca de Crohn -->
      <input id="Input_crohn" label="Doenca de Crohn Associada">
        <inputExpression id="InputExpr_crohn" typeRef="boolean">
          <text>doencaCrohn</text>
        </inputExpression>
      </input>

      <!-- Input 5: Laudo de Indicacao -->
      <input id="Input_laudoIndicacao" label="Laudo de Indicacao">
        <inputExpression id="InputExpr_laudoIndicacao" typeRef="boolean">
          <text>laudoIndicacao</text>
        </inputExpression>
      </input>

      <!-- Output 1: Resultado -->
      <output id="Output_resultado" label="Resultado" name="resultado" typeRef="string">
        <outputValues id="OutputValues_resultado">
          <text>"Aprovado","Reprovado","Pendente"</text>
        </outputValues>
      </output>

      <!-- Output 2: Observacao -->
      <output id="Output_observacao" label="Observacao Clinica" name="observacao" typeRef="string" />

      <!-- Output 3: Fundamentacao -->
      <output id="Output_fundamentacao" label="Fundamentacao" name="fundamentacao" typeRef="string" />

      <!-- Output 4: Alertas Desperdicio -->
      <output id="Output_alertasDesperdicio" label="Alertas de Desperdicio" name="alertasDesperdicio" typeRef="string">
        <outputValues id="OutputValues_alertasDesperdicio">
          <text>"NENHUM","DUP","FREQ","ESC","DOC","PROT","MULTI"</text>
        </outputValues>
      </output>

      <!-- Output 5: Acao Recomendada -->
      <output id="Output_acaoRecomendada" label="Acao Recomendada" name="acaoRecomendada" typeRef="string">
        <outputValues id="OutputValues_acaoRecomendada">
          <text>"APROVAR","NEGAR","SOLICITAR_INFO","AGUARDAR_PRAZO","SUGERIR_ALTERNATIVA"</text>
        </outputValues>
      </output>

      <!-- REGRAS DE REPROVACAO -->

      <rule id="Rule_GEN_COL_006_Reprovado_SemImagem">
        <description>Reprovado - Sem imagem para fistula complexa</description>
        <inputEntry id="IE_Rep1_1"><text>"Transesfincteriana","Supraesfincteriana","Extraesfincteriana"</text></inputEntry>
        <inputEntry id="IE_Rep1_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep1_3"><text>false</text></inputEntry>
        <inputEntry id="IE_Rep1_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep1_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Rep1_1"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OE_Rep1_2"><text>"RNM de pelve ou US endoanal obrigatoria para fistulas complexas (trans/supra/extraesfincteriana). Necessario para planejamento cirurgico."</text></outputEntry>
        <outputEntry id="OE_Rep1_3"><text>"ASCRS 2016 - Imaging for Complex Fistula"</text></outputEntry>
      <outputEntry id="OE_GEN_COL_006_Reprovado_SemImagem_4"><text>"PROT"</text></outputEntry>
        <outputEntry id="OE_GEN_COL_006_Reprovado_SemImagem_5"><text>"NEGAR"</text></outputEntry>
      </rule>

      <rule id="Rule_GEN_COL_006_Reprovado_SemLaudo">
        <description>Reprovado - Sem laudo de indicacao</description>
        <inputEntry id="IE_Rep2_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep2_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep2_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep2_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep2_5"><text>false</text></inputEntry>
        <outputEntry id="OE_Rep2_1"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OE_Rep2_2"><text>"Laudo de indicacao obrigatorio com classificacao de Parks, trajeto da fistula e tecnica cirurgica proposta."</text></outputEntry>
        <outputEntry id="OE_Rep2_3"><text>"RN 465/2021 - Documentacao Obrigatoria"</text></outputEntry>
      <outputEntry id="OE_GEN_COL_006_Reprovado_SemLaudo_4"><text>"PROT"</text></outputEntry>
        <outputEntry id="OE_GEN_COL_006_Reprovado_SemLaudo_5"><text>"NEGAR"</text></outputEntry>
      </rule>

      <!-- REGRAS DE APROVACAO -->

      <rule id="Rule_GEN_COL_006_Aprovado_Simples">
        <description>Aprovado - Fistula simples interesfincteriana</description>
        <inputEntry id="IE_Apr1_1"><text>"Interesfincteriana"</text></inputEntry>
        <inputEntry id="IE_Apr1_2"><text>"Simples"</text></inputEntry>
        <inputEntry id="IE_Apr1_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr1_4"><text>false</text></inputEntry>
        <inputEntry id="IE_Apr1_5"><text>true</text></inputEntry>
        <outputEntry id="OE_Apr1_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Apr1_2"><text>"Fistula interesfincteriana simples - fistulotomia aprovada. Baixo risco de incontinencia. Imagem opcional para fistulas simples."</text></outputEntry>
        <outputEntry id="OE_Apr1_3"><text>"ASCRS 2016 - Simple Fistulotomy"</text></outputEntry>
      <outputEntry id="OE_GEN_COL_006_Aprovado_Simples_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_GEN_COL_006_Aprovado_Simples_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <rule id="Rule_GEN_COL_006_Aprovado_Transesfincteriana">
        <description>Aprovado - Fistula transesfincteriana com imagem</description>
        <inputEntry id="IE_Apr2_1"><text>"Transesfincteriana"</text></inputEntry>
        <inputEntry id="IE_Apr2_2"><text>"Simples","Ramificada"</text></inputEntry>
        <inputEntry id="IE_Apr2_3"><text>true</text></inputEntry>
        <inputEntry id="IE_Apr2_4"><text>false</text></inputEntry>
        <inputEntry id="IE_Apr2_5"><text>true</text></inputEntry>
        <outputEntry id="OE_Apr2_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Apr2_2"><text>"Fistula transesfincteriana - considerar LIFT, seton ou flap de avanco conforme volume muscular envolvido. Preservar funcao esfincteriana."</text></outputEntry>
        <outputEntry id="OE_Apr2_3"><text>"ASCRS 2016 - Transsphincteric Fistula Treatment"</text></outputEntry>
      <outputEntry id="OE_GEN_COL_006_Aprovado_Transesfincteriana_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_GEN_COL_006_Aprovado_Transesfincteriana_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <rule id="Rule_GEN_COL_006_Aprovado_Complexa">
        <description>Aprovado - Fistula complexa com documentacao</description>
        <inputEntry id="IE_Apr3_1"><text>"Supraesfincteriana","Extraesfincteriana"</text></inputEntry>
        <inputEntry id="IE_Apr3_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr3_3"><text>true</text></inputEntry>
        <inputEntry id="IE_Apr3_4"><text>false</text></inputEntry>
        <inputEntry id="IE_Apr3_5"><text>true</text></inputEntry>
        <outputEntry id="OE_Apr3_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Apr3_2"><text>"Fistula complexa (supra/extraesfincteriana) - tratamento estagiado aprovado. Seton de drenagem seguido de reparo definitivo. Centro de referencia recomendado."</text></outputEntry>
        <outputEntry id="OE_Apr3_3"><text>"ASCRS 2016 - Complex Fistula Staged Treatment"</text></outputEntry>
      <outputEntry id="OE_GEN_COL_006_Aprovado_Complexa_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_GEN_COL_006_Aprovado_Complexa_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <!-- REGRAS DE PENDENCIA -->

      <rule id="Rule_GEN_COL_006_Pendente_Crohn">
        <description>Pendente - Fistula em Crohn requer avaliacao multidisciplinar</description>
        <inputEntry id="IE_Pend1_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Pend1_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Pend1_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Pend1_4"><text>true</text></inputEntry>
        <inputEntry id="IE_Pend1_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Pend1_1"><text>"Pendente"</text></outputEntry>
        <outputEntry id="OE_Pend1_2"><text>"Fistula perianal em Crohn requer avaliacao multidisciplinar (coloproctologia + gastroenterologia). Otimizar tratamento clinico antes de cirurgia."</text></outputEntry>
        <outputEntry id="OE_Pend1_3"><text>"ECCO Guidelines - Crohn's Perianal Disease"</text></outputEntry>
      <outputEntry id="OE_GEN_COL_006_Pendente_Crohn_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_GEN_COL_006_Pendente_Crohn_5"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>

      <rule id="Rule_GEN_COL_006_Pendente_Ferradura">
        <description>Pendente - Fistula em ferradura requer planejamento</description>
        <inputEntry id="IE_Pend2_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Pend2_2"><text>"Ferradura"</text></inputEntry>
        <inputEntry id="IE_Pend2_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Pend2_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Pend2_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Pend2_1"><text>"Pendente"</text></outputEntry>
        <outputEntry id="OE_Pend2_2"><text>"Fistula em ferradura - RNM obrigatoria para mapeamento completo. Tratamento estagiado geralmente necessario. Anexar imagem e plano cirurgico."</text></outputEntry>
        <outputEntry id="OE_Pend2_3"><text>"ASCRS 2016 - Horseshoe Fistula Imaging"</text></outputEntry>
      <outputEntry id="OE_GEN_COL_006_Pendente_Ferradura_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_GEN_COL_006_Pendente_Ferradura_5"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>

      <rule id="Rule_GEN_COL_006_Pendente_NaoClassificada">
        <description>Pendente - Classificacao de Parks nao informada</description>
        <inputEntry id="IE_Pend3_1"><text>"Nao_Classificada"</text></inputEntry>
        <inputEntry id="IE_Pend3_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Pend3_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Pend3_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Pend3_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Pend3_1"><text>"Pendente"</text></outputEntry>
        <outputEntry id="OE_Pend3_2"><text>"Classificacao de Parks obrigatoria para definicao de conduta. Realizar exame sob anestesia ou RNM para classificacao."</text></outputEntry>
        <outputEntry id="OE_Pend3_3"><text>"ASCRS 2016 - Parks Classification Required"</text></outputEntry>
      <outputEntry id="OE_GEN_COL_006_Pendente_NaoClassificada_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_GEN_COL_006_Pendente_NaoClassificada_5"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>

      <!-- REGRA FALLBACK -->

      <rule id="Rule_GEN_COL_006_Fallback">
        <description>Fallback - Analise especializada</description>
        <inputEntry id="IE_Fallback_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Fallback_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Fallback_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Fallback_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Fallback_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Fallback_1"><text>"Pendente"</text></outputEntry>
        <outputEntry id="OE_Fallback_2"><text>"Caso de fistula anal requer analise por auditor medico coloproctologista."</text></outputEntry>
        <outputEntry id="OE_Fallback_3"><text>"Auditoria cirurgica - RN 428/2017"</text></outputEntry>
      <outputEntry id="OE_GEN_COL_006_Fallback_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_GEN_COL_006_Fallback_5"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>

    </decisionTable>
  </decision>
</definitions>
