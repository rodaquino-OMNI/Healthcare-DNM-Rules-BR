<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="https://www.omg.org/spec/DMN/20191111/MODEL/"
             xmlns:camunda="http://camunda.org/schema/1.0/dmn"
             id="Definitions_GEN_END_003"
             name="Paratireoidectomia - Hiperparatireoidismo Primario"
             namespace="http://camunda.org/schema/1.0/dmn">

  <!--
    ===============================================================================
    CODIGO: GEN-END-003
    Procedimento: Paratireoidectomia por Hiperparatireoidismo Primario
    Especialidade: Cirurgia Geral - Cirurgia Endocrina
    Versao: 3.0.0-TIER1
    Data: 2026-02-07
    ===============================================================================

    INDICACOES CIRURGICAS (Fourth International Workshop):
    - HPT primario sintomatico (nefrolitiase, osteoporose, fraturas)
    - Calcio serico > 1 mg/dL acima do limite superior
    - Idade < 50 anos
    - Clearance de creatinina < 60 mL/min
    - T-score < -2.5 em qualquer sitio
    - Fratura vertebral

    CONTRAINDICACOES RELATIVAS:
    - HPT primario assintomatico sem criterios de Fourth Workshop
    - Risco cirurgico proibitivo

    REFERENCIAS TECNICAS:
    - Fourth International Workshop on Asymptomatic Primary HPT 2014
    - AAES Guidelines 2016
    - SBEM Guidelines 2023

    ===============================================================================
  -->

  <decision id="Decision_GEN_END_003" name="Regra Clinica - Paratireoidectomia HPT Primario">
    <decisionTable id="DecisionTable_GEN_END_003" hitPolicy="FIRST">

      <!-- ========== INPUTS (5) ========== -->

      <input id="Input_calcioSerico" label="Calcio Serico Acima do LSN (mg/dL)" camunda:inputVariable="calcioSerico">
        <inputExpression id="InputExpression_calcioSerico" typeRef="number">
          <text>calcioSerico</text>
        </inputExpression>
      </input>

      <input id="Input_sintomasOsseos" label="Manifestacoes Osseas" camunda:inputVariable="sintomasOsseos">
        <inputExpression id="InputExpression_sintomasOsseos" typeRef="string">
          <text>sintomasOsseos</text>
        </inputExpression>
        <inputValues id="InputValues_sintomasOsseos">
          <text>"FraturaVertebral","Osteoporose","Osteopenia","Normal"</text>
        </inputValues>
      </input>

      <input id="Input_tScore" label="T-Score mais Baixo" camunda:inputVariable="tScore">
        <inputExpression id="InputExpression_tScore" typeRef="number">
          <text>tScore</text>
        </inputExpression>
      </input>

      <input id="Input_funcaoRenal" label="Clearance de Creatinina (mL/min)" camunda:inputVariable="funcaoRenal">
        <inputExpression id="InputExpression_funcaoRenal" typeRef="number">
          <text>funcaoRenal</text>
        </inputExpression>
      </input>

      <input id="Input_nefrolitiase" label="Nefrolitiase Documentada" camunda:inputVariable="nefrolitiase">
        <inputExpression id="InputExpression_nefrolitiase" typeRef="boolean">
          <text>nefrolitiase</text>
        </inputExpression>
      </input>

      <!-- ========== OUTPUTS (3) ========== -->

      <output id="Output_resultado" label="Resultado" name="resultado" typeRef="string">
        <outputValues id="OutputValues_resultado">
          <text>"Aprovado","Reprovado","Pendente"</text>
        </outputValues>
      </output>

      <output id="Output_observacao" label="Observacao Clinica" name="observacao" typeRef="string" />

      <output id="Output_fundamentacao" label="Fundamentacao Tecnica" name="fundamentacao" typeRef="string" />

      <!-- Output 4: Alertas Desperdicio -->
      <output id="Output_alertasDesperdicio" label="Alertas de Desperdicio" name="alertasDesperdicio" typeRef="string">
        <outputValues id="OutputValues_alertasDesperdicio">
          <text>"NENHUM","DUP","FREQ","ESC","DOC","PROT","MULTI"</text>
        </outputValues>
      </output>

      <!-- Output 5: Acao Recomendada -->
      <output id="Output_acaoRecomendada" label="Acao Recomendada" name="acaoRecomendada" typeRef="string">
        <outputValues id="OutputValues_acaoRecomendada">
          <text>"APROVAR","NEGAR","SOLICITAR_INFO","AGUARDAR_PRAZO","SUGERIR_ALTERNATIVA"</text>
        </outputValues>
      </output>

      <!-- ========== REGRAS DE REPROVACAO ========== -->

      <rule id="Rule_Reprovado_Assintomatico">
        <description>Reprovado: HPT assintomatico sem criterios de cirurgia</description>
        <inputEntry id="IE_Rep1_1"><text>&lt; 1</text></inputEntry>
        <inputEntry id="IE_Rep1_2"><text>"Normal","Osteopenia"</text></inputEntry>
        <inputEntry id="IE_Rep1_3"><text>&gt; -2.5</text></inputEntry>
        <inputEntry id="IE_Rep1_4"><text>&gt;= 60</text></inputEntry>
        <inputEntry id="IE_Rep1_5"><text>false</text></inputEntry>
        <outputEntry id="OE_Rep1_1"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OE_Rep1_2"><text>"HPT primario assintomatico sem criterios para cirurgia - seguimento clinico"</text></outputEntry>
        <outputEntry id="OE_Rep1_3"><text>"Fourth Workshop 2014 - Observacao se nao preenche criterios cirurgicos"</text></outputEntry>
      <outputEntry id="OE_Reprovado_Assintomatico_4"><text>"PROT"</text></outputEntry>
        <outputEntry id="OE_Reprovado_Assintomatico_5"><text>"NEGAR"</text></outputEntry>
      </rule>

      <!-- ========== REGRAS DE APROVACAO ========== -->

      <rule id="Rule_Aprovado_Nefrolitiase">
        <description>Aprovado: Nefrolitiase por HPT</description>
        <inputEntry id="IE_Apr1_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr1_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr1_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr1_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr1_5"><text>true</text></inputEntry>
        <outputEntry id="OE_Apr1_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Apr1_2"><text>"Nefrolitiase por HPT primario - paratireoidectomia indicada"</text></outputEntry>
        <outputEntry id="OE_Apr1_3"><text>"Fourth Workshop 2014 - Nefrolitiase e indicacao formal de cirurgia"</text></outputEntry>
      <outputEntry id="OE_Aprovado_Nefrolitiase_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Aprovado_Nefrolitiase_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <rule id="Rule_Aprovado_HipercalcemiaSevera">
        <description>Aprovado: Hipercalcemia significativa</description>
        <inputEntry id="IE_Apr2_1"><text>&gt;= 1</text></inputEntry>
        <inputEntry id="IE_Apr2_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr2_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr2_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr2_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Apr2_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Apr2_2"><text>"Calcio &gt; 1 mg/dL acima do LSN - paratireoidectomia indicada"</text></outputEntry>
        <outputEntry id="OE_Apr2_3"><text>"Fourth Workshop 2014 - Hipercalcemia significativa e criterio cirurgico"</text></outputEntry>
      <outputEntry id="OE_Aprovado_HipercalcemiaSevera_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Aprovado_HipercalcemiaSevera_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <rule id="Rule_Aprovado_Osteoporose">
        <description>Aprovado: Osteoporose significativa</description>
        <inputEntry id="IE_Apr3_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr3_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr3_3"><text>&lt;= -2.5</text></inputEntry>
        <inputEntry id="IE_Apr3_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr3_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Apr3_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Apr3_2"><text>"T-score &lt;= -2.5 por HPT primario - paratireoidectomia indicada"</text></outputEntry>
        <outputEntry id="OE_Apr3_3"><text>"Fourth Workshop 2014 - Osteoporose densitometrica e criterio"</text></outputEntry>
      <outputEntry id="OE_Aprovado_Osteoporose_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Aprovado_Osteoporose_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <rule id="Rule_Aprovado_FraturaVertebral">
        <description>Aprovado: Fratura vertebral por fragilidade</description>
        <inputEntry id="IE_Apr4_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr4_2"><text>"FraturaVertebral"</text></inputEntry>
        <inputEntry id="IE_Apr4_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr4_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr4_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Apr4_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Apr4_2"><text>"Fratura vertebral por fragilidade - paratireoidectomia indicada"</text></outputEntry>
        <outputEntry id="OE_Apr4_3"><text>"Fourth Workshop 2014 - Fratura vertebral e indicacao absoluta"</text></outputEntry>
      <outputEntry id="OE_Aprovado_FraturaVertebral_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Aprovado_FraturaVertebral_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <rule id="Rule_Aprovado_InsuficienciaRenal">
        <description>Aprovado: Insuficiencia renal associada</description>
        <inputEntry id="IE_Apr5_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr5_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr5_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr5_4"><text>&lt; 60</text></inputEntry>
        <inputEntry id="IE_Apr5_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Apr5_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Apr5_2"><text>"Clearance &lt; 60 mL/min com HPT primario - paratireoidectomia indicada"</text></outputEntry>
        <outputEntry id="OE_Apr5_3"><text>"Fourth Workshop 2014 - Comprometimento renal e criterio cirurgico"</text></outputEntry>
      <outputEntry id="OE_Aprovado_InsuficienciaRenal_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Aprovado_InsuficienciaRenal_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <!-- ========== REGRA FALLBACK ========== -->

      <rule id="Rule_Fallback_GEN_END_003">
        <description>Pendente: Avaliacao de criterios do Fourth Workshop</description>
        <inputEntry id="IE_FB_1"><text>-</text></inputEntry>
        <inputEntry id="IE_FB_2"><text>-</text></inputEntry>
        <inputEntry id="IE_FB_3"><text>-</text></inputEntry>
        <inputEntry id="IE_FB_4"><text>-</text></inputEntry>
        <inputEntry id="IE_FB_5"><text>-</text></inputEntry>
        <outputEntry id="OE_FB_1"><text>"Pendente"</text></outputEntry>
        <outputEntry id="OE_FB_2"><text>"Revisar criterios do Fourth International Workshop e documentacao completa"</text></outputEntry>
        <outputEntry id="OE_FB_3"><text>"AAES 2016 - Indicacao cirurgica baseada em criterios especificos"</text></outputEntry>
      <outputEntry id="OE_Fallback_GEN_END_003_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Fallback_GEN_END_003_5"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>

    </decisionTable>
  </decision>
</definitions>
