<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="https://www.omg.org/spec/DMN/20191111/MODEL/"
             xmlns:dmndi="https://www.omg.org/spec/DMN/20191111/DMNDI/"
             xmlns:dc="http://www.omg.org/spec/DD/20100524/DC/"
             xmlns:di="http://www.omg.org/spec/DD/20100524/DI/"
             id="Definitions_GEN_COL_005"
             name="Hemorroidectomia - Grau III-IV"
             namespace="http://camunda.org/schema/1.0/dmn"
             exporter="Camunda Modeler"
             exporterVersion="5.0.0">
  <!--
    GEN-COL-005 - Hemorroidectomia - Criterios para Grau III-IV
    Versao: 1.0.0 (2026-02-07)
    Especialidade: Cirurgia Geral - Coloproctologia
    Categoria: Procedimentos Cirurgicos

    Classificacao de Goligher:
    - Grau I: Sangramento sem prolapso
    - Grau II: Prolapso com reducao espontanea
    - Grau III: Prolapso com reducao manual
    - Grau IV: Prolapso irredutivel

    Indicacoes Cirurgicas (ASCRS 2018):
    - Grau III: Apos falha de tratamento conservador/ambulatorial
    - Grau IV: Indicacao primaria de cirurgia
    - Hemorroidas trombosadas extensas
    - Hemorroidas mistas volumosas

    Tratamentos Alternativos:
    - Ligadura elastica: Grau I-II, alguns III
    - Escleroterapia: Grau I-II
    - HAL-RAR: Grau II-III

    Tecnicas Cirurgicas:
    - Milligan-Morgan (aberta)
    - Ferguson (fechada)
    - PPH (grampeada) - Grau III selecionado
    - THD (desarterizacao)

    Documentacao Obrigatoria:
    - Proctoscopia/Retossigmoidoscopia
    - Classificacao de Goligher
    - Tratamentos previos

    Referencias Normativas:
    - ASCRS Clinical Practice Guidelines 2018
    - ESCP Guidelines Hemorrhoidal Disease 2020
  -->

  <decision id="Decision_GEN_COL_005" name="Criterios de Autorizacao - Hemorroidectomia">
    <decisionTable id="DecisionTable_GEN_COL_005" hitPolicy="FIRST">

      <!-- Input 1: Classificacao Goligher -->
      <input id="Input_goligher" label="Classificacao de Goligher">
        <inputExpression id="InputExpr_goligher" typeRef="string">
          <text>classificacaoGoligher</text>
        </inputExpression>
        <inputValues id="InputValues_goligher">
          <text>"Grau_I","Grau_II","Grau_III","Grau_IV","Nao_Classificada"</text>
        </inputValues>
      </input>

      <!-- Input 2: Tratamentos Previos -->
      <input id="Input_tratamentosPrevios" label="Tratamentos Previos">
        <inputExpression id="InputExpr_tratamentosPrevios" typeRef="string">
          <text>tratamentosPrevios</text>
        </inputExpression>
        <inputValues id="InputValues_tratamentosPrevios">
          <text>"Nenhum","Conservador","Ligadura_Elastica","Escleroterapia","Multiplos"</text>
        </inputValues>
      </input>

      <!-- Input 3: Proctoscopia -->
      <input id="Input_proctoscopia" label="Proctoscopia/Retossigmoidoscopia">
        <inputExpression id="InputExpr_proctoscopia" typeRef="boolean">
          <text>proctoscopiaRealizada</text>
        </inputExpression>
      </input>

      <!-- Input 4: Complicacoes -->
      <input id="Input_complicacoes" label="Complicacoes">
        <inputExpression id="InputExpr_complicacoes" typeRef="string">
          <text>complicacoes</text>
        </inputExpression>
        <inputValues id="InputValues_complicacoes">
          <text>"Nenhuma","Trombose","Sangramento_Agudo","Estrangulamento","Anemia"</text>
        </inputValues>
      </input>

      <!-- Input 5: Laudo de Indicacao -->
      <input id="Input_laudoIndicacao" label="Laudo de Indicacao">
        <inputExpression id="InputExpr_laudoIndicacao" typeRef="boolean">
          <text>laudoIndicacao</text>
        </inputExpression>
      </input>

      <!-- Output 1: Resultado -->
      <output id="Output_resultado" label="Resultado" name="resultado" typeRef="string">
        <outputValues id="OutputValues_resultado">
          <text>"Aprovado","Reprovado","Pendente"</text>
        </outputValues>
      </output>

      <!-- Output 2: Observacao -->
      <output id="Output_observacao" label="Observacao Clinica" name="observacao" typeRef="string" />

      <!-- Output 3: Fundamentacao -->
      <output id="Output_fundamentacao" label="Fundamentacao" name="fundamentacao" typeRef="string" />

      <!-- Output 4: Alertas Desperdicio -->
      <output id="Output_alertasDesperdicio" label="Alertas de Desperdicio" name="alertasDesperdicio" typeRef="string">
        <outputValues id="OutputValues_alertasDesperdicio">
          <text>"NENHUM","DUP","FREQ","ESC","DOC","PROT","MULTI"</text>
        </outputValues>
      </output>

      <!-- Output 5: Acao Recomendada -->
      <output id="Output_acaoRecomendada" label="Acao Recomendada" name="acaoRecomendada" typeRef="string">
        <outputValues id="OutputValues_acaoRecomendada">
          <text>"APROVAR","NEGAR","SOLICITAR_INFO","AGUARDAR_PRAZO","SUGERIR_ALTERNATIVA"</text>
        </outputValues>
      </output>

      <!-- REGRAS DE REPROVACAO -->

      <rule id="Rule_GEN_COL_005_Reprovado_GrauI_II_SemTratamento">
        <description>Reprovado - Grau I-II sem falha de tratamento conservador</description>
        <inputEntry id="IE_Rep1_1"><text>"Grau_I","Grau_II"</text></inputEntry>
        <inputEntry id="IE_Rep1_2"><text>"Nenhum"</text></inputEntry>
        <inputEntry id="IE_Rep1_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep1_4"><text>"Nenhuma"</text></inputEntry>
        <inputEntry id="IE_Rep1_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Rep1_1"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OE_Rep1_2"><text>"Hemorroidas Grau I-II devem ser tratadas inicialmente com medidas conservadoras e/ou procedimentos ambulatoriais (ligadura elastica)."</text></outputEntry>
        <outputEntry id="OE_Rep1_3"><text>"ASCRS 2018 - Conservative Treatment First"</text></outputEntry>
      <outputEntry id="OE_GEN_COL_005_Reprovado_GrauI_II_SemTratamento_4"><text>"PROT"</text></outputEntry>
        <outputEntry id="OE_GEN_COL_005_Reprovado_GrauI_II_SemTratamento_5"><text>"NEGAR"</text></outputEntry>
      </rule>

      <rule id="Rule_GEN_COL_005_Reprovado_SemProctoscopia">
        <description>Reprovado - Sem proctoscopia</description>
        <inputEntry id="IE_Rep2_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep2_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep2_3"><text>false</text></inputEntry>
        <inputEntry id="IE_Rep2_4"><text>"Nenhuma"</text></inputEntry>
        <inputEntry id="IE_Rep2_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Rep2_1"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OE_Rep2_2"><text>"Proctoscopia ou retossigmoidoscopia obrigatoria para classificacao e exclusao de outras patologias antes de hemorroidectomia."</text></outputEntry>
        <outputEntry id="OE_Rep2_3"><text>"ASCRS 2018 - Endoscopic Evaluation Required"</text></outputEntry>
      <outputEntry id="OE_GEN_COL_005_Reprovado_SemProctoscopia_4"><text>"PROT"</text></outputEntry>
        <outputEntry id="OE_GEN_COL_005_Reprovado_SemProctoscopia_5"><text>"NEGAR"</text></outputEntry>
      </rule>

      <rule id="Rule_GEN_COL_005_Reprovado_SemLaudo">
        <description>Reprovado - Sem laudo de indicacao</description>
        <inputEntry id="IE_Rep3_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep3_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep3_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep3_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep3_5"><text>false</text></inputEntry>
        <outputEntry id="OE_Rep3_1"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OE_Rep3_2"><text>"Laudo de indicacao obrigatorio com classificacao de Goligher, sintomas e tratamentos previos."</text></outputEntry>
        <outputEntry id="OE_Rep3_3"><text>"RN 465/2021 - Documentacao Obrigatoria"</text></outputEntry>
      <outputEntry id="OE_GEN_COL_005_Reprovado_SemLaudo_4"><text>"PROT"</text></outputEntry>
        <outputEntry id="OE_GEN_COL_005_Reprovado_SemLaudo_5"><text>"NEGAR"</text></outputEntry>
      </rule>

      <!-- REGRAS DE APROVACAO -->

      <rule id="Rule_GEN_COL_005_Aprovado_Urgencia">
        <description>Aprovado - Hemorroida complicada (urgencia)</description>
        <inputEntry id="IE_Apr1_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr1_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr1_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr1_4"><text>"Trombose","Estrangulamento","Sangramento_Agudo"</text></inputEntry>
        <inputEntry id="IE_Apr1_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Apr1_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Apr1_2"><text>"URGENCIA - Hemorroida complicada (trombose/estrangulamento/sangramento agudo). Hemorroidectomia de urgencia indicada."</text></outputEntry>
        <outputEntry id="OE_Apr1_3"><text>"ASCRS 2018 - Acute Hemorrhoidal Crisis"</text></outputEntry>
      <outputEntry id="OE_GEN_COL_005_Aprovado_Urgencia_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_GEN_COL_005_Aprovado_Urgencia_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <rule id="Rule_GEN_COL_005_Aprovado_GrauIV">
        <description>Aprovado - Grau IV</description>
        <inputEntry id="IE_Apr2_1"><text>"Grau_IV"</text></inputEntry>
        <inputEntry id="IE_Apr2_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr2_3"><text>true</text></inputEntry>
        <inputEntry id="IE_Apr2_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr2_5"><text>true</text></inputEntry>
        <outputEntry id="OE_Apr2_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Apr2_2"><text>"Hemorroidas Grau IV (prolapso irredutivel) - hemorroidectomia excisional aprovada. Tecnica de Milligan-Morgan ou Ferguson."</text></outputEntry>
        <outputEntry id="OE_Apr2_3"><text>"ASCRS 2018 - Grade IV Surgical Treatment"</text></outputEntry>
      <outputEntry id="OE_GEN_COL_005_Aprovado_GrauIV_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_GEN_COL_005_Aprovado_GrauIV_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <rule id="Rule_GEN_COL_005_Aprovado_GrauIII_AposFalha">
        <description>Aprovado - Grau III apos falha de tratamento ambulatorial</description>
        <inputEntry id="IE_Apr3_1"><text>"Grau_III"</text></inputEntry>
        <inputEntry id="IE_Apr3_2"><text>"Ligadura_Elastica","Escleroterapia","Multiplos"</text></inputEntry>
        <inputEntry id="IE_Apr3_3"><text>true</text></inputEntry>
        <inputEntry id="IE_Apr3_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr3_5"><text>true</text></inputEntry>
        <outputEntry id="OE_Apr3_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Apr3_2"><text>"Hemorroidas Grau III refratarias a tratamento ambulatorial - hemorroidectomia aprovada. Considerar PPH ou THD em casos selecionados."</text></outputEntry>
        <outputEntry id="OE_Apr3_3"><text>"ASCRS 2018 - Grade III After Failed Office Treatment"</text></outputEntry>
      <outputEntry id="OE_GEN_COL_005_Aprovado_GrauIII_AposFalha_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_GEN_COL_005_Aprovado_GrauIII_AposFalha_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <rule id="Rule_GEN_COL_005_Aprovado_Anemia">
        <description>Aprovado - Anemia por sangramento cronico</description>
        <inputEntry id="IE_Apr4_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr4_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr4_3"><text>true</text></inputEntry>
        <inputEntry id="IE_Apr4_4"><text>"Anemia"</text></inputEntry>
        <inputEntry id="IE_Apr4_5"><text>true</text></inputEntry>
        <outputEntry id="OE_Apr4_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Apr4_2"><text>"Hemorroidas com anemia ferropriva por sangramento cronico - hemorroidectomia indicada independente do grau. Corrigir anemia pre-operatoriamente."</text></outputEntry>
        <outputEntry id="OE_Apr4_3"><text>"ASCRS 2018 - Bleeding Anemia Indication"</text></outputEntry>
      <outputEntry id="OE_GEN_COL_005_Aprovado_Anemia_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_GEN_COL_005_Aprovado_Anemia_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <!-- REGRAS DE PENDENCIA -->

      <rule id="Rule_GEN_COL_005_Pendente_GrauIII_SemTratamentoPrevio">
        <description>Pendente - Grau III sem tratamento ambulatorial previo</description>
        <inputEntry id="IE_Pend1_1"><text>"Grau_III"</text></inputEntry>
        <inputEntry id="IE_Pend1_2"><text>"Nenhum","Conservador"</text></inputEntry>
        <inputEntry id="IE_Pend1_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Pend1_4"><text>"Nenhuma"</text></inputEntry>
        <inputEntry id="IE_Pend1_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Pend1_1"><text>"Pendente"</text></outputEntry>
        <outputEntry id="OE_Pend1_2"><text>"Hemorroidas Grau III - considerar ligadura elastica antes de cirurgia. Se preferencia por cirurgia primaria, justificar clinicamente."</text></outputEntry>
        <outputEntry id="OE_Pend1_3"><text>"ASCRS 2018 - Grade III Initial Management"</text></outputEntry>
      <outputEntry id="OE_GEN_COL_005_Pendente_GrauIII_SemTratamentoPrevio_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_GEN_COL_005_Pendente_GrauIII_SemTratamentoPrevio_5"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>

      <rule id="Rule_GEN_COL_005_Pendente_NaoClassificada">
        <description>Pendente - Classificacao nao informada</description>
        <inputEntry id="IE_Pend2_1"><text>"Nao_Classificada"</text></inputEntry>
        <inputEntry id="IE_Pend2_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Pend2_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Pend2_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Pend2_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Pend2_1"><text>"Pendente"</text></outputEntry>
        <outputEntry id="OE_Pend2_2"><text>"Classificacao de Goligher obrigatoria para indicacao cirurgica. Anexar laudo de proctoscopia com classificacao."</text></outputEntry>
        <outputEntry id="OE_Pend2_3"><text>"ASCRS 2018 - Goligher Classification Required"</text></outputEntry>
      <outputEntry id="OE_GEN_COL_005_Pendente_NaoClassificada_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_GEN_COL_005_Pendente_NaoClassificada_5"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>

      <!-- REGRA FALLBACK -->

      <rule id="Rule_GEN_COL_005_Fallback">
        <description>Fallback - Analise especializada</description>
        <inputEntry id="IE_Fallback_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Fallback_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Fallback_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Fallback_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Fallback_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Fallback_1"><text>"Pendente"</text></outputEntry>
        <outputEntry id="OE_Fallback_2"><text>"Caso de doenca hemorroidaria requer analise por auditor medico coloproctologista."</text></outputEntry>
        <outputEntry id="OE_Fallback_3"><text>"Auditoria cirurgica - RN 428/2017"</text></outputEntry>
      <outputEntry id="OE_GEN_COL_005_Fallback_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_GEN_COL_005_Fallback_5"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>

    </decisionTable>
  </decision>
</definitions>
