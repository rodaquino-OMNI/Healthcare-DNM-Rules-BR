<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="https://www.omg.org/spec/DMN/20191111/MODEL/"
             xmlns:camunda="http://camunda.org/schema/1.0/dmn"
             id="Definitions_GEN_END_005"
             name="Adrenalectomia - Criterios de Tamanho"
             namespace="http://camunda.org/schema/1.0/dmn">

  <!--
    ===============================================================================
    CODIGO: GEN-END-005
    Procedimento: Adrenalectomia por Incidentaloma - Criterios de Tamanho
    Especialidade: Cirurgia Geral - Cirurgia Endocrina
    Versao: 3.0.0-TIER1
    Data: 2026-02-07
    ===============================================================================

    INDICACOES POR TAMANHO:
    - Tumor > 6 cm: Cirurgia fortemente recomendada
    - Tumor 4-6 cm: Cirurgia frequentemente recomendada
    - Tumor < 4 cm: Cirurgia se funcional ou caracteristicas suspeitas
    - Crescimento > 1 cm em 12 meses

    CARACTERISTICAS DE IMAGEM SUSPEITAS:
    - Densidade > 10 HU em TC sem contraste
    - Washout < 50% absoluto ou < 40% relativo
    - Bordas irregulares, necrose, invasao

    REFERENCIAS TECNICAS:
    - Endocrine Society Guidelines 2016
    - ACR Appropriateness Criteria 2017
    - AAES Guidelines 2013

    ===============================================================================
  -->

  <decision id="Decision_GEN_END_005" name="Regra Clinica - Adrenalectomia Criterio Tamanho">
    <decisionTable id="DecisionTable_GEN_END_005" hitPolicy="FIRST">

      <!-- ========== INPUTS (5) ========== -->

      <input id="Input_tamanhoAtual" label="Tamanho Atual do Tumor (cm)" camunda:inputVariable="tamanhoAtual">
        <inputExpression id="InputExpression_tamanhoAtual" typeRef="number">
          <text>tamanhoAtual</text>
        </inputExpression>
      </input>

      <input id="Input_crescimentoAnual" label="Crescimento em 12 Meses (cm)" camunda:inputVariable="crescimentoAnual">
        <inputExpression id="InputExpression_crescimentoAnual" typeRef="number">
          <text>crescimentoAnual</text>
        </inputExpression>
      </input>

      <input id="Input_densidadeTC" label="Densidade em TC sem Contraste (HU)" camunda:inputVariable="densidadeTC">
        <inputExpression id="InputExpression_densidadeTC" typeRef="number">
          <text>densidadeTC</text>
        </inputExpression>
      </input>

      <input id="Input_washout" label="Washout Absoluto (%)" camunda:inputVariable="washout">
        <inputExpression id="InputExpression_washout" typeRef="number">
          <text>washout</text>
        </inputExpression>
      </input>

      <input id="Input_caracteristicasMorfologicas" label="Caracteristicas Morfologicas" camunda:inputVariable="caracteristicasMorfologicas">
        <inputExpression id="InputExpression_caracteristicasMorfologicas" typeRef="string">
          <text>caracteristicasMorfologicas</text>
        </inputExpression>
        <inputValues id="InputValues_caracteristicasMorfologicas">
          <text>"Regular","Irregular","Necrose","Invasao","Calcificacao"</text>
        </inputValues>
      </input>

      <!-- ========== OUTPUTS (3) ========== -->

      <output id="Output_resultado" label="Resultado" name="resultado" typeRef="string">
        <outputValues id="OutputValues_resultado">
          <text>"Aprovado","Reprovado","Pendente"</text>
        </outputValues>
      </output>

      <output id="Output_observacao" label="Observacao Clinica" name="observacao" typeRef="string" />

      <output id="Output_fundamentacao" label="Fundamentacao Tecnica" name="fundamentacao" typeRef="string" />

      <!-- Output 4: Alertas Desperdicio -->
      <output id="Output_alertasDesperdicio" label="Alertas de Desperdicio" name="alertasDesperdicio" typeRef="string">
        <outputValues id="OutputValues_alertasDesperdicio">
          <text>"NENHUM","DUP","FREQ","ESC","DOC","PROT","MULTI"</text>
        </outputValues>
      </output>

      <!-- Output 5: Acao Recomendada -->
      <output id="Output_acaoRecomendada" label="Acao Recomendada" name="acaoRecomendada" typeRef="string">
        <outputValues id="OutputValues_acaoRecomendada">
          <text>"APROVAR","NEGAR","SOLICITAR_INFO","AGUARDAR_PRAZO","SUGERIR_ALTERNATIVA"</text>
        </outputValues>
      </output>

      <!-- ========== REGRAS DE REPROVACAO ========== -->

      <rule id="Rule_Reprovado_PequenoTipico">
        <description>Reprovado: Tumor pequeno com caracteristicas tipicas de adenoma</description>
        <inputEntry id="IE_Rep1_1"><text>&lt; 4</text></inputEntry>
        <inputEntry id="IE_Rep1_2"><text>&lt; 0.5</text></inputEntry>
        <inputEntry id="IE_Rep1_3"><text>&lt;= 10</text></inputEntry>
        <inputEntry id="IE_Rep1_4"><text>&gt;= 50</text></inputEntry>
        <inputEntry id="IE_Rep1_5"><text>"Regular"</text></inputEntry>
        <outputEntry id="OE_Rep1_1"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OE_Rep1_2"><text>"Adenoma tipico &lt; 4cm - seguimento por imagem em 6-12 meses"</text></outputEntry>
        <outputEntry id="OE_Rep1_3"><text>"Endocrine Society 2016 - Adenomas tipicos podem ser observados"</text></outputEntry>
      <outputEntry id="OE_Reprovado_PequenoTipico_4"><text>"PROT"</text></outputEntry>
        <outputEntry id="OE_Reprovado_PequenoTipico_5"><text>"NEGAR"</text></outputEntry>
      </rule>

      <!-- ========== REGRAS DE APROVACAO ========== -->

      <rule id="Rule_Aprovado_MaiorQue6">
        <description>Aprovado: Tumor > 6 cm</description>
        <inputEntry id="IE_Apr1_1"><text>&gt; 6</text></inputEntry>
        <inputEntry id="IE_Apr1_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr1_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr1_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr1_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Apr1_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Apr1_2"><text>"Tumor adrenal &gt; 6cm - adrenalectomia fortemente recomendada pelo risco de ACC"</text></outputEntry>
        <outputEntry id="OE_Apr1_3"><text>"Endocrine Society 2016 - Risco de malignidade aumenta significativamente &gt; 6cm"</text></outputEntry>
      <outputEntry id="OE_Aprovado_MaiorQue6_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Aprovado_MaiorQue6_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <rule id="Rule_Aprovado_CrescimentoRapido">
        <description>Aprovado: Crescimento rapido (> 1cm/ano)</description>
        <inputEntry id="IE_Apr2_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr2_2"><text>&gt;= 1</text></inputEntry>
        <inputEntry id="IE_Apr2_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr2_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr2_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Apr2_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Apr2_2"><text>"Crescimento &gt;= 1cm em 12 meses - suspeita de malignidade, adrenalectomia indicada"</text></outputEntry>
        <outputEntry id="OE_Apr2_3"><text>"AAES 2013 - Crescimento rapido e sinal de alarme para ACC"</text></outputEntry>
      <outputEntry id="OE_Aprovado_CrescimentoRapido_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Aprovado_CrescimentoRapido_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <rule id="Rule_Aprovado_4a6Suspeito">
        <description>Aprovado: 4-6 cm com caracteristicas suspeitas</description>
        <inputEntry id="IE_Apr3_1"><text>[4..6]</text></inputEntry>
        <inputEntry id="IE_Apr3_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr3_3"><text>&gt; 10</text></inputEntry>
        <inputEntry id="IE_Apr3_4"><text>&lt; 50</text></inputEntry>
        <inputEntry id="IE_Apr3_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Apr3_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Apr3_2"><text>"Tumor 4-6cm com densidade elevada e washout atipico - adrenalectomia recomendada"</text></outputEntry>
        <outputEntry id="OE_Apr3_3"><text>"ACR 2017 - Caracteristicas de imagem suspeitas indicam cirurgia"</text></outputEntry>
      <outputEntry id="OE_Aprovado_4a6Suspeito_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Aprovado_4a6Suspeito_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <rule id="Rule_Aprovado_NecrosInvasao">
        <description>Aprovado: Necrose ou invasao</description>
        <inputEntry id="IE_Apr4_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr4_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr4_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr4_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr4_5"><text>"Necrose","Invasao"</text></inputEntry>
        <outputEntry id="OE_Apr4_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Apr4_2"><text>"Necrose central ou invasao local - altamente suspeito para ACC, adrenalectomia aberta"</text></outputEntry>
        <outputEntry id="OE_Apr4_3"><text>"Endocrine Society 2016 - Caracteristicas de agressividade indicam resseccao"</text></outputEntry>
      <outputEntry id="OE_Aprovado_NecrosInvasao_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Aprovado_NecrosInvasao_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <rule id="Rule_Aprovado_Irregular">
        <description>Aprovado: Bordas irregulares com tamanho intermediario</description>
        <inputEntry id="IE_Apr5_1"><text>&gt;= 4</text></inputEntry>
        <inputEntry id="IE_Apr5_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr5_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr5_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr5_5"><text>"Irregular"</text></inputEntry>
        <outputEntry id="OE_Apr5_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Apr5_2"><text>"Tumor &gt;= 4cm com bordas irregulares - adrenalectomia indicada"</text></outputEntry>
        <outputEntry id="OE_Apr5_3"><text>"AAES 2013 - Morfologia irregular associada a maior risco"</text></outputEntry>
      <outputEntry id="OE_Aprovado_Irregular_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Aprovado_Irregular_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <!-- ========== REGRA FALLBACK ========== -->

      <rule id="Rule_Fallback_GEN_END_005">
        <description>Pendente: Seguimento por imagem recomendado</description>
        <inputEntry id="IE_FB_1"><text>-</text></inputEntry>
        <inputEntry id="IE_FB_2"><text>-</text></inputEntry>
        <inputEntry id="IE_FB_3"><text>-</text></inputEntry>
        <inputEntry id="IE_FB_4"><text>-</text></inputEntry>
        <inputEntry id="IE_FB_5"><text>-</text></inputEntry>
        <outputEntry id="OE_FB_1"><text>"Pendente"</text></outputEntry>
        <outputEntry id="OE_FB_2"><text>"Tumor indeterminado - repetir imagem em 6-12 meses para avaliar crescimento"</text></outputEntry>
        <outputEntry id="OE_FB_3"><text>"Endocrine Society 2016 - Seguimento conforme caracteristicas individuais"</text></outputEntry>
      <outputEntry id="OE_Fallback_GEN_END_005_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Fallback_GEN_END_005_5"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>

    </decisionTable>
  </decision>
</definitions>
