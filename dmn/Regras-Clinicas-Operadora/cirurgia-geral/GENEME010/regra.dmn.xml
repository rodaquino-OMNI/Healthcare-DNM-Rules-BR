<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="https://www.omg.org/spec/DMN/20191111/MODEL/"
             xmlns:camunda="http://camunda.org/schema/1.0/dmn"
             id="Definitions_GEN_EME_010"
             name="Hernia Encarcerada - Timing Cirurgico"
             namespace="http://camunda.org/schema/1.0/dmn">

  <!--
    ===============================================================================
    CODIGO: GEN-EME-010
    Procedimento: Hernia Encarcerada - Definicao de Timing Cirurgico
    Especialidade: Cirurgia Geral - Emergencia
    Versao: 3.0.0-TIER1
    Data: 2026-02-07
    ===============================================================================

    INDICACOES PARA CIRURGIA DE EMERGENCIA:
    - Hernia estrangulada com sinais de isquemia
    - Falha de reducao manual
    - Obstrucao intestinal por hernia
    - Sinais de peritonite
    - Tempo de encarceramento > 4-6 horas

    INDICACOES PARA CIRURGIA URGENTE (< 24h):
    - Hernia encarcerada redutivel mas nao reduzida
    - Hernia volumosa com risco de isquemia

    CONTRAINDICACOES RELATIVAS:
    - Hernia reducida com sucesso (cirurgia eletiva)

    REFERENCIAS TECNICAS:
    - HerniaSurge Guidelines 2018 - Emergency Hernia Repair
    - EAES Guidelines 2020 - Groin Hernia
    - CBC 2022 - Hernia Complicada

    ===============================================================================
  -->

  <decision id="Decision_GEN_EME_010" name="Regra Clinica - Hernia Encarcerada">
    <decisionTable id="DecisionTable_GEN_EME_010" hitPolicy="FIRST">

      <!-- ========== INPUTS (5) ========== -->

      <input id="Input_tipoHernia" label="Tipo de Hernia" camunda:inputVariable="tipoHernia">
        <inputExpression id="InputExpression_tipoHernia" typeRef="string">
          <text>tipoHernia</text>
        </inputExpression>
        <inputValues id="InputValues_tipoHernia">
          <text>"InguinalDireta","InguinalIndireta","Femoral","Umbilical","Incisional","Outra"</text>
        </inputValues>
      </input>

      <input id="Input_statusEncarceramento" label="Status do Encarceramento" camunda:inputVariable="statusEncarceramento">
        <inputExpression id="InputExpression_statusEncarceramento" typeRef="string">
          <text>statusEncarceramento</text>
        </inputExpression>
        <inputValues id="InputValues_statusEncarceramento">
          <text>"Estrangulada","EncarceradaNaoRedutivel","EncarceradaRedutivel","Reduzida"</text>
        </inputValues>
      </input>

      <input id="Input_tempoEncarceramento" label="Tempo de Encarceramento (horas)" camunda:inputVariable="tempoEncarceramento">
        <inputExpression id="InputExpression_tempoEncarceramento" typeRef="number">
          <text>tempoEncarceramento</text>
        </inputExpression>
      </input>

      <input id="Input_sinaisIsquemia" label="Sinais de Isquemia Intestinal" camunda:inputVariable="sinaisIsquemia">
        <inputExpression id="InputExpression_sinaisIsquemia" typeRef="boolean">
          <text>sinaisIsquemia</text>
        </inputExpression>
      </input>

      <input id="Input_obstrucaoIntestinal" label="Obstrucao Intestinal Associada" camunda:inputVariable="obstrucaoIntestinal">
        <inputExpression id="InputExpression_obstrucaoIntestinal" typeRef="boolean">
          <text>obstrucaoIntestinal</text>
        </inputExpression>
      </input>

      <!-- ========== OUTPUTS (3) ========== -->

      <output id="Output_resultado" label="Resultado" name="resultado" typeRef="string">
        <outputValues id="OutputValues_resultado">
          <text>"Aprovado","Reprovado","Pendente"</text>
        </outputValues>
      </output>

      <output id="Output_observacao" label="Observacao Clinica" name="observacao" typeRef="string" />

      <output id="Output_fundamentacao" label="Fundamentacao Tecnica" name="fundamentacao" typeRef="string" />

      <!-- Output 4: Alertas Desperdicio -->
      <output id="Output_alertasDesperdicio" label="Alertas de Desperdicio" name="alertasDesperdicio" typeRef="string">
        <outputValues id="OutputValues_alertasDesperdicio">
          <text>"NENHUM","DUP","FREQ","ESC","DOC","PROT","MULTI"</text>
        </outputValues>
      </output>

      <!-- Output 5: Acao Recomendada -->
      <output id="Output_acaoRecomendada" label="Acao Recomendada" name="acaoRecomendada" typeRef="string">
        <outputValues id="OutputValues_acaoRecomendada">
          <text>"APROVAR","NEGAR","SOLICITAR_INFO","AGUARDAR_PRAZO","SUGERIR_ALTERNATIVA"</text>
        </outputValues>
      </output>

      <!-- ========== REGRAS DE REPROVACAO ========== -->

      <rule id="Rule_Reprovado_HerniaReduzida">
        <description>Reprovado: Hernia reduzida com sucesso</description>
        <inputEntry id="IE_Rep1_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep1_2"><text>"Reduzida"</text></inputEntry>
        <inputEntry id="IE_Rep1_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep1_4"><text>false</text></inputEntry>
        <inputEntry id="IE_Rep1_5"><text>false</text></inputEntry>
        <outputEntry id="OE_Rep1_1"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OE_Rep1_2"><text>"Hernia reduzida com sucesso, sem sinais de isquemia - cirurgia eletiva em ate 2-4 semanas"</text></outputEntry>
        <outputEntry id="OE_Rep1_3"><text>"HerniaSurge Guidelines 2018 - Reducao bem sucedida permite cirurgia eletiva"</text></outputEntry>
      <outputEntry id="OE_Reprovado_HerniaReduzida_4"><text>"PROT"</text></outputEntry>
        <outputEntry id="OE_Reprovado_HerniaReduzida_5"><text>"NEGAR"</text></outputEntry>
      </rule>

      <rule id="Rule_Reprovado_ReduzidaRecente">
        <description>Reprovado: Hernia reduzida ha menos de 4h sem sinais de alarme</description>
        <inputEntry id="IE_Rep2_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep2_2"><text>"Reduzida"</text></inputEntry>
        <inputEntry id="IE_Rep2_3"><text>&lt; 4</text></inputEntry>
        <inputEntry id="IE_Rep2_4"><text>false</text></inputEntry>
        <inputEntry id="IE_Rep2_5"><text>false</text></inputEntry>
        <outputEntry id="OE_Rep2_1"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OE_Rep2_2"><text>"Hernia recentemente reduzida - observar por 24h para sinais de isquemia intestinal tardia"</text></outputEntry>
        <outputEntry id="OE_Rep2_3"><text>"CBC 2022 - Monitoramento pos-reducao de hernia encarcerada"</text></outputEntry>
      <outputEntry id="OE_Reprovado_ReduzidaRecente_4"><text>"PROT"</text></outputEntry>
        <outputEntry id="OE_Reprovado_ReduzidaRecente_5"><text>"NEGAR"</text></outputEntry>
      </rule>

      <!-- ========== REGRAS DE APROVACAO ========== -->

      <rule id="Rule_Aprovado_Estrangulada">
        <description>Aprovado: Hernia estrangulada - emergencia</description>
        <inputEntry id="IE_Apr1_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr1_2"><text>"Estrangulada"</text></inputEntry>
        <inputEntry id="IE_Apr1_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr1_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr1_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Apr1_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Apr1_2"><text>"Hernia estrangulada - cirurgia de emergencia imediata para prevenir necrose intestinal"</text></outputEntry>
        <outputEntry id="OE_Apr1_3"><text>"HerniaSurge Guidelines 2018 - Estrangulamento e emergencia cirurgica absoluta"</text></outputEntry>
      <outputEntry id="OE_Aprovado_Estrangulada_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Aprovado_Estrangulada_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <rule id="Rule_Aprovado_SinaisIsquemia">
        <description>Aprovado: Sinais de isquemia intestinal</description>
        <inputEntry id="IE_Apr2_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr2_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr2_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr2_4"><text>true</text></inputEntry>
        <inputEntry id="IE_Apr2_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Apr2_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Apr2_2"><text>"Sinais de isquemia intestinal - cirurgia de emergencia para avaliacao de viabilidade"</text></outputEntry>
        <outputEntry id="OE_Apr2_3"><text>"EAES Guidelines 2020 - Isquemia intestinal requer intervencao imediata"</text></outputEntry>
      <outputEntry id="OE_Aprovado_SinaisIsquemia_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Aprovado_SinaisIsquemia_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <rule id="Rule_Aprovado_Obstrucao">
        <description>Aprovado: Obstrucao intestinal por hernia</description>
        <inputEntry id="IE_Apr3_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr3_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr3_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr3_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr3_5"><text>true</text></inputEntry>
        <outputEntry id="OE_Apr3_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Apr3_2"><text>"Obstrucao intestinal secundaria a hernia encarcerada - correcao cirurgica urgente"</text></outputEntry>
        <outputEntry id="OE_Apr3_3"><text>"CBC 2022 - Obstrucao intestinal por hernia e indicacao cirurgica"</text></outputEntry>
      <outputEntry id="OE_Aprovado_Obstrucao_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Aprovado_Obstrucao_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <rule id="Rule_Aprovado_NaoRedutivel">
        <description>Aprovado: Encarcerada nao redutivel apos tentativa</description>
        <inputEntry id="IE_Apr4_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr4_2"><text>"EncarceradaNaoRedutivel"</text></inputEntry>
        <inputEntry id="IE_Apr4_3"><text>&gt;= 4</text></inputEntry>
        <inputEntry id="IE_Apr4_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr4_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Apr4_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Apr4_2"><text>"Hernia encarcerada ha mais de 4h sem reducao - cirurgia urgente antes de progressao para estrangulamento"</text></outputEntry>
        <outputEntry id="OE_Apr4_3"><text>"HerniaSurge Guidelines 2018 - Falha de reducao indica cirurgia urgente"</text></outputEntry>
      <outputEntry id="OE_Aprovado_NaoRedutivel_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Aprovado_NaoRedutivel_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <rule id="Rule_Aprovado_HerniaFemoral">
        <description>Aprovado: Hernia femoral encarcerada (alto risco)</description>
        <inputEntry id="IE_Apr5_1"><text>"Femoral"</text></inputEntry>
        <inputEntry id="IE_Apr5_2"><text>"EncarceradaNaoRedutivel","EncarceradaRedutivel"</text></inputEntry>
        <inputEntry id="IE_Apr5_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr5_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr5_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Apr5_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Apr5_2"><text>"Hernia femoral encarcerada - alto risco de estrangulamento, cirurgia urgente recomendada"</text></outputEntry>
        <outputEntry id="OE_Apr5_3"><text>"EAES Guidelines 2020 - Hernia femoral tem maior risco de complicacoes"</text></outputEntry>
      <outputEntry id="OE_Aprovado_HerniaFemoral_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Aprovado_HerniaFemoral_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <!-- ========== REGRA FALLBACK ========== -->

      <rule id="Rule_Fallback_GEN_EME_010">
        <description>Pendente: Avaliacao cirurgica necessaria</description>
        <inputEntry id="IE_FB_1"><text>-</text></inputEntry>
        <inputEntry id="IE_FB_2"><text>-</text></inputEntry>
        <inputEntry id="IE_FB_3"><text>-</text></inputEntry>
        <inputEntry id="IE_FB_4"><text>-</text></inputEntry>
        <inputEntry id="IE_FB_5"><text>-</text></inputEntry>
        <outputEntry id="OE_FB_1"><text>"Pendente"</text></outputEntry>
        <outputEntry id="OE_FB_2"><text>"Avaliacao por cirurgiao necessaria para definicao de timing - considerar observacao hospitalar"</text></outputEntry>
        <outputEntry id="OE_FB_3"><text>"HerniaSurge Guidelines 2018 - Decisao individualizada baseada em fatores de risco"</text></outputEntry>
      <outputEntry id="OE_Fallback_GEN_EME_010_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Fallback_GEN_EME_010_5"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>

    </decisionTable>
  </decision>
</definitions>
