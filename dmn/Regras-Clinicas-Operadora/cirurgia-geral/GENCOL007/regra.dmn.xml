<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="https://www.omg.org/spec/DMN/20191111/MODEL/"
             xmlns:dmndi="https://www.omg.org/spec/DMN/20191111/DMNDI/"
             xmlns:dc="http://www.omg.org/spec/DD/20100524/DC/"
             xmlns:di="http://www.omg.org/spec/DD/20100524/DI/"
             id="Definitions_GEN_COL_007"
             name="Prolapso Retal - Selecao de Procedimento"
             namespace="http://camunda.org/schema/1.0/dmn"
             exporter="Camunda Modeler"
             exporterVersion="5.0.0">
  <!--
    GEN-COL-007 - Prolapso Retal - Criterios para Selecao de Procedimento
    Versao: 1.0.0 (2026-02-07)
    Especialidade: Cirurgia Geral - Coloproctologia
    Categoria: Procedimentos Cirurgicos

    Classificacao:
    - Prolapso mucoso: Apenas mucosa prolapsada
    - Prolapso retal completo: Todas as camadas
    - Prolapso interno (intussuscepcao): Sem exteriorizacao

    Abordagens (ASCRS 2017):
    Abdominal:
    - Retopexia com tela (Ripstein, Wells)
    - Retopexia sem tela (Suture rectopexy)
    - Retopexia com resseccao (Frykman-Goldberg)
    - Retopexia ventral laparoscopica

    Perineal (pacientes alto risco):
    - Delorme (prolapso mucoso)
    - Altemeier (prolapso completo)

    Fatores de Selecao:
    - Idade e comorbidades
    - Constipacao associada (resseccao + retopexia)
    - Incontinencia associada
    - Cirurgias previas

    Documentacao Obrigatoria:
    - Defecografia ou RNM dinamica
    - Avaliacao de funcao esfincter
    - Colonoscopia (excluir lesoes)

    Referencias Normativas:
    - ASCRS Clinical Practice Guidelines 2017
    - ESCP Rectal Prolapse Guidelines 2021
  -->

  <decision id="Decision_GEN_COL_007" name="Criterios de Autorizacao - Prolapso Retal">
    <decisionTable id="DecisionTable_GEN_COL_007" hitPolicy="FIRST">

      <!-- Input 1: Tipo de Prolapso -->
      <input id="Input_tipoProlapso" label="Tipo de Prolapso">
        <inputExpression id="InputExpr_tipoProlapso" typeRef="string">
          <text>tipoProlapso</text>
        </inputExpression>
        <inputValues id="InputValues_tipoProlapso">
          <text>"Mucoso","Completo","Interno","Nao_Classificado"</text>
        </inputValues>
      </input>

      <!-- Input 2: Risco Cirurgico -->
      <input id="Input_riscoCirurgico" label="Risco Cirurgico">
        <inputExpression id="InputExpr_riscoCirurgico" typeRef="string">
          <text>riscoCirurgico</text>
        </inputExpression>
        <inputValues id="InputValues_riscoCirurgico">
          <text>"Baixo","Intermediario","Alto"</text>
        </inputValues>
      </input>

      <!-- Input 3: Defecografia/RNM Dinamica -->
      <input id="Input_defecografia" label="Defecografia ou RNM Dinamica">
        <inputExpression id="InputExpr_defecografia" typeRef="boolean">
          <text>defecografiaRealizada</text>
        </inputExpression>
      </input>

      <!-- Input 4: Constipacao Associada -->
      <input id="Input_constipacao" label="Constipacao Cronica Associada">
        <inputExpression id="InputExpr_constipacao" typeRef="boolean">
          <text>constipacaoAssociada</text>
        </inputExpression>
      </input>

      <!-- Input 5: Laudo de Indicacao -->
      <input id="Input_laudoIndicacao" label="Laudo de Indicacao">
        <inputExpression id="InputExpr_laudoIndicacao" typeRef="boolean">
          <text>laudoIndicacao</text>
        </inputExpression>
      </input>

      <!-- Output 1: Resultado -->
      <output id="Output_resultado" label="Resultado" name="resultado" typeRef="string">
        <outputValues id="OutputValues_resultado">
          <text>"Aprovado","Reprovado","Pendente"</text>
        </outputValues>
      </output>

      <!-- Output 2: Observacao -->
      <output id="Output_observacao" label="Observacao Clinica" name="observacao" typeRef="string" />

      <!-- Output 3: Fundamentacao -->
      <output id="Output_fundamentacao" label="Fundamentacao" name="fundamentacao" typeRef="string" />

      <!-- Output 4: Alertas Desperdicio -->
      <output id="Output_alertasDesperdicio" label="Alertas de Desperdicio" name="alertasDesperdicio" typeRef="string">
        <outputValues id="OutputValues_alertasDesperdicio">
          <text>"NENHUM","DUP","FREQ","ESC","DOC","PROT","MULTI"</text>
        </outputValues>
      </output>

      <!-- Output 5: Acao Recomendada -->
      <output id="Output_acaoRecomendada" label="Acao Recomendada" name="acaoRecomendada" typeRef="string">
        <outputValues id="OutputValues_acaoRecomendada">
          <text>"APROVAR","NEGAR","SOLICITAR_INFO","AGUARDAR_PRAZO","SUGERIR_ALTERNATIVA"</text>
        </outputValues>
      </output>

      <!-- REGRAS DE REPROVACAO -->

      <rule id="Rule_GEN_COL_007_Reprovado_SemDefecografia">
        <description>Reprovado - Sem estudo funcional</description>
        <inputEntry id="IE_Rep1_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep1_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep1_3"><text>false</text></inputEntry>
        <inputEntry id="IE_Rep1_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep1_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Rep1_1"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OE_Rep1_2"><text>"Defecografia ou RNM dinamica de pelve obrigatoria para caracterizacao do prolapso e planejamento cirurgico."</text></outputEntry>
        <outputEntry id="OE_Rep1_3"><text>"ASCRS 2017 - Dynamic Imaging Required"</text></outputEntry>
      <outputEntry id="OE_GEN_COL_007_Reprovado_SemDefecografia_4"><text>"PROT"</text></outputEntry>
        <outputEntry id="OE_GEN_COL_007_Reprovado_SemDefecografia_5"><text>"NEGAR"</text></outputEntry>
      </rule>

      <rule id="Rule_GEN_COL_007_Reprovado_SemLaudo">
        <description>Reprovado - Sem laudo de indicacao</description>
        <inputEntry id="IE_Rep2_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep2_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep2_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep2_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep2_5"><text>false</text></inputEntry>
        <outputEntry id="OE_Rep2_1"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OE_Rep2_2"><text>"Laudo de indicacao obrigatorio com tipo de prolapso, sintomatologia, risco cirurgico e tecnica proposta."</text></outputEntry>
        <outputEntry id="OE_Rep2_3"><text>"RN 465/2021 - Documentacao Obrigatoria"</text></outputEntry>
      <outputEntry id="OE_GEN_COL_007_Reprovado_SemLaudo_4"><text>"PROT"</text></outputEntry>
        <outputEntry id="OE_GEN_COL_007_Reprovado_SemLaudo_5"><text>"NEGAR"</text></outputEntry>
      </rule>

      <!-- REGRAS DE APROVACAO -->

      <rule id="Rule_GEN_COL_007_Aprovado_Completo_BaixoRisco">
        <description>Aprovado - Prolapso completo, baixo risco</description>
        <inputEntry id="IE_Apr1_1"><text>"Completo"</text></inputEntry>
        <inputEntry id="IE_Apr1_2"><text>"Baixo","Intermediario"</text></inputEntry>
        <inputEntry id="IE_Apr1_3"><text>true</text></inputEntry>
        <inputEntry id="IE_Apr1_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr1_5"><text>true</text></inputEntry>
        <outputEntry id="OE_Apr1_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Apr1_2"><text>"Prolapso retal completo em paciente baixo/medio risco - retopexia abdominal aprovada. Laparoscopia preferida. Retopexia ventral com tela biologica opcao moderna."</text></outputEntry>
        <outputEntry id="OE_Apr1_3"><text>"ASCRS 2017 - Abdominal Rectopexy"</text></outputEntry>
      <outputEntry id="OE_GEN_COL_007_Aprovado_Completo_BaixoRisco_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_GEN_COL_007_Aprovado_Completo_BaixoRisco_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <rule id="Rule_GEN_COL_007_Aprovado_Completo_AltoRisco">
        <description>Aprovado - Prolapso completo, alto risco (perineal)</description>
        <inputEntry id="IE_Apr2_1"><text>"Completo"</text></inputEntry>
        <inputEntry id="IE_Apr2_2"><text>"Alto"</text></inputEntry>
        <inputEntry id="IE_Apr2_3"><text>true</text></inputEntry>
        <inputEntry id="IE_Apr2_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr2_5"><text>true</text></inputEntry>
        <outputEntry id="OE_Apr2_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Apr2_2"><text>"Prolapso retal completo em paciente alto risco - procedimento perineal (Altemeier) aprovado. Evita laparotomia/laparoscopia em paciente fragil."</text></outputEntry>
        <outputEntry id="OE_Apr2_3"><text>"ASCRS 2017 - Perineal Approach High Risk"</text></outputEntry>
      <outputEntry id="OE_GEN_COL_007_Aprovado_Completo_AltoRisco_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_GEN_COL_007_Aprovado_Completo_AltoRisco_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <rule id="Rule_GEN_COL_007_Aprovado_Mucoso">
        <description>Aprovado - Prolapso mucoso sintomatico</description>
        <inputEntry id="IE_Apr3_1"><text>"Mucoso"</text></inputEntry>
        <inputEntry id="IE_Apr3_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr3_3"><text>true</text></inputEntry>
        <inputEntry id="IE_Apr3_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr3_5"><text>true</text></inputEntry>
        <outputEntry id="OE_Apr3_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Apr3_2"><text>"Prolapso mucoso sintomatico - procedimento de Delorme ou STARR aprovado. Menos invasivo, pode ser realizado em regime ambulatorial."</text></outputEntry>
        <outputEntry id="OE_Apr3_3"><text>"ASCRS 2017 - Mucosal Prolapse Treatment"</text></outputEntry>
      <outputEntry id="OE_GEN_COL_007_Aprovado_Mucoso_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_GEN_COL_007_Aprovado_Mucoso_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <rule id="Rule_GEN_COL_007_Aprovado_Constipacao">
        <description>Aprovado - Prolapso com constipacao (resseccao + retopexia)</description>
        <inputEntry id="IE_Apr4_1"><text>"Completo"</text></inputEntry>
        <inputEntry id="IE_Apr4_2"><text>"Baixo","Intermediario"</text></inputEntry>
        <inputEntry id="IE_Apr4_3"><text>true</text></inputEntry>
        <inputEntry id="IE_Apr4_4"><text>true</text></inputEntry>
        <inputEntry id="IE_Apr4_5"><text>true</text></inputEntry>
        <outputEntry id="OE_Apr4_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Apr4_2"><text>"Prolapso com constipacao cronica - retopexia com sigmoidectomia (Frykman-Goldberg) aprovada. Trata prolapso e constipacao simultaneamente."</text></outputEntry>
        <outputEntry id="OE_Apr4_3"><text>"ASCRS 2017 - Resection Rectopexy for Constipation"</text></outputEntry>
      <outputEntry id="OE_GEN_COL_007_Aprovado_Constipacao_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_GEN_COL_007_Aprovado_Constipacao_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <!-- REGRAS DE PENDENCIA -->

      <rule id="Rule_GEN_COL_007_Pendente_Interno">
        <description>Pendente - Prolapso interno requer avaliacao cuidadosa</description>
        <inputEntry id="IE_Pend1_1"><text>"Interno"</text></inputEntry>
        <inputEntry id="IE_Pend1_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Pend1_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Pend1_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Pend1_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Pend1_1"><text>"Pendente"</text></outputEntry>
        <outputEntry id="OE_Pend1_2"><text>"Prolapso interno (intussuscepcao) - indicacao cirurgica controversa. Documentar sintomatologia significativa e falha de tratamento conservador."</text></outputEntry>
        <outputEntry id="OE_Pend1_3"><text>"ASCRS 2017 - Internal Prolapse Individualized"</text></outputEntry>
      <outputEntry id="OE_GEN_COL_007_Pendente_Interno_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_GEN_COL_007_Pendente_Interno_5"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>

      <rule id="Rule_GEN_COL_007_Pendente_NaoClassificado">
        <description>Pendente - Tipo de prolapso nao classificado</description>
        <inputEntry id="IE_Pend2_1"><text>"Nao_Classificado"</text></inputEntry>
        <inputEntry id="IE_Pend2_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Pend2_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Pend2_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Pend2_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Pend2_1"><text>"Pendente"</text></outputEntry>
        <outputEntry id="OE_Pend2_2"><text>"Classificacao do tipo de prolapso obrigatoria para definicao de abordagem. Anexar defecografia ou RNM dinamica."</text></outputEntry>
        <outputEntry id="OE_Pend2_3"><text>"ASCRS 2017 - Prolapse Classification Required"</text></outputEntry>
      <outputEntry id="OE_GEN_COL_007_Pendente_NaoClassificado_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_GEN_COL_007_Pendente_NaoClassificado_5"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>

      <!-- REGRA FALLBACK -->

      <rule id="Rule_GEN_COL_007_Fallback">
        <description>Fallback - Analise especializada</description>
        <inputEntry id="IE_Fallback_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Fallback_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Fallback_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Fallback_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Fallback_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Fallback_1"><text>"Pendente"</text></outputEntry>
        <outputEntry id="OE_Fallback_2"><text>"Caso de prolapso retal requer analise por auditor medico coloproctologista."</text></outputEntry>
        <outputEntry id="OE_Fallback_3"><text>"Auditoria cirurgica - RN 428/2017"</text></outputEntry>
      <outputEntry id="OE_GEN_COL_007_Fallback_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_GEN_COL_007_Fallback_5"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>

    </decisionTable>
  </decision>
</definitions>
