<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="https://www.omg.org/spec/DMN/20191111/MODEL/"
             xmlns:dmndi="https://www.omg.org/spec/DMN/20191111/DMNDI/"
             xmlns:dc="http://www.omg.org/spec/DD/20100524/DC/"
             xmlns:di="http://www.omg.org/spec/DD/20100524/DI/"
             id="Definitions_GEN_COL_008"
             name="Cirurgia em DII - Crohn vs Colite Ulcerativa"
             namespace="http://camunda.org/schema/1.0/dmn"
             exporter="Camunda Modeler"
             exporterVersion="5.0.0">
  <!--
    GEN-COL-008 - Cirurgia em Doenca Inflamatoria Intestinal
    Versao: 1.0.0 (2026-02-07)
    Especialidade: Cirurgia Geral - Coloproctologia
    Categoria: Procedimentos Cirurgicos

    COLITE ULCERATIVA (ECCO/ASCRS):
    Indicacoes Absolutas:
    - Colite fulminante refrataria
    - Megacolon toxico
    - Perfuracao
    - Sangramento massivo
    - Displasia/cancer

    Indicacoes Relativas:
    - Refratariedade ao tratamento clinico
    - Efeitos colaterais inaceitaveis
    - Dependencia de corticoide

    Procedimento: Proctocolectomia total + bolsa ileal (IPAA)

    DOENCA DE CROHN (ECCO/ASCRS):
    Indicacoes:
    - Estenose sintomatica
    - Fistulas refratarias
    - Abscesso nao drenavel
    - Perfuracao
    - Displasia/cancer

    Principio: Cirurgia conservadora (preservar intestino)

    Documentacao Obrigatoria:
    - Colonoscopia com biopsia
    - Avaliacao por gastroenterologista
    - Documentacao de falha do tratamento clinico

    Referencias Normativas:
    - ECCO Guidelines Surgical Management 2020
    - ASCRS Clinical Practice Guidelines IBD 2020
  -->

  <decision id="Decision_GEN_COL_008" name="Criterios de Autorizacao - Cirurgia DII">
    <decisionTable id="DecisionTable_GEN_COL_008" hitPolicy="FIRST">

      <!-- Input 1: Tipo de DII -->
      <input id="Input_tipoDII" label="Tipo de Doenca Inflamatoria">
        <inputExpression id="InputExpr_tipoDII" typeRef="string">
          <text>tipoDoencaInflamatoria</text>
        </inputExpression>
        <inputValues id="InputValues_tipoDII">
          <text>"Colite_Ulcerativa","Doenca_Crohn","Indeterminada"</text>
        </inputValues>
      </input>

      <!-- Input 2: Indicacao -->
      <input id="Input_indicacao" label="Indicacao Cirurgica">
        <inputExpression id="InputExpr_indicacao" typeRef="string">
          <text>indicacaoCirurgica</text>
        </inputExpression>
        <inputValues id="InputValues_indicacao">
          <text>"Urgencia_Perfuracao","Urgencia_Sangramento","Megacolon_Toxico","Refratariedade","Estenose","Fistula","Displasia_Cancer"</text>
        </inputValues>
      </input>

      <!-- Input 3: Avaliacao Gastro -->
      <input id="Input_gastro" label="Avaliacao por Gastroenterologista">
        <inputExpression id="InputExpr_gastro" typeRef="boolean">
          <text>avaliacaoGastro</text>
        </inputExpression>
      </input>

      <!-- Input 4: Falha Tratamento Clinico -->
      <input id="Input_falhaTratamento" label="Falha Tratamento Clinico Documentada">
        <inputExpression id="InputExpr_falhaTratamento" typeRef="boolean">
          <text>falhaTratamentoClinico</text>
        </inputExpression>
      </input>

      <!-- Input 5: Laudo de Indicacao -->
      <input id="Input_laudoIndicacao" label="Laudo de Indicacao">
        <inputExpression id="InputExpr_laudoIndicacao" typeRef="boolean">
          <text>laudoIndicacao</text>
        </inputExpression>
      </input>

      <!-- Output 1: Resultado -->
      <output id="Output_resultado" label="Resultado" name="resultado" typeRef="string">
        <outputValues id="OutputValues_resultado">
          <text>"Aprovado","Reprovado","Pendente"</text>
        </outputValues>
      </output>

      <!-- Output 2: Observacao -->
      <output id="Output_observacao" label="Observacao Clinica" name="observacao" typeRef="string" />

      <!-- Output 3: Fundamentacao -->
      <output id="Output_fundamentacao" label="Fundamentacao" name="fundamentacao" typeRef="string" />

      <!-- Output 4: Alertas Desperdicio -->
      <output id="Output_alertasDesperdicio" label="Alertas de Desperdicio" name="alertasDesperdicio" typeRef="string">
        <outputValues id="OutputValues_alertasDesperdicio">
          <text>"NENHUM","DUP","FREQ","ESC","DOC","PROT","MULTI"</text>
        </outputValues>
      </output>

      <!-- Output 5: Acao Recomendada -->
      <output id="Output_acaoRecomendada" label="Acao Recomendada" name="acaoRecomendada" typeRef="string">
        <outputValues id="OutputValues_acaoRecomendada">
          <text>"APROVAR","NEGAR","SOLICITAR_INFO","AGUARDAR_PRAZO","SUGERIR_ALTERNATIVA"</text>
        </outputValues>
      </output>

      <!-- REGRAS DE REPROVACAO -->

      <rule id="Rule_GEN_COL_008_Reprovado_SemGastro">
        <description>Reprovado - Sem avaliacao de gastroenterologia (eletivo)</description>
        <inputEntry id="IE_Rep1_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep1_2"><text>"Refratariedade","Estenose","Fistula"</text></inputEntry>
        <inputEntry id="IE_Rep1_3"><text>false</text></inputEntry>
        <inputEntry id="IE_Rep1_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep1_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Rep1_1"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OE_Rep1_2"><text>"Cirurgia eletiva em DII requer avaliacao conjunta com gastroenterologista. Documentar otimizacao do tratamento clinico."</text></outputEntry>
        <outputEntry id="OE_Rep1_3"><text>"ECCO 2020 - Multidisciplinary Approach"</text></outputEntry>
      <outputEntry id="OE_GEN_COL_008_Reprovado_SemGastro_4"><text>"PROT"</text></outputEntry>
        <outputEntry id="OE_GEN_COL_008_Reprovado_SemGastro_5"><text>"NEGAR"</text></outputEntry>
      </rule>

      <rule id="Rule_GEN_COL_008_Reprovado_SemFalhaTratamento">
        <description>Reprovado - Refratariedade sem documentar falha</description>
        <inputEntry id="IE_Rep2_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep2_2"><text>"Refratariedade"</text></inputEntry>
        <inputEntry id="IE_Rep2_3"><text>true</text></inputEntry>
        <inputEntry id="IE_Rep2_4"><text>false</text></inputEntry>
        <inputEntry id="IE_Rep2_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Rep2_1"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OE_Rep2_2"><text>"Documentar falha aos tratamentos clinicos disponveis (5-ASA, corticoides, imunomoduladores, biologicos) antes de indicar cirurgia por refratariedade."</text></outputEntry>
        <outputEntry id="OE_Rep2_3"><text>"ECCO 2020 - Document Medical Failure"</text></outputEntry>
      <outputEntry id="OE_GEN_COL_008_Reprovado_SemFalhaTratamento_4"><text>"PROT"</text></outputEntry>
        <outputEntry id="OE_GEN_COL_008_Reprovado_SemFalhaTratamento_5"><text>"NEGAR"</text></outputEntry>
      </rule>

      <rule id="Rule_GEN_COL_008_Reprovado_SemLaudo">
        <description>Reprovado - Sem laudo de indicacao</description>
        <inputEntry id="IE_Rep3_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep3_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep3_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep3_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep3_5"><text>false</text></inputEntry>
        <outputEntry id="OE_Rep3_1"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OE_Rep3_2"><text>"Laudo de indicacao obrigatorio com tipo de DII, extensao, tratamentos realizados e indicacao cirurgica especifica."</text></outputEntry>
        <outputEntry id="OE_Rep3_3"><text>"RN 465/2021 - Documentacao Obrigatoria"</text></outputEntry>
      <outputEntry id="OE_GEN_COL_008_Reprovado_SemLaudo_4"><text>"PROT"</text></outputEntry>
        <outputEntry id="OE_GEN_COL_008_Reprovado_SemLaudo_5"><text>"NEGAR"</text></outputEntry>
      </rule>

      <!-- REGRAS DE APROVACAO -->

      <rule id="Rule_GEN_COL_008_Aprovado_Urgencia">
        <description>Aprovado - Urgencia (perfuracao/sangramento/megacolon)</description>
        <inputEntry id="IE_Apr1_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr1_2"><text>"Urgencia_Perfuracao","Urgencia_Sangramento","Megacolon_Toxico"</text></inputEntry>
        <inputEntry id="IE_Apr1_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr1_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr1_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Apr1_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Apr1_2"><text>"URGENCIA - Complicacao grave de DII (perfuracao/sangramento massivo/megacolon toxico). Cirurgia de urgencia indicada. Colectomia subtotal com ileostomia preferida."</text></outputEntry>
        <outputEntry id="OE_Apr1_3"><text>"ECCO/ASCRS 2020 - Emergency Surgery"</text></outputEntry>
      <outputEntry id="OE_GEN_COL_008_Aprovado_Urgencia_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_GEN_COL_008_Aprovado_Urgencia_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <rule id="Rule_GEN_COL_008_Aprovado_Displasia">
        <description>Aprovado - Displasia ou cancer</description>
        <inputEntry id="IE_Apr2_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr2_2"><text>"Displasia_Cancer"</text></inputEntry>
        <inputEntry id="IE_Apr2_3"><text>true</text></inputEntry>
        <inputEntry id="IE_Apr2_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr2_5"><text>true</text></inputEntry>
        <outputEntry id="OE_Apr2_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Apr2_2"><text>"Displasia ou cancer em DII - proctocolectomia indicada. Em UC: bolsa ileal possivel. Em Crohn: avaliar extensao e possibilidade de preservar reto."</text></outputEntry>
        <outputEntry id="OE_Apr2_3"><text>"ECCO 2020 - Dysplasia/Cancer in IBD"</text></outputEntry>
      <outputEntry id="OE_GEN_COL_008_Aprovado_Displasia_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_GEN_COL_008_Aprovado_Displasia_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <rule id="Rule_GEN_COL_008_Aprovado_UC_Refrataria">
        <description>Aprovado - Colite ulcerativa refrataria</description>
        <inputEntry id="IE_Apr3_1"><text>"Colite_Ulcerativa"</text></inputEntry>
        <inputEntry id="IE_Apr3_2"><text>"Refratariedade"</text></inputEntry>
        <inputEntry id="IE_Apr3_3"><text>true</text></inputEntry>
        <inputEntry id="IE_Apr3_4"><text>true</text></inputEntry>
        <inputEntry id="IE_Apr3_5"><text>true</text></inputEntry>
        <outputEntry id="OE_Apr3_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Apr3_2"><text>"Colite ulcerativa refrataria ao tratamento clinico otimizado - proctocolectomia com bolsa ileal (IPAA) aprovada. Cirurgia curativa."</text></outputEntry>
        <outputEntry id="OE_Apr3_3"><text>"ECCO/ASCRS 2020 - Refractory UC Surgery"</text></outputEntry>
      <outputEntry id="OE_GEN_COL_008_Aprovado_UC_Refrataria_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_GEN_COL_008_Aprovado_UC_Refrataria_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <rule id="Rule_GEN_COL_008_Aprovado_Crohn_Estenose">
        <description>Aprovado - Crohn com estenose sintomatica</description>
        <inputEntry id="IE_Apr4_1"><text>"Doenca_Crohn"</text></inputEntry>
        <inputEntry id="IE_Apr4_2"><text>"Estenose"</text></inputEntry>
        <inputEntry id="IE_Apr4_3"><text>true</text></inputEntry>
        <inputEntry id="IE_Apr4_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr4_5"><text>true</text></inputEntry>
        <outputEntry id="OE_Apr4_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Apr4_2"><text>"Doenca de Crohn com estenose sintomatica - resseccao limitada ou esticturoplastia aprovada. Preservar intestino. Laparoscopia preferida."</text></outputEntry>
        <outputEntry id="OE_Apr4_3"><text>"ECCO 2020 - Crohn's Stricture Surgery"</text></outputEntry>
      <outputEntry id="OE_GEN_COL_008_Aprovado_Crohn_Estenose_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_GEN_COL_008_Aprovado_Crohn_Estenose_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <rule id="Rule_GEN_COL_008_Aprovado_Crohn_Fistula">
        <description>Aprovado - Crohn com fistula refrataria</description>
        <inputEntry id="IE_Apr5_1"><text>"Doenca_Crohn"</text></inputEntry>
        <inputEntry id="IE_Apr5_2"><text>"Fistula"</text></inputEntry>
        <inputEntry id="IE_Apr5_3"><text>true</text></inputEntry>
        <inputEntry id="IE_Apr5_4"><text>true</text></inputEntry>
        <inputEntry id="IE_Apr5_5"><text>true</text></inputEntry>
        <outputEntry id="OE_Apr5_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Apr5_2"><text>"Doenca de Crohn com fistula refrataria a tratamento clinico/biologico - resseccao do segmento afetado aprovada. Evitar anastomose em territorio inflamado."</text></outputEntry>
        <outputEntry id="OE_Apr5_3"><text>"ECCO 2020 - Crohn's Fistula Surgery"</text></outputEntry>
      <outputEntry id="OE_GEN_COL_008_Aprovado_Crohn_Fistula_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_GEN_COL_008_Aprovado_Crohn_Fistula_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <!-- REGRAS DE PENDENCIA -->

      <rule id="Rule_GEN_COL_008_Pendente_Indeterminada">
        <description>Pendente - Colite indeterminada requer definicao</description>
        <inputEntry id="IE_Pend1_1"><text>"Indeterminada"</text></inputEntry>
        <inputEntry id="IE_Pend1_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Pend1_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Pend1_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Pend1_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Pend1_1"><text>"Pendente"</text></outputEntry>
        <outputEntry id="OE_Pend1_2"><text>"Colite indeterminada - definir se UC ou Crohn antes de cirurgia eletiva. Bolsa ileal em Crohn tem alto risco de complicacoes."</text></outputEntry>
        <outputEntry id="OE_Pend1_3"><text>"ECCO 2020 - Indeterminate Colitis Workup"</text></outputEntry>
      <outputEntry id="OE_GEN_COL_008_Pendente_Indeterminada_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_GEN_COL_008_Pendente_Indeterminada_5"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>

      <!-- REGRA FALLBACK -->

      <rule id="Rule_GEN_COL_008_Fallback">
        <description>Fallback - Analise especializada</description>
        <inputEntry id="IE_Fallback_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Fallback_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Fallback_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Fallback_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Fallback_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Fallback_1"><text>"Pendente"</text></outputEntry>
        <outputEntry id="OE_Fallback_2"><text>"Caso de doenca inflamatoria intestinal requer analise por equipe multidisciplinar (coloproctologia + gastroenterologia)."</text></outputEntry>
        <outputEntry id="OE_Fallback_3"><text>"Auditoria DII - RN 428/2017"</text></outputEntry>
      <outputEntry id="OE_GEN_COL_008_Fallback_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_GEN_COL_008_Fallback_5"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>

    </decisionTable>
  </decision>
</definitions>
