<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="https://www.omg.org/spec/DMN/20191111/MODEL/"
             xmlns:dmndi="https://www.omg.org/spec/DMN/20191111/DMNDI/"
             xmlns:dc="http://www.omg.org/spec/DD/20100524/DC/"
             xmlns:di="http://www.omg.org/spec/DD/20100524/DI/"
             id="Definitions_GEN_HEP_007"
             name="Cirurgia Pancreatica - Criterios Whipple"
             namespace="http://camunda.org/schema/1.0/dmn"
             exporter="Camunda Modeler"
             exporterVersion="5.0.0">
  <!--
    GEN-HEP-007 - Duodenopancreatectomia (Whipple) - Criterios de Indicacao
    Versao: 1.0.0 (2026-02-07)
    Especialidade: Cirurgia Geral - Hepatobiliar/Pancreatica
    Categoria: Procedimentos Cirurgicos Oncologicos

    Indicacoes Clinicas (NCCN 2024 / ISGPS 2017):
    - Adenocarcinoma de cabeca de pancreas ressecavel
    - Adenocarcinoma de ampola de Vater
    - Colangiocarcinoma distal
    - Tumores duodenais periampulares
    - Tumores neuroendocrinos de cabeca de pancreas

    Criterios de Ressecabilidade (NCCN):
    - Ausencia de contato com arteria mesenterica superior (AMS)
    - Ausencia de contato com tronco celiaco (TC)
    - Veia porta/mesenterica superior patente

    Borderline Ressecavel:
    - Contato venoso ≤180 graus, reconstruivel
    - Contato com AMS ≤180 graus

    Documentacao Obrigatoria:
    - TC trifasica de abdome com protocolo pancreatico
    - CA 19-9 serico
    - Biopsia ou citologia confirmando malignidade
    - Discussao em tumor board

    Referencias Normativas:
    - NCCN Guidelines 2024 - Pancreatic Adenocarcinoma
    - ISGPS 2017 - Resectability Definitions
    - ESMO 2023 - Pancreatic Cancer
  -->

  <decision id="Decision_GEN_HEP_007" name="Criterios de Autorizacao - Duodenopancreatectomia Whipple">
    <decisionTable id="DecisionTable_GEN_HEP_007" hitPolicy="FIRST">

      <!-- Input 1: Diagnostico Confirmado -->
      <input id="Input_diagnostico" label="Diagnostico Confirmado">
        <inputExpression id="InputExpr_diagnostico" typeRef="string">
          <text>diagnosticoConfirmado</text>
        </inputExpression>
        <inputValues id="InputValues_diagnostico">
          <text>"Adenoca_Pancreas","Adenoca_Ampola","Colangiocarcinoma_Distal","Tumor_Duodenal","Neuroendocrino","Suspeita_Sem_Biopsia"</text>
        </inputValues>
      </input>

      <!-- Input 2: Status de Ressecabilidade -->
      <input id="Input_ressecabilidade" label="Status de Ressecabilidade (NCCN)">
        <inputExpression id="InputExpr_ressecabilidade" typeRef="string">
          <text>statusRessecabilidade</text>
        </inputExpression>
        <inputValues id="InputValues_ressecabilidade">
          <text>"Ressecavel","Borderline_Ressecavel","Localmente_Avancado","Metastatico"</text>
        </inputValues>
      </input>

      <!-- Input 3: TC Protocolo Pancreatico -->
      <input id="Input_tcPancreatico" label="TC Trifasica Protocolo Pancreatico">
        <inputExpression id="InputExpr_tcPancreatico" typeRef="boolean">
          <text>tcProtocoloPancreatico</text>
        </inputExpression>
      </input>

      <!-- Input 4: Performance Status -->
      <input id="Input_performanceStatus" label="Performance Status (ECOG)">
        <inputExpression id="InputExpr_performanceStatus" typeRef="string">
          <text>performanceStatusECOG</text>
        </inputExpression>
        <inputValues id="InputValues_performanceStatus">
          <text>"ECOG_0","ECOG_1","ECOG_2","ECOG_3","ECOG_4"</text>
        </inputValues>
      </input>

      <!-- Input 5: Tumor Board Documentado -->
      <input id="Input_tumorBoard" label="Discussao Tumor Board">
        <inputExpression id="InputExpr_tumorBoard" typeRef="boolean">
          <text>discussaoTumorBoard</text>
        </inputExpression>
      </input>

      <!-- Output 1: Resultado -->
      <output id="Output_resultado" label="Resultado" name="resultado" typeRef="string">
        <outputValues id="OutputValues_resultado">
          <text>"Aprovado","Reprovado","Pendente"</text>
        </outputValues>
      </output>

      <!-- Output 2: Observacao -->
      <output id="Output_observacao" label="Observacao Clinica" name="observacao" typeRef="string" />

      <!-- Output 3: Fundamentacao -->
      <output id="Output_fundamentacao" label="Fundamentacao" name="fundamentacao" typeRef="string" />

      <!-- Output 4: Alertas Desperdicio -->
      <output id="Output_alertasDesperdicio" label="Alertas de Desperdicio" name="alertasDesperdicio" typeRef="string">
        <outputValues id="OutputValues_alertasDesperdicio">
          <text>"NENHUM","DUP","FREQ","ESC","DOC","PROT","MULTI"</text>
        </outputValues>
      </output>

      <!-- Output 5: Acao Recomendada -->
      <output id="Output_acaoRecomendada" label="Acao Recomendada" name="acaoRecomendada" typeRef="string">
        <outputValues id="OutputValues_acaoRecomendada">
          <text>"APROVAR","NEGAR","SOLICITAR_INFO","AGUARDAR_PRAZO","SUGERIR_ALTERNATIVA"</text>
        </outputValues>
      </output>

      <!-- REGRAS DE REPROVACAO -->

      <rule id="Rule_GEN_HEP_007_Reprovado_Metastatico">
        <description>Reprovado - Doenca metastatica</description>
        <inputEntry id="IE_Rep1_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep1_2"><text>"Metastatico"</text></inputEntry>
        <inputEntry id="IE_Rep1_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep1_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep1_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Rep1_1"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OE_Rep1_2"><text>"Doenca pancreatica metastatica - cirurgia curativa nao indicada. Tratamento sistemico paliativo recomendado."</text></outputEntry>
        <outputEntry id="OE_Rep1_3"><text>"NCCN 2024 - Metastatic Pancreatic Cancer"</text></outputEntry>
      <outputEntry id="OE_GEN_HEP_007_Reprovado_Metastatico_4"><text>"PROT"</text></outputEntry>
        <outputEntry id="OE_GEN_HEP_007_Reprovado_Metastatico_5"><text>"NEGAR"</text></outputEntry>
      </rule>

      <rule id="Rule_GEN_HEP_007_Reprovado_PerformanceRuim">
        <description>Reprovado - Performance status inadequado</description>
        <inputEntry id="IE_Rep2_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep2_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep2_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep2_4"><text>"ECOG_3","ECOG_4"</text></inputEntry>
        <inputEntry id="IE_Rep2_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Rep2_1"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OE_Rep2_2"><text>"Performance status ECOG 3-4 contraindica procedimento de grande porte como duodenopancreatectomia. Considerar tratamento paliativo."</text></outputEntry>
        <outputEntry id="OE_Rep2_3"><text>"NCCN 2024 - Performance Status Criteria"</text></outputEntry>
      <outputEntry id="OE_GEN_HEP_007_Reprovado_PerformanceRuim_4"><text>"PROT"</text></outputEntry>
        <outputEntry id="OE_GEN_HEP_007_Reprovado_PerformanceRuim_5"><text>"NEGAR"</text></outputEntry>
      </rule>

      <rule id="Rule_GEN_HEP_007_Reprovado_SemTC">
        <description>Reprovado - Sem TC protocolo pancreatico</description>
        <inputEntry id="IE_Rep3_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep3_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep3_3"><text>false</text></inputEntry>
        <inputEntry id="IE_Rep3_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep3_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Rep3_1"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OE_Rep3_2"><text>"TC trifasica com protocolo pancreatico obrigatoria para avaliacao de ressecabilidade e relacao com estruturas vasculares."</text></outputEntry>
        <outputEntry id="OE_Rep3_3"><text>"NCCN 2024 - Imaging Requirements"</text></outputEntry>
      <outputEntry id="OE_GEN_HEP_007_Reprovado_SemTC_4"><text>"PROT"</text></outputEntry>
        <outputEntry id="OE_GEN_HEP_007_Reprovado_SemTC_5"><text>"NEGAR"</text></outputEntry>
      </rule>

      <rule id="Rule_GEN_HEP_007_Reprovado_SemTumorBoard">
        <description>Reprovado - Sem discussao multidisciplinar</description>
        <inputEntry id="IE_Rep4_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep4_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep4_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep4_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep4_5"><text>false</text></inputEntry>
        <outputEntry id="OE_Rep4_1"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OE_Rep4_2"><text>"Discussao em tumor board multidisciplinar obrigatoria para indicacao de duodenopancreatectomia."</text></outputEntry>
        <outputEntry id="OE_Rep4_3"><text>"NCCN 2024 - MDT Requirement"</text></outputEntry>
      <outputEntry id="OE_GEN_HEP_007_Reprovado_SemTumorBoard_4"><text>"PROT"</text></outputEntry>
        <outputEntry id="OE_GEN_HEP_007_Reprovado_SemTumorBoard_5"><text>"NEGAR"</text></outputEntry>
      </rule>

      <!-- REGRAS DE APROVACAO -->

      <rule id="Rule_GEN_HEP_007_Aprovado_Ressecavel">
        <description>Aprovado - Tumor ressecavel upfront</description>
        <inputEntry id="IE_Apr1_1"><text>"Adenoca_Pancreas","Adenoca_Ampola","Colangiocarcinoma_Distal","Tumor_Duodenal","Neuroendocrino"</text></inputEntry>
        <inputEntry id="IE_Apr1_2"><text>"Ressecavel"</text></inputEntry>
        <inputEntry id="IE_Apr1_3"><text>true</text></inputEntry>
        <inputEntry id="IE_Apr1_4"><text>"ECOG_0","ECOG_1"</text></inputEntry>
        <inputEntry id="IE_Apr1_5"><text>true</text></inputEntry>
        <outputEntry id="OE_Apr1_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Apr1_2"><text>"Tumor periampular ressecavel, ECOG 0-1 - duodenopancreatectomia (Whipple) aprovada. Procedimento deve ser realizado em centro de alto volume."</text></outputEntry>
        <outputEntry id="OE_Apr1_3"><text>"NCCN 2024 - Resectable Pancreatic Cancer Surgery"</text></outputEntry>
      <outputEntry id="OE_GEN_HEP_007_Aprovado_Ressecavel_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_GEN_HEP_007_Aprovado_Ressecavel_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <rule id="Rule_GEN_HEP_007_Aprovado_ECOG2_Ressecavel">
        <description>Aprovado - ECOG 2 ressecavel com avaliacao</description>
        <inputEntry id="IE_Apr2_1"><text>"Adenoca_Pancreas","Adenoca_Ampola","Colangiocarcinoma_Distal","Tumor_Duodenal","Neuroendocrino"</text></inputEntry>
        <inputEntry id="IE_Apr2_2"><text>"Ressecavel"</text></inputEntry>
        <inputEntry id="IE_Apr2_3"><text>true</text></inputEntry>
        <inputEntry id="IE_Apr2_4"><text>"ECOG_2"</text></inputEntry>
        <inputEntry id="IE_Apr2_5"><text>true</text></inputEntry>
        <outputEntry id="OE_Apr2_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Apr2_2"><text>"Tumor ressecavel em paciente ECOG 2 - cirurgia aprovada com avaliacao geriatrica/nutricional pre-operatoria mandatoria."</text></outputEntry>
        <outputEntry id="OE_Apr2_3"><text>"NCCN 2024 - ECOG 2 Surgical Candidacy"</text></outputEntry>
      <outputEntry id="OE_GEN_HEP_007_Aprovado_ECOG2_Ressecavel_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_GEN_HEP_007_Aprovado_ECOG2_Ressecavel_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <!-- REGRAS DE PENDENCIA -->

      <rule id="Rule_GEN_HEP_007_Pendente_Borderline">
        <description>Pendente - Borderline ressecavel requer neoadjuvancia</description>
        <inputEntry id="IE_Pend1_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Pend1_2"><text>"Borderline_Ressecavel"</text></inputEntry>
        <inputEntry id="IE_Pend1_3"><text>true</text></inputEntry>
        <inputEntry id="IE_Pend1_4"><text>"ECOG_0","ECOG_1","ECOG_2"</text></inputEntry>
        <inputEntry id="IE_Pend1_5"><text>true</text></inputEntry>
        <outputEntry id="OE_Pend1_1"><text>"Pendente"</text></outputEntry>
        <outputEntry id="OE_Pend1_2"><text>"Tumor borderline ressecavel - considerar quimioterapia neoadjuvante (FOLFIRINOX ou Gem-NabP) antes de resseccao. Anexar plano de neoadjuvancia do tumor board."</text></outputEntry>
        <outputEntry id="OE_Pend1_3"><text>"NCCN 2024 - Borderline Resectable Management"</text></outputEntry>
      <outputEntry id="OE_GEN_HEP_007_Pendente_Borderline_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_GEN_HEP_007_Pendente_Borderline_5"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>

      <rule id="Rule_GEN_HEP_007_Pendente_LocalmenteAvancado">
        <description>Pendente - Localmente avancado requer inducao</description>
        <inputEntry id="IE_Pend2_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Pend2_2"><text>"Localmente_Avancado"</text></inputEntry>
        <inputEntry id="IE_Pend2_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Pend2_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Pend2_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Pend2_1"><text>"Pendente"</text></outputEntry>
        <outputEntry id="OE_Pend2_2"><text>"Tumor localmente avancado - iniciar quimioterapia de inducao. Reavaliar ressecabilidade apos 4-6 meses. Cirurgia nao indicada upfront."</text></outputEntry>
        <outputEntry id="OE_Pend2_3"><text>"NCCN 2024 - Locally Advanced Management"</text></outputEntry>
      <outputEntry id="OE_GEN_HEP_007_Pendente_LocalmenteAvancado_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_GEN_HEP_007_Pendente_LocalmenteAvancado_5"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>

      <rule id="Rule_GEN_HEP_007_Pendente_SemBiopsia">
        <description>Pendente - Suspeita sem confirmacao histologica</description>
        <inputEntry id="IE_Pend3_1"><text>"Suspeita_Sem_Biopsia"</text></inputEntry>
        <inputEntry id="IE_Pend3_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Pend3_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Pend3_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Pend3_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Pend3_1"><text>"Pendente"</text></outputEntry>
        <outputEntry id="OE_Pend3_2"><text>"Suspeita de neoplasia sem confirmacao histologica - realizar ecoendoscopia com biopsia (EUS-FNA/FNB) para confirmacao diagnostica antes de cirurgia de grande porte."</text></outputEntry>
        <outputEntry id="OE_Pend3_3"><text>"NCCN 2024 - Tissue Diagnosis Requirement"</text></outputEntry>
      <outputEntry id="OE_GEN_HEP_007_Pendente_SemBiopsia_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_GEN_HEP_007_Pendente_SemBiopsia_5"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>

      <!-- REGRA FALLBACK -->

      <rule id="Rule_GEN_HEP_007_Fallback">
        <description>Fallback - Analise pancreatica especializada</description>
        <inputEntry id="IE_Fallback_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Fallback_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Fallback_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Fallback_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Fallback_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Fallback_1"><text>"Pendente"</text></outputEntry>
        <outputEntry id="OE_Fallback_2"><text>"Caso de cirurgia pancreatica requer analise por auditor medico especializado com revisao de tumor board."</text></outputEntry>
        <outputEntry id="OE_Fallback_3"><text>"Auditoria oncologica pancreatica - RN 428/2017"</text></outputEntry>
      <outputEntry id="OE_GEN_HEP_007_Fallback_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_GEN_HEP_007_Fallback_5"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>

    </decisionTable>
  </decision>
</definitions>
