<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="https://www.omg.org/spec/DMN/20191111/MODEL/"
             xmlns:camunda="http://camunda.org/schema/1.0/dmn"
             id="Definitions_GEN_END_007"
             name="Insulinoma - Localizacao e Cirurgia"
             namespace="http://camunda.org/schema/1.0/dmn">

  <!--
    ===============================================================================
    CODIGO: GEN-END-007
    Procedimento: Insulinoma - Criterios para Localizacao e Tratamento Cirurgico
    Especialidade: Cirurgia Geral - Cirurgia Endocrina
    Versao: 3.0.0-TIER1
    Data: 2026-02-07
    ===============================================================================

    INDICACOES CIRURGICAS:
    - Insulinoma bioquimicamente confirmado
    - Hipoglicemia sintomatica documentada
    - Localizacao pre ou intraoperatoria confirmada
    - Enucleacao ou pancreatectomia conforme localizacao

    CONTRAINDICACOES RELATIVAS:
    - Suspeita nao confirmada bioquimicamente
    - Insulinoma metastatico (tratamento paliativo)
    - Risco cirurgico proibitivo

    REFERENCIAS TECNICAS:
    - ENETS Guidelines 2016
    - NANETS Guidelines 2020
    - Annals of Surgery Consensus 2018

    ===============================================================================
  -->

  <decision id="Decision_GEN_END_007" name="Regra Clinica - Insulinoma">
    <decisionTable id="DecisionTable_GEN_END_007" hitPolicy="FIRST">

      <!-- ========== INPUTS (5) ========== -->

      <input id="Input_confirmacaoBioquimica" label="Confirmacao Bioquimica (Teste de Jejum)" camunda:inputVariable="confirmacaoBioquimica">
        <inputExpression id="InputExpression_confirmacaoBioquimica" typeRef="string">
          <text>confirmacaoBioquimica</text>
        </inputExpression>
        <inputValues id="InputValues_confirmacaoBioquimica">
          <text>"Positivo","Negativo","Inconclusivo","NaoRealizado"</text>
        </inputValues>
      </input>

      <input id="Input_localizacaoPorImagem" label="Localizacao por Imagem" camunda:inputVariable="localizacaoPorImagem">
        <inputExpression id="InputExpression_localizacaoPorImagem" typeRef="string">
          <text>localizacaoPorImagem</text>
        </inputExpression>
        <inputValues id="InputValues_localizacaoPorImagem">
          <text>"Localizado_TC","Localizado_RNM","Localizado_EcoEndo","Multiplos","NaoLocalizado"</text>
        </inputValues>
      </input>

      <input id="Input_tamanhoTumor" label="Tamanho do Tumor (mm)" camunda:inputVariable="tamanhoTumor">
        <inputExpression id="InputExpression_tamanhoTumor" typeRef="number">
          <text>tamanhoTumor</text>
        </inputExpression>
      </input>

      <input id="Input_localizacaoAnatomica" label="Localizacao Anatomica" camunda:inputVariable="localizacaoAnatomica">
        <inputExpression id="InputExpression_localizacaoAnatomica" typeRef="string">
          <text>localizacaoAnatomica</text>
        </inputExpression>
        <inputValues id="InputValues_localizacaoAnatomica">
          <text>"Cabeca","CorpoCauda","Cauda","Multiplos","NaoDefinida"</text>
        </inputValues>
      </input>

      <input id="Input_suspeitaMetastase" label="Suspeita de Metastase" camunda:inputVariable="suspeitaMetastase">
        <inputExpression id="InputExpression_suspeitaMetastase" typeRef="boolean">
          <text>suspeitaMetastase</text>
        </inputExpression>
      </input>

      <!-- ========== OUTPUTS (3) ========== -->

      <output id="Output_resultado" label="Resultado" name="resultado" typeRef="string">
        <outputValues id="OutputValues_resultado">
          <text>"Aprovado","Reprovado","Pendente"</text>
        </outputValues>
      </output>

      <output id="Output_observacao" label="Observacao Clinica" name="observacao" typeRef="string" />

      <output id="Output_fundamentacao" label="Fundamentacao Tecnica" name="fundamentacao" typeRef="string" />

      <!-- Output 4: Alertas Desperdicio -->
      <output id="Output_alertasDesperdicio" label="Alertas de Desperdicio" name="alertasDesperdicio" typeRef="string">
        <outputValues id="OutputValues_alertasDesperdicio">
          <text>"NENHUM","DUP","FREQ","ESC","DOC","PROT","MULTI"</text>
        </outputValues>
      </output>

      <!-- Output 5: Acao Recomendada -->
      <output id="Output_acaoRecomendada" label="Acao Recomendada" name="acaoRecomendada" typeRef="string">
        <outputValues id="OutputValues_acaoRecomendada">
          <text>"APROVAR","NEGAR","SOLICITAR_INFO","AGUARDAR_PRAZO","SUGERIR_ALTERNATIVA"</text>
        </outputValues>
      </output>

      <!-- ========== REGRAS DE REPROVACAO ========== -->

      <rule id="Rule_Reprovado_SemConfirmacao">
        <description>Reprovado: Diagnostico bioquimico nao confirmado</description>
        <inputEntry id="IE_Rep1_1"><text>"Negativo","NaoRealizado"</text></inputEntry>
        <inputEntry id="IE_Rep1_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep1_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep1_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep1_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Rep1_1"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OE_Rep1_2"><text>"Insulinoma nao confirmado bioquimicamente - realizar teste de jejum de 72h"</text></outputEntry>
        <outputEntry id="OE_Rep1_3"><text>"ENETS 2016 - Confirmacao bioquimica obrigatoria antes de localizacao"</text></outputEntry>
      <outputEntry id="OE_Reprovado_SemConfirmacao_4"><text>"PROT"</text></outputEntry>
        <outputEntry id="OE_Reprovado_SemConfirmacao_5"><text>"NEGAR"</text></outputEntry>
      </rule>

      <rule id="Rule_Reprovado_Metastatico">
        <description>Reprovado: Insulinoma metastatico - tratamento multidisciplinar</description>
        <inputEntry id="IE_Rep2_1"><text>"Positivo"</text></inputEntry>
        <inputEntry id="IE_Rep2_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep2_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep2_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep2_5"><text>true</text></inputEntry>
        <outputEntry id="OE_Rep2_1"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OE_Rep2_2"><text>"Insulinoma metastatico - tratamento multimodal, discussao em junta de tumores neuroendocrinos"</text></outputEntry>
        <outputEntry id="OE_Rep2_3"><text>"NANETS 2020 - Manejo de insulinoma maligno requer abordagem multidisciplinar"</text></outputEntry>
      <outputEntry id="OE_Reprovado_Metastatico_4"><text>"PROT"</text></outputEntry>
        <outputEntry id="OE_Reprovado_Metastatico_5"><text>"NEGAR"</text></outputEntry>
      </rule>

      <!-- ========== REGRAS DE APROVACAO ========== -->

      <rule id="Rule_Aprovado_LocalizadoUnico">
        <description>Aprovado: Insulinoma unico localizado</description>
        <inputEntry id="IE_Apr1_1"><text>"Positivo"</text></inputEntry>
        <inputEntry id="IE_Apr1_2"><text>"Localizado_TC","Localizado_RNM","Localizado_EcoEndo"</text></inputEntry>
        <inputEntry id="IE_Apr1_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr1_4"><text>"Cabeca","CorpoCauda","Cauda"</text></inputEntry>
        <inputEntry id="IE_Apr1_5"><text>false</text></inputEntry>
        <outputEntry id="OE_Apr1_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Apr1_2"><text>"Insulinoma unico localizado - enucleacao ou pancreatectomia parcial indicada"</text></outputEntry>
        <outputEntry id="OE_Apr1_3"><text>"ENETS 2016 - Resseccao curativa em 90% dos insulinomas benignos"</text></outputEntry>
      <outputEntry id="OE_Aprovado_LocalizadoUnico_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Aprovado_LocalizadoUnico_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <rule id="Rule_Aprovado_CaudaPancreas">
        <description>Aprovado: Localizado na cauda - pancreatectomia distal</description>
        <inputEntry id="IE_Apr2_1"><text>"Positivo"</text></inputEntry>
        <inputEntry id="IE_Apr2_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr2_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr2_4"><text>"Cauda","CorpoCauda"</text></inputEntry>
        <inputEntry id="IE_Apr2_5"><text>false</text></inputEntry>
        <outputEntry id="OE_Apr2_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Apr2_2"><text>"Insulinoma em corpo/cauda - pancreatectomia distal com preservacao esplenica se possivel"</text></outputEntry>
        <outputEntry id="OE_Apr2_3"><text>"Annals of Surgery 2018 - Pancreatectomia distal para tumores distais"</text></outputEntry>
      <outputEntry id="OE_Aprovado_CaudaPancreas_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Aprovado_CaudaPancreas_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <rule id="Rule_Aprovado_NaoLocalizadoBioquimico">
        <description>Aprovado: Bioquimico positivo, nao localizado - exploracao</description>
        <inputEntry id="IE_Apr3_1"><text>"Positivo"</text></inputEntry>
        <inputEntry id="IE_Apr3_2"><text>"NaoLocalizado"</text></inputEntry>
        <inputEntry id="IE_Apr3_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr3_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr3_5"><text>false</text></inputEntry>
        <outputEntry id="OE_Apr3_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Apr3_2"><text>"Insulinoma confirmado mas nao localizado - exploracao cirurgica com US intraoperatorio"</text></outputEntry>
        <outputEntry id="OE_Apr3_3"><text>"ENETS 2016 - US intraoperatorio identifica &gt; 95% dos insulinomas"</text></outputEntry>
      <outputEntry id="OE_Aprovado_NaoLocalizadoBioquimico_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Aprovado_NaoLocalizadoBioquimico_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <rule id="Rule_Aprovado_Pequeno">
        <description>Aprovado: Tumor pequeno para enucleacao</description>
        <inputEntry id="IE_Apr4_1"><text>"Positivo"</text></inputEntry>
        <inputEntry id="IE_Apr4_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr4_3"><text>&lt;= 20</text></inputEntry>
        <inputEntry id="IE_Apr4_4"><text>not("Cabeca")</text></inputEntry>
        <inputEntry id="IE_Apr4_5"><text>false</text></inputEntry>
        <outputEntry id="OE_Apr4_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Apr4_2"><text>"Tumor &lt;= 2cm superficial - enucleacao preferida se distante do ducto pancreatico"</text></outputEntry>
        <outputEntry id="OE_Apr4_3"><text>"NANETS 2020 - Enucleacao preserva parenquima pancreatico"</text></outputEntry>
      <outputEntry id="OE_Aprovado_Pequeno_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Aprovado_Pequeno_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <!-- ========== REGRA FALLBACK ========== -->

      <rule id="Rule_Fallback_GEN_END_007">
        <description>Pendente: Completar localizacao pre-operatoria</description>
        <inputEntry id="IE_FB_1"><text>-</text></inputEntry>
        <inputEntry id="IE_FB_2"><text>-</text></inputEntry>
        <inputEntry id="IE_FB_3"><text>-</text></inputEntry>
        <inputEntry id="IE_FB_4"><text>-</text></inputEntry>
        <inputEntry id="IE_FB_5"><text>-</text></inputEntry>
        <outputEntry id="OE_FB_1"><text>"Pendente"</text></outputEntry>
        <outputEntry id="OE_FB_2"><text>"Realizar ecoendoscopia e/ou RNM pancreatica para localizacao precisa"</text></outputEntry>
        <outputEntry id="OE_FB_3"><text>"ENETS 2016 - Localizacao pre-operatoria otimiza planejamento cirurgico"</text></outputEntry>
      <outputEntry id="OE_Fallback_GEN_END_007_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Fallback_GEN_END_007_5"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>

    </decisionTable>
  </decision>
</definitions>
