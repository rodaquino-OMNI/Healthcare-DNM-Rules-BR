<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="https://www.omg.org/spec/DMN/20191111/MODEL/"
             xmlns:dmndi="https://www.omg.org/spec/DMN/20191111/DMNDI/"
             xmlns:dc="http://www.omg.org/spec/DD/20100524/DC/"
             xmlns:di="http://www.omg.org/spec/DD/20100524/DI/"
             id="Definitions_GEN_UGI_006"
             name="GIST Gastrico - Criterios de Resseccao"
             namespace="http://camunda.org/schema/1.0/dmn"
             exporter="Camunda Modeler"
             exporterVersion="5.0.0">
  <!--
    GEN-UGI-006 - GIST Gastrico - Criterios para Resseccao Cirurgica
    Versao: 1.0.0 (2026-02-07)
    Especialidade: Cirurgia Geral - Oncologia Gastrica
    Categoria: Procedimentos Cirurgicos Oncologicos

    Caracteristicas do GIST (ESMO/NCCN):
    - Tumor estromal gastrointestinal
    - Origem: celulas intersticiais de Cajal
    - Marcador: CD117 (c-KIT) positivo
    - Localizacao: estomago (60%), intestino delgado (30%)

    Classificacao de Risco (NIH/AFIP):
    - Muito baixo: <2cm, <5 mitoses/50HPF
    - Baixo: 2-5cm, <5 mitoses
    - Intermediario: <5cm 6-10 mitoses ou 5-10cm <5 mitoses
    - Alto: >10cm, >10 mitoses, ruptura tumoral

    Indicacoes Cirurgicas:
    - GIST >2cm: Resseccao recomendada
    - GIST 1-2cm: Individualizar (EUS, observacao)
    - GIST <1cm: Observacao, resseccao se sintomatico

    Principios Cirurgicos:
    - Resseccao R0 com margem negativa
    - Nao requer linfadenectomia (raro metastase linfonodal)
    - Evitar ruptura tumoral (implantes peritoneais)
    - Laparoscopia possivel se <5cm

    Tratamento Neoadjuvante:
    - Imatinib pre-op para tumores marginalmente ressecaveis
    - Reduz tamanho, permite resseccao menos extensa

    Referencias Normativas:
    - ESMO GIST Guidelines 2021
    - NCCN Soft Tissue Sarcoma 2024
    - GIST Consensus Meeting 2020
  -->

  <decision id="Decision_GEN_UGI_006" name="Criterios de Autorizacao - GIST Gastrico">
    <decisionTable id="DecisionTable_GEN_UGI_006" hitPolicy="FIRST">

      <!-- Input 1: Tamanho do Tumor -->
      <input id="Input_tamanho" label="Tamanho do GIST">
        <inputExpression id="InputExpr_tamanho" typeRef="string">
          <text>tamanhoTumor</text>
        </inputExpression>
        <inputValues id="InputValues_tamanho">
          <text>"Menos_2cm","2_5cm","5_10cm","Mais_10cm"</text>
        </inputValues>
      </input>

      <!-- Input 2: Confirmacao Diagnostica -->
      <input id="Input_confirmacao" label="Confirmacao Diagnostica (Biopsia/CD117)">
        <inputExpression id="InputExpr_confirmacao" typeRef="string">
          <text>confirmacaoDiagnostica</text>
        </inputExpression>
        <inputValues id="InputValues_confirmacao">
          <text>"CD117_Positivo","Suspeito_Imagem","Nao_Biopsiado"</text>
        </inputValues>
      </input>

      <!-- Input 3: Exames de Estadiamento -->
      <input id="Input_estadiamento" label="TC Abdome/Pelve">
        <inputExpression id="InputExpr_estadiamento" typeRef="boolean">
          <text>tcEstadiamento</text>
        </inputExpression>
      </input>

      <!-- Input 4: Ressecabilidade -->
      <input id="Input_ressecabilidade" label="Ressecabilidade">
        <inputExpression id="InputExpr_ressecabilidade" typeRef="string">
          <text>ressecabilidade</text>
        </inputExpression>
        <inputValues id="InputValues_ressecabilidade">
          <text>"Ressecavel","Marginalmente_Ressecavel","Irressecavel","Metastatico"</text>
        </inputValues>
      </input>

      <!-- Input 5: Laudo de Indicacao -->
      <input id="Input_laudoIndicacao" label="Laudo de Indicacao">
        <inputExpression id="InputExpr_laudoIndicacao" typeRef="boolean">
          <text>laudoIndicacao</text>
        </inputExpression>
      </input>

      <!-- Output 1: Resultado -->
      <output id="Output_resultado" label="Resultado" name="resultado" typeRef="string">
        <outputValues id="OutputValues_resultado">
          <text>"Aprovado","Reprovado","Pendente"</text>
        </outputValues>
      </output>

      <!-- Output 2: Observacao -->
      <output id="Output_observacao" label="Observacao Clinica" name="observacao" typeRef="string" />

      <!-- Output 3: Fundamentacao -->
      <output id="Output_fundamentacao" label="Fundamentacao" name="fundamentacao" typeRef="string" />

      <!-- Output 4: Alertas Desperdicio -->
      <output id="Output_alertasDesperdicio" label="Alertas de Desperdicio" name="alertasDesperdicio" typeRef="string">
        <outputValues id="OutputValues_alertasDesperdicio">
          <text>"NENHUM","DUP","FREQ","ESC","DOC","PROT","MULTI"</text>
        </outputValues>
      </output>

      <!-- Output 5: Acao Recomendada -->
      <output id="Output_acaoRecomendada" label="Acao Recomendada" name="acaoRecomendada" typeRef="string">
        <outputValues id="OutputValues_acaoRecomendada">
          <text>"APROVAR","NEGAR","SOLICITAR_INFO","AGUARDAR_PRAZO","SUGERIR_ALTERNATIVA"</text>
        </outputValues>
      </output>

      <!-- REGRAS DE REPROVACAO -->

      <rule id="Rule_GEN_UGI_006_Reprovado_Metastatico">
        <description>Reprovado - GIST metastatico sem indicacao de citoreduccao</description>
        <inputEntry id="IE_Rep1_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep1_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep1_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep1_4"><text>"Metastatico"</text></inputEntry>
        <inputEntry id="IE_Rep1_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Rep1_1"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OE_Rep1_2"><text>"GIST metastatico - tratamento sistemico com imatinib primeira linha. Cirurgia apenas para citorreduccao em resposta parcial ou progressao limitada."</text></outputEntry>
        <outputEntry id="OE_Rep1_3"><text>"ESMO 2021 - Metastatic GIST Treatment"</text></outputEntry>
      <outputEntry id="OE_GEN_UGI_006_Reprovado_Metastatico_4"><text>"PROT"</text></outputEntry>
        <outputEntry id="OE_GEN_UGI_006_Reprovado_Metastatico_5"><text>"NEGAR"</text></outputEntry>
      </rule>

      <rule id="Rule_GEN_UGI_006_Reprovado_SemTC">
        <description>Reprovado - Sem TC de estadiamento</description>
        <inputEntry id="IE_Rep2_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep2_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep2_3"><text>false</text></inputEntry>
        <inputEntry id="IE_Rep2_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep2_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Rep2_1"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OE_Rep2_2"><text>"TC de abdome e pelve obrigatoria para estadiamento de GIST antes de resseccao. Avaliar metastases hepaticas e peritoneais."</text></outputEntry>
        <outputEntry id="OE_Rep2_3"><text>"ESMO 2021 - CT Staging Required"</text></outputEntry>
      <outputEntry id="OE_GEN_UGI_006_Reprovado_SemTC_4"><text>"PROT"</text></outputEntry>
        <outputEntry id="OE_GEN_UGI_006_Reprovado_SemTC_5"><text>"NEGAR"</text></outputEntry>
      </rule>

      <rule id="Rule_GEN_UGI_006_Reprovado_SemLaudo">
        <description>Reprovado - Sem laudo de indicacao</description>
        <inputEntry id="IE_Rep3_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep3_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep3_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep3_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep3_5"><text>false</text></inputEntry>
        <outputEntry id="OE_Rep3_1"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OE_Rep3_2"><text>"Laudo de indicacao obrigatorio com tamanho, localizacao, confirmacao diagnostica e classificacao de risco."</text></outputEntry>
        <outputEntry id="OE_Rep3_3"><text>"RN 465/2021 - Documentacao Obrigatoria"</text></outputEntry>
      <outputEntry id="OE_GEN_UGI_006_Reprovado_SemLaudo_4"><text>"PROT"</text></outputEntry>
        <outputEntry id="OE_GEN_UGI_006_Reprovado_SemLaudo_5"><text>"NEGAR"</text></outputEntry>
      </rule>

      <!-- REGRAS DE APROVACAO -->

      <rule id="Rule_GEN_UGI_006_Aprovado_Maior2cm">
        <description>Aprovado - GIST maior que 2cm ressecavel</description>
        <inputEntry id="IE_Apr1_1"><text>"2_5cm","5_10cm","Mais_10cm"</text></inputEntry>
        <inputEntry id="IE_Apr1_2"><text>"CD117_Positivo","Suspeito_Imagem"</text></inputEntry>
        <inputEntry id="IE_Apr1_3"><text>true</text></inputEntry>
        <inputEntry id="IE_Apr1_4"><text>"Ressecavel"</text></inputEntry>
        <inputEntry id="IE_Apr1_5"><text>true</text></inputEntry>
        <outputEntry id="OE_Apr1_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Apr1_2"><text>"GIST >2cm ressecavel - resseccao em cunha ou gastrectomia segmentar aprovada. Margem negativa essencial, linfadenectomia nao necessaria."</text></outputEntry>
        <outputEntry id="OE_Apr1_3"><text>"ESMO 2021 / NCCN 2024 - GIST Resection"</text></outputEntry>
      <outputEntry id="OE_GEN_UGI_006_Aprovado_Maior2cm_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_GEN_UGI_006_Aprovado_Maior2cm_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <rule id="Rule_GEN_UGI_006_Aprovado_Menor2cm_Sintomatico">
        <description>Aprovado - GIST menor que 2cm sintomatico</description>
        <inputEntry id="IE_Apr2_1"><text>"Menos_2cm"</text></inputEntry>
        <inputEntry id="IE_Apr2_2"><text>"CD117_Positivo"</text></inputEntry>
        <inputEntry id="IE_Apr2_3"><text>true</text></inputEntry>
        <inputEntry id="IE_Apr2_4"><text>"Ressecavel"</text></inputEntry>
        <inputEntry id="IE_Apr2_5"><text>true</text></inputEntry>
        <outputEntry id="OE_Apr2_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Apr2_2"><text>"GIST menor 2cm com sintomas ou crescimento documentado - resseccao aprovada. Alternativa: observacao com EUS seriado."</text></outputEntry>
        <outputEntry id="OE_Apr2_3"><text>"ESMO 2021 - Small GIST Management"</text></outputEntry>
      <outputEntry id="OE_GEN_UGI_006_Aprovado_Menor2cm_Sintomatico_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_GEN_UGI_006_Aprovado_Menor2cm_Sintomatico_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <!-- REGRAS DE PENDENCIA -->

      <rule id="Rule_GEN_UGI_006_Pendente_Marginalmente_Ressecavel">
        <description>Pendente - Marginalmente ressecavel (neoadjuvancia)</description>
        <inputEntry id="IE_Pend1_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Pend1_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Pend1_3"><text>true</text></inputEntry>
        <inputEntry id="IE_Pend1_4"><text>"Marginalmente_Ressecavel"</text></inputEntry>
        <inputEntry id="IE_Pend1_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Pend1_1"><text>"Pendente"</text></outputEntry>
        <outputEntry id="OE_Pend1_2"><text>"GIST marginalmente ressecavel - avaliar imatinib neoadjuvante para reducao tumoral e cirurgia menos mutilante. Confirmar mutacao KIT/PDGFRA."</text></outputEntry>
        <outputEntry id="OE_Pend1_3"><text>"ESMO 2021 - Neoadjuvant Imatinib"</text></outputEntry>
      <outputEntry id="OE_GEN_UGI_006_Pendente_Marginalmente_Ressecavel_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_GEN_UGI_006_Pendente_Marginalmente_Ressecavel_5"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>

      <rule id="Rule_GEN_UGI_006_Pendente_NaoBiopsiado">
        <description>Pendente - Lesao suspeita nao biopsiada</description>
        <inputEntry id="IE_Pend2_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Pend2_2"><text>"Nao_Biopsiado"</text></inputEntry>
        <inputEntry id="IE_Pend2_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Pend2_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Pend2_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Pend2_1"><text>"Pendente"</text></outputEntry>
        <outputEntry id="OE_Pend2_2"><text>"Lesao subepitelial suspeita de GIST sem confirmacao - realizar EUS com biopsia para confirmacao diagnostica. Pode ressecar sem biopsia se >2cm e tipico."</text></outputEntry>
        <outputEntry id="OE_Pend2_3"><text>"ESMO 2021 - Diagnosis Confirmation"</text></outputEntry>
      <outputEntry id="OE_GEN_UGI_006_Pendente_NaoBiopsiado_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_GEN_UGI_006_Pendente_NaoBiopsiado_5"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>

      <rule id="Rule_GEN_UGI_006_Pendente_Menor2cm_Assintomatico">
        <description>Pendente - GIST menor 2cm assintomatico</description>
        <inputEntry id="IE_Pend3_1"><text>"Menos_2cm"</text></inputEntry>
        <inputEntry id="IE_Pend3_2"><text>"Suspeito_Imagem"</text></inputEntry>
        <inputEntry id="IE_Pend3_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Pend3_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Pend3_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Pend3_1"><text>"Pendente"</text></outputEntry>
        <outputEntry id="OE_Pend3_2"><text>"GIST menor 2cm assintomatico - observacao com EUS seriado (6-12 meses) e alternativa valida. Ressecar se crescimento documentado."</text></outputEntry>
        <outputEntry id="OE_Pend3_3"><text>"ESMO 2021 - Small GIST Surveillance"</text></outputEntry>
      <outputEntry id="OE_GEN_UGI_006_Pendente_Menor2cm_Assintomatico_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_GEN_UGI_006_Pendente_Menor2cm_Assintomatico_5"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>

      <!-- REGRA FALLBACK -->

      <rule id="Rule_GEN_UGI_006_Fallback">
        <description>Fallback - Analise especializada</description>
        <inputEntry id="IE_Fallback_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Fallback_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Fallback_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Fallback_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Fallback_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Fallback_1"><text>"Pendente"</text></outputEntry>
        <outputEntry id="OE_Fallback_2"><text>"Caso de GIST requer analise por tumor board de sarcomas/oncologia."</text></outputEntry>
        <outputEntry id="OE_Fallback_3"><text>"Auditoria oncologica - RN 428/2017"</text></outputEntry>
      <outputEntry id="OE_GEN_UGI_006_Fallback_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_GEN_UGI_006_Fallback_5"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>

    </decisionTable>
  </decision>
</definitions>
