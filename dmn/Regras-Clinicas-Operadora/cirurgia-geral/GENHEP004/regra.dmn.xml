<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="https://www.omg.org/spec/DMN/20191111/MODEL/"
             xmlns:dmndi="https://www.omg.org/spec/DMN/20191111/DMNDI/"
             xmlns:dc="http://www.omg.org/spec/DD/20100524/DC/"
             xmlns:di="http://www.omg.org/spec/DD/20100524/DI/"
             id="Definitions_GEN_HEP_004"
             name="Resseccao Hepatica - HCC Criterios Milan"
             namespace="http://camunda.org/schema/1.0/dmn"
             exporter="Camunda Modeler"
             exporterVersion="5.0.0">
  <!--
    GEN-HEP-004 - Resseccao Hepatica para Hepatocarcinoma (HCC) - Criterios de Milan
    Versao: 1.0.0 (2026-02-07)
    Especialidade: Cirurgia Geral - Hepatobiliar
    Categoria: Procedimentos Cirurgicos Oncologicos

    Indicacoes Clinicas (BCLC 2022 / NCCN 2024):
    - HCC solitario ≤5cm ou ate 3 nodulos ≤3cm cada (Milan)
    - Funcao hepatica preservada (Child-Pugh A, MELD <10)
    - Ausencia de invasao vascular macroscopica
    - Ausencia de metastases extra-hepaticas
    - Volume hepatico residual adequado (>30% em figado normal)

    Criterios Expandidos (UCSF):
    - Lesao unica ≤6.5cm
    - Ate 3 lesoes, maior ≤4.5cm, soma ≤8cm

    Contraindicacoes para Resseccao:
    - Child-Pugh C
    - Hipertensao portal clinicamente significativa
    - Trombose de veia porta principal
    - Performance status ECOG >2

    Documentacao Obrigatoria:
    - TC/RM multifasica com criterios LI-RADS
    - AFP serica
    - Child-Pugh score e MELD
    - Volumetria hepatica se resseccao maior

    Referencias Normativas:
    - BCLC Staging 2022 - Barcelona Clinic Liver Cancer
    - NCCN Guidelines 2024 - Hepatobiliary Cancers
    - AASLD Practice Guidance 2023
  -->

  <decision id="Decision_GEN_HEP_004" name="Criterios de Autorizacao - Resseccao Hepatica HCC Milan">
    <decisionTable id="DecisionTable_GEN_HEP_004" hitPolicy="FIRST">

      <!-- Input 1: Estadiamento BCLC -->
      <input id="Input_estadiamentoBCLC" label="Estadiamento BCLC">
        <inputExpression id="InputExpr_estadiamentoBCLC" typeRef="string">
          <text>estadiamentoBCLC</text>
        </inputExpression>
        <inputValues id="InputValues_estadiamentoBCLC">
          <text>"BCLC_0_Muito_Precoce","BCLC_A_Precoce","BCLC_B_Intermediario","BCLC_C_Avancado","BCLC_D_Terminal"</text>
        </inputValues>
      </input>

      <!-- Input 2: Criterios de Milan -->
      <input id="Input_criteriosMilan" label="Dentro dos Criterios de Milan">
        <inputExpression id="InputExpr_criteriosMilan" typeRef="string">
          <text>criteriosMilan</text>
        </inputExpression>
        <inputValues id="InputValues_criteriosMilan">
          <text>"Dentro_Milan","Fora_Milan_Dentro_UCSF","Fora_Criterios_Expandidos"</text>
        </inputValues>
      </input>

      <!-- Input 3: Funcao Hepatica -->
      <input id="Input_funcaoHepatica" label="Funcao Hepatica (Child-Pugh)">
        <inputExpression id="InputExpr_funcaoHepatica" typeRef="string">
          <text>funcaoHepaticaChildPugh</text>
        </inputExpression>
        <inputValues id="InputValues_funcaoHepatica">
          <text>"Child_A","Child_B","Child_C"</text>
        </inputValues>
      </input>

      <!-- Input 4: Imagem Multifasica (TC/RM) -->
      <input id="Input_imagemMultifasica" label="TC/RM Multifasica LI-RADS">
        <inputExpression id="InputExpr_imagemMultifasica" typeRef="boolean">
          <text>imagemMultifasicaLIRADS</text>
        </inputExpression>
      </input>

      <!-- Input 5: Laudo Oncologico -->
      <input id="Input_laudoOncologico" label="Laudo Oncologico/Equipe Multidisciplinar">
        <inputExpression id="InputExpr_laudoOncologico" typeRef="boolean">
          <text>laudoEquipeMultidisciplinar</text>
        </inputExpression>
      </input>

      <!-- Output 1: Resultado -->
      <output id="Output_resultado" label="Resultado" name="resultado" typeRef="string">
        <outputValues id="OutputValues_resultado">
          <text>"Aprovado","Reprovado","Pendente"</text>
        </outputValues>
      </output>

      <!-- Output 2: Observacao -->
      <output id="Output_observacao" label="Observacao Clinica" name="observacao" typeRef="string" />

      <!-- Output 3: Fundamentacao -->
      <output id="Output_fundamentacao" label="Fundamentacao" name="fundamentacao" typeRef="string" />

      <!-- Output 4: Alertas Desperdicio -->
      <output id="Output_alertasDesperdicio" label="Alertas de Desperdicio" name="alertasDesperdicio" typeRef="string">
        <outputValues id="OutputValues_alertasDesperdicio">
          <text>"NENHUM","DUP","FREQ","ESC","DOC","PROT","MULTI"</text>
        </outputValues>
      </output>

      <!-- Output 5: Acao Recomendada -->
      <output id="Output_acaoRecomendada" label="Acao Recomendada" name="acaoRecomendada" typeRef="string">
        <outputValues id="OutputValues_acaoRecomendada">
          <text>"APROVAR","NEGAR","SOLICITAR_INFO","AGUARDAR_PRAZO","SUGERIR_ALTERNATIVA"</text>
        </outputValues>
      </output>

      <!-- REGRAS DE REPROVACAO -->

      <rule id="Rule_GEN_HEP_004_Reprovado_ChildC">
        <description>Reprovado - Child-Pugh C contraindica resseccao</description>
        <inputEntry id="IE_Rep1_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep1_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep1_3"><text>"Child_C"</text></inputEntry>
        <inputEntry id="IE_Rep1_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep1_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Rep1_1"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OE_Rep1_2"><text>"Funcao hepatica Child-Pugh C contraindica resseccao hepatica. Considerar transplante hepatico ou terapias locoregionais paliativas."</text></outputEntry>
        <outputEntry id="OE_Rep1_3"><text>"BCLC 2022 / AASLD 2023 - Child C Contraindication"</text></outputEntry>
      <outputEntry id="OE_GEN_HEP_004_Reprovado_ChildC_4"><text>"PROT"</text></outputEntry>
        <outputEntry id="OE_GEN_HEP_004_Reprovado_ChildC_5"><text>"NEGAR"</text></outputEntry>
      </rule>

      <rule id="Rule_GEN_HEP_004_Reprovado_BCLCTerminal">
        <description>Reprovado - BCLC D (terminal) nao candidato a resseccao</description>
        <inputEntry id="IE_Rep2_1"><text>"BCLC_D_Terminal"</text></inputEntry>
        <inputEntry id="IE_Rep2_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep2_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep2_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep2_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Rep2_1"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OE_Rep2_2"><text>"Estadiamento BCLC D (terminal) - paciente nao candidato a terapias curativas. Indicar melhor suporte clinico (BSC)."</text></outputEntry>
        <outputEntry id="OE_Rep2_3"><text>"BCLC 2022 - Terminal Stage Management"</text></outputEntry>
      <outputEntry id="OE_GEN_HEP_004_Reprovado_BCLCTerminal_4"><text>"PROT"</text></outputEntry>
        <outputEntry id="OE_GEN_HEP_004_Reprovado_BCLCTerminal_5"><text>"NEGAR"</text></outputEntry>
      </rule>

      <rule id="Rule_GEN_HEP_004_Reprovado_SemImagem">
        <description>Reprovado - Sem imagem multifasica</description>
        <inputEntry id="IE_Rep3_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep3_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep3_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep3_4"><text>false</text></inputEntry>
        <inputEntry id="IE_Rep3_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Rep3_1"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OE_Rep3_2"><text>"TC ou RM multifasica com criterios LI-RADS obrigatoria para estadiamento e planejamento de resseccao hepatica por HCC."</text></outputEntry>
        <outputEntry id="OE_Rep3_3"><text>"AASLD 2023 - Diagnostic Criteria HCC"</text></outputEntry>
      <outputEntry id="OE_GEN_HEP_004_Reprovado_SemImagem_4"><text>"PROT"</text></outputEntry>
        <outputEntry id="OE_GEN_HEP_004_Reprovado_SemImagem_5"><text>"NEGAR"</text></outputEntry>
      </rule>

      <rule id="Rule_GEN_HEP_004_Reprovado_SemLaudo">
        <description>Reprovado - Sem discussao multidisciplinar</description>
        <inputEntry id="IE_Rep4_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep4_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep4_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep4_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep4_5"><text>false</text></inputEntry>
        <outputEntry id="OE_Rep4_1"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OE_Rep4_2"><text>"Discussao em equipe multidisciplinar oncologica (tumor board) obrigatoria para definicao terapeutica em HCC."</text></outputEntry>
        <outputEntry id="OE_Rep4_3"><text>"NCCN 2024 - Multidisciplinary Evaluation Required"</text></outputEntry>
      <outputEntry id="OE_GEN_HEP_004_Reprovado_SemLaudo_4"><text>"PROT"</text></outputEntry>
        <outputEntry id="OE_GEN_HEP_004_Reprovado_SemLaudo_5"><text>"NEGAR"</text></outputEntry>
      </rule>

      <!-- REGRAS DE APROVACAO -->

      <rule id="Rule_GEN_HEP_004_Aprovado_BCLC0_Milan">
        <description>Aprovado - BCLC 0 muito precoce dentro de Milan</description>
        <inputEntry id="IE_Apr1_1"><text>"BCLC_0_Muito_Precoce"</text></inputEntry>
        <inputEntry id="IE_Apr1_2"><text>"Dentro_Milan"</text></inputEntry>
        <inputEntry id="IE_Apr1_3"><text>"Child_A"</text></inputEntry>
        <inputEntry id="IE_Apr1_4"><text>true</text></inputEntry>
        <inputEntry id="IE_Apr1_5"><text>true</text></inputEntry>
        <outputEntry id="OE_Apr1_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Apr1_2"><text>"HCC BCLC 0 (muito precoce), dentro criterios de Milan, Child A - resseccao hepatica indicada como primeira linha terapeutica. Sobrevida em 5 anos >70%."</text></outputEntry>
        <outputEntry id="OE_Apr1_3"><text>"BCLC 2022 / NCCN 2024 - Very Early Stage Resection"</text></outputEntry>
      <outputEntry id="OE_GEN_HEP_004_Aprovado_BCLC0_Milan_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_GEN_HEP_004_Aprovado_BCLC0_Milan_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <rule id="Rule_GEN_HEP_004_Aprovado_BCLCA_Milan">
        <description>Aprovado - BCLC A precoce dentro de Milan</description>
        <inputEntry id="IE_Apr2_1"><text>"BCLC_A_Precoce"</text></inputEntry>
        <inputEntry id="IE_Apr2_2"><text>"Dentro_Milan"</text></inputEntry>
        <inputEntry id="IE_Apr2_3"><text>"Child_A"</text></inputEntry>
        <inputEntry id="IE_Apr2_4"><text>true</text></inputEntry>
        <inputEntry id="IE_Apr2_5"><text>true</text></inputEntry>
        <outputEntry id="OE_Apr2_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Apr2_2"><text>"HCC BCLC A (precoce), dentro criterios de Milan, Child A - resseccao hepatica aprovada. Avaliar volume hepatico residual se hepatectomia maior."</text></outputEntry>
        <outputEntry id="OE_Apr2_3"><text>"BCLC 2022 / NCCN 2024 - Early Stage Curative Resection"</text></outputEntry>
      <outputEntry id="OE_GEN_HEP_004_Aprovado_BCLCA_Milan_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_GEN_HEP_004_Aprovado_BCLCA_Milan_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <rule id="Rule_GEN_HEP_004_Aprovado_UCSF">
        <description>Aprovado - Criterios expandidos UCSF com avaliacao cuidadosa</description>
        <inputEntry id="IE_Apr3_1"><text>"BCLC_A_Precoce"</text></inputEntry>
        <inputEntry id="IE_Apr3_2"><text>"Fora_Milan_Dentro_UCSF"</text></inputEntry>
        <inputEntry id="IE_Apr3_3"><text>"Child_A"</text></inputEntry>
        <inputEntry id="IE_Apr3_4"><text>true</text></inputEntry>
        <inputEntry id="IE_Apr3_5"><text>true</text></inputEntry>
        <outputEntry id="OE_Apr3_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Apr3_2"><text>"HCC fora de Milan mas dentro de UCSF - resseccao hepatica pode ser considerada em pacientes selecionados com Child A e sem hipertensao portal."</text></outputEntry>
        <outputEntry id="OE_Apr3_3"><text>"AASLD 2023 - Extended Criteria Resection"</text></outputEntry>
      <outputEntry id="OE_GEN_HEP_004_Aprovado_UCSF_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_GEN_HEP_004_Aprovado_UCSF_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <!-- REGRAS DE PENDENCIA -->

      <rule id="Rule_GEN_HEP_004_Pendente_ChildB">
        <description>Pendente - Child B requer avaliacao de volumetria</description>
        <inputEntry id="IE_Pend1_1"><text>"BCLC_0_Muito_Precoce","BCLC_A_Precoce"</text></inputEntry>
        <inputEntry id="IE_Pend1_2"><text>"Dentro_Milan"</text></inputEntry>
        <inputEntry id="IE_Pend1_3"><text>"Child_B"</text></inputEntry>
        <inputEntry id="IE_Pend1_4"><text>true</text></inputEntry>
        <inputEntry id="IE_Pend1_5"><text>true</text></inputEntry>
        <outputEntry id="OE_Pend1_1"><text>"Pendente"</text></outputEntry>
        <outputEntry id="OE_Pend1_2"><text>"Child-Pugh B - avaliar resseccao limitada ou ablacao. Anexar volumetria hepatica, teste de retencao de ICG e avaliacao de hipertensao portal."</text></outputEntry>
        <outputEntry id="OE_Pend1_3"><text>"BCLC 2022 - Child B Assessment"</text></outputEntry>
      <outputEntry id="OE_GEN_HEP_004_Pendente_ChildB_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_GEN_HEP_004_Pendente_ChildB_5"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>

      <rule id="Rule_GEN_HEP_004_Pendente_BCLCB">
        <description>Pendente - BCLC B requer discussao multidisciplinar detalhada</description>
        <inputEntry id="IE_Pend2_1"><text>"BCLC_B_Intermediario"</text></inputEntry>
        <inputEntry id="IE_Pend2_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Pend2_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Pend2_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Pend2_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Pend2_1"><text>"Pendente"</text></outputEntry>
        <outputEntry id="OE_Pend2_2"><text>"BCLC B (intermediario) - TACE geralmente primeira linha. Resseccao pode ser considerada em casos selecionados. Anexar discussao detalhada de tumor board."</text></outputEntry>
        <outputEntry id="OE_Pend2_3"><text>"BCLC 2022 - Intermediate Stage Options"</text></outputEntry>
      <outputEntry id="OE_GEN_HEP_004_Pendente_BCLCB_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_GEN_HEP_004_Pendente_BCLCB_5"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>

      <!-- REGRA FALLBACK -->

      <rule id="Rule_GEN_HEP_004_Fallback">
        <description>Fallback - Analise especializada</description>
        <inputEntry id="IE_Fallback_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Fallback_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Fallback_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Fallback_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Fallback_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Fallback_1"><text>"Pendente"</text></outputEntry>
        <outputEntry id="OE_Fallback_2"><text>"Caso oncologico hepatico requer analise por auditor medico especializado com revisao de tumor board."</text></outputEntry>
        <outputEntry id="OE_Fallback_3"><text>"Auditoria oncologica - RN 428/2017"</text></outputEntry>
      <outputEntry id="OE_GEN_HEP_004_Fallback_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_GEN_HEP_004_Fallback_5"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>

    </decisionTable>
  </decision>
</definitions>
