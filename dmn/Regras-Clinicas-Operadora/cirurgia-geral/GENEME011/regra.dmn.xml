<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="https://www.omg.org/spec/DMN/20191111/MODEL/"
             xmlns:camunda="http://camunda.org/schema/1.0/dmn"
             id="Definitions_GEN_EME_011"
             name="Megacolon Toxico - Limiar Cirurgico"
             namespace="http://camunda.org/schema/1.0/dmn">

  <!--
    ===============================================================================
    CODIGO: GEN-EME-011
    Procedimento: Megacolon Toxico - Colectomia de Emergencia
    Especialidade: Cirurgia Geral - Coloproctologia de Emergencia
    Versao: 3.0.0-TIER1
    Data: 2026-02-07
    ===============================================================================

    INDICACOES CIRURGICAS:
    - Perfuracao colonica
    - Hemorragia massiva nao controlada
    - Deterioracao clinica progressiva apesar de tratamento
    - Falha de tratamento clinico apos 48-72h
    - Dilatacao colonica > 12 cm
    - Sinais de peritonite

    CONTRAINDICACOES RELATIVAS:
    - Resposta ao tratamento clinico
    - Megacolon em resolucao

    REFERENCIAS TECNICAS:
    - ACG Guidelines 2021 - Clostridium difficile Infection
    - ECCO Guidelines 2020 - Acute Severe Ulcerative Colitis
    - AGA Guidelines 2021 - Toxic Megacolon

    ===============================================================================
  -->

  <decision id="Decision_GEN_EME_011" name="Regra Clinica - Megacolon Toxico">
    <decisionTable id="DecisionTable_GEN_EME_011" hitPolicy="FIRST">

      <!-- ========== INPUTS (5) ========== -->

      <input id="Input_diametroColon" label="Diametro do Colon (cm)" camunda:inputVariable="diametroColon">
        <inputExpression id="InputExpression_diametroColon" typeRef="number">
          <text>diametroColon</text>
        </inputExpression>
      </input>

      <input id="Input_etiologia" label="Etiologia" camunda:inputVariable="etiologia">
        <inputExpression id="InputExpression_etiologia" typeRef="string">
          <text>etiologia</text>
        </inputExpression>
        <inputValues id="InputValues_etiologia">
          <text>"ColitePseudomembranosa","ColiteFulminante","RCUI","Crohn","Isquemica","Outra"</text>
        </inputValues>
      </input>

      <input id="Input_respostaTratamento" label="Resposta ao Tratamento Clinico" camunda:inputVariable="respostaTratamento">
        <inputExpression id="InputExpression_respostaTratamento" typeRef="string">
          <text>respostaTratamento</text>
        </inputExpression>
        <inputValues id="InputValues_respostaTratamento">
          <text>"Melhora","Estavel","Deterioracao","FalhaTratamento"</text>
        </inputValues>
      </input>

      <input id="Input_tempoTratamento" label="Tempo de Tratamento Clinico (horas)" camunda:inputVariable="tempoTratamento">
        <inputExpression id="InputExpression_tempoTratamento" typeRef="number">
          <text>tempoTratamento</text>
        </inputExpression>
      </input>

      <input id="Input_complicacoes" label="Complicacoes Presentes" camunda:inputVariable="complicacoes">
        <inputExpression id="InputExpression_complicacoes" typeRef="string">
          <text>complicacoes</text>
        </inputExpression>
        <inputValues id="InputValues_complicacoes">
          <text>"Perfuracao","Hemorragia","Peritonite","ChoqueSeptico","Nenhuma"</text>
        </inputValues>
      </input>

      <!-- ========== OUTPUTS (3) ========== -->

      <output id="Output_resultado" label="Resultado" name="resultado" typeRef="string">
        <outputValues id="OutputValues_resultado">
          <text>"Aprovado","Reprovado","Pendente"</text>
        </outputValues>
      </output>

      <output id="Output_observacao" label="Observacao Clinica" name="observacao" typeRef="string" />

      <output id="Output_fundamentacao" label="Fundamentacao Tecnica" name="fundamentacao" typeRef="string" />

      <!-- Output 4: Alertas Desperdicio -->
      <output id="Output_alertasDesperdicio" label="Alertas de Desperdicio" name="alertasDesperdicio" typeRef="string">
        <outputValues id="OutputValues_alertasDesperdicio">
          <text>"NENHUM","DUP","FREQ","ESC","DOC","PROT","MULTI"</text>
        </outputValues>
      </output>

      <!-- Output 5: Acao Recomendada -->
      <output id="Output_acaoRecomendada" label="Acao Recomendada" name="acaoRecomendada" typeRef="string">
        <outputValues id="OutputValues_acaoRecomendada">
          <text>"APROVAR","NEGAR","SOLICITAR_INFO","AGUARDAR_PRAZO","SUGERIR_ALTERNATIVA"</text>
        </outputValues>
      </output>

      <!-- ========== REGRAS DE REPROVACAO ========== -->

      <rule id="Rule_Reprovado_RespondendoTratamento">
        <description>Reprovado: Respondendo ao tratamento clinico</description>
        <inputEntry id="IE_Rep1_1"><text>&lt; 10</text></inputEntry>
        <inputEntry id="IE_Rep1_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep1_3"><text>"Melhora"</text></inputEntry>
        <inputEntry id="IE_Rep1_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep1_5"><text>"Nenhuma"</text></inputEntry>
        <outputEntry id="OE_Rep1_1"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OE_Rep1_2"><text>"Paciente respondendo ao tratamento clinico com reducao da dilatacao - manter conduta conservadora"</text></outputEntry>
        <outputEntry id="OE_Rep1_3"><text>"ACG Guidelines 2021 - Tratamento clinico inicial para megacolon toxico"</text></outputEntry>
      <outputEntry id="OE_Reprovado_RespondendoTratamento_4"><text>"PROT"</text></outputEntry>
        <outputEntry id="OE_Reprovado_RespondendoTratamento_5"><text>"NEGAR"</text></outputEntry>
      </rule>

      <rule id="Rule_Reprovado_DilatacaoLeve">
        <description>Reprovado: Dilatacao leve sem criterios de toxicidade</description>
        <inputEntry id="IE_Rep2_1"><text>&lt; 6</text></inputEntry>
        <inputEntry id="IE_Rep2_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep2_3"><text>"Estavel","Melhora"</text></inputEntry>
        <inputEntry id="IE_Rep2_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep2_5"><text>"Nenhuma"</text></inputEntry>
        <outputEntry id="OE_Rep2_1"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OE_Rep2_2"><text>"Dilatacao colonica leve sem criterios de megacolon toxico - nao preenche indicacao cirurgica"</text></outputEntry>
        <outputEntry id="OE_Rep2_3"><text>"ECCO Guidelines 2020 - Criterios diagnosticos de megacolon toxico"</text></outputEntry>
      <outputEntry id="OE_Reprovado_DilatacaoLeve_4"><text>"PROT"</text></outputEntry>
        <outputEntry id="OE_Reprovado_DilatacaoLeve_5"><text>"NEGAR"</text></outputEntry>
      </rule>

      <!-- ========== REGRAS DE APROVACAO ========== -->

      <rule id="Rule_Aprovado_Perfuracao">
        <description>Aprovado: Perfuracao colonica</description>
        <inputEntry id="IE_Apr1_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr1_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr1_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr1_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr1_5"><text>"Perfuracao"</text></inputEntry>
        <outputEntry id="OE_Apr1_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Apr1_2"><text>"Perfuracao colonica por megacolon toxico - colectomia de emergencia com ileostomia terminal"</text></outputEntry>
        <outputEntry id="OE_Apr1_3"><text>"AGA Guidelines 2021 - Perfuracao e indicacao cirurgica absoluta"</text></outputEntry>
      <outputEntry id="OE_Aprovado_Perfuracao_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Aprovado_Perfuracao_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <rule id="Rule_Aprovado_Peritonite">
        <description>Aprovado: Sinais de peritonite</description>
        <inputEntry id="IE_Apr2_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr2_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr2_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr2_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr2_5"><text>"Peritonite"</text></inputEntry>
        <outputEntry id="OE_Apr2_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Apr2_2"><text>"Peritonite associada a megacolon - colectomia subtotal de emergencia"</text></outputEntry>
        <outputEntry id="OE_Apr2_3"><text>"ECCO Guidelines 2020 - Peritonite e indicacao de intervencao cirurgica imediata"</text></outputEntry>
      <outputEntry id="OE_Aprovado_Peritonite_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Aprovado_Peritonite_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <rule id="Rule_Aprovado_DilatacaoMassiva">
        <description>Aprovado: Dilatacao massiva do colon</description>
        <inputEntry id="IE_Apr3_1"><text>&gt;= 12</text></inputEntry>
        <inputEntry id="IE_Apr3_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr3_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr3_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr3_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Apr3_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Apr3_2"><text>"Dilatacao colonica massiva (&gt;= 12cm) com alto risco de perfuracao - colectomia de emergencia"</text></outputEntry>
        <outputEntry id="OE_Apr3_3"><text>"AGA Guidelines 2021 - Dilatacao &gt; 12cm e indicacao relativa de cirurgia"</text></outputEntry>
      <outputEntry id="OE_Aprovado_DilatacaoMassiva_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Aprovado_DilatacaoMassiva_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <rule id="Rule_Aprovado_FalhaTratamento">
        <description>Aprovado: Falha de tratamento clinico</description>
        <inputEntry id="IE_Apr4_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr4_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr4_3"><text>"FalhaTratamento","Deterioracao"</text></inputEntry>
        <inputEntry id="IE_Apr4_4"><text>&gt;= 48</text></inputEntry>
        <inputEntry id="IE_Apr4_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Apr4_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Apr4_2"><text>"Falha de tratamento clinico apos 48h - indicacao de colectomia subtotal de resgate"</text></outputEntry>
        <outputEntry id="OE_Apr4_3"><text>"ACG Guidelines 2021 - Cirurgia apos falha de tratamento clinico intensivo"</text></outputEntry>
      <outputEntry id="OE_Aprovado_FalhaTratamento_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Aprovado_FalhaTratamento_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <rule id="Rule_Aprovado_ChoqueSeptico">
        <description>Aprovado: Choque septico refratario</description>
        <inputEntry id="IE_Apr5_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr5_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr5_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr5_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr5_5"><text>"ChoqueSeptico"</text></inputEntry>
        <outputEntry id="OE_Apr5_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Apr5_2"><text>"Choque septico de origem colonica - colectomia de emergencia para controle de foco"</text></outputEntry>
        <outputEntry id="OE_Apr5_3"><text>"Surviving Sepsis Campaign 2021 - Controle de foco em sepse abdominal"</text></outputEntry>
      <outputEntry id="OE_Aprovado_ChoqueSeptico_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Aprovado_ChoqueSeptico_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <!-- ========== REGRA FALLBACK ========== -->

      <rule id="Rule_Fallback_GEN_EME_011">
        <description>Pendente: Monitoramento intensivo necessario</description>
        <inputEntry id="IE_FB_1"><text>-</text></inputEntry>
        <inputEntry id="IE_FB_2"><text>-</text></inputEntry>
        <inputEntry id="IE_FB_3"><text>-</text></inputEntry>
        <inputEntry id="IE_FB_4"><text>-</text></inputEntry>
        <inputEntry id="IE_FB_5"><text>-</text></inputEntry>
        <outputEntry id="OE_FB_1"><text>"Pendente"</text></outputEntry>
        <outputEntry id="OE_FB_2"><text>"Monitoramento clinico e radiologico intensivo - reavaliacao em 12-24h para definicao de conduta"</text></outputEntry>
        <outputEntry id="OE_FB_3"><text>"ECCO Guidelines 2020 - Monitoramento seriado em megacolon toxico"</text></outputEntry>
      <outputEntry id="OE_Fallback_GEN_EME_011_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Fallback_GEN_EME_011_5"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>

    </decisionTable>
  </decision>
</definitions>
