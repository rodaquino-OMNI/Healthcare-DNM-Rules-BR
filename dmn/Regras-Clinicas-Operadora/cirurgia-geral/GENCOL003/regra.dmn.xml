<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="https://www.omg.org/spec/DMN/20191111/MODEL/"
             xmlns:dmndi="https://www.omg.org/spec/DMN/20191111/DMNDI/"
             xmlns:dc="http://www.omg.org/spec/DD/20100524/DC/"
             xmlns:di="http://www.omg.org/spec/DD/20100524/DI/"
             id="Definitions_GEN_COL_003"
             name="Diverticulite - Classificacao de Hinchey"
             namespace="http://camunda.org/schema/1.0/dmn"
             exporter="Camunda Modeler"
             exporterVersion="5.0.0">
  <!--
    GEN-COL-003 - Diverticulite - Indicacoes Cirurgicas por Classificacao de Hinchey
    Versao: 1.0.0 (2026-02-07)
    Especialidade: Cirurgia Geral - Coloproctologia
    Categoria: Procedimentos Cirurgicos

    Classificacao de Hinchey (Modificada):
    - Ia: Fleimao pericolico
    - Ib: Abscesso pericolico (<5cm)
    - II: Abscesso pelvico/distante (>5cm)
    - III: Peritonite purulenta difusa
    - IV: Peritonite fecal

    Indicacoes Cirurgicas (WSES 2020 / ASCRS 2020):
    - Hinchey III/IV: Cirurgia de urgencia
    - Hinchey II: Drenagem percutanea + cirurgia eletiva
    - Diverticulite recorrente: Cirurgia eletiva apos 2-3 episodios

    Abordagens:
    - Resseccao com anastomose primaria: Hinchey I-II estabilizado
    - Hartmann: Peritonite difusa, instabilidade
    - Lavagem laparoscopica: Controverso, Hinchey III selecionado

    Documentacao Obrigatoria:
    - TC de abdome com contraste
    - Classificacao de Hinchey
    - Numero de episodios previos

    Referencias Normativas:
    - WSES Guidelines 2020 - Acute Diverticulitis
    - ASCRS Clinical Practice Guidelines 2020
    - EAES/SAGES Recommendations 2019
  -->

  <decision id="Decision_GEN_COL_003" name="Criterios de Autorizacao - Diverticulite Cirurgia">
    <decisionTable id="DecisionTable_GEN_COL_003" hitPolicy="FIRST">

      <!-- Input 1: Classificacao Hinchey -->
      <input id="Input_hinchey" label="Classificacao de Hinchey">
        <inputExpression id="InputExpr_hinchey" typeRef="string">
          <text>classificacaoHinchey</text>
        </inputExpression>
        <inputValues id="InputValues_hinchey">
          <text>"Hinchey_Ia","Hinchey_Ib","Hinchey_II","Hinchey_III","Hinchey_IV","Nao_Classificada"</text>
        </inputValues>
      </input>

      <!-- Input 2: Numero de Episodios -->
      <input id="Input_episodios" label="Numero de Episodios Previos">
        <inputExpression id="InputExpr_episodios" typeRef="string">
          <text>numeroEpisodios</text>
        </inputExpression>
        <inputValues id="InputValues_episodios">
          <text>"Primeiro_Episodio","Segundo_Episodio","Tres_ou_Mais","Cronico"</text>
        </inputValues>
      </input>

      <!-- Input 3: TC de Abdome -->
      <input id="Input_tcAbdome" label="TC Abdome com Contraste">
        <inputExpression id="InputExpr_tcAbdome" typeRef="boolean">
          <text>tcAbdomeContraste</text>
        </inputExpression>
      </input>

      <!-- Input 4: Estabilidade Clinica -->
      <input id="Input_estabilidade" label="Estabilidade Clinica">
        <inputExpression id="InputExpr_estabilidade" typeRef="string">
          <text>estabilidadeClinica</text>
        </inputExpression>
        <inputValues id="InputValues_estabilidade">
          <text>"Estavel","Instavel","Sepse"</text>
        </inputValues>
      </input>

      <!-- Input 5: Laudo de Indicacao -->
      <input id="Input_laudoIndicacao" label="Laudo de Indicacao">
        <inputExpression id="InputExpr_laudoIndicacao" typeRef="boolean">
          <text>laudoIndicacao</text>
        </inputExpression>
      </input>

      <!-- Output 1: Resultado -->
      <output id="Output_resultado" label="Resultado" name="resultado" typeRef="string">
        <outputValues id="OutputValues_resultado">
          <text>"Aprovado","Reprovado","Pendente"</text>
        </outputValues>
      </output>

      <!-- Output 2: Observacao -->
      <output id="Output_observacao" label="Observacao Clinica" name="observacao" typeRef="string" />

      <!-- Output 3: Fundamentacao -->
      <output id="Output_fundamentacao" label="Fundamentacao" name="fundamentacao" typeRef="string" />

      <!-- Output 4: Alertas Desperdicio -->
      <output id="Output_alertasDesperdicio" label="Alertas de Desperdicio" name="alertasDesperdicio" typeRef="string">
        <outputValues id="OutputValues_alertasDesperdicio">
          <text>"NENHUM","DUP","FREQ","ESC","DOC","PROT","MULTI"</text>
        </outputValues>
      </output>

      <!-- Output 5: Acao Recomendada -->
      <output id="Output_acaoRecomendada" label="Acao Recomendada" name="acaoRecomendada" typeRef="string">
        <outputValues id="OutputValues_acaoRecomendada">
          <text>"APROVAR","NEGAR","SOLICITAR_INFO","AGUARDAR_PRAZO","SUGERIR_ALTERNATIVA"</text>
        </outputValues>
      </output>

      <!-- REGRAS DE REPROVACAO -->

      <rule id="Rule_GEN_COL_003_Reprovado_SemTC">
        <description>Reprovado - Sem TC para classificacao</description>
        <inputEntry id="IE_Rep1_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep1_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep1_3"><text>false</text></inputEntry>
        <inputEntry id="IE_Rep1_4"><text>"Estavel"</text></inputEntry>
        <inputEntry id="IE_Rep1_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Rep1_1"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OE_Rep1_2"><text>"TC de abdome com contraste obrigatoria para classificacao de Hinchey e planejamento terapeutico em diverticulite."</text></outputEntry>
        <outputEntry id="OE_Rep1_3"><text>"WSES 2020 - CT Required for Classification"</text></outputEntry>
      <outputEntry id="OE_GEN_COL_003_Reprovado_SemTC_4"><text>"PROT"</text></outputEntry>
        <outputEntry id="OE_GEN_COL_003_Reprovado_SemTC_5"><text>"NEGAR"</text></outputEntry>
      </rule>

      <rule id="Rule_GEN_COL_003_Reprovado_PrimeiroEpisodio_NaoComplicado">
        <description>Reprovado - Primeiro episodio nao complicado</description>
        <inputEntry id="IE_Rep2_1"><text>"Hinchey_Ia"</text></inputEntry>
        <inputEntry id="IE_Rep2_2"><text>"Primeiro_Episodio"</text></inputEntry>
        <inputEntry id="IE_Rep2_3"><text>true</text></inputEntry>
        <inputEntry id="IE_Rep2_4"><text>"Estavel"</text></inputEntry>
        <inputEntry id="IE_Rep2_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Rep2_1"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OE_Rep2_2"><text>"Primeiro episodio de diverticulite nao complicada - tratamento conservador indicado. Cirurgia eletiva nao recomendada apos episodio unico."</text></outputEntry>
        <outputEntry id="OE_Rep2_3"><text>"ASCRS 2020 - No Surgery After Single Episode"</text></outputEntry>
      <outputEntry id="OE_GEN_COL_003_Reprovado_PrimeiroEpisodio_NaoComplicado_4"><text>"PROT"</text></outputEntry>
        <outputEntry id="OE_GEN_COL_003_Reprovado_PrimeiroEpisodio_NaoComplicado_5"><text>"NEGAR"</text></outputEntry>
      </rule>

      <rule id="Rule_GEN_COL_003_Reprovado_SemLaudo">
        <description>Reprovado - Sem laudo de indicacao</description>
        <inputEntry id="IE_Rep3_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep3_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep3_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep3_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep3_5"><text>false</text></inputEntry>
        <outputEntry id="OE_Rep3_1"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OE_Rep3_2"><text>"Laudo de indicacao obrigatorio com classificacao de Hinchey, numero de episodios e justificativa cirurgica."</text></outputEntry>
        <outputEntry id="OE_Rep3_3"><text>"RN 465/2021 - Documentacao Obrigatoria"</text></outputEntry>
      <outputEntry id="OE_GEN_COL_003_Reprovado_SemLaudo_4"><text>"PROT"</text></outputEntry>
        <outputEntry id="OE_GEN_COL_003_Reprovado_SemLaudo_5"><text>"NEGAR"</text></outputEntry>
      </rule>

      <!-- REGRAS DE APROVACAO -->

      <rule id="Rule_GEN_COL_003_Aprovado_Hinchey_III_IV">
        <description>Aprovado - Peritonite (Hinchey III/IV) - Urgencia</description>
        <inputEntry id="IE_Apr1_1"><text>"Hinchey_III","Hinchey_IV"</text></inputEntry>
        <inputEntry id="IE_Apr1_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr1_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr1_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr1_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Apr1_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Apr1_2"><text>"URGENCIA - Diverticulite Hinchey III/IV com peritonite. Laparotomia de urgencia indicada. Hartmann ou anastomose primaria conforme condicoes locais."</text></outputEntry>
        <outputEntry id="OE_Apr1_3"><text>"WSES 2020 - Emergency Surgery Hinchey III/IV"</text></outputEntry>
      <outputEntry id="OE_GEN_COL_003_Aprovado_Hinchey_III_IV_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_GEN_COL_003_Aprovado_Hinchey_III_IV_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <rule id="Rule_GEN_COL_003_Aprovado_Recorrente">
        <description>Aprovado - Diverticulite recorrente eletiva</description>
        <inputEntry id="IE_Apr2_1"><text>"Hinchey_Ia","Hinchey_Ib"</text></inputEntry>
        <inputEntry id="IE_Apr2_2"><text>"Tres_ou_Mais","Cronico"</text></inputEntry>
        <inputEntry id="IE_Apr2_3"><text>true</text></inputEntry>
        <inputEntry id="IE_Apr2_4"><text>"Estavel"</text></inputEntry>
        <inputEntry id="IE_Apr2_5"><text>true</text></inputEntry>
        <outputEntry id="OE_Apr2_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Apr2_2"><text>"Diverticulite recorrente (3+ episodios) - sigmoidectomia eletiva aprovada. Laparoscopia preferida. Realizar 6-8 semanas apos ultimo episodio agudo."</text></outputEntry>
        <outputEntry id="OE_Apr2_3"><text>"ASCRS 2020 - Elective Sigmoid Resection"</text></outputEntry>
      <outputEntry id="OE_GEN_COL_003_Aprovado_Recorrente_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_GEN_COL_003_Aprovado_Recorrente_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <rule id="Rule_GEN_COL_003_Aprovado_Hinchey_II_PosDrenagem">
        <description>Aprovado - Hinchey II apos drenagem percutanea</description>
        <inputEntry id="IE_Apr3_1"><text>"Hinchey_II"</text></inputEntry>
        <inputEntry id="IE_Apr3_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr3_3"><text>true</text></inputEntry>
        <inputEntry id="IE_Apr3_4"><text>"Estavel"</text></inputEntry>
        <inputEntry id="IE_Apr3_5"><text>true</text></inputEntry>
        <outputEntry id="OE_Apr3_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Apr3_2"><text>"Diverticulite Hinchey II - sigmoidectomia eletiva apos drenagem percutanea e resolucao da fase aguda. Intervalo minimo 6 semanas."</text></outputEntry>
        <outputEntry id="OE_Apr3_3"><text>"WSES 2020 - Staged Approach Hinchey II"</text></outputEntry>
      <outputEntry id="OE_GEN_COL_003_Aprovado_Hinchey_II_PosDrenagem_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_GEN_COL_003_Aprovado_Hinchey_II_PosDrenagem_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <rule id="Rule_GEN_COL_003_Aprovado_Sepse">
        <description>Aprovado - Qualquer Hinchey com sepse</description>
        <inputEntry id="IE_Apr4_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr4_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr4_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr4_4"><text>"Sepse","Instavel"</text></inputEntry>
        <inputEntry id="IE_Apr4_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Apr4_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Apr4_2"><text>"URGENCIA - Diverticulite com sepse/instabilidade. Cirurgia de urgencia independente de classificacao Hinchey."</text></outputEntry>
        <outputEntry id="OE_Apr4_3"><text>"WSES 2020 - Sepsis Surgical Emergency"</text></outputEntry>
      <outputEntry id="OE_GEN_COL_003_Aprovado_Sepse_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_GEN_COL_003_Aprovado_Sepse_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <!-- REGRAS DE PENDENCIA -->

      <rule id="Rule_GEN_COL_003_Pendente_SegundoEpisodio">
        <description>Pendente - Segundo episodio requer avaliacao individual</description>
        <inputEntry id="IE_Pend1_1"><text>"Hinchey_Ia","Hinchey_Ib"</text></inputEntry>
        <inputEntry id="IE_Pend1_2"><text>"Segundo_Episodio"</text></inputEntry>
        <inputEntry id="IE_Pend1_3"><text>true</text></inputEntry>
        <inputEntry id="IE_Pend1_4"><text>"Estavel"</text></inputEntry>
        <inputEntry id="IE_Pend1_5"><text>true</text></inputEntry>
        <outputEntry id="OE_Pend1_1"><text>"Pendente"</text></outputEntry>
        <outputEntry id="OE_Pend1_2"><text>"Segundo episodio de diverticulite - indicacao cirurgica individualizada. Considerar idade, comorbidades e impacto na qualidade de vida."</text></outputEntry>
        <outputEntry id="OE_Pend1_3"><text>"ASCRS 2020 - Individualized Decision After 2nd Episode"</text></outputEntry>
      <outputEntry id="OE_GEN_COL_003_Pendente_SegundoEpisodio_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_GEN_COL_003_Pendente_SegundoEpisodio_5"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>

      <rule id="Rule_GEN_COL_003_Pendente_NaoClassificada">
        <description>Pendente - Classificacao Hinchey nao informada</description>
        <inputEntry id="IE_Pend2_1"><text>"Nao_Classificada"</text></inputEntry>
        <inputEntry id="IE_Pend2_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Pend2_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Pend2_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Pend2_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Pend2_1"><text>"Pendente"</text></outputEntry>
        <outputEntry id="OE_Pend2_2"><text>"Classificacao de Hinchey obrigatoria para definicao de conduta. Anexar laudo de TC com classificacao."</text></outputEntry>
        <outputEntry id="OE_Pend2_3"><text>"WSES 2020 - Hinchey Classification Required"</text></outputEntry>
      <outputEntry id="OE_GEN_COL_003_Pendente_NaoClassificada_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_GEN_COL_003_Pendente_NaoClassificada_5"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>

      <!-- REGRA FALLBACK -->

      <rule id="Rule_GEN_COL_003_Fallback">
        <description>Fallback - Analise especializada</description>
        <inputEntry id="IE_Fallback_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Fallback_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Fallback_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Fallback_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Fallback_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Fallback_1"><text>"Pendente"</text></outputEntry>
        <outputEntry id="OE_Fallback_2"><text>"Caso de diverticulite requer analise por auditor medico especializado."</text></outputEntry>
        <outputEntry id="OE_Fallback_3"><text>"Auditoria cirurgica - RN 428/2017"</text></outputEntry>
      <outputEntry id="OE_GEN_COL_003_Fallback_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_GEN_COL_003_Fallback_5"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>

    </decisionTable>
  </decision>
</definitions>
