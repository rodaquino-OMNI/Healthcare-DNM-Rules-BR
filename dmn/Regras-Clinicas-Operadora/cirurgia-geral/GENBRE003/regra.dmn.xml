<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="https://www.omg.org/spec/DMN/20191111/MODEL/"
             xmlns:camunda="http://camunda.org/schema/1.0/dmn"
             id="Definitions_GEN_BRE_003"
             name="Esvaziamento Axilar - Criterios Node-Positivo"
             namespace="http://camunda.org/schema/1.0/dmn">

  <!--
    ===============================================================================
    CODIGO: GEN-BRE-003
    Procedimento: Esvaziamento Axilar - Indicacoes em Pacientes Node-Positivas
    Especialidade: Cirurgia Geral - Mastologia
    Versao: 3.0.0-TIER1
    Data: 2026-02-07
    ===============================================================================

    INDICACOES PARA ESVAZIAMENTO AXILAR:
    - BLS positiva com > 2 linfonodos
    - cN1-2 confirmado por biopsia
    - BLS positiva com mastectomia (criterios especificos)
    - Carcinoma inflamatorio
    - Falha de BLS (nao identificacao do linfonodo)

    OMISSAO DE ESVAZIAMENTO (ACOSOG Z0011):
    - BLS com 1-2 linfonodos positivos
    - Cirurgia conservadora planejada
    - RT adjuvante tangencial planejada
    - Sem extensao extracapsular grosseira

    REFERENCIAS TECNICAS:
    - ACOSOG Z0011 Trial 2011/2017
    - AMAROS Trial 2014
    - NCCN Breast Cancer Guidelines 2024

    ===============================================================================
  -->

  <decision id="Decision_GEN_BRE_003" name="Regra Clinica - Esvaziamento Axilar">
    <decisionTable id="DecisionTable_GEN_BRE_003" hitPolicy="FIRST">

      <!-- ========== INPUTS (5) ========== -->

      <input id="Input_numeroLinfonodos" label="Numero de Linfonodos Positivos na BLS" camunda:inputVariable="numeroLinfonodos">
        <inputExpression id="InputExpression_numeroLinfonodos" typeRef="number">
          <text>numeroLinfonodos</text>
        </inputExpression>
      </input>

      <input id="Input_tipoCirurgia" label="Tipo de Cirurgia da Mama" camunda:inputVariable="tipoCirurgia">
        <inputExpression id="InputExpression_tipoCirurgia" typeRef="string">
          <text>tipoCirurgia</text>
        </inputExpression>
        <inputValues id="InputValues_tipoCirurgia">
          <text>"Conservadora","Mastectomia"</text>
        </inputValues>
      </input>

      <input id="Input_extensaoExtracapsular" label="Extensao Extracapsular" camunda:inputVariable="extensaoExtracapsular">
        <inputExpression id="InputExpression_extensaoExtracapsular" typeRef="string">
          <text>extensaoExtracapsular</text>
        </inputExpression>
        <inputValues id="InputValues_extensaoExtracapsular">
          <text>"Grosseira","Microscopica","Ausente"</text>
        </inputValues>
      </input>

      <input id="Input_radioterapiaPlanejada" label="RT Adjuvante Planejada" camunda:inputVariable="radioterapiaPlanejada">
        <inputExpression id="InputExpression_radioterapiaPlanejada" typeRef="boolean">
          <text>radioterapiaPlanejada</text>
        </inputExpression>
      </input>

      <input id="Input_estadioClinicoN" label="Estadio Clinico N Pre-Op" camunda:inputVariable="estadioClinicoN">
        <inputExpression id="InputExpression_estadioClinicoN" typeRef="string">
          <text>estadioClinicoN</text>
        </inputExpression>
        <inputValues id="InputValues_estadioClinicoN">
          <text>"cN0","cN1","cN2","cN3"</text>
        </inputValues>
      </input>

      <!-- ========== OUTPUTS (3) ========== -->

      <output id="Output_resultado" label="Resultado" name="resultado" typeRef="string">
        <outputValues id="OutputValues_resultado">
          <text>"Aprovado","Reprovado","Pendente"</text>
        </outputValues>
      </output>

      <output id="Output_observacao" label="Observacao Clinica" name="observacao" typeRef="string" />

      <output id="Output_fundamentacao" label="Fundamentacao Tecnica" name="fundamentacao" typeRef="string" />

      <!-- Output 4: Alertas Desperdicio -->
      <output id="Output_alertasDesperdicio" label="Alertas de Desperdicio" name="alertasDesperdicio" typeRef="string">
        <outputValues id="OutputValues_alertasDesperdicio">
          <text>"NENHUM","DUP","FREQ","ESC","DOC","PROT","MULTI"</text>
        </outputValues>
      </output>

      <!-- Output 5: Acao Recomendada -->
      <output id="Output_acaoRecomendada" label="Acao Recomendada" name="acaoRecomendada" typeRef="string">
        <outputValues id="OutputValues_acaoRecomendada">
          <text>"APROVAR","NEGAR","SOLICITAR_INFO","AGUARDAR_PRAZO","SUGERIR_ALTERNATIVA"</text>
        </outputValues>
      </output>

      <!-- ========== REGRAS DE REPROVACAO ========== -->

      <rule id="Rule_Reprovado_Z0011Elegivel">
        <description>Reprovado: Criterios Z0011 - omissao de esvaziamento</description>
        <inputEntry id="IE_Rep1_1"><text>[1..2]</text></inputEntry>
        <inputEntry id="IE_Rep1_2"><text>"Conservadora"</text></inputEntry>
        <inputEntry id="IE_Rep1_3"><text>"Ausente","Microscopica"</text></inputEntry>
        <inputEntry id="IE_Rep1_4"><text>true</text></inputEntry>
        <inputEntry id="IE_Rep1_5"><text>"cN0"</text></inputEntry>
        <outputEntry id="OE_Rep1_1"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OE_Rep1_2"><text>"Criterios ACOSOG Z0011 preenchidos - omissao de esvaziamento axilar, RT axilar substitutiva"</text></outputEntry>
        <outputEntry id="OE_Rep1_3"><text>"ACOSOG Z0011 2011 - BLS 1-2 positivos + conservadora + RT nao requer esvaziamento"</text></outputEntry>
      <outputEntry id="OE_Reprovado_Z0011Elegivel_4"><text>"PROT"</text></outputEntry>
        <outputEntry id="OE_Reprovado_Z0011Elegivel_5"><text>"NEGAR"</text></outputEntry>
      </rule>

      <rule id="Rule_Reprovado_BLSNegativa">
        <description>Reprovado: BLS negativa</description>
        <inputEntry id="IE_Rep2_1"><text>0</text></inputEntry>
        <inputEntry id="IE_Rep2_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep2_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep2_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep2_5"><text>"cN0"</text></inputEntry>
        <outputEntry id="OE_Rep2_1"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OE_Rep2_2"><text>"BLS negativa - esvaziamento axilar nao indicado"</text></outputEntry>
        <outputEntry id="OE_Rep2_3"><text>"NCCN 2024 - BLS negativa descarta necessidade de esvaziamento"</text></outputEntry>
      <outputEntry id="OE_Reprovado_BLSNegativa_4"><text>"PROT"</text></outputEntry>
        <outputEntry id="OE_Reprovado_BLSNegativa_5"><text>"NEGAR"</text></outputEntry>
      </rule>

      <!-- ========== REGRAS DE APROVACAO ========== -->

      <rule id="Rule_Aprovado_MaisQue2">
        <description>Aprovado: Mais de 2 linfonodos positivos</description>
        <inputEntry id="IE_Apr1_1"><text>&gt; 2</text></inputEntry>
        <inputEntry id="IE_Apr1_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr1_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr1_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr1_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Apr1_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Apr1_2"><text>"Mais de 2 linfonodos positivos na BLS - esvaziamento axilar indicado"</text></outputEntry>
        <outputEntry id="OE_Apr1_3"><text>"ACOSOG Z0011 - Criterios nao aplicaveis com &gt; 2 linfonodos"</text></outputEntry>
      <outputEntry id="OE_Aprovado_MaisQue2_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Aprovado_MaisQue2_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <rule id="Rule_Aprovado_Mastectomia">
        <description>Aprovado: Mastectomia com linfonodos positivos</description>
        <inputEntry id="IE_Apr2_1"><text>&gt;= 1</text></inputEntry>
        <inputEntry id="IE_Apr2_2"><text>"Mastectomia"</text></inputEntry>
        <inputEntry id="IE_Apr2_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr2_4"><text>false</text></inputEntry>
        <inputEntry id="IE_Apr2_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Apr2_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Apr2_2"><text>"Mastectomia com BLS positiva sem RT planejada - esvaziamento axilar indicado"</text></outputEntry>
        <outputEntry id="OE_Apr2_3"><text>"NCCN 2024 - Z0011 nao aplicavel a mastectomia sem RT"</text></outputEntry>
      <outputEntry id="OE_Aprovado_Mastectomia_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Aprovado_Mastectomia_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <rule id="Rule_Aprovado_ExtensaoGrosseira">
        <description>Aprovado: Extensao extracapsular grosseira</description>
        <inputEntry id="IE_Apr3_1"><text>&gt;= 1</text></inputEntry>
        <inputEntry id="IE_Apr3_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr3_3"><text>"Grosseira"</text></inputEntry>
        <inputEntry id="IE_Apr3_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr3_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Apr3_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Apr3_2"><text>"Extensao extracapsular grosseira - esvaziamento axilar indicado"</text></outputEntry>
        <outputEntry id="OE_Apr3_3"><text>"NCCN 2024 - Extensao extracapsular e fator de alto risco"</text></outputEntry>
      <outputEntry id="OE_Aprovado_ExtensaoGrosseira_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Aprovado_ExtensaoGrosseira_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <rule id="Rule_Aprovado_cN1N2">
        <description>Aprovado: cN1-2 confirmado clinicamente</description>
        <inputEntry id="IE_Apr4_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr4_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr4_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr4_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr4_5"><text>"cN1","cN2","cN3"</text></inputEntry>
        <outputEntry id="OE_Apr4_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Apr4_2"><text>"Doenca axilar clinicamente positiva - esvaziamento axilar padrao"</text></outputEntry>
        <outputEntry id="OE_Apr4_3"><text>"NCCN 2024 - cN+ e indicacao de esvaziamento axilar"</text></outputEntry>
      <outputEntry id="OE_Aprovado_cN1N2_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Aprovado_cN1N2_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <!-- ========== REGRA FALLBACK ========== -->

      <rule id="Rule_Fallback_GEN_BRE_003">
        <description>Pendente: Discussao multidisciplinar</description>
        <inputEntry id="IE_FB_1"><text>-</text></inputEntry>
        <inputEntry id="IE_FB_2"><text>-</text></inputEntry>
        <inputEntry id="IE_FB_3"><text>-</text></inputEntry>
        <inputEntry id="IE_FB_4"><text>-</text></inputEntry>
        <inputEntry id="IE_FB_5"><text>-</text></inputEntry>
        <outputEntry id="OE_FB_1"><text>"Pendente"</text></outputEntry>
        <outputEntry id="OE_FB_2"><text>"Discussao em junta multidisciplinar para definicao de manejo axilar"</text></outputEntry>
        <outputEntry id="OE_FB_3"><text>"Considerar AMAROS - RT axilar como alternativa em casos selecionados"</text></outputEntry>
      <outputEntry id="OE_Fallback_GEN_BRE_003_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Fallback_GEN_BRE_003_5"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>

    </decisionTable>
  </decision>
</definitions>
