<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="https://www.omg.org/spec/DMN/20191111/MODEL/"
             xmlns:dmndi="https://www.omg.org/spec/DMN/20191111/DMNDI/"
             xmlns:dc="http://www.omg.org/spec/DD/20100524/DC/"
             xmlns:di="http://www.omg.org/spec/DD/20100524/DI/"
             id="Definitions_GEN_UGI_002"
             name="Acalasia - Tratamento Cirurgico"
             namespace="http://camunda.org/schema/1.0/dmn"
             exporter="Camunda Modeler"
             exporterVersion="5.0.0">
  <!--
    GEN-UGI-002 - Acalasia - Indicacoes para Tratamento Cirurgico
    Versao: 1.0.0 (2026-02-07)
    Especialidade: Cirurgia Geral - Esofago Gastrico
    Categoria: Procedimentos Cirurgicos

    Classificacao de Chicago (HRM):
    - Tipo I: Acalasia classica (aperistalse, pressao baixa)
    - Tipo II: Panesofagica (compressao, melhor prognostico)
    - Tipo III: Espastica (contracao prematura, pior resposta)

    Opcoes Terapeuticas:
    - Dilatacao pneumatica: Eficaz 70-90%, pode repetir
    - Miotomia de Heller + fundoplicatura parcial
    - POEM (Per-Oral Endoscopic Myotomy)
    - Botox: Paliativo, temporario

    Indicacoes Cirurgicas (ISDE 2020 / ACG 2020):
    - Acalasia tipos I e II: Heller ou POEM
    - Tipo III: POEM pode ser superior
    - Falha de dilatacao pneumatica
    - Preferencia do paciente

    Documentacao Obrigatoria:
    - Manometria de alta resolucao (classificar Chicago)
    - Esofagograma com bario
    - EDA (excluir pseudoacalasia)

    Referencias Normativas:
    - ISDE Guidelines Achalasia 2020
    - ACG Clinical Guideline Achalasia 2020
    - SAGES Guidelines 2019
  -->

  <decision id="Decision_GEN_UGI_002" name="Criterios de Autorizacao - Acalasia Cirurgia">
    <decisionTable id="DecisionTable_GEN_UGI_002" hitPolicy="FIRST">

      <!-- Input 1: Classificacao Chicago -->
      <input id="Input_chicago" label="Classificacao Chicago (Tipo)">
        <inputExpression id="InputExpr_chicago" typeRef="string">
          <text>classificacaoChicago</text>
        </inputExpression>
        <inputValues id="InputValues_chicago">
          <text>"Tipo_I","Tipo_II","Tipo_III","Nao_Classificada"</text>
        </inputValues>
      </input>

      <!-- Input 2: Tratamentos Previos -->
      <input id="Input_tratamentosPrevios" label="Tratamentos Previos">
        <inputExpression id="InputExpr_tratamentosPrevios" typeRef="string">
          <text>tratamentosPrevios</text>
        </inputExpression>
        <inputValues id="InputValues_tratamentosPrevios">
          <text>"Nenhum","Dilatacao_Falhou","Botox_Repetido","Miotomia_Recidiva"</text>
        </inputValues>
      </input>

      <!-- Input 3: Manometria Alta Resolucao -->
      <input id="Input_manometria" label="Manometria Alta Resolucao">
        <inputExpression id="InputExpr_manometria" typeRef="boolean">
          <text>manometriaAltaResolucao</text>
        </inputExpression>
      </input>

      <!-- Input 4: Esofagograma/EDA -->
      <input id="Input_esofagogramaEDA" label="Esofagograma e EDA Realizados">
        <inputExpression id="InputExpr_esofagogramaEDA" typeRef="boolean">
          <text>esofagogramaEdaRealizados</text>
        </inputExpression>
      </input>

      <!-- Input 5: Laudo de Indicacao -->
      <input id="Input_laudoIndicacao" label="Laudo de Indicacao">
        <inputExpression id="InputExpr_laudoIndicacao" typeRef="boolean">
          <text>laudoIndicacao</text>
        </inputExpression>
      </input>

      <!-- Output 1: Resultado -->
      <output id="Output_resultado" label="Resultado" name="resultado" typeRef="string">
        <outputValues id="OutputValues_resultado">
          <text>"Aprovado","Reprovado","Pendente"</text>
        </outputValues>
      </output>

      <!-- Output 2: Observacao -->
      <output id="Output_observacao" label="Observacao Clinica" name="observacao" typeRef="string" />

      <!-- Output 3: Fundamentacao -->
      <output id="Output_fundamentacao" label="Fundamentacao" name="fundamentacao" typeRef="string" />

      <!-- Output 4: Alertas Desperdicio -->
      <output id="Output_alertasDesperdicio" label="Alertas de Desperdicio" name="alertasDesperdicio" typeRef="string">
        <outputValues id="OutputValues_alertasDesperdicio">
          <text>"NENHUM","DUP","FREQ","ESC","DOC","PROT","MULTI"</text>
        </outputValues>
      </output>

      <!-- Output 5: Acao Recomendada -->
      <output id="Output_acaoRecomendada" label="Acao Recomendada" name="acaoRecomendada" typeRef="string">
        <outputValues id="OutputValues_acaoRecomendada">
          <text>"APROVAR","NEGAR","SOLICITAR_INFO","AGUARDAR_PRAZO","SUGERIR_ALTERNATIVA"</text>
        </outputValues>
      </output>

      <!-- REGRAS DE REPROVACAO -->

      <rule id="Rule_GEN_UGI_002_Reprovado_SemManometria">
        <description>Reprovado - Sem manometria de alta resolucao</description>
        <inputEntry id="IE_Rep1_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep1_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep1_3"><text>false</text></inputEntry>
        <inputEntry id="IE_Rep1_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep1_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Rep1_1"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OE_Rep1_2"><text>"Manometria esofagica de alta resolucao obrigatoria para confirmacao diagnostica e classificacao de Chicago antes de tratamento cirurgico."</text></outputEntry>
        <outputEntry id="OE_Rep1_3"><text>"ACG 2020 - High-Resolution Manometry Required"</text></outputEntry>
      <outputEntry id="OE_GEN_UGI_002_Reprovado_SemManometria_4"><text>"PROT"</text></outputEntry>
        <outputEntry id="OE_GEN_UGI_002_Reprovado_SemManometria_5"><text>"NEGAR"</text></outputEntry>
      </rule>

      <rule id="Rule_GEN_UGI_002_Reprovado_SemEsofagogramaEDA">
        <description>Reprovado - Sem esofagograma e EDA</description>
        <inputEntry id="IE_Rep2_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep2_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep2_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep2_4"><text>false</text></inputEntry>
        <inputEntry id="IE_Rep2_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Rep2_1"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OE_Rep2_2"><text>"Esofagograma e EDA obrigatorios para avaliacao anatomica e exclusao de pseudoacalasia (neoplasia de JEG)."</text></outputEntry>
        <outputEntry id="OE_Rep2_3"><text>"ACG 2020 - Exclude Pseudoachalasia"</text></outputEntry>
      <outputEntry id="OE_GEN_UGI_002_Reprovado_SemEsofagogramaEDA_4"><text>"PROT"</text></outputEntry>
        <outputEntry id="OE_GEN_UGI_002_Reprovado_SemEsofagogramaEDA_5"><text>"NEGAR"</text></outputEntry>
      </rule>

      <rule id="Rule_GEN_UGI_002_Reprovado_SemLaudo">
        <description>Reprovado - Sem laudo de indicacao</description>
        <inputEntry id="IE_Rep3_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep3_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep3_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep3_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep3_5"><text>false</text></inputEntry>
        <outputEntry id="OE_Rep3_1"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OE_Rep3_2"><text>"Laudo de indicacao obrigatorio com classificacao Chicago e justificativa da escolha terapeutica."</text></outputEntry>
        <outputEntry id="OE_Rep3_3"><text>"RN 465/2021 - Documentacao Obrigatoria"</text></outputEntry>
      <outputEntry id="OE_GEN_UGI_002_Reprovado_SemLaudo_4"><text>"PROT"</text></outputEntry>
        <outputEntry id="OE_GEN_UGI_002_Reprovado_SemLaudo_5"><text>"NEGAR"</text></outputEntry>
      </rule>

      <!-- REGRAS DE APROVACAO -->

      <rule id="Rule_GEN_UGI_002_Aprovado_TipoI_II">
        <description>Aprovado - Acalasia Tipo I ou II</description>
        <inputEntry id="IE_Apr1_1"><text>"Tipo_I","Tipo_II"</text></inputEntry>
        <inputEntry id="IE_Apr1_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr1_3"><text>true</text></inputEntry>
        <inputEntry id="IE_Apr1_4"><text>true</text></inputEntry>
        <inputEntry id="IE_Apr1_5"><text>true</text></inputEntry>
        <outputEntry id="OE_Apr1_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Apr1_2"><text>"Acalasia Tipo I/II - miotomia de Heller laparoscopica + fundoplicatura parcial (Dor) aprovada. POEM e alternativa equivalente."</text></outputEntry>
        <outputEntry id="OE_Apr1_3"><text>"ACG 2020 / ISDE 2020 - Type I/II Treatment"</text></outputEntry>
      <outputEntry id="OE_GEN_UGI_002_Aprovado_TipoI_II_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_GEN_UGI_002_Aprovado_TipoI_II_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <rule id="Rule_GEN_UGI_002_Aprovado_TipoIII">
        <description>Aprovado - Acalasia Tipo III</description>
        <inputEntry id="IE_Apr2_1"><text>"Tipo_III"</text></inputEntry>
        <inputEntry id="IE_Apr2_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr2_3"><text>true</text></inputEntry>
        <inputEntry id="IE_Apr2_4"><text>true</text></inputEntry>
        <inputEntry id="IE_Apr2_5"><text>true</text></inputEntry>
        <outputEntry id="OE_Apr2_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Apr2_2"><text>"Acalasia Tipo III (espastica) - miotomia estendida indicada. POEM pode ser superior por permitir miotomia mais longa."</text></outputEntry>
        <outputEntry id="OE_Apr2_3"><text>"ACG 2020 - Type III POEM Preferred"</text></outputEntry>
      <outputEntry id="OE_GEN_UGI_002_Aprovado_TipoIII_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_GEN_UGI_002_Aprovado_TipoIII_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <rule id="Rule_GEN_UGI_002_Aprovado_PosFalhaDilatacao">
        <description>Aprovado - Apos falha de dilatacao</description>
        <inputEntry id="IE_Apr3_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr3_2"><text>"Dilatacao_Falhou"</text></inputEntry>
        <inputEntry id="IE_Apr3_3"><text>true</text></inputEntry>
        <inputEntry id="IE_Apr3_4"><text>true</text></inputEntry>
        <inputEntry id="IE_Apr3_5"><text>true</text></inputEntry>
        <outputEntry id="OE_Apr3_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Apr3_2"><text>"Falha de dilatacao pneumatica - miotomia cirurgica (Heller ou POEM) aprovada. Maior taxa de sucesso duradouro."</text></outputEntry>
        <outputEntry id="OE_Apr3_3"><text>"ACG 2020 - Post-Dilation Failure"</text></outputEntry>
      <outputEntry id="OE_GEN_UGI_002_Aprovado_PosFalhaDilatacao_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_GEN_UGI_002_Aprovado_PosFalhaDilatacao_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <!-- REGRAS DE PENDENCIA -->

      <rule id="Rule_GEN_UGI_002_Pendente_NaoClassificada">
        <description>Pendente - Classificacao Chicago nao informada</description>
        <inputEntry id="IE_Pend1_1"><text>"Nao_Classificada"</text></inputEntry>
        <inputEntry id="IE_Pend1_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Pend1_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Pend1_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Pend1_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Pend1_1"><text>"Pendente"</text></outputEntry>
        <outputEntry id="OE_Pend1_2"><text>"Classificacao de Chicago obrigatoria para selecao de tratamento. Anexar laudo de manometria de alta resolucao com classificacao."</text></outputEntry>
        <outputEntry id="OE_Pend1_3"><text>"ACG 2020 - Chicago Classification Required"</text></outputEntry>
      <outputEntry id="OE_GEN_UGI_002_Pendente_NaoClassificada_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_GEN_UGI_002_Pendente_NaoClassificada_5"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>

      <rule id="Rule_GEN_UGI_002_Pendente_Recidiva">
        <description>Pendente - Recidiva pos-miotomia</description>
        <inputEntry id="IE_Pend2_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Pend2_2"><text>"Miotomia_Recidiva"</text></inputEntry>
        <inputEntry id="IE_Pend2_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Pend2_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Pend2_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Pend2_1"><text>"Pendente"</text></outputEntry>
        <outputEntry id="OE_Pend2_2"><text>"Recidiva pos-miotomia - caso complexo. Avaliar POEM (lado oposto), dilatacao ou esofagectomia em casos terminais. Centro de referencia."</text></outputEntry>
        <outputEntry id="OE_Pend2_3"><text>"ISDE 2020 - Refractory Achalasia"</text></outputEntry>
      <outputEntry id="OE_GEN_UGI_002_Pendente_Recidiva_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_GEN_UGI_002_Pendente_Recidiva_5"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>

      <!-- REGRA FALLBACK -->

      <rule id="Rule_GEN_UGI_002_Fallback">
        <description>Fallback - Analise especializada</description>
        <inputEntry id="IE_Fallback_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Fallback_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Fallback_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Fallback_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Fallback_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Fallback_1"><text>"Pendente"</text></outputEntry>
        <outputEntry id="OE_Fallback_2"><text>"Caso de acalasia requer analise por auditor medico especializado em esofago."</text></outputEntry>
        <outputEntry id="OE_Fallback_3"><text>"Auditoria cirurgica - RN 428/2017"</text></outputEntry>
      <outputEntry id="OE_GEN_UGI_002_Fallback_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_GEN_UGI_002_Fallback_5"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>

    </decisionTable>
  </decision>
</definitions>
