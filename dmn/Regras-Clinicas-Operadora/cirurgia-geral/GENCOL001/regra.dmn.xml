<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="https://www.omg.org/spec/DMN/20191111/MODEL/"
             xmlns:dmndi="https://www.omg.org/spec/DMN/20191111/DMNDI/"
             xmlns:dc="http://www.omg.org/spec/DD/20100524/DC/"
             xmlns:di="http://www.omg.org/spec/DD/20100524/DI/"
             id="Definitions_GEN_COL_001"
             name="Colectomia para Cancer - Criterios de Estadiamento"
             namespace="http://camunda.org/schema/1.0/dmn"
             exporter="Camunda Modeler"
             exporterVersion="5.0.0">
  <!--
    GEN-COL-001 - Colectomia para Cancer Colorretal - Criterios de Estadiamento
    Versao: 1.0.0 (2026-02-07)
    Especialidade: Cirurgia Geral - Coloproctologia
    Categoria: Procedimentos Cirurgicos Oncologicos

    Indicacoes Clinicas (NCCN Colon Cancer 2024):
    - Cancer de colon confirmado histologicamente
    - Estadiamento completo (TC torax/abdome/pelve)
    - CEA pre-operatorio
    - Colonoscopia completa (ou TC colonografia)

    Extensao da Resseccao:
    - Hemicolectomia direita: Ceco, ascendente, hepatico
    - Hemicolectomia esquerda: Descendente, sigmoide
    - Colectomia subtotal: Tumores sincronicos
    - Margem minima: 5cm proximal e distal

    Linfadenectomia:
    - Minimo 12 linfonodos para estadiamento adequado
    - Resseccao D3 para tumores avancados

    Documentacao Obrigatoria:
    - Biopsia com tipo histologico
    - TC estadiamento
    - CEA pre-operatorio
    - Colonoscopia completa

    Referencias Normativas:
    - NCCN Colon Cancer Guidelines 2024
    - ESMO Colorectal Cancer Guidelines 2023
    - ASCRS Clinical Practice Guidelines
  -->

  <decision id="Decision_GEN_COL_001" name="Criterios de Autorizacao - Colectomia Cancer">
    <decisionTable id="DecisionTable_GEN_COL_001" hitPolicy="FIRST">

      <!-- Input 1: Confirmacao Histologica -->
      <input id="Input_histologia" label="Confirmacao Histologica">
        <inputExpression id="InputExpr_histologia" typeRef="string">
          <text>confirmacaoHistologica</text>
        </inputExpression>
        <inputValues id="InputValues_histologia">
          <text>"Adenocarcinoma","Carcinoma_Mucinoso","Outros_Tipos","Nao_Confirmado"</text>
        </inputValues>
      </input>

      <!-- Input 2: Estadiamento -->
      <input id="Input_estadiamento" label="Estadiamento TNM">
        <inputExpression id="InputExpr_estadiamento" typeRef="string">
          <text>estadiamentoTNM</text>
        </inputExpression>
        <inputValues id="InputValues_estadiamento">
          <text>"Estadio_I","Estadio_II","Estadio_III","Estadio_IV","Nao_Estadiado"</text>
        </inputValues>
      </input>

      <!-- Input 3: TC Estadiamento -->
      <input id="Input_tcEstadiamento" label="TC Torax/Abdome/Pelve">
        <inputExpression id="InputExpr_tcEstadiamento" typeRef="boolean">
          <text>tcEstadiamentoCompleto</text>
        </inputExpression>
      </input>

      <!-- Input 4: Colonoscopia Completa -->
      <input id="Input_colonoscopia" label="Colonoscopia Completa">
        <inputExpression id="InputExpr_colonoscopia" typeRef="boolean">
          <text>colonoscopiaCompleta</text>
        </inputExpression>
      </input>

      <!-- Input 5: Laudo de Indicacao -->
      <input id="Input_laudoIndicacao" label="Laudo de Indicacao">
        <inputExpression id="InputExpr_laudoIndicacao" typeRef="boolean">
          <text>laudoIndicacao</text>
        </inputExpression>
      </input>

      <!-- Output 1: Resultado -->
      <output id="Output_resultado" label="Resultado" name="resultado" typeRef="string">
        <outputValues id="OutputValues_resultado">
          <text>"Aprovado","Reprovado","Pendente"</text>
        </outputValues>
      </output>

      <!-- Output 2: Observacao -->
      <output id="Output_observacao" label="Observacao Clinica" name="observacao" typeRef="string" />

      <!-- Output 3: Fundamentacao -->
      <output id="Output_fundamentacao" label="Fundamentacao" name="fundamentacao" typeRef="string" />

      <!-- Output 4: Alertas Desperdicio -->
      <output id="Output_alertasDesperdicio" label="Alertas de Desperdicio" name="alertasDesperdicio" typeRef="string">
        <outputValues id="OutputValues_alertasDesperdicio">
          <text>"NENHUM","DUP","FREQ","ESC","DOC","PROT","MULTI"</text>
        </outputValues>
      </output>

      <!-- Output 5: Acao Recomendada -->
      <output id="Output_acaoRecomendada" label="Acao Recomendada" name="acaoRecomendada" typeRef="string">
        <outputValues id="OutputValues_acaoRecomendada">
          <text>"APROVAR","NEGAR","SOLICITAR_INFO","AGUARDAR_PRAZO","SUGERIR_ALTERNATIVA"</text>
        </outputValues>
      </output>

      <!-- REGRAS DE REPROVACAO -->

      <rule id="Rule_GEN_COL_001_Reprovado_SemHistologia">
        <description>Reprovado - Sem confirmacao histologica</description>
        <inputEntry id="IE_Rep1_1"><text>"Nao_Confirmado"</text></inputEntry>
        <inputEntry id="IE_Rep1_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep1_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep1_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep1_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Rep1_1"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OE_Rep1_2"><text>"Cirurgia oncologica requer confirmacao histologica de malignidade. Realizar biopsia colonoscopica antes de indicar resseccao."</text></outputEntry>
        <outputEntry id="OE_Rep1_3"><text>"NCCN 2024 - Histologic Confirmation Required"</text></outputEntry>
      <outputEntry id="OE_GEN_COL_001_Reprovado_SemHistologia_4"><text>"PROT"</text></outputEntry>
        <outputEntry id="OE_GEN_COL_001_Reprovado_SemHistologia_5"><text>"NEGAR"</text></outputEntry>
      </rule>

      <rule id="Rule_GEN_COL_001_Reprovado_SemTC">
        <description>Reprovado - Sem estadiamento por imagem</description>
        <inputEntry id="IE_Rep2_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep2_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep2_3"><text>false</text></inputEntry>
        <inputEntry id="IE_Rep2_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep2_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Rep2_1"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OE_Rep2_2"><text>"TC de torax, abdome e pelve obrigatoria para estadiamento pre-operatorio e exclusao de metastases."</text></outputEntry>
        <outputEntry id="OE_Rep2_3"><text>"NCCN 2024 - CT Staging Required"</text></outputEntry>
      <outputEntry id="OE_GEN_COL_001_Reprovado_SemTC_4"><text>"PROT"</text></outputEntry>
        <outputEntry id="OE_GEN_COL_001_Reprovado_SemTC_5"><text>"NEGAR"</text></outputEntry>
      </rule>

      <rule id="Rule_GEN_COL_001_Reprovado_SemLaudo">
        <description>Reprovado - Sem laudo de indicacao</description>
        <inputEntry id="IE_Rep3_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep3_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep3_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep3_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep3_5"><text>false</text></inputEntry>
        <outputEntry id="OE_Rep3_1"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OE_Rep3_2"><text>"Laudo de indicacao obrigatorio com estadiamento, localizacao tumoral e extensao de resseccao planejada."</text></outputEntry>
        <outputEntry id="OE_Rep3_3"><text>"RN 465/2021 - Documentacao Obrigatoria"</text></outputEntry>
      <outputEntry id="OE_GEN_COL_001_Reprovado_SemLaudo_4"><text>"PROT"</text></outputEntry>
        <outputEntry id="OE_GEN_COL_001_Reprovado_SemLaudo_5"><text>"NEGAR"</text></outputEntry>
      </rule>

      <!-- REGRAS DE APROVACAO -->

      <rule id="Rule_GEN_COL_001_Aprovado_Estadio_I_II_III">
        <description>Aprovado - Cancer colon estadio I-III com documentacao completa</description>
        <inputEntry id="IE_Apr1_1"><text>"Adenocarcinoma","Carcinoma_Mucinoso"</text></inputEntry>
        <inputEntry id="IE_Apr1_2"><text>"Estadio_I","Estadio_II","Estadio_III"</text></inputEntry>
        <inputEntry id="IE_Apr1_3"><text>true</text></inputEntry>
        <inputEntry id="IE_Apr1_4"><text>true</text></inputEntry>
        <inputEntry id="IE_Apr1_5"><text>true</text></inputEntry>
        <outputEntry id="OE_Apr1_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Apr1_2"><text>"Cancer de colon estadio I-III - colectomia oncologica aprovada. Resseccao com margem adequada e linfadenectomia (minimo 12 linfonodos)."</text></outputEntry>
        <outputEntry id="OE_Apr1_3"><text>"NCCN 2024 - Surgical Resection Stage I-III"</text></outputEntry>
      <outputEntry id="OE_GEN_COL_001_Aprovado_Estadio_I_II_III_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_GEN_COL_001_Aprovado_Estadio_I_II_III_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <rule id="Rule_GEN_COL_001_Aprovado_Estadio_IV_Sintomatico">
        <description>Aprovado - Estadio IV com sintomas obstrutivos/sangrantes</description>
        <inputEntry id="IE_Apr2_1"><text>"Adenocarcinoma","Carcinoma_Mucinoso"</text></inputEntry>
        <inputEntry id="IE_Apr2_2"><text>"Estadio_IV"</text></inputEntry>
        <inputEntry id="IE_Apr2_3"><text>true</text></inputEntry>
        <inputEntry id="IE_Apr2_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr2_5"><text>true</text></inputEntry>
        <outputEntry id="OE_Apr2_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Apr2_2"><text>"Cancer estadio IV - resseccao paliativa do tumor primario indicada para controle de sintomas (obstrucao, sangramento). Discutir em tumor board."</text></outputEntry>
        <outputEntry id="OE_Apr2_3"><text>"NCCN 2024 - Stage IV Palliative Resection"</text></outputEntry>
      <outputEntry id="OE_GEN_COL_001_Aprovado_Estadio_IV_Sintomatico_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_GEN_COL_001_Aprovado_Estadio_IV_Sintomatico_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <!-- REGRAS DE PENDENCIA -->

      <rule id="Rule_GEN_COL_001_Pendente_SemColonoscopia">
        <description>Pendente - Colonoscopia incompleta</description>
        <inputEntry id="IE_Pend1_1"><text>"Adenocarcinoma","Carcinoma_Mucinoso"</text></inputEntry>
        <inputEntry id="IE_Pend1_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Pend1_3"><text>true</text></inputEntry>
        <inputEntry id="IE_Pend1_4"><text>false</text></inputEntry>
        <inputEntry id="IE_Pend1_5"><text>true</text></inputEntry>
        <outputEntry id="OE_Pend1_1"><text>"Pendente"</text></outputEntry>
        <outputEntry id="OE_Pend1_2"><text>"Colonoscopia completa ou TC colonografia necessaria para excluir lesoes sincronicas (5% dos casos). Realizar no pre-operatorio ou ate 6 meses pos-op."</text></outputEntry>
        <outputEntry id="OE_Pend1_3"><text>"NCCN 2024 - Complete Colonic Evaluation"</text></outputEntry>
      <outputEntry id="OE_GEN_COL_001_Pendente_SemColonoscopia_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_GEN_COL_001_Pendente_SemColonoscopia_5"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>

      <rule id="Rule_GEN_COL_001_Pendente_NaoEstadiado">
        <description>Pendente - Estadiamento incompleto</description>
        <inputEntry id="IE_Pend2_1"><text>"Adenocarcinoma","Carcinoma_Mucinoso"</text></inputEntry>
        <inputEntry id="IE_Pend2_2"><text>"Nao_Estadiado"</text></inputEntry>
        <inputEntry id="IE_Pend2_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Pend2_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Pend2_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Pend2_1"><text>"Pendente"</text></outputEntry>
        <outputEntry id="OE_Pend2_2"><text>"Estadiamento TNM obrigatorio para definicao de conduta. Anexar TC e CEA pre-operatorio."</text></outputEntry>
        <outputEntry id="OE_Pend2_3"><text>"NCCN 2024 - TNM Staging Required"</text></outputEntry>
      <outputEntry id="OE_GEN_COL_001_Pendente_NaoEstadiado_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_GEN_COL_001_Pendente_NaoEstadiado_5"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>

      <!-- REGRA FALLBACK -->

      <rule id="Rule_GEN_COL_001_Fallback">
        <description>Fallback - Analise especializada</description>
        <inputEntry id="IE_Fallback_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Fallback_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Fallback_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Fallback_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Fallback_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Fallback_1"><text>"Pendente"</text></outputEntry>
        <outputEntry id="OE_Fallback_2"><text>"Caso de cancer colorretal requer analise por auditor medico oncologico."</text></outputEntry>
        <outputEntry id="OE_Fallback_3"><text>"Auditoria oncologica - RN 428/2017"</text></outputEntry>
      <outputEntry id="OE_GEN_COL_001_Fallback_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_GEN_COL_001_Fallback_5"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>

    </decisionTable>
  </decision>
</definitions>
