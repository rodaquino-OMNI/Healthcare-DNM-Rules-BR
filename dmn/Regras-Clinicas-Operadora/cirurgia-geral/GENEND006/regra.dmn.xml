<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="https://www.omg.org/spec/DMN/20191111/MODEL/"
             xmlns:camunda="http://camunda.org/schema/1.0/dmn"
             id="Definitions_GEN_END_006"
             name="Feocromocitoma - Preparo Pre-Operatorio"
             namespace="http://camunda.org/schema/1.0/dmn">

  <!--
    ===============================================================================
    CODIGO: GEN-END-006
    Procedimento: Feocromocitoma - Criterios de Preparo Pre-Operatorio
    Especialidade: Cirurgia Geral - Cirurgia Endocrina
    Versao: 3.0.0-TIER1
    Data: 2026-02-07
    ===============================================================================

    REQUISITOS DE PREPARO:
    - Alfa-bloqueio por minimo 7-14 dias
    - PA controlada (< 160/90 mmHg)
    - FC adequada (60-70 bpm)
    - Ausencia de hipotensao ortostatica grave
    - Beta-bloqueio SOMENTE apos alfa-bloqueio adequado
    - Expansao volemica

    CONTRAINDICACOES A CIRURGIA:
    - PA nao controlada apesar de alfa-bloqueio maximo
    - Crises hipertensivas frequentes
    - Beta-bloqueio sem alfa-bloqueio previo

    REFERENCIAS TECNICAS:
    - Endocrine Society Guidelines 2014
    - ESE Guidelines - Pheochromocytoma 2019
    - AAES Guidelines 2013

    ===============================================================================
  -->

  <decision id="Decision_GEN_END_006" name="Regra Clinica - Feocromocitoma Preparo">
    <decisionTable id="DecisionTable_GEN_END_006" hitPolicy="FIRST">

      <!-- ========== INPUTS (5) ========== -->

      <input id="Input_tempoAlfaBloqueio" label="Tempo de Alfa-Bloqueio (dias)" camunda:inputVariable="tempoAlfaBloqueio">
        <inputExpression id="InputExpression_tempoAlfaBloqueio" typeRef="number">
          <text>tempoAlfaBloqueio</text>
        </inputExpression>
      </input>

      <input id="Input_pressaoArterial" label="PA Atual (mmHg sistolica)" camunda:inputVariable="pressaoArterial">
        <inputExpression id="InputExpression_pressaoArterial" typeRef="number">
          <text>pressaoArterial</text>
        </inputExpression>
      </input>

      <input id="Input_frequenciaCardiaca" label="Frequencia Cardiaca (bpm)" camunda:inputVariable="frequenciaCardiaca">
        <inputExpression id="InputExpression_frequenciaCardiaca" typeRef="number">
          <text>frequenciaCardiaca</text>
        </inputExpression>
      </input>

      <input id="Input_betaBloqueio" label="Beta-Bloqueio Iniciado" camunda:inputVariable="betaBloqueio">
        <inputExpression id="InputExpression_betaBloqueio" typeRef="string">
          <text>betaBloqueio</text>
        </inputExpression>
        <inputValues id="InputValues_betaBloqueio">
          <text>"AposAlfaBloqueio","SemAlfaBloqueio","NaoIniciado"</text>
        </inputValues>
      </input>

      <input id="Input_hipotensaoOrtostatica" label="Hipotensao Ortostatica" camunda:inputVariable="hipotensaoOrtostatica">
        <inputExpression id="InputExpression_hipotensaoOrtostatica" typeRef="string">
          <text>hipotensaoOrtostatica</text>
        </inputExpression>
        <inputValues id="InputValues_hipotensaoOrtostatica">
          <text>"Leve","Moderada","Grave","Ausente"</text>
        </inputValues>
      </input>

      <!-- ========== OUTPUTS (3) ========== -->

      <output id="Output_resultado" label="Resultado" name="resultado" typeRef="string">
        <outputValues id="OutputValues_resultado">
          <text>"Aprovado","Reprovado","Pendente"</text>
        </outputValues>
      </output>

      <output id="Output_observacao" label="Observacao Clinica" name="observacao" typeRef="string" />

      <output id="Output_fundamentacao" label="Fundamentacao Tecnica" name="fundamentacao" typeRef="string" />

      <!-- Output 4: Alertas Desperdicio -->
      <output id="Output_alertasDesperdicio" label="Alertas de Desperdicio" name="alertasDesperdicio" typeRef="string">
        <outputValues id="OutputValues_alertasDesperdicio">
          <text>"NENHUM","DUP","FREQ","ESC","DOC","PROT","MULTI"</text>
        </outputValues>
      </output>

      <!-- Output 5: Acao Recomendada -->
      <output id="Output_acaoRecomendada" label="Acao Recomendada" name="acaoRecomendada" typeRef="string">
        <outputValues id="OutputValues_acaoRecomendada">
          <text>"APROVAR","NEGAR","SOLICITAR_INFO","AGUARDAR_PRAZO","SUGERIR_ALTERNATIVA"</text>
        </outputValues>
      </output>

      <!-- ========== REGRAS DE REPROVACAO ========== -->

      <rule id="Rule_Reprovado_SemAlfaBloqueio">
        <description>Reprovado: Sem alfa-bloqueio pre-operatorio</description>
        <inputEntry id="IE_Rep1_1"><text>&lt; 7</text></inputEntry>
        <inputEntry id="IE_Rep1_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep1_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep1_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep1_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Rep1_1"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OE_Rep1_2"><text>"Alfa-bloqueio insuficiente (&lt; 7 dias) - risco intraoperatorio elevado"</text></outputEntry>
        <outputEntry id="OE_Rep1_3"><text>"Endocrine Society 2014 - Minimo 7-14 dias de preparo com fenoxibenzamina/doxazosina"</text></outputEntry>
      <outputEntry id="OE_Reprovado_SemAlfaBloqueio_4"><text>"PROT"</text></outputEntry>
        <outputEntry id="OE_Reprovado_SemAlfaBloqueio_5"><text>"NEGAR"</text></outputEntry>
      </rule>

      <rule id="Rule_Reprovado_BetaSemAlfa">
        <description>Reprovado: Beta-bloqueio sem alfa-bloqueio previo</description>
        <inputEntry id="IE_Rep2_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep2_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep2_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep2_4"><text>"SemAlfaBloqueio"</text></inputEntry>
        <inputEntry id="IE_Rep2_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Rep2_1"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OE_Rep2_2"><text>"Beta-bloqueio sem alfa-bloqueio e CONTRAINDICADO - risco de crise hipertensiva"</text></outputEntry>
        <outputEntry id="OE_Rep2_3"><text>"ESE 2019 - Beta-bloqueio isolado pode precipitar crise por vasoconstriccao alfa"</text></outputEntry>
      <outputEntry id="OE_Reprovado_BetaSemAlfa_4"><text>"PROT"</text></outputEntry>
        <outputEntry id="OE_Reprovado_BetaSemAlfa_5"><text>"NEGAR"</text></outputEntry>
      </rule>

      <rule id="Rule_Reprovado_HipotensaoGrave">
        <description>Reprovado: Hipotensao ortostatica grave</description>
        <inputEntry id="IE_Rep3_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep3_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep3_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep3_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep3_5"><text>"Grave"</text></inputEntry>
        <outputEntry id="OE_Rep3_1"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OE_Rep3_2"><text>"Hipotensao ortostatica grave - otimizar expansao volemica antes da cirurgia"</text></outputEntry>
        <outputEntry id="OE_Rep3_3"><text>"AAES 2013 - Expansao volemica adequada essencial"</text></outputEntry>
      <outputEntry id="OE_Reprovado_HipotensaoGrave_4"><text>"PROT"</text></outputEntry>
        <outputEntry id="OE_Reprovado_HipotensaoGrave_5"><text>"NEGAR"</text></outputEntry>
      </rule>

      <rule id="Rule_Reprovado_PANaoControlada">
        <description>Reprovado: PA nao controlada</description>
        <inputEntry id="IE_Rep4_1"><text>&gt;= 7</text></inputEntry>
        <inputEntry id="IE_Rep4_2"><text>&gt; 160</text></inputEntry>
        <inputEntry id="IE_Rep4_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep4_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep4_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Rep4_1"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OE_Rep4_2"><text>"PA nao controlada apesar de alfa-bloqueio - intensificar tratamento ou considerar metirosina"</text></outputEntry>
        <outputEntry id="OE_Rep4_3"><text>"Endocrine Society 2014 - Meta PA &lt; 130/80 mmHg sentado"</text></outputEntry>
      <outputEntry id="OE_Reprovado_PANaoControlada_4"><text>"PROT"</text></outputEntry>
        <outputEntry id="OE_Reprovado_PANaoControlada_5"><text>"NEGAR"</text></outputEntry>
      </rule>

      <!-- ========== REGRAS DE APROVACAO ========== -->

      <rule id="Rule_Aprovado_PreparoAdequado">
        <description>Aprovado: Preparo pre-operatorio adequado</description>
        <inputEntry id="IE_Apr1_1"><text>&gt;= 14</text></inputEntry>
        <inputEntry id="IE_Apr1_2"><text>&lt;= 130</text></inputEntry>
        <inputEntry id="IE_Apr1_3"><text>[60..80]</text></inputEntry>
        <inputEntry id="IE_Apr1_4"><text>"AposAlfaBloqueio","NaoIniciado"</text></inputEntry>
        <inputEntry id="IE_Apr1_5"><text>"Ausente","Leve"</text></inputEntry>
        <outputEntry id="OE_Apr1_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Apr1_2"><text>"Preparo pre-operatorio ideal - paciente apto para adrenalectomia"</text></outputEntry>
        <outputEntry id="OE_Apr1_3"><text>"Endocrine Society 2014 - Metas de preparo atingidas"</text></outputEntry>
      <outputEntry id="OE_Aprovado_PreparoAdequado_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Aprovado_PreparoAdequado_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <rule id="Rule_Aprovado_PreparoAceitavel">
        <description>Aprovado: Preparo aceitavel</description>
        <inputEntry id="IE_Apr2_1"><text>&gt;= 10</text></inputEntry>
        <inputEntry id="IE_Apr2_2"><text>&lt;= 160</text></inputEntry>
        <inputEntry id="IE_Apr2_3"><text>[55..90]</text></inputEntry>
        <inputEntry id="IE_Apr2_4"><text>"AposAlfaBloqueio","NaoIniciado"</text></inputEntry>
        <inputEntry id="IE_Apr2_5"><text>"Ausente","Leve","Moderada"</text></inputEntry>
        <outputEntry id="OE_Apr2_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Apr2_2"><text>"Preparo aceitavel - prosseguir com cirurgia com cuidados anestesicos especiais"</text></outputEntry>
        <outputEntry id="OE_Apr2_3"><text>"ESE 2019 - Monitoramento hemodinamico rigoroso intraoperatorio"</text></outputEntry>
      <outputEntry id="OE_Aprovado_PreparoAceitavel_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Aprovado_PreparoAceitavel_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <rule id="Rule_Aprovado_HipotensaoLeve">
        <description>Aprovado: Hipotensao ortostatica leve (sinal de bloqueio adequado)</description>
        <inputEntry id="IE_Apr3_1"><text>&gt;= 7</text></inputEntry>
        <inputEntry id="IE_Apr3_2"><text>&lt;= 140</text></inputEntry>
        <inputEntry id="IE_Apr3_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr3_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr3_5"><text>"Leve"</text></inputEntry>
        <outputEntry id="OE_Apr3_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Apr3_2"><text>"Hipotensao ortostatica leve indica alfa-bloqueio efetivo - apto para cirurgia"</text></outputEntry>
        <outputEntry id="OE_Apr3_3"><text>"AAES 2013 - Hipotensao ortostatica leve e desejavel"</text></outputEntry>
      <outputEntry id="OE_Aprovado_HipotensaoLeve_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Aprovado_HipotensaoLeve_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <!-- ========== REGRA FALLBACK ========== -->

      <rule id="Rule_Fallback_GEN_END_006">
        <description>Pendente: Otimizar preparo pre-operatorio</description>
        <inputEntry id="IE_FB_1"><text>-</text></inputEntry>
        <inputEntry id="IE_FB_2"><text>-</text></inputEntry>
        <inputEntry id="IE_FB_3"><text>-</text></inputEntry>
        <inputEntry id="IE_FB_4"><text>-</text></inputEntry>
        <inputEntry id="IE_FB_5"><text>-</text></inputEntry>
        <outputEntry id="OE_FB_1"><text>"Pendente"</text></outputEntry>
        <outputEntry id="OE_FB_2"><text>"Continuar preparo e reavaliar em 1 semana - metas: PA &lt; 130/80, FC 60-70"</text></outputEntry>
        <outputEntry id="OE_FB_3"><text>"Endocrine Society 2014 - Preparo adequado minimiza morbidade"</text></outputEntry>
      <outputEntry id="OE_Fallback_GEN_END_006_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Fallback_GEN_END_006_5"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>

    </decisionTable>
  </decision>
</definitions>
