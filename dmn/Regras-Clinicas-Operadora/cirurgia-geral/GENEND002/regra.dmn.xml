<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="https://www.omg.org/spec/DMN/20191111/MODEL/"
             xmlns:camunda="http://camunda.org/schema/1.0/dmn"
             id="Definitions_GEN_END_002"
             name="Tireoidectomia - Hipertireoidismo"
             namespace="http://camunda.org/schema/1.0/dmn">

  <!--
    ===============================================================================
    CODIGO: GEN-END-002
    Procedimento: Tireoidectomia por Hipertireoidismo
    Especialidade: Cirurgia Geral - Cirurgia Endocrina
    Versao: 3.0.0-TIER1
    Data: 2026-02-07
    ===============================================================================

    INDICACOES CIRURGICAS:
    - Doenca de Graves refrataria a drogas antitireoidianas
    - Doenca de Graves com oftalmopatia grave
    - Bocio multinodular toxico
    - Adenoma toxico (nodulo autonomo)
    - Contraindicacao ou recusa de iodo radioativo
    - Gestacao (segundo trimestre)

    CONTRAINDICACOES RELATIVAS:
    - Hipertireoidismo controlado com DAT
    - Alto risco cirurgico sem indicacao absoluta

    REFERENCIAS TECNICAS:
    - ATA Hyperthyroidism Guidelines 2016
    - SBEM Guidelines 2023
    - Endocrine Society Guidelines 2017

    ===============================================================================
  -->

  <decision id="Decision_GEN_END_002" name="Regra Clinica - Tireoidectomia Hipertireoidismo">
    <decisionTable id="DecisionTable_GEN_END_002" hitPolicy="FIRST">

      <!-- ========== INPUTS (5) ========== -->

      <input id="Input_etiologia" label="Etiologia do Hipertireoidismo" camunda:inputVariable="etiologia">
        <inputExpression id="InputExpression_etiologia" typeRef="string">
          <text>etiologia</text>
        </inputExpression>
        <inputValues id="InputValues_etiologia">
          <text>"Graves","BMNToxico","AdenomaToxico","TireoiditeSubaguda","Outra"</text>
        </inputValues>
      </input>

      <input id="Input_respostaDAT" label="Resposta a Drogas Antitireoidianas" camunda:inputVariable="respostaDAT">
        <inputExpression id="InputExpression_respostaDAT" typeRef="string">
          <text>respostaDAT</text>
        </inputExpression>
        <inputValues id="InputValues_respostaDAT">
          <text>"Controlado","Refratario","EfeitosAdversos","Recidiva","NaoUsou"</text>
        </inputValues>
      </input>

      <input id="Input_oftalmopatia" label="Oftalmopatia de Graves" camunda:inputVariable="oftalmopatia">
        <inputExpression id="InputExpression_oftalmopatia" typeRef="string">
          <text>oftalmopatia</text>
        </inputExpression>
        <inputValues id="InputValues_oftalmopatia">
          <text>"Grave","Moderada","Leve","Ausente"</text>
        </inputValues>
      </input>

      <input id="Input_volumeTireoide" label="Volume da Tireoide (mL)" camunda:inputVariable="volumeTireoide">
        <inputExpression id="InputExpression_volumeTireoide" typeRef="number">
          <text>volumeTireoide</text>
        </inputExpression>
      </input>

      <input id="Input_contraindicacaoI131" label="Contraindicacao ao Iodo-131" camunda:inputVariable="contraindicacaoI131">
        <inputExpression id="InputExpression_contraindicacaoI131" typeRef="boolean">
          <text>contraindicacaoI131</text>
        </inputExpression>
      </input>

      <!-- ========== OUTPUTS (3) ========== -->

      <output id="Output_resultado" label="Resultado" name="resultado" typeRef="string">
        <outputValues id="OutputValues_resultado">
          <text>"Aprovado","Reprovado","Pendente"</text>
        </outputValues>
      </output>

      <output id="Output_observacao" label="Observacao Clinica" name="observacao" typeRef="string" />

      <output id="Output_fundamentacao" label="Fundamentacao Tecnica" name="fundamentacao" typeRef="string" />

      <!-- Output 4: Alertas Desperdicio -->
      <output id="Output_alertasDesperdicio" label="Alertas de Desperdicio" name="alertasDesperdicio" typeRef="string">
        <outputValues id="OutputValues_alertasDesperdicio">
          <text>"NENHUM","DUP","FREQ","ESC","DOC","PROT","MULTI"</text>
        </outputValues>
      </output>

      <!-- Output 5: Acao Recomendada -->
      <output id="Output_acaoRecomendada" label="Acao Recomendada" name="acaoRecomendada" typeRef="string">
        <outputValues id="OutputValues_acaoRecomendada">
          <text>"APROVAR","NEGAR","SOLICITAR_INFO","AGUARDAR_PRAZO","SUGERIR_ALTERNATIVA"</text>
        </outputValues>
      </output>

      <!-- ========== REGRAS DE REPROVACAO ========== -->

      <rule id="Rule_Reprovado_Controlado">
        <description>Reprovado: Hipertireoidismo controlado com medicacao</description>
        <inputEntry id="IE_Rep1_1"><text>"Graves"</text></inputEntry>
        <inputEntry id="IE_Rep1_2"><text>"Controlado"</text></inputEntry>
        <inputEntry id="IE_Rep1_3"><text>"Ausente","Leve"</text></inputEntry>
        <inputEntry id="IE_Rep1_4"><text>&lt; 60</text></inputEntry>
        <inputEntry id="IE_Rep1_5"><text>false</text></inputEntry>
        <outputEntry id="OE_Rep1_1"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OE_Rep1_2"><text>"Graves controlado com DAT - considerar tratamento definitivo eletivo (I-131 ou cirurgia)"</text></outputEntry>
        <outputEntry id="OE_Rep1_3"><text>"ATA 2016 - Opcoes terapeuticas devem ser discutidas com paciente"</text></outputEntry>
      <outputEntry id="OE_Reprovado_Controlado_4"><text>"PROT"</text></outputEntry>
        <outputEntry id="OE_Reprovado_Controlado_5"><text>"NEGAR"</text></outputEntry>
      </rule>

      <rule id="Rule_Reprovado_Tireoidite">
        <description>Reprovado: Tireoidite subaguda - autolimitada</description>
        <inputEntry id="IE_Rep2_1"><text>"TireoiditeSubaguda"</text></inputEntry>
        <inputEntry id="IE_Rep2_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep2_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep2_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep2_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Rep2_1"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OE_Rep2_2"><text>"Tireoidite subaguda e autolimitada - tratamento conservador, cirurgia nao indicada"</text></outputEntry>
        <outputEntry id="OE_Rep2_3"><text>"Endocrine Society 2017 - Tireoidite resolve espontaneamente"</text></outputEntry>
      <outputEntry id="OE_Reprovado_Tireoidite_4"><text>"PROT"</text></outputEntry>
        <outputEntry id="OE_Reprovado_Tireoidite_5"><text>"NEGAR"</text></outputEntry>
      </rule>

      <!-- ========== REGRAS DE APROVACAO ========== -->

      <rule id="Rule_Aprovado_OftalmopatiaGrave">
        <description>Aprovado: Oftalmopatia grave</description>
        <inputEntry id="IE_Apr1_1"><text>"Graves"</text></inputEntry>
        <inputEntry id="IE_Apr1_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr1_3"><text>"Grave"</text></inputEntry>
        <inputEntry id="IE_Apr1_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr1_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Apr1_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Apr1_2"><text>"Oftalmopatia grave de Graves - tireoidectomia total preferida sobre I-131"</text></outputEntry>
        <outputEntry id="OE_Apr1_3"><text>"ATA 2016 - I-131 pode piorar oftalmopatia, cirurgia e preferivel"</text></outputEntry>
      <outputEntry id="OE_Aprovado_OftalmopatiaGrave_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Aprovado_OftalmopatiaGrave_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <rule id="Rule_Aprovado_Refratario">
        <description>Aprovado: Refratario a drogas antitireoidianas</description>
        <inputEntry id="IE_Apr2_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr2_2"><text>"Refratario","EfeitosAdversos"</text></inputEntry>
        <inputEntry id="IE_Apr2_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr2_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr2_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Apr2_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Apr2_2"><text>"Falha ou intolerancia a drogas antitireoidianas - tratamento definitivo indicado"</text></outputEntry>
        <outputEntry id="OE_Apr2_3"><text>"SBEM 2023 - Tireoidectomia e opcao em falha de DAT"</text></outputEntry>
      <outputEntry id="OE_Aprovado_Refratario_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Aprovado_Refratario_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <rule id="Rule_Aprovado_BMNToxico">
        <description>Aprovado: Bocio multinodular toxico</description>
        <inputEntry id="IE_Apr3_1"><text>"BMNToxico"</text></inputEntry>
        <inputEntry id="IE_Apr3_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr3_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr3_4"><text>&gt;= 60</text></inputEntry>
        <inputEntry id="IE_Apr3_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Apr3_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Apr3_2"><text>"Bocio multinodular toxico volumoso - tireoidectomia preferida sobre I-131"</text></outputEntry>
        <outputEntry id="OE_Apr3_3"><text>"ATA 2016 - Bocios grandes respondem menos bem ao I-131"</text></outputEntry>
      <outputEntry id="OE_Aprovado_BMNToxico_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Aprovado_BMNToxico_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <rule id="Rule_Aprovado_AdenomaToxico">
        <description>Aprovado: Adenoma toxico</description>
        <inputEntry id="IE_Apr4_1"><text>"AdenomaToxico"</text></inputEntry>
        <inputEntry id="IE_Apr4_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr4_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr4_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr4_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Apr4_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Apr4_2"><text>"Adenoma toxico - lobectomia indicada como tratamento definitivo"</text></outputEntry>
        <outputEntry id="OE_Apr4_3"><text>"ATA 2016 - Lobectomia para nodulo autonomo solitario"</text></outputEntry>
      <outputEntry id="OE_Aprovado_AdenomaToxico_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Aprovado_AdenomaToxico_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <rule id="Rule_Aprovado_ContraindicacaoI131">
        <description>Aprovado: Contraindicacao ao I-131</description>
        <inputEntry id="IE_Apr5_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr5_2"><text>not("Controlado")</text></inputEntry>
        <inputEntry id="IE_Apr5_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr5_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr5_5"><text>true</text></inputEntry>
        <outputEntry id="OE_Apr5_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Apr5_2"><text>"Contraindicacao ao I-131 - tireoidectomia e unica opcao de tratamento definitivo"</text></outputEntry>
        <outputEntry id="OE_Apr5_3"><text>"SBEM 2023 - Cirurgia quando I-131 contraindicado ou recusado"</text></outputEntry>
      <outputEntry id="OE_Aprovado_ContraindicacaoI131_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Aprovado_ContraindicacaoI131_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <!-- ========== REGRA FALLBACK ========== -->

      <rule id="Rule_Fallback_GEN_END_002">
        <description>Pendente: Discussao de opcoes terapeuticas</description>
        <inputEntry id="IE_FB_1"><text>-</text></inputEntry>
        <inputEntry id="IE_FB_2"><text>-</text></inputEntry>
        <inputEntry id="IE_FB_3"><text>-</text></inputEntry>
        <inputEntry id="IE_FB_4"><text>-</text></inputEntry>
        <inputEntry id="IE_FB_5"><text>-</text></inputEntry>
        <outputEntry id="OE_FB_1"><text>"Pendente"</text></outputEntry>
        <outputEntry id="OE_FB_2"><text>"Discutir opcoes terapeuticas com paciente (DAT, I-131, cirurgia)"</text></outputEntry>
        <outputEntry id="OE_FB_3"><text>"ATA 2016 - Decisao compartilhada considerando preferencia do paciente"</text></outputEntry>
      <outputEntry id="OE_Fallback_GEN_END_002_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Fallback_GEN_END_002_5"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>

    </decisionTable>
  </decision>
</definitions>
