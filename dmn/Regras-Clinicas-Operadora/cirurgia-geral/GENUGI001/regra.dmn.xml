<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="https://www.omg.org/spec/DMN/20191111/MODEL/"
             xmlns:dmndi="https://www.omg.org/spec/DMN/20191111/DMNDI/"
             xmlns:dc="http://www.omg.org/spec/DD/20100524/DC/"
             xmlns:di="http://www.omg.org/spec/DD/20100524/DI/"
             id="Definitions_GEN_UGI_001"
             name="Fundoplicatura - Indicacoes para DRGE"
             namespace="http://camunda.org/schema/1.0/dmn"
             exporter="Camunda Modeler"
             exporterVersion="5.0.0">
  <!--
    GEN-UGI-001 - Fundoplicatura - Indicacoes para DRGE
    Versao: 1.0.0 (2026-02-07)
    Especialidade: Cirurgia Geral - Esofago Gastrico
    Categoria: Procedimentos Cirurgicos

    Indicacoes Cirurgicas (SAGES 2021 / ACG 2022):
    - DRGE refrataria a IBP (dose dobrada por 8-12 semanas)
    - Intolerancia ou efeitos colaterais de IBP
    - Preferencia do paciente (evitar uso cronico)
    - Complicacoes: esofagite erosiva, estenose peptica
    - Manifestacoes extraesofagicas comprovadas

    Avaliacao Pre-operatoria Obrigatoria:
    - EDA com biopsias
    - Manometria esofagica de alta resolucao
    - pHmetria 24h ou impedanciometria

    Tecnicas:
    - Nissen (360 graus): Padrao, motilidade normal
    - Toupet (270 graus posterior): Dismotilidade
    - Dor (180 graus anterior): Menos comum

    Contraindicacoes Relativas:
    - Aperistalse esofagica
    - Esofago curto (requer Collis)
    - Obesidade morbida (preferir bypass)

    Referencias Normativas:
    - SAGES Guidelines 2021 - Anti-reflux Surgery
    - ACG Clinical Guidelines GERD 2022
    - ISDE Consensus 2019
  -->

  <decision id="Decision_GEN_UGI_001" name="Criterios de Autorizacao - Fundoplicatura DRGE">
    <decisionTable id="DecisionTable_GEN_UGI_001" hitPolicy="FIRST">

      <!-- Input 1: Indicacao -->
      <input id="Input_indicacao" label="Indicacao Principal">
        <inputExpression id="InputExpr_indicacao" typeRef="string">
          <text>indicacaoPrincipal</text>
        </inputExpression>
        <inputValues id="InputValues_indicacao">
          <text>"Refratariedade_IBP","Intolerancia_IBP","Preferencia_Paciente","Complicacoes_DRGE","Sintomas_Extraesofagicos"</text>
        </inputValues>
      </input>

      <!-- Input 2: pHmetria/Impedanciometria -->
      <input id="Input_phmetria" label="pHmetria ou Impedanciometria">
        <inputExpression id="InputExpr_phmetria" typeRef="string">
          <text>phmetriaResultado</text>
        </inputExpression>
        <inputValues id="InputValues_phmetria">
          <text>"Positiva_Refluxo","Negativa","Nao_Realizada"</text>
        </inputValues>
      </input>

      <!-- Input 3: Manometria Esofagica -->
      <input id="Input_manometria" label="Manometria Esofagica">
        <inputExpression id="InputExpr_manometria" typeRef="string">
          <text>manometriaResultado</text>
        </inputExpression>
        <inputValues id="InputValues_manometria">
          <text>"Motilidade_Normal","Dismotilidade_Leve","Dismotilidade_Grave","Aperistalse","Nao_Realizada"</text>
        </inputValues>
      </input>

      <!-- Input 4: EDA -->
      <input id="Input_eda" label="EDA Realizada">
        <inputExpression id="InputExpr_eda" typeRef="boolean">
          <text>edaRealizada</text>
        </inputExpression>
      </input>

      <!-- Input 5: Laudo de Indicacao -->
      <input id="Input_laudoIndicacao" label="Laudo de Indicacao">
        <inputExpression id="InputExpr_laudoIndicacao" typeRef="boolean">
          <text>laudoIndicacao</text>
        </inputExpression>
      </input>

      <!-- Output 1: Resultado -->
      <output id="Output_resultado" label="Resultado" name="resultado" typeRef="string">
        <outputValues id="OutputValues_resultado">
          <text>"Aprovado","Reprovado","Pendente"</text>
        </outputValues>
      </output>

      <!-- Output 2: Observacao -->
      <output id="Output_observacao" label="Observacao Clinica" name="observacao" typeRef="string" />

      <!-- Output 3: Fundamentacao -->
      <output id="Output_fundamentacao" label="Fundamentacao" name="fundamentacao" typeRef="string" />

      <!-- Output 4: Alertas Desperdicio -->
      <output id="Output_alertasDesperdicio" label="Alertas de Desperdicio" name="alertasDesperdicio" typeRef="string">
        <outputValues id="OutputValues_alertasDesperdicio">
          <text>"NENHUM","DUP","FREQ","ESC","DOC","PROT","MULTI"</text>
        </outputValues>
      </output>

      <!-- Output 5: Acao Recomendada -->
      <output id="Output_acaoRecomendada" label="Acao Recomendada" name="acaoRecomendada" typeRef="string">
        <outputValues id="OutputValues_acaoRecomendada">
          <text>"APROVAR","NEGAR","SOLICITAR_INFO","AGUARDAR_PRAZO","SUGERIR_ALTERNATIVA"</text>
        </outputValues>
      </output>

      <!-- REGRAS DE REPROVACAO -->

      <rule id="Rule_GEN_UGI_001_Reprovado_SemPhmetria">
        <description>Reprovado - Sem pHmetria/impedanciometria</description>
        <inputEntry id="IE_Rep1_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep1_2"><text>"Nao_Realizada"</text></inputEntry>
        <inputEntry id="IE_Rep1_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep1_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep1_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Rep1_1"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OE_Rep1_2"><text>"pHmetria de 24 horas ou impedanciometria obrigatoria para confirmacao objetiva de refluxo antes de cirurgia antirrefluxo."</text></outputEntry>
        <outputEntry id="OE_Rep1_3"><text>"SAGES 2021 / ACG 2022 - pH Testing Required"</text></outputEntry>
      <outputEntry id="OE_GEN_UGI_001_Reprovado_SemPhmetria_4"><text>"PROT"</text></outputEntry>
        <outputEntry id="OE_GEN_UGI_001_Reprovado_SemPhmetria_5"><text>"NEGAR"</text></outputEntry>
      </rule>

      <rule id="Rule_GEN_UGI_001_Reprovado_SemManometria">
        <description>Reprovado - Sem manometria esofagica</description>
        <inputEntry id="IE_Rep2_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep2_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep2_3"><text>"Nao_Realizada"</text></inputEntry>
        <inputEntry id="IE_Rep2_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep2_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Rep2_1"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OE_Rep2_2"><text>"Manometria esofagica obrigatoria para avaliar motilidade e selecionar tecnica adequada. Aperistalse contraindica Nissen."</text></outputEntry>
        <outputEntry id="OE_Rep2_3"><text>"SAGES 2021 - Manometry Required"</text></outputEntry>
      <outputEntry id="OE_GEN_UGI_001_Reprovado_SemManometria_4"><text>"PROT"</text></outputEntry>
        <outputEntry id="OE_GEN_UGI_001_Reprovado_SemManometria_5"><text>"NEGAR"</text></outputEntry>
      </rule>

      <rule id="Rule_GEN_UGI_001_Reprovado_phNegativa">
        <description>Reprovado - pHmetria negativa sem justificativa</description>
        <inputEntry id="IE_Rep3_1"><text>"Refratariedade_IBP"</text></inputEntry>
        <inputEntry id="IE_Rep3_2"><text>"Negativa"</text></inputEntry>
        <inputEntry id="IE_Rep3_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep3_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep3_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Rep3_1"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OE_Rep3_2"><text>"pHmetria negativa - sintomas provavelmente nao relacionados a refluxo acido. Cirurgia antirrefluxo nao indicada. Investigar pirose funcional."</text></outputEntry>
        <outputEntry id="OE_Rep3_3"><text>"ACG 2022 - Negative pH Study"</text></outputEntry>
      <outputEntry id="OE_GEN_UGI_001_Reprovado_phNegativa_4"><text>"PROT"</text></outputEntry>
        <outputEntry id="OE_GEN_UGI_001_Reprovado_phNegativa_5"><text>"NEGAR"</text></outputEntry>
      </rule>

      <rule id="Rule_GEN_UGI_001_Reprovado_SemLaudo">
        <description>Reprovado - Sem laudo de indicacao</description>
        <inputEntry id="IE_Rep4_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep4_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep4_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep4_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep4_5"><text>false</text></inputEntry>
        <outputEntry id="OE_Rep4_1"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OE_Rep4_2"><text>"Laudo de indicacao obrigatorio com resultados de pHmetria, manometria e justificativa cirurgica."</text></outputEntry>
        <outputEntry id="OE_Rep4_3"><text>"RN 465/2021 - Documentacao Obrigatoria"</text></outputEntry>
      <outputEntry id="OE_GEN_UGI_001_Reprovado_SemLaudo_4"><text>"PROT"</text></outputEntry>
        <outputEntry id="OE_GEN_UGI_001_Reprovado_SemLaudo_5"><text>"NEGAR"</text></outputEntry>
      </rule>

      <!-- REGRAS DE APROVACAO -->

      <rule id="Rule_GEN_UGI_001_Aprovado_Refratario">
        <description>Aprovado - DRGE refrataria comprovada</description>
        <inputEntry id="IE_Apr1_1"><text>"Refratariedade_IBP"</text></inputEntry>
        <inputEntry id="IE_Apr1_2"><text>"Positiva_Refluxo"</text></inputEntry>
        <inputEntry id="IE_Apr1_3"><text>"Motilidade_Normal","Dismotilidade_Leve"</text></inputEntry>
        <inputEntry id="IE_Apr1_4"><text>true</text></inputEntry>
        <inputEntry id="IE_Apr1_5"><text>true</text></inputEntry>
        <outputEntry id="OE_Apr1_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Apr1_2"><text>"DRGE refrataria com refluxo comprovado e motilidade adequada - fundoplicatura laparoscopica aprovada. Nissen para motilidade normal, Toupet se dismotilidade."</text></outputEntry>
        <outputEntry id="OE_Apr1_3"><text>"SAGES 2021 - Laparoscopic Fundoplication"</text></outputEntry>
      <outputEntry id="OE_GEN_UGI_001_Aprovado_Refratario_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_GEN_UGI_001_Aprovado_Refratario_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <rule id="Rule_GEN_UGI_001_Aprovado_Intolerancia">
        <description>Aprovado - Intolerancia a IBP</description>
        <inputEntry id="IE_Apr2_1"><text>"Intolerancia_IBP"</text></inputEntry>
        <inputEntry id="IE_Apr2_2"><text>"Positiva_Refluxo"</text></inputEntry>
        <inputEntry id="IE_Apr2_3"><text>"Motilidade_Normal","Dismotilidade_Leve"</text></inputEntry>
        <inputEntry id="IE_Apr2_4"><text>true</text></inputEntry>
        <inputEntry id="IE_Apr2_5"><text>true</text></inputEntry>
        <outputEntry id="OE_Apr2_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Apr2_2"><text>"Intolerancia documentada a IBP com refluxo comprovado - fundoplicatura aprovada como alternativa ao tratamento medicamentoso cronico."</text></outputEntry>
        <outputEntry id="OE_Apr2_3"><text>"SAGES 2021 - PPI Intolerance Indication"</text></outputEntry>
      <outputEntry id="OE_GEN_UGI_001_Aprovado_Intolerancia_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_GEN_UGI_001_Aprovado_Intolerancia_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <rule id="Rule_GEN_UGI_001_Aprovado_Complicacoes">
        <description>Aprovado - DRGE com complicacoes</description>
        <inputEntry id="IE_Apr3_1"><text>"Complicacoes_DRGE"</text></inputEntry>
        <inputEntry id="IE_Apr3_2"><text>"Positiva_Refluxo"</text></inputEntry>
        <inputEntry id="IE_Apr3_3"><text>"Motilidade_Normal","Dismotilidade_Leve"</text></inputEntry>
        <inputEntry id="IE_Apr3_4"><text>true</text></inputEntry>
        <inputEntry id="IE_Apr3_5"><text>true</text></inputEntry>
        <outputEntry id="OE_Apr3_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Apr3_2"><text>"DRGE com complicacoes (esofagite erosiva grave, estenose peptica) - fundoplicatura aprovada para prevenir progressao. Dilatar estenose antes se presente."</text></outputEntry>
        <outputEntry id="OE_Apr3_3"><text>"SAGES 2021 - Complicated GERD"</text></outputEntry>
      <outputEntry id="OE_GEN_UGI_001_Aprovado_Complicacoes_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_GEN_UGI_001_Aprovado_Complicacoes_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <!-- REGRAS DE PENDENCIA -->

      <rule id="Rule_GEN_UGI_001_Pendente_Aperistalse">
        <description>Pendente - Aperistalse requer avaliacao</description>
        <inputEntry id="IE_Pend1_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Pend1_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Pend1_3"><text>"Aperistalse"</text></inputEntry>
        <inputEntry id="IE_Pend1_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Pend1_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Pend1_1"><text>"Pendente"</text></outputEntry>
        <outputEntry id="OE_Pend1_2"><text>"Aperistalse esofagica - fundoplicatura classica contraindicada. Avaliar fundoplicatura parcial (Toupet) ou alternativas (LINX, bypass se obeso)."</text></outputEntry>
        <outputEntry id="OE_Pend1_3"><text>"SAGES 2021 - Aperistalsis Contraindication"</text></outputEntry>
      <outputEntry id="OE_GEN_UGI_001_Pendente_Aperistalse_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_GEN_UGI_001_Pendente_Aperistalse_5"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>

      <rule id="Rule_GEN_UGI_001_Pendente_DismotilidadeGrave">
        <description>Pendente - Dismotilidade grave</description>
        <inputEntry id="IE_Pend2_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Pend2_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Pend2_3"><text>"Dismotilidade_Grave"</text></inputEntry>
        <inputEntry id="IE_Pend2_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Pend2_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Pend2_1"><text>"Pendente"</text></outputEntry>
        <outputEntry id="OE_Pend2_2"><text>"Dismotilidade esofagica grave - risco aumentado de disfagia pos-operatoria. Considerar fundoplicatura parcial (Toupet 270 graus)."</text></outputEntry>
        <outputEntry id="OE_Pend2_3"><text>"SAGES 2021 - Partial Fundoplication for Dysmotility"</text></outputEntry>
      <outputEntry id="OE_GEN_UGI_001_Pendente_DismotilidadeGrave_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_GEN_UGI_001_Pendente_DismotilidadeGrave_5"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>

      <rule id="Rule_GEN_UGI_001_Pendente_SemEDA">
        <description>Pendente - Sem EDA</description>
        <inputEntry id="IE_Pend3_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Pend3_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Pend3_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Pend3_4"><text>false</text></inputEntry>
        <inputEntry id="IE_Pend3_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Pend3_1"><text>"Pendente"</text></outputEntry>
        <outputEntry id="OE_Pend3_2"><text>"EDA obrigatoria para avaliacao de esofagite, Barrett e exclusao de outras patologias antes de cirurgia antirrefluxo."</text></outputEntry>
        <outputEntry id="OE_Pend3_3"><text>"SAGES 2021 - Endoscopy Required"</text></outputEntry>
      <outputEntry id="OE_GEN_UGI_001_Pendente_SemEDA_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_GEN_UGI_001_Pendente_SemEDA_5"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>

      <!-- REGRA FALLBACK -->

      <rule id="Rule_GEN_UGI_001_Fallback">
        <description>Fallback - Analise especializada</description>
        <inputEntry id="IE_Fallback_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Fallback_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Fallback_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Fallback_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Fallback_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Fallback_1"><text>"Pendente"</text></outputEntry>
        <outputEntry id="OE_Fallback_2"><text>"Caso de DRGE para cirurgia requer analise por auditor medico especializado."</text></outputEntry>
        <outputEntry id="OE_Fallback_3"><text>"Auditoria cirurgica - RN 428/2017"</text></outputEntry>
      <outputEntry id="OE_GEN_UGI_001_Fallback_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_GEN_UGI_001_Fallback_5"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>

    </decisionTable>
  </decision>
</definitions>
