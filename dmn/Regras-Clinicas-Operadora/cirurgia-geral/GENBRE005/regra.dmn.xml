<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="https://www.omg.org/spec/DMN/20191111/MODEL/"
             xmlns:camunda="http://camunda.org/schema/1.0/dmn"
             id="Definitions_GEN_BRE_005"
             name="Mastectomia Profilatica - Criterios BRCA"
             namespace="http://camunda.org/schema/1.0/dmn">

  <!--
    ===============================================================================
    CODIGO: GEN-BRE-005
    Procedimento: Mastectomia Profilatica Contralateral/Bilateral - Criterios BRCA
    Especialidade: Cirurgia Geral - Mastologia Oncogenetica
    Versao: 3.0.0-TIER1
    Data: 2026-02-07
    ===============================================================================

    INDICACOES:
    - Mutacao BRCA1/BRCA2 confirmada
    - Historia familiar forte sem teste disponivel
    - Mutacao TP53 (Li-Fraumeni)
    - Outras mutacoes de alto risco (PALB2, CDH1)
    - Historia de radioterapia toracica na juventude

    CONTRAINDICACOES:
    - Ausencia de mutacao em paciente testada
    - Comorbidades que contraindicam cirurgia maior
    - Expectativa de vida limitada
    - Paciente nao deseja cirurgia preventiva

    REFERENCIAS TECNICAS:
    - NCCN Genetic/Familial High-Risk 2024
    - ASCO/SSO Guidelines 2019
    - SBM/SBGM Guidelines 2023

    ===============================================================================
  -->

  <decision id="Decision_GEN_BRE_005" name="Regra Clinica - Mastectomia Profilatica BRCA">
    <decisionTable id="DecisionTable_GEN_BRE_005" hitPolicy="FIRST">

      <!-- ========== INPUTS (5) ========== -->

      <input id="Input_statusMutacao" label="Status de Mutacao Genetica" camunda:inputVariable="statusMutacao">
        <inputExpression id="InputExpression_statusMutacao" typeRef="string">
          <text>statusMutacao</text>
        </inputExpression>
        <inputValues id="InputValues_statusMutacao">
          <text>"BRCA1","BRCA2","TP53","PALB2","CDH1","Negativo","NaoTestada","VUS"</text>
        </inputValues>
      </input>

      <input id="Input_historiaFamiliar" label="Historia Familiar de Risco" camunda:inputVariable="historiaFamiliar">
        <inputExpression id="InputExpression_historiaFamiliar" typeRef="string">
          <text>historiaFamiliar</text>
        </inputExpression>
        <inputValues id="InputValues_historiaFamiliar">
          <text>"AltoRisco","ModeradorRisco","BaixoRisco","Desconhecida"</text>
        </inputValues>
      </input>

      <input id="Input_cancerPrevio" label="Cancer de Mama Previo" camunda:inputVariable="cancerPrevio">
        <inputExpression id="InputExpression_cancerPrevio" typeRef="boolean">
          <text>cancerPrevio</text>
        </inputExpression>
      </input>

      <input id="Input_aconselhamentoGenetico" label="Aconselhamento Genetico Realizado" camunda:inputVariable="aconselhamentoGenetico">
        <inputExpression id="InputExpression_aconselhamentoGenetico" typeRef="boolean">
          <text>aconselhamentoGenetico</text>
        </inputExpression>
      </input>

      <input id="Input_decisaoPaciente" label="Decisao Informada da Paciente" camunda:inputVariable="decisaoPaciente">
        <inputExpression id="InputExpression_decisaoPaciente" typeRef="string">
          <text>decisaoPaciente</text>
        </inputExpression>
        <inputValues id="InputValues_decisaoPaciente">
          <text>"DesejaCirurgia","PrefereVigilancia","Indecisa"</text>
        </inputValues>
      </input>

      <!-- ========== OUTPUTS (3) ========== -->

      <output id="Output_resultado" label="Resultado" name="resultado" typeRef="string">
        <outputValues id="OutputValues_resultado">
          <text>"Aprovado","Reprovado","Pendente"</text>
        </outputValues>
      </output>

      <output id="Output_observacao" label="Observacao Clinica" name="observacao" typeRef="string" />

      <output id="Output_fundamentacao" label="Fundamentacao Tecnica" name="fundamentacao" typeRef="string" />

      <!-- Output 4: Alertas Desperdicio -->
      <output id="Output_alertasDesperdicio" label="Alertas de Desperdicio" name="alertasDesperdicio" typeRef="string">
        <outputValues id="OutputValues_alertasDesperdicio">
          <text>"NENHUM","DUP","FREQ","ESC","DOC","PROT","MULTI"</text>
        </outputValues>
      </output>

      <!-- Output 5: Acao Recomendada -->
      <output id="Output_acaoRecomendada" label="Acao Recomendada" name="acaoRecomendada" typeRef="string">
        <outputValues id="OutputValues_acaoRecomendada">
          <text>"APROVAR","NEGAR","SOLICITAR_INFO","AGUARDAR_PRAZO","SUGERIR_ALTERNATIVA"</text>
        </outputValues>
      </output>

      <!-- ========== REGRAS DE REPROVACAO ========== -->

      <rule id="Rule_Reprovado_TesteNegativo">
        <description>Reprovado: Teste genetico negativo</description>
        <inputEntry id="IE_Rep1_1"><text>"Negativo"</text></inputEntry>
        <inputEntry id="IE_Rep1_2"><text>"BaixoRisco"</text></inputEntry>
        <inputEntry id="IE_Rep1_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep1_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep1_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Rep1_1"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OE_Rep1_2"><text>"Teste genetico negativo com historia de baixo risco - mastectomia profilatica nao indicada"</text></outputEntry>
        <outputEntry id="OE_Rep1_3"><text>"NCCN 2024 - Cirurgia redutora de risco baseada em mutacao confirmada"</text></outputEntry>
      <outputEntry id="OE_Reprovado_TesteNegativo_4"><text>"PROT"</text></outputEntry>
        <outputEntry id="OE_Reprovado_TesteNegativo_5"><text>"NEGAR"</text></outputEntry>
      </rule>

      <rule id="Rule_Reprovado_SemAconselhamento">
        <description>Reprovado: Sem aconselhamento genetico previo</description>
        <inputEntry id="IE_Rep2_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep2_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep2_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep2_4"><text>false</text></inputEntry>
        <inputEntry id="IE_Rep2_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Rep2_1"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OE_Rep2_2"><text>"Aconselhamento genetico obrigatorio antes de cirurgia redutora de risco"</text></outputEntry>
        <outputEntry id="OE_Rep2_3"><text>"ASCO/SSO Guidelines 2019 - Aconselhamento genetico pre-operatorio mandatorio"</text></outputEntry>
      <outputEntry id="OE_Reprovado_SemAconselhamento_4"><text>"PROT"</text></outputEntry>
        <outputEntry id="OE_Reprovado_SemAconselhamento_5"><text>"NEGAR"</text></outputEntry>
      </rule>

      <rule id="Rule_Reprovado_PrefereVigilancia">
        <description>Reprovado: Paciente prefere vigilancia</description>
        <inputEntry id="IE_Rep3_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep3_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep3_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep3_4"><text>true</text></inputEntry>
        <inputEntry id="IE_Rep3_5"><text>"PrefereVigilancia"</text></inputEntry>
        <outputEntry id="OE_Rep3_1"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OE_Rep3_2"><text>"Paciente optou por vigilancia intensificada - respeitar decisao informada"</text></outputEntry>
        <outputEntry id="OE_Rep3_3"><text>"NCCN 2024 - Vigilancia com RM anual e alternativa a cirurgia preventiva"</text></outputEntry>
      <outputEntry id="OE_Reprovado_PrefereVigilancia_4"><text>"PROT"</text></outputEntry>
        <outputEntry id="OE_Reprovado_PrefereVigilancia_5"><text>"NEGAR"</text></outputEntry>
      </rule>

      <!-- ========== REGRAS DE APROVACAO ========== -->

      <rule id="Rule_Aprovado_BRCA1">
        <description>Aprovado: Mutacao BRCA1 confirmada</description>
        <inputEntry id="IE_Apr1_1"><text>"BRCA1"</text></inputEntry>
        <inputEntry id="IE_Apr1_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr1_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr1_4"><text>true</text></inputEntry>
        <inputEntry id="IE_Apr1_5"><text>"DesejaCirurgia"</text></inputEntry>
        <outputEntry id="OE_Apr1_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Apr1_2"><text>"Mutacao BRCA1 - mastectomia redutora de risco indicada, reducao de 90% no risco"</text></outputEntry>
        <outputEntry id="OE_Apr1_3"><text>"NCCN 2024 - BRCA1 confere risco de 55-72% de cancer de mama"</text></outputEntry>
      <outputEntry id="OE_Aprovado_BRCA1_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Aprovado_BRCA1_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <rule id="Rule_Aprovado_BRCA2">
        <description>Aprovado: Mutacao BRCA2 confirmada</description>
        <inputEntry id="IE_Apr2_1"><text>"BRCA2"</text></inputEntry>
        <inputEntry id="IE_Apr2_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr2_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr2_4"><text>true</text></inputEntry>
        <inputEntry id="IE_Apr2_5"><text>"DesejaCirurgia"</text></inputEntry>
        <outputEntry id="OE_Apr2_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Apr2_2"><text>"Mutacao BRCA2 - mastectomia redutora de risco indicada"</text></outputEntry>
        <outputEntry id="OE_Apr2_3"><text>"NCCN 2024 - BRCA2 confere risco de 45-69% de cancer de mama"</text></outputEntry>
      <outputEntry id="OE_Aprovado_BRCA2_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Aprovado_BRCA2_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <rule id="Rule_Aprovado_TP53">
        <description>Aprovado: Mutacao TP53 (Li-Fraumeni)</description>
        <inputEntry id="IE_Apr3_1"><text>"TP53"</text></inputEntry>
        <inputEntry id="IE_Apr3_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr3_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr3_4"><text>true</text></inputEntry>
        <inputEntry id="IE_Apr3_5"><text>"DesejaCirurgia"</text></inputEntry>
        <outputEntry id="OE_Apr3_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Apr3_2"><text>"Sindrome Li-Fraumeni - mastectomia profilatica fortemente recomendada"</text></outputEntry>
        <outputEntry id="OE_Apr3_3"><text>"NCCN 2024 - TP53 confere altissimo risco, RT contraindicada"</text></outputEntry>
      <outputEntry id="OE_Aprovado_TP53_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Aprovado_TP53_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <rule id="Rule_Aprovado_PALB2">
        <description>Aprovado: Mutacao PALB2 confirmada</description>
        <inputEntry id="IE_Apr4_1"><text>"PALB2"</text></inputEntry>
        <inputEntry id="IE_Apr4_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr4_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr4_4"><text>true</text></inputEntry>
        <inputEntry id="IE_Apr4_5"><text>"DesejaCirurgia"</text></inputEntry>
        <outputEntry id="OE_Apr4_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Apr4_2"><text>"Mutacao PALB2 - mastectomia redutora de risco pode ser considerada"</text></outputEntry>
        <outputEntry id="OE_Apr4_3"><text>"NCCN 2024 - PALB2 confere risco intermediario-alto"</text></outputEntry>
      <outputEntry id="OE_Aprovado_PALB2_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Aprovado_PALB2_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <!-- ========== REGRA FALLBACK ========== -->

      <rule id="Rule_Fallback_GEN_BRE_005">
        <description>Pendente: Aconselhamento genetico aprofundado</description>
        <inputEntry id="IE_FB_1"><text>-</text></inputEntry>
        <inputEntry id="IE_FB_2"><text>-</text></inputEntry>
        <inputEntry id="IE_FB_3"><text>-</text></inputEntry>
        <inputEntry id="IE_FB_4"><text>-</text></inputEntry>
        <inputEntry id="IE_FB_5"><text>-</text></inputEntry>
        <outputEntry id="OE_FB_1"><text>"Pendente"</text></outputEntry>
        <outputEntry id="OE_FB_2"><text>"Encaminhamento para aconselhamento genetico e teste genetico se indicado"</text></outputEntry>
        <outputEntry id="OE_FB_3"><text>"NCCN 2024 - Avaliacao de risco genetico antes de decisao cirurgica"</text></outputEntry>
      <outputEntry id="OE_Fallback_GEN_BRE_005_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Fallback_GEN_BRE_005_5"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>

    </decisionTable>
  </decision>
</definitions>
