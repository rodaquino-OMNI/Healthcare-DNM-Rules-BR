<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="https://www.omg.org/spec/DMN/20191111/MODEL/"
             xmlns:dmndi="https://www.omg.org/spec/DMN/20191111/DMNDI/"
             xmlns:dc="http://www.omg.org/spec/DD/20100524/DC/"
             xmlns:di="http://www.omg.org/spec/DD/20100524/DI/"
             id="Definitions_GEN_UGI_003"
             name="Gastrectomia - Cancer Gastrico"
             namespace="http://camunda.org/schema/1.0/dmn"
             exporter="Camunda Modeler"
             exporterVersion="5.0.0">
  <!--
    GEN-UGI-003 - Gastrectomia para Cancer Gastrico - Criterios de Estadiamento
    Versao: 1.0.0 (2026-02-07)
    Especialidade: Cirurgia Geral - Oncologia Gastrica
    Categoria: Procedimentos Cirurgicos Oncologicos

    Extensao da Resseccao (JGCA 2021 / NCCN 2024):
    - Gastrectomia subtotal: Antro/corpo distal, margem proximal 4-6cm
    - Gastrectomia total: Corpo proximal, fundo, linite plastica
    - Margem negativa microscopica (R0)

    Linfadenectomia:
    - D1: Linfonodos perigastricos (estagio inicial)
    - D2: D1 + linfonodos ao longo de tronco celiaco (padrao)
    - D2+ estendida: Casos selecionados

    Indicacoes de Quimioterapia Perioperatoria:
    - cT2 ou maior
    - N+ clinico
    - Esquema FLOT preferido

    Estadiamento Pre-operatorio:
    - EDA com biopsias multiplas
    - TC torax/abdome/pelve
    - Ecoendoscopia (estagio T)
    - Laparoscopia de estadiamento (M1 oculta)

    Referencias Normativas:
    - JGCA Treatment Guidelines 2021
    - NCCN Gastric Cancer 2024
    - ESMO Clinical Practice Guidelines
  -->

  <decision id="Decision_GEN_UGI_003" name="Criterios de Autorizacao - Gastrectomia Cancer">
    <decisionTable id="DecisionTable_GEN_UGI_003" hitPolicy="FIRST">

      <!-- Input 1: Estadiamento -->
      <input id="Input_estadiamento" label="Estadiamento Clinico">
        <inputExpression id="InputExpr_estadiamento" typeRef="string">
          <text>estadiamentoClinico</text>
        </inputExpression>
        <inputValues id="InputValues_estadiamento">
          <text>"Estadio_I","Estadio_II","Estadio_III","Estadio_IV_M0","Estadio_IV_M1"</text>
        </inputValues>
      </input>

      <!-- Input 2: Localizacao do Tumor -->
      <input id="Input_localizacao" label="Localizacao do Tumor">
        <inputExpression id="InputExpr_localizacao" typeRef="string">
          <text>localizacaoTumor</text>
        </inputExpression>
        <inputValues id="InputValues_localizacao">
          <text>"Antro_Piloro","Corpo_Distal","Corpo_Proximal","Fundo_Cardia","Linite_Plastica"</text>
        </inputValues>
      </input>

      <!-- Input 3: Exames de Estadiamento -->
      <input id="Input_examesEstadiamento" label="Exames de Estadiamento Completos (TC/EDA/USE)">
        <inputExpression id="InputExpr_examesEstadiamento" typeRef="boolean">
          <text>examesEstadiamentoCompletos</text>
        </inputExpression>
      </input>

      <!-- Input 4: Quimioterapia Neoadjuvante -->
      <input id="Input_neoadjuvante" label="Quimioterapia Neoadjuvante">
        <inputExpression id="InputExpr_neoadjuvante" typeRef="string">
          <text>quimioterapiaNeoadjuvante</text>
        </inputExpression>
        <inputValues id="InputValues_neoadjuvante">
          <text>"Realizada","Nao_Indicada","Indicada_Nao_Realizada"</text>
        </inputValues>
      </input>

      <!-- Input 5: Laudo de Indicacao -->
      <input id="Input_laudoIndicacao" label="Laudo de Indicacao">
        <inputExpression id="InputExpr_laudoIndicacao" typeRef="boolean">
          <text>laudoIndicacao</text>
        </inputExpression>
      </input>

      <!-- Output 1: Resultado -->
      <output id="Output_resultado" label="Resultado" name="resultado" typeRef="string">
        <outputValues id="OutputValues_resultado">
          <text>"Aprovado","Reprovado","Pendente"</text>
        </outputValues>
      </output>

      <!-- Output 2: Observacao -->
      <output id="Output_observacao" label="Observacao Clinica" name="observacao" typeRef="string" />

      <!-- Output 3: Fundamentacao -->
      <output id="Output_fundamentacao" label="Fundamentacao" name="fundamentacao" typeRef="string" />

      <!-- Output 4: Alertas Desperdicio -->
      <output id="Output_alertasDesperdicio" label="Alertas de Desperdicio" name="alertasDesperdicio" typeRef="string">
        <outputValues id="OutputValues_alertasDesperdicio">
          <text>"NENHUM","DUP","FREQ","ESC","DOC","PROT","MULTI"</text>
        </outputValues>
      </output>

      <!-- Output 5: Acao Recomendada -->
      <output id="Output_acaoRecomendada" label="Acao Recomendada" name="acaoRecomendada" typeRef="string">
        <outputValues id="OutputValues_acaoRecomendada">
          <text>"APROVAR","NEGAR","SOLICITAR_INFO","AGUARDAR_PRAZO","SUGERIR_ALTERNATIVA"</text>
        </outputValues>
      </output>

      <!-- REGRAS DE REPROVACAO -->

      <rule id="Rule_GEN_UGI_003_Reprovado_M1">
        <description>Reprovado - Estadio IV com metastases (M1)</description>
        <inputEntry id="IE_Rep1_1"><text>"Estadio_IV_M1"</text></inputEntry>
        <inputEntry id="IE_Rep1_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep1_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep1_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep1_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Rep1_1"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OE_Rep1_2"><text>"Cancer gastrico M1 - gastrectomia curativa nao indicada. Tratamento paliativo sistemico. Cirurgia apenas para complicacoes (sangramento, obstrucao)."</text></outputEntry>
        <outputEntry id="OE_Rep1_3"><text>"NCCN 2024 - Stage IV Palliative Only"</text></outputEntry>
      <outputEntry id="OE_GEN_UGI_003_Reprovado_M1_4"><text>"PROT"</text></outputEntry>
        <outputEntry id="OE_GEN_UGI_003_Reprovado_M1_5"><text>"NEGAR"</text></outputEntry>
      </rule>

      <rule id="Rule_GEN_UGI_003_Reprovado_SemEstadiamento">
        <description>Reprovado - Sem exames de estadiamento</description>
        <inputEntry id="IE_Rep2_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep2_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep2_3"><text>false</text></inputEntry>
        <inputEntry id="IE_Rep2_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep2_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Rep2_1"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OE_Rep2_2"><text>"Estadiamento completo obrigatorio (TC torax/abdome/pelve, EDA com biopsias, USE para T). Laparoscopia de estadiamento para cT3-4."</text></outputEntry>
        <outputEntry id="OE_Rep2_3"><text>"NCCN 2024 - Complete Staging Required"</text></outputEntry>
      <outputEntry id="OE_GEN_UGI_003_Reprovado_SemEstadiamento_4"><text>"PROT"</text></outputEntry>
        <outputEntry id="OE_GEN_UGI_003_Reprovado_SemEstadiamento_5"><text>"NEGAR"</text></outputEntry>
      </rule>

      <rule id="Rule_GEN_UGI_003_Reprovado_SemNeoIndicada">
        <description>Reprovado - Neoadjuvancia indicada mas nao realizada</description>
        <inputEntry id="IE_Rep3_1"><text>"Estadio_II","Estadio_III"</text></inputEntry>
        <inputEntry id="IE_Rep3_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep3_3"><text>true</text></inputEntry>
        <inputEntry id="IE_Rep3_4"><text>"Indicada_Nao_Realizada"</text></inputEntry>
        <inputEntry id="IE_Rep3_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Rep3_1"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OE_Rep3_2"><text>"Cancer gastrico cT2+ ou N+ - quimioterapia perioperatoria (FLOT) melhora sobrevida. Realizar neoadjuvancia antes de cirurgia."</text></outputEntry>
        <outputEntry id="OE_Rep3_3"><text>"NCCN 2024 - Perioperative Chemotherapy"</text></outputEntry>
      <outputEntry id="OE_GEN_UGI_003_Reprovado_SemNeoIndicada_4"><text>"PROT"</text></outputEntry>
        <outputEntry id="OE_GEN_UGI_003_Reprovado_SemNeoIndicada_5"><text>"NEGAR"</text></outputEntry>
      </rule>

      <rule id="Rule_GEN_UGI_003_Reprovado_SemLaudo">
        <description>Reprovado - Sem laudo de indicacao</description>
        <inputEntry id="IE_Rep4_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep4_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep4_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep4_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep4_5"><text>false</text></inputEntry>
        <outputEntry id="OE_Rep4_1"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OE_Rep4_2"><text>"Laudo de indicacao obrigatorio com estadiamento, localizacao, tipo histologico e extensao de resseccao planejada."</text></outputEntry>
        <outputEntry id="OE_Rep4_3"><text>"RN 465/2021 - Documentacao Obrigatoria"</text></outputEntry>
      <outputEntry id="OE_GEN_UGI_003_Reprovado_SemLaudo_4"><text>"PROT"</text></outputEntry>
        <outputEntry id="OE_GEN_UGI_003_Reprovado_SemLaudo_5"><text>"NEGAR"</text></outputEntry>
      </rule>

      <!-- REGRAS DE APROVACAO -->

      <rule id="Rule_GEN_UGI_003_Aprovado_EstadioI">
        <description>Aprovado - Estadio I (cT1-2 N0)</description>
        <inputEntry id="IE_Apr1_1"><text>"Estadio_I"</text></inputEntry>
        <inputEntry id="IE_Apr1_2"><text>"Antro_Piloro","Corpo_Distal"</text></inputEntry>
        <inputEntry id="IE_Apr1_3"><text>true</text></inputEntry>
        <inputEntry id="IE_Apr1_4"><text>"Nao_Indicada"</text></inputEntry>
        <inputEntry id="IE_Apr1_5"><text>true</text></inputEntry>
        <outputEntry id="OE_Apr1_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Apr1_2"><text>"Cancer gastrico estadio I distal - gastrectomia subtotal com linfadenectomia D2 aprovada. Cirurgia primaria sem neoadjuvancia."</text></outputEntry>
        <outputEntry id="OE_Apr1_3"><text>"NCCN 2024 / JGCA 2021 - Stage I Surgery"</text></outputEntry>
      <outputEntry id="OE_GEN_UGI_003_Aprovado_EstadioI_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_GEN_UGI_003_Aprovado_EstadioI_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <rule id="Rule_GEN_UGI_003_Aprovado_PosNeoadjuvancia">
        <description>Aprovado - Estadio II-III pos neoadjuvancia</description>
        <inputEntry id="IE_Apr2_1"><text>"Estadio_II","Estadio_III"</text></inputEntry>
        <inputEntry id="IE_Apr2_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Apr2_3"><text>true</text></inputEntry>
        <inputEntry id="IE_Apr2_4"><text>"Realizada"</text></inputEntry>
        <inputEntry id="IE_Apr2_5"><text>true</text></inputEntry>
        <outputEntry id="OE_Apr2_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Apr2_2"><text>"Gastrectomia pos quimioterapia neoadjuvante aprovada. Linfadenectomia D2 padrao. Reestadiamento e laparoscopia pre-resseccao recomendados."</text></outputEntry>
        <outputEntry id="OE_Apr2_3"><text>"NCCN 2024 - Post-Neoadjuvant Surgery"</text></outputEntry>
      <outputEntry id="OE_GEN_UGI_003_Aprovado_PosNeoadjuvancia_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_GEN_UGI_003_Aprovado_PosNeoadjuvancia_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <rule id="Rule_GEN_UGI_003_Aprovado_Proximal_Total">
        <description>Aprovado - Tumor proximal (gastrectomia total)</description>
        <inputEntry id="IE_Apr3_1"><text>"Estadio_I","Estadio_II","Estadio_III"</text></inputEntry>
        <inputEntry id="IE_Apr3_2"><text>"Corpo_Proximal","Fundo_Cardia","Linite_Plastica"</text></inputEntry>
        <inputEntry id="IE_Apr3_3"><text>true</text></inputEntry>
        <inputEntry id="IE_Apr3_4"><text>"Realizada","Nao_Indicada"</text></inputEntry>
        <inputEntry id="IE_Apr3_5"><text>true</text></inputEntry>
        <outputEntry id="OE_Apr3_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Apr3_2"><text>"Tumor proximal/linite plastica - gastrectomia total com linfadenectomia D2 aprovada. Margem proximal adequada essencial."</text></outputEntry>
        <outputEntry id="OE_Apr3_3"><text>"JGCA 2021 - Total Gastrectomy Indication"</text></outputEntry>
      <outputEntry id="OE_GEN_UGI_003_Aprovado_Proximal_Total_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_GEN_UGI_003_Aprovado_Proximal_Total_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <!-- REGRAS DE PENDENCIA -->

      <rule id="Rule_GEN_UGI_003_Pendente_IV_M0">
        <description>Pendente - Estadio IV M0 requer discussao</description>
        <inputEntry id="IE_Pend1_1"><text>"Estadio_IV_M0"</text></inputEntry>
        <inputEntry id="IE_Pend1_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Pend1_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Pend1_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Pend1_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Pend1_1"><text>"Pendente"</text></outputEntry>
        <outputEntry id="OE_Pend1_2"><text>"Estadio IV M0 (T4b ou linfonodos distantes) - discutir em tumor board. Quimioterapia de conversao pode permitir resseccao R0."</text></outputEntry>
        <outputEntry id="OE_Pend1_3"><text>"NCCN 2024 - Stage IV M0 Multidisciplinary"</text></outputEntry>
      <outputEntry id="OE_GEN_UGI_003_Pendente_IV_M0_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_GEN_UGI_003_Pendente_IV_M0_5"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>

      <!-- REGRA FALLBACK -->

      <rule id="Rule_GEN_UGI_003_Fallback">
        <description>Fallback - Analise especializada</description>
        <inputEntry id="IE_Fallback_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Fallback_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Fallback_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Fallback_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Fallback_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Fallback_1"><text>"Pendente"</text></outputEntry>
        <outputEntry id="OE_Fallback_2"><text>"Caso de cancer gastrico requer analise por tumor board oncologico."</text></outputEntry>
        <outputEntry id="OE_Fallback_3"><text>"Auditoria oncologica - RN 428/2017"</text></outputEntry>
      <outputEntry id="OE_GEN_UGI_003_Fallback_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_GEN_UGI_003_Fallback_5"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>

    </decisionTable>
  </decision>
</definitions>
