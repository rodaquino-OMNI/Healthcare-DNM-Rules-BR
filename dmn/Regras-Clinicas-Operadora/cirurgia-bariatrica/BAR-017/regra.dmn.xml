<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="https://www.omg.org/spec/DMN/20191111/MODEL/"
             xmlns:camunda="http://camunda.org/schema/1.0/dmn"
             id="Definitions_BAR017"
             name="Dumping Syndrome Tratamento"
             namespace="http://camunda.org/schema/1.0/dmn">

  <!--
    ===============================================================================
    TUSS: BAR-017
    Procedimento: Avaliacao e Tratamento da Sindrome de Dumping Pos-Bariatrica
    Especialidade: Cirurgia Bariatrica / Endocrinologia
    Versao: 3.0.0-TIER1
    Data: 2026-02-07
    ===============================================================================

    INDICACOES CLINICAS (SBCBM 2022, ASMBS 2020):
    - Dumping precoce: sintomas vasomotores/GI 15-30min apos refeicao
    - Dumping tardio: hipoglicemia 1-3h apos refeicao
    - Impacto significativo na qualidade de vida
    - Refratariedade ao tratamento dietetico

    CLASSIFICACAO:
    - Leve: Sintomas ocasionais, controlados com dieta
    - Moderado: Sintomas frequentes, impacto na qualidade de vida
    - Grave: Hipoglicemia severa recorrente, hospitalizacoes

    REFERENCIAS TECNICAS:
    - SBCBM 2022 - Complicacoes Funcionais
    - ASMBS Dumping Syndrome Statement 2020
    - Endocrine Society Guidelines 2022

    ===============================================================================
  -->

  <decision id="Decision_BAR017" name="Regra Clinica - Sindrome de Dumping">
    <decisionTable id="DecisionTable_BAR017" hitPolicy="FIRST">

      <!-- ========== INPUTS (5) ========== -->

      <input id="Input_tipoDumping" label="Tipo de Dumping" camunda:inputVariable="tipoDumping">
        <inputExpression id="InputExpression_tipoDumping" typeRef="string">
          <text>tipoDumping</text>
        </inputExpression>
        <inputValues id="InputValues_tipoDumping">
          <text>"Precoce","Tardio","Misto"</text>
        </inputValues>
      </input>

      <input id="Input_gravidadeDumping" label="Gravidade" camunda:inputVariable="gravidadeDumping">
        <inputExpression id="InputExpression_gravidadeDumping" typeRef="string">
          <text>gravidadeDumping</text>
        </inputExpression>
        <inputValues id="InputValues_gravidadeDumping">
          <text>"Leve","Moderado","Grave"</text>
        </inputValues>
      </input>

      <input id="Input_tratamentoDietetico" label="Tratamento Dietetico" camunda:inputVariable="tratamentoDietetico">
        <inputExpression id="InputExpression_tratamentoDietetico" typeRef="string">
          <text>tratamentoDietetico</text>
        </inputExpression>
        <inputValues id="InputValues_tratamentoDietetico">
          <text>"Sucesso","FalhaParcial","Falha","NaoTentado"</text>
        </inputValues>
      </input>

      <input id="Input_hipoglicemiasGraves" label="Hipoglicemias Graves (ultimos 6 meses)" camunda:inputVariable="hipoglicemiasGraves">
        <inputExpression id="InputExpression_hipoglicemiasGraves" typeRef="number">
          <text>hipoglicemiasGraves</text>
        </inputExpression>
      </input>

      <input id="Input_procedimentoSolicitado" label="Procedimento Solicitado" camunda:inputVariable="procedimentoSolicitado">
        <inputExpression id="InputExpression_procedimentoSolicitado" typeRef="string">
          <text>procedimentoSolicitado</text>
        </inputExpression>
        <inputValues id="InputValues_procedimentoSolicitado">
          <text>"ConsultaEndocrinologia","TesteFuncional","MedicacaoAcarbose","MedicacaoOctreotide","RevisaoCirurgica"</text>
        </inputValues>
      </input>

      <!-- ========== OUTPUTS (3 - Padrao TIER-1) ========== -->

      <output id="Output_resultado" label="Resultado" name="resultado" typeRef="string">
        <outputValues id="OutputValues_resultado">
          <text>"Aprovado","Reprovado","Pendente"</text>
        </outputValues>
      </output>

      <output id="Output_observacao" label="Observacao Clinica" name="observacao" typeRef="string" />

      <output id="Output_fundamentacao" label="Fundamentacao Tecnica" name="fundamentacao" typeRef="string" />

      <!-- Output 4: Alertas Desperdicio -->
      <output id="Output_alertasDesperdicio" label="Alertas de Desperdicio" name="alertasDesperdicio" typeRef="string">
        <outputValues id="OutputValues_alertasDesperdicio">
          <text>"NENHUM","DUP","FREQ","ESC","DOC","PROT","MULTI"</text>
        </outputValues>
      </output>

      <!-- Output 5: Acao Recomendada -->
      <output id="Output_acaoRecomendada" label="Acao Recomendada" name="acaoRecomendada" typeRef="string">
        <outputValues id="OutputValues_acaoRecomendada">
          <text>"APROVAR","NEGAR","SOLICITAR_INFO","AGUARDAR_PRAZO","SUGERIR_ALTERNATIVA"</text>
        </outputValues>
      </output>

      <!-- ========== RULES ========== -->

      <!-- APROVACOES URGENTES -->
      <rule id="Rule_Aprovado_HipoglicemiaGraveRecorrente">
        <description>Aprovado Urgente: Hipoglicemias graves recorrentes</description>
        <inputEntry id="InputEntry_HG_1"><text>"Tardio","Misto"</text></inputEntry>
        <inputEntry id="InputEntry_HG_2"><text>"Grave"</text></inputEntry>
        <inputEntry id="InputEntry_HG_3"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_HG_4"><text>&gt;= 3</text></inputEntry>
        <inputEntry id="InputEntry_HG_5"><text>-</text></inputEntry>
        <outputEntry id="OutputEntry_HG_resultado"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OutputEntry_HG_observacao"><text>"Hipoglicemia grave recorrente - avaliacao/tratamento urgente necessario"</text></outputEntry>
        <outputEntry id="OutputEntry_HG_fundamentacao"><text>"ASMBS 2020, Endocrine Society 2022 - Hipoglicemia pos-bariatrica grave e emergencia medica"</text></outputEntry>
      <outputEntry id="OE_Aprovado_HipoglicemiaGraveRecorrente_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Aprovado_HipoglicemiaGraveRecorrente_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <!-- APROVACOES - CONSULTA/AVALIACAO -->
      <rule id="Rule_Aprovado_ConsultaEndocrinologia">
        <description>Aprovado: Consulta endocrinologia para dumping tardio</description>
        <inputEntry id="InputEntry_CE_1"><text>"Tardio","Misto"</text></inputEntry>
        <inputEntry id="InputEntry_CE_2"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_CE_3"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_CE_4"><text>&gt;= 1</text></inputEntry>
        <inputEntry id="InputEntry_CE_5"><text>"ConsultaEndocrinologia"</text></inputEntry>
        <outputEntry id="OutputEntry_CE_resultado"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OutputEntry_CE_observacao"><text>"Dumping tardio com hipoglicemia - avaliacao endocrinologica indicada"</text></outputEntry>
        <outputEntry id="OutputEntry_CE_fundamentacao"><text>"Endocrine Society 2022 - Hipoglicemia pos-bariatrica requer avaliacao especializada"</text></outputEntry>
      <outputEntry id="OE_Aprovado_ConsultaEndocrinologia_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Aprovado_ConsultaEndocrinologia_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <rule id="Rule_Aprovado_TesteFuncional">
        <description>Aprovado: Teste funcional para caracterizacao</description>
        <inputEntry id="InputEntry_TF_1"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_TF_2"><text>"Moderado","Grave"</text></inputEntry>
        <inputEntry id="InputEntry_TF_3"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_TF_4"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_TF_5"><text>"TesteFuncional"</text></inputEntry>
        <outputEntry id="OutputEntry_TF_resultado"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OutputEntry_TF_observacao"><text>"Teste de refeicao mista para caracterizacao do dumping e hipoglicemia"</text></outputEntry>
        <outputEntry id="OutputEntry_TF_fundamentacao"><text>"ASMBS 2020 - Testes funcionais ajudam a diferenciar tipos e gravidade"</text></outputEntry>
      <outputEntry id="OE_Aprovado_TesteFuncional_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Aprovado_TesteFuncional_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <!-- APROVACOES - MEDICACAO -->
      <rule id="Rule_Aprovado_Acarbose">
        <description>Aprovado: Acarbose para dumping tardio</description>
        <inputEntry id="InputEntry_AC_1"><text>"Tardio","Misto"</text></inputEntry>
        <inputEntry id="InputEntry_AC_2"><text>"Moderado","Grave"</text></inputEntry>
        <inputEntry id="InputEntry_AC_3"><text>"FalhaParcial","Falha"</text></inputEntry>
        <inputEntry id="InputEntry_AC_4"><text>&gt;= 1</text></inputEntry>
        <inputEntry id="InputEntry_AC_5"><text>"MedicacaoAcarbose"</text></inputEntry>
        <outputEntry id="OutputEntry_AC_resultado"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OutputEntry_AC_observacao"><text>"Acarbose para controle de hipoglicemia pos-bariatrica - primeira linha medicamentosa"</text></outputEntry>
        <outputEntry id="OutputEntry_AC_fundamentacao"><text>"Endocrine Society 2022, ASMBS 2020 - Acarbose e primeira linha para hipoglicemia pos-bariatrica"</text></outputEntry>
      <outputEntry id="OE_Aprovado_Acarbose_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Aprovado_Acarbose_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <rule id="Rule_Aprovado_Octreotide">
        <description>Aprovado: Octreotide para dumping grave refratario</description>
        <inputEntry id="InputEntry_OC_1"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_OC_2"><text>"Grave"</text></inputEntry>
        <inputEntry id="InputEntry_OC_3"><text>"Falha"</text></inputEntry>
        <inputEntry id="InputEntry_OC_4"><text>&gt;= 3</text></inputEntry>
        <inputEntry id="InputEntry_OC_5"><text>"MedicacaoOctreotide"</text></inputEntry>
        <outputEntry id="OutputEntry_OC_resultado"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OutputEntry_OC_observacao"><text>"Octreotide para dumping grave refratario a acarbose - segunda linha"</text></outputEntry>
        <outputEntry id="OutputEntry_OC_fundamentacao"><text>"ASMBS 2020 - Octreotide indicado em dumping severo refratario ao tratamento convencional"</text></outputEntry>
      <outputEntry id="OE_Aprovado_Octreotide_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Aprovado_Octreotide_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <!-- APROVACOES - REVISAO CIRURGICA -->
      <rule id="Rule_Aprovado_RevisaoCirurgica">
        <description>Aprovado: Revisao cirurgica para dumping grave refratario</description>
        <inputEntry id="InputEntry_RC_1"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_RC_2"><text>"Grave"</text></inputEntry>
        <inputEntry id="InputEntry_RC_3"><text>"Falha"</text></inputEntry>
        <inputEntry id="InputEntry_RC_4"><text>&gt;= 5</text></inputEntry>
        <inputEntry id="InputEntry_RC_5"><text>"RevisaoCirurgica"</text></inputEntry>
        <outputEntry id="OutputEntry_RC_resultado"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OutputEntry_RC_observacao"><text>"Revisao cirurgica para dumping grave refratario a todo tratamento clinico"</text></outputEntry>
        <outputEntry id="OutputEntry_RC_fundamentacao"><text>"SBCBM 2022, ASMBS 2020 - Reversao/revisao indicada em casos extremos refratarios"</text></outputEntry>
      <outputEntry id="OE_Aprovado_RevisaoCirurgica_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Aprovado_RevisaoCirurgica_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <!-- REPROVACOES -->
      <rule id="Rule_Reprovado_TratamentoDieteticoNaoTentado">
        <description>Reprovado: Tratamento dietetico nao tentado</description>
        <inputEntry id="InputEntry_DN_1"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_DN_2"><text>"Leve","Moderado"</text></inputEntry>
        <inputEntry id="InputEntry_DN_3"><text>"NaoTentado"</text></inputEntry>
        <inputEntry id="InputEntry_DN_4"><text>&lt; 3</text></inputEntry>
        <inputEntry id="InputEntry_DN_5"><text>"MedicacaoAcarbose","MedicacaoOctreotide","RevisaoCirurgica"</text></inputEntry>
        <outputEntry id="OutputEntry_DN_resultado"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OutputEntry_DN_observacao"><text>"Iniciar tratamento dietetico antes de considerar medicacao ou cirurgia"</text></outputEntry>
        <outputEntry id="OutputEntry_DN_fundamentacao"><text>"ASMBS 2020 - Orientacao dietetica e primeira linha e resolve maioria dos casos leves/moderados"</text></outputEntry>
      <outputEntry id="OE_Reprovado_TratamentoDieteticoNaoTentado_4"><text>"PROT"</text></outputEntry>
        <outputEntry id="OE_Reprovado_TratamentoDieteticoNaoTentado_5"><text>"NEGAR"</text></outputEntry>
      </rule>

      <rule id="Rule_Reprovado_DumpingLeve">
        <description>Reprovado: Dumping leve controlado - medicacao nao indicada</description>
        <inputEntry id="InputEntry_DL_1"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_DL_2"><text>"Leve"</text></inputEntry>
        <inputEntry id="InputEntry_DL_3"><text>"Sucesso"</text></inputEntry>
        <inputEntry id="InputEntry_DL_4"><text>0</text></inputEntry>
        <inputEntry id="InputEntry_DL_5"><text>"MedicacaoAcarbose","MedicacaoOctreotide"</text></inputEntry>
        <outputEntry id="OutputEntry_DL_resultado"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OutputEntry_DL_observacao"><text>"Dumping leve controlado com dieta - medicacao nao indicada"</text></outputEntry>
        <outputEntry id="OutputEntry_DL_fundamentacao"><text>"ASMBS 2020 - Medicacao reservada para casos refratarios ao tratamento dietetico"</text></outputEntry>
      <outputEntry id="OE_Reprovado_DumpingLeve_4"><text>"PROT"</text></outputEntry>
        <outputEntry id="OE_Reprovado_DumpingLeve_5"><text>"NEGAR"</text></outputEntry>
      </rule>

      <!-- PENDENTE -->
      <rule id="Rule_Pendente_AvaliacaoIncompleta">
        <description>Pendente: Avaliacao incompleta</description>
        <inputEntry id="InputEntry_AI_1"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_AI_2"><text>"Moderado"</text></inputEntry>
        <inputEntry id="InputEntry_AI_3"><text>"FalhaParcial"</text></inputEntry>
        <inputEntry id="InputEntry_AI_4"><text>0</text></inputEntry>
        <inputEntry id="InputEntry_AI_5"><text>"MedicacaoAcarbose"</text></inputEntry>
        <outputEntry id="OutputEntry_AI_resultado"><text>"Pendente"</text></outputEntry>
        <outputEntry id="OutputEntry_AI_observacao"><text>"Realizar teste funcional para confirmar dumping tardio antes de iniciar acarbose"</text></outputEntry>
        <outputEntry id="OutputEntry_AI_fundamentacao"><text>"Endocrine Society 2022 - Confirmacao diagnostica necessaria antes de tratamento especifico"</text></outputEntry>
      <outputEntry id="OE_Pendente_AvaliacaoIncompleta_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Pendente_AvaliacaoIncompleta_5"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>

      <!-- FALLBACK RULE -->
      <rule id="Rule_Fallback_BAR017">
        <description>Regra padrao - Analise adicional necessaria</description>
        <inputEntry id="InputEntry_Fallback_1"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_Fallback_2"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_Fallback_3"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_Fallback_4"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_Fallback_5"><text>-</text></inputEntry>
        <outputEntry id="OutputEntry_Fallback_resultado"><text>"Pendente"</text></outputEntry>
        <outputEntry id="OutputEntry_Fallback_observacao"><text>"Avaliar caso com equipe multidisciplinar de bariatrica e endocrinologia"</text></outputEntry>
        <outputEntry id="OutputEntry_Fallback_fundamentacao"><text>"ASMBS 2020 - Sindrome de dumping requer abordagem multidisciplinar"</text></outputEntry>
      <outputEntry id="OE_Fallback_BAR017_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Fallback_BAR017_5"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>

    </decisionTable>
  </decision>
</definitions>
