<?xml version='1.0' encoding='UTF-8'?>
<definitions xmlns="https://www.omg.org/spec/DMN/20191111/MODEL/" xmlns:camunda="http://camunda.org/schema/1.0/dmn" id="DIA-003-Selecao-Modalidade-HD-PD" name="Regra Seleção Modalidade Dialítica - HD vs DP" namespace="http://camunda.org/schema/1.0/dmn">

  <decision id="Decision_DIA003_Modalidade" name="DIA-003: Seleção Modalidade Dialítica (HD vs DP)">
    <decisionTable id="DecisionTable_DIA003" hitPolicy="FIRST">
      <input id="Input_PreferenciaPaciente" label="Preferência Paciente" camunda:inputVariable="preferenciaPaciente">
        <inputExpression id="InputExpression_Preferencia" typeRef="string">
          <text>preferenciaPaciente</text>
        </inputExpression>
        <inputValues id="InputValues_Preferencia">
          <text>"HD","DP","sem_preferencia"</text>
        </inputValues>
      </input>

      <input id="Input_CondicaoMembrana" label="Membrana Peritoneal Adequada" camunda:inputVariable="membranaPeritonealAdequada">
        <inputExpression id="InputExpression_Membrana" typeRef="boolean">
          <text>membranaPeritonealAdequada</text>
        </inputExpression>
        <inputValues id="InputValues_Membrana">
          <text>true,false</text>
        </inputValues>
      </input>

      <input id="Input_AcessoVascular" label="Acesso Vascular Disponível" camunda:inputVariable="acessoVascularDisponivel">
        <inputExpression id="InputExpression_Acesso" typeRef="boolean">
          <text>acessoVascularDisponivel</text>
        </inputExpression>
        <inputValues id="InputValues_Acesso">
          <text>true,false</text>
        </inputValues>
      </input>

      <input id="Input_ContraindicacaoAbsoluta" label="Contraindicação Absoluta" camunda:inputVariable="possuiContraindicacaoAbsoluta">
        <inputExpression id="InputExpression_Contraind" typeRef="string">
          <text>possuiContraindicacaoAbsoluta</text>
        </inputExpression>
        <inputValues id="InputValues_Contraind">
          <text>"nenhuma","DP","HD"</text>
        </inputValues>
      </input>

      <input id="Input_AutonomiaAdequada" label="Autonomia para DP" camunda:inputVariable="autonomiaAdequada">
        <inputExpression id="InputExpression_Autonomia" typeRef="boolean">
          <text>autonomiaAdequada</text>
        </inputExpression>
        <inputValues id="InputValues_Autonomia">
          <text>true,false</text>
        </inputValues>
      </input>

      <output id="Output_Resultado" label="Resultado" name="resultado" typeRef="string">
        <outputValues id="OutputValues_Resultado">
          <text>"Aprovado","Reprovado","Pendente"</text>
        </outputValues>
      </output>

      <output id="Output_Observacao" label="Observação" name="observacao" typeRef="string" />

      <output id="Output_Fundamentacao" label="Fundamentação Legal" name="fundamentacao" typeRef="string" />

      
      <output id="Output_alertasDesperdicio" name="alertasDesperdicio" typeRef="string"><outputValues><text>"NENHUM","DUP","FREQ","ESC","DOC","PROT","MULTI"</text></outputValues></output><output id="Output_acaoRecomendada" name="acaoRecomendada" typeRef="string"><outputValues><text>"APROVAR","NEGAR","SOLICITAR_INFO","AGUARDAR_PRAZO","SUGERIR_ALTERNATIVA"</text></outputValues></output><rule id="Rule_DIA003_01">
        <inputEntry id="InputEntry_R1_Preferencia">
          <text>"DP"</text>
        </inputEntry>
        <inputEntry id="InputEntry_R1_Membrana">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_R1_Acesso">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_R1_Contraind">
          <text>"DP"</text>
        </inputEntry>
        <inputEntry id="InputEntry_R1_Autonomia">
          <text>-</text>
        </inputEntry>
        <outputEntry id="OutputEntry_R1_Resultado">
          <text>"Reprovado"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_R1_Obs">
          <text>"Diálise Peritoneal contraindicada: cirurgias abdominais múltiplas, aderências extensas, hérnias não reparáveis, falência ultrafiltração. Indicar HD."</text>
        </outputEntry>
        <outputEntry id="OutputEntry_R1_Fund">
          <text>"ISPD Guidelines 2020 - Contraindicações absolutas DP"</text>
        </outputEntry>
      <outputEntry id="OutputEntry_Added_4"><text>"PROT"</text></outputEntry><outputEntry id="OutputEntry_Added_5"><text>"NEGAR"</text></outputEntry></rule>

      
      <rule id="Rule_DIA003_02">
        <inputEntry id="InputEntry_R2_Preferencia">
          <text>"HD"</text>
        </inputEntry>
        <inputEntry id="InputEntry_R2_Membrana">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_R2_Acesso">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_R2_Contraind">
          <text>"HD"</text>
        </inputEntry>
        <inputEntry id="InputEntry_R2_Autonomia">
          <text>-</text>
        </inputEntry>
        <outputEntry id="OutputEntry_R2_Resultado">
          <text>"Reprovado"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_R2_Obs">
          <text>"Hemodiálise contraindicada: instabilidade hemodinâmica grave, impossibilidade acesso vascular, reações alérgicas graves heparina. Indicar DP."</text>
        </outputEntry>
        <outputEntry id="OutputEntry_R2_Fund">
          <text>"KDOQI 2015 - Contraindicações absolutas HD"</text>
        </outputEntry>
      <outputEntry id="OutputEntry_Added_4"><text>"PROT"</text></outputEntry><outputEntry id="OutputEntry_Added_5"><text>"NEGAR"</text></outputEntry></rule>

      
      <rule id="Rule_DIA003_03">
        <inputEntry id="InputEntry_R3_Preferencia">
          <text>"DP"</text>
        </inputEntry>
        <inputEntry id="InputEntry_R3_Membrana">
          <text>false</text>
        </inputEntry>
        <inputEntry id="InputEntry_R3_Acesso">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_R3_Contraind">
          <text>"nenhuma"</text>
        </inputEntry>
        <inputEntry id="InputEntry_R3_Autonomia">
          <text>-</text>
        </inputEntry>
        <outputEntry id="OutputEntry_R3_Resultado">
          <text>"Reprovado"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_R3_Obs">
          <text>"Membrana peritoneal inadequada (falência ultrafiltração prévia, peritonite esclerosante). DP não viável. Indicar HD."</text>
        </outputEntry>
        <outputEntry id="OutputEntry_R3_Fund">
          <text>"ISPD 2020 - Avaliação membrana peritoneal pré-DP obrigatória"</text>
        </outputEntry>
      <outputEntry id="OutputEntry_Added_4"><text>"PROT"</text></outputEntry><outputEntry id="OutputEntry_Added_5"><text>"NEGAR"</text></outputEntry></rule>

      
      <rule id="Rule_DIA003_04">
        <inputEntry id="InputEntry_R4_Preferencia">
          <text>"HD"</text>
        </inputEntry>
        <inputEntry id="InputEntry_R4_Membrana">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_R4_Acesso">
          <text>false</text>
        </inputEntry>
        <inputEntry id="InputEntry_R4_Contraind">
          <text>"nenhuma"</text>
        </inputEntry>
        <inputEntry id="InputEntry_R4_Autonomia">
          <text>-</text>
        </inputEntry>
        <outputEntry id="OutputEntry_R4_Resultado">
          <text>"Reprovado"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_R4_Obs">
          <text>"Acesso vascular não viável (vasos esgotados, múltiplas tromboses). HD inviável no momento. Indicar DP enquanto aguarda enxertia protética."</text>
        </outputEntry>
        <outputEntry id="OutputEntry_R4_Fund">
          <text>"KDOQI 2019 - Acesso vascular obrigatório para HD"</text>
        </outputEntry>
      <outputEntry id="OutputEntry_Added_4"><text>"PROT"</text></outputEntry><outputEntry id="OutputEntry_Added_5"><text>"NEGAR"</text></outputEntry></rule>

      
      <rule id="Rule_DIA003_05">
        <inputEntry id="InputEntry_R5_Preferencia">
          <text>"DP"</text>
        </inputEntry>
        <inputEntry id="InputEntry_R5_Membrana">
          <text>true</text>
        </inputEntry>
        <inputEntry id="InputEntry_R5_Acesso">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_R5_Contraind">
          <text>"nenhuma"</text>
        </inputEntry>
        <inputEntry id="InputEntry_R5_Autonomia">
          <text>false</text>
        </inputEntry>
        <outputEntry id="OutputEntry_R5_Resultado">
          <text>"Pendente"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_R5_Obs">
          <text>"Pendente treinamento cuidador para DP domiciliar. Paciente sem autonomia. Indicar DP assistida ou HD até disponibilidade cuidador treinado."</text>
        </outputEntry>
        <outputEntry id="OutputEntry_R5_Fund">
          <text>"ISPD 2020 - Cuidador treinado obrigatório se paciente sem autonomia"</text>
        </outputEntry>
      <outputEntry id="OutputEntry_Added_4"><text>"DOC"</text></outputEntry><outputEntry id="OutputEntry_Added_5"><text>"SOLICITAR_INFO"</text></outputEntry></rule>

      
      <rule id="Rule_DIA003_06">
        <inputEntry id="InputEntry_R6_Preferencia">
          <text>"HD"</text>
        </inputEntry>
        <inputEntry id="InputEntry_R6_Membrana">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_R6_Acesso">
          <text>true</text>
        </inputEntry>
        <inputEntry id="InputEntry_R6_Contraind">
          <text>"nenhuma"</text>
        </inputEntry>
        <inputEntry id="InputEntry_R6_Autonomia">
          <text>-</text>
        </inputEntry>
        <outputEntry id="OutputEntry_R6_Resultado">
          <text>"Aprovado"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_R6_Obs">
          <text>"Hemodiálise aprovada conforme preferência paciente. Acesso vascular disponível (FAV/enxertia/cateter). Sem contraindicações. HD 3x/semana."</text>
        </outputEntry>
        <outputEntry id="OutputEntry_R6_Fund">
          <text>"KDOQI 2015 - Escolha modalidade diálise centrada no paciente"</text>
        </outputEntry>
      <outputEntry id="OutputEntry_Added_4"><text>"NENHUM"</text></outputEntry><outputEntry id="OutputEntry_Added_5"><text>"APROVAR"</text></outputEntry></rule>

      
      <rule id="Rule_DIA003_07">
        <inputEntry id="InputEntry_R7_Preferencia">
          <text>"DP"</text>
        </inputEntry>
        <inputEntry id="InputEntry_R7_Membrana">
          <text>true</text>
        </inputEntry>
        <inputEntry id="InputEntry_R7_Acesso">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_R7_Contraind">
          <text>"nenhuma"</text>
        </inputEntry>
        <inputEntry id="InputEntry_R7_Autonomia">
          <text>true</text>
        </inputEntry>
        <outputEntry id="OutputEntry_R7_Resultado">
          <text>"Aprovado"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_R7_Obs">
          <text>"Diálise Peritoneal aprovada conforme preferência paciente. Membrana adequada, autonomia/cuidador disponível. CAPD ou DPA conforme perfil."</text>
        </outputEntry>
        <outputEntry id="OutputEntry_R7_Fund">
          <text>"ISPD 2020 - DP como primeira escolha quando paciente opta"</text>
        </outputEntry>
      <outputEntry id="OutputEntry_Added_4"><text>"NENHUM"</text></outputEntry><outputEntry id="OutputEntry_Added_5"><text>"APROVAR"</text></outputEntry></rule>

      
      <rule id="Rule_DIA003_08">
        <inputEntry id="InputEntry_R8_Preferencia">
          <text>"sem_preferencia"</text>
        </inputEntry>
        <inputEntry id="InputEntry_R8_Membrana">
          <text>true</text>
        </inputEntry>
        <inputEntry id="InputEntry_R8_Acesso">
          <text>true</text>
        </inputEntry>
        <inputEntry id="InputEntry_R8_Contraind">
          <text>"nenhuma"</text>
        </inputEntry>
        <inputEntry id="InputEntry_R8_Autonomia">
          <text>true</text>
        </inputEntry>
        <outputEntry id="OutputEntry_R8_Resultado">
          <text>"Aprovado"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_R8_Obs">
          <text>"Ambas modalidades viáveis (HD e DP). Orientar paciente sobre vantagens/desvantagens. DP preferencial se paciente jovem, ativo, preservação função renal residual."</text>
        </outputEntry>
        <outputEntry id="OutputEntry_R8_Fund">
          <text>"KDOQI 2015 - Decisão compartilhada médico-paciente"</text>
        </outputEntry>
      <outputEntry id="OutputEntry_Added_4"><text>"NENHUM"</text></outputEntry><outputEntry id="OutputEntry_Added_5"><text>"APROVAR"</text></outputEntry></rule>

      
      <rule id="Rule_Default_Fallback">
        <inputEntry id="InputEntry_Fallback_Preferencia">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_Fallback_Membrana">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_Fallback_Acesso">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_Fallback_Contraind">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_Fallback_Autonomia">
          <text>-</text>
        </inputEntry>
        <outputEntry id="OutputEntry_Fallback_Resultado">
          <text>"Pendente"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_Fallback_Obs">
          <text>"Caso não contemplado nas regras. Solicitar avaliação nefrologista para decisão individualizada conforme KDOQI e ISPD."</text>
        </outputEntry>
        <outputEntry id="OutputEntry_Fallback_Fund">
          <text>"Análise caso a caso - KDOQI/ISPD Guidelines"</text>
        </outputEntry>
      <outputEntry id="OutputEntry_Added_4"><text>"DOC"</text></outputEntry><outputEntry id="OutputEntry_Added_5"><text>"SOLICITAR_INFO"</text></outputEntry></rule>
    </decisionTable>
  </decision>
</definitions>