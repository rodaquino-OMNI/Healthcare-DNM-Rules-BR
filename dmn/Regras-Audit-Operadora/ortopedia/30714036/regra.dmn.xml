<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="https://www.omg.org/spec/DMN/20191111/MODEL/" xmlns:biodi="http://bpmn.io/schema/dmn/biodi/2.0" xmlns:dmndi="https://www.omg.org/spec/DMN/20191111/DMNDI/" xmlns:dc="http://www.omg.org/spec/DMN/20180521/DC/" id="Definitions_ORT_CONS_005" name="ORT-CONS-005" namespace="http://camunda.org/schema/1.0/dmn">
  <decision id="Decision_ORT_CONS_005" name="Timing reparo manguito rotador">
    <decisionTable id="DecisionTable_ORT_CONS_005" hitPolicy="FIRST">
      <input id="Input_tamanhoRuptura" label="Tamanho Ruptura (cm)">
        <inputExpression id="InputExpression_tamanhoRuptura" typeRef="double">
          <text>tamanhoRuptura</text>
        </inputExpression>
      </input>
      <input id="Input_atrofiaMusc" label="Atrofia Muscular (%)">
        <inputExpression id="InputExpression_atrofiaMusc" typeRef="integer">
          <text>atrofiaMuscular</text>
        </inputExpression>
      </input>
      <input id="Input_retracao" label="Retração (mm)">
        <inputExpression id="InputExpression_retracao" typeRef="integer">
          <text>retracao</text>
        </inputExpression>
      </input>
      <input id="Input_tempoLesao" label="Tempo Lesão (meses)">
        <inputExpression id="InputExpression_tempoLesao" typeRef="integer">
          <text>tempoLesao</text>
        </inputExpression>
      </input>
      <output id="Output_resultado" label="Resultado" name="resultado" typeRef="string">
        <outputValues id="OutputValues_resultado">
          <text>"Aprovado","Reprovado","Pendente"</text>
        </outputValues>
      </output>
      <output id="Output_observacao" label="Observação" name="observacao" typeRef="string" />
      <output id="Output_fundamentacao" label="Fundamentação" name="fundamentacao" typeRef="string" />

      <output id="Output_alertasDesperdicio" name="alertasDesperdicio" typeRef="string">
        <outputValues>
          <text>"NENHUM","DUP","FREQ","ESC","DOC","PROT","MULTI"</text>
        </outputValues>
      </output>

      <output id="Output_acaoRecomendada" name="acaoRecomendada" typeRef="string">
        <outputValues>
          <text>"APROVAR","NEGAR","SOLICITAR_INFO","AGUARDAR_PRAZO","SUGERIR_ALTERNATIVA"</text>
        </outputValues>
      </output>

      <!-- Reprovação: Atrofia severa irreversível -->
      <rule id="DecisionRule_Reprovado_1">
        <inputEntry id="InputEntry_tamanhoRuptura_1">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_atrofiaMusc_1">
          <text>&gt; 70</text>
        </inputEntry>
        <inputEntry id="InputEntry_retracao_1">
          <text>&gt; 30</text>
        </inputEntry>
        <inputEntry id="InputEntry_tempoLesao_1">
          <text>&gt; 24</text>
        </inputEntry>
        <outputEntry id="OutputEntry_resultado_1">
          <text>"Reprovado"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_observacao_1">
          <text>"Atrofia muscular severa e retração crônica - reparo não indicado"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_fundamentacao_1">
          <text>"AAOS: atrofia &gt;70% com retração &gt;30mm e lesão crônica (&gt;2 anos) têm prognóstico desfavorável para reparo"</text>
        </outputEntry>
      </rule>

      <!-- Aprovação: Ruptura grande com timing adequado -->
      <rule id="DecisionRule_Aprovado_1">
        <inputEntry id="InputEntry_tamanhoRuptura_2">
          <text>&gt; 3</text>
        </inputEntry>
        <inputEntry id="InputEntry_atrofiaMusc_2">
          <text>&lt; 50</text>
        </inputEntry>
        <inputEntry id="InputEntry_retracao_2">
          <text>&lt;= 20</text>
        </inputEntry>
        <inputEntry id="InputEntry_tempoLesao_2">
          <text>&lt;= 12</text>
        </inputEntry>
        <outputEntry id="OutputEntry_resultado_2">
          <text>"Aprovado"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_observacao_2">
          <text>"Aprovado: ruptura grande com timing adequado para reparo"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_fundamentacao_2">
          <text>"AAOS: rupturas &gt;3cm com atrofia &lt;50% e lesão &lt;12 meses têm excelente prognóstico cirúrgico"</text>
        </outputEntry>
      </rule>

      <!-- Aprovação: Ruptura média recente -->
      <rule id="DecisionRule_Aprovado_2">
        <inputEntry id="InputEntry_tamanhoRuptura_3">
          <text>[1..3]</text>
        </inputEntry>
        <inputEntry id="InputEntry_atrofiaMusc_3">
          <text>&lt; 30</text>
        </inputEntry>
        <inputEntry id="InputEntry_retracao_3">
          <text>&lt; 15</text>
        </inputEntry>
        <inputEntry id="InputEntry_tempoLesao_3">
          <text>&lt;= 6</text>
        </inputEntry>
        <outputEntry id="OutputEntry_resultado_3">
          <text>"Aprovado"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_observacao_3">
          <text>"Aprovado: ruptura média com preservação muscular e timing ideal"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_fundamentacao_3">
          <text>"SBO: rupturas médias recentes (≤6 meses) com atrofia mínima têm taxa de cicatrização &gt;85%"</text>
        </outputEntry>
      </rule>

      <!-- Pendente: Casos borderline -->
      <rule id="DecisionRule_Pendente_1">
        <inputEntry id="InputEntry_tamanhoRuptura_4">
          <text>&gt;= 2</text>
        </inputEntry>
        <inputEntry id="InputEntry_atrofiaMusc_4">
          <text>[50..70]</text>
        </inputEntry>
        <inputEntry id="InputEntry_retracao_4">
          <text>[20..30]</text>
        </inputEntry>
        <inputEntry id="InputEntry_tempoLesao_4">
          <text>[12..24]</text>
        </inputEntry>
        <outputEntry id="OutputEntry_resultado_4">
          <text>"Pendente"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_observacao_4">
          <text>"Caso borderline - requer avaliação de viabilidade do reparo por especialista"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_fundamentacao_4">
          <text>"Casos intermediários requerem análise individualizada considerando idade, demanda funcional e qualidade tecidual"</text>
        </outputEntry>
      </rule>

      <!-- Fallback -->
      <rule id="DecisionRule_Fallback">
        <inputEntry id="InputEntry_tamanhoRuptura_fallback">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_atrofiaMusc_fallback">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_retracao_fallback">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_tempoLesao_fallback">
          <text>-</text>
        </inputEntry>
        <outputEntry id="OutputEntry_resultado_fallback">
          <text>"Pendente"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_observacao_fallback">
          <text>"Caso não enquadrado - requer análise especializada"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_fundamentacao_fallback">
          <text>"Avaliação individualizada conforme AAOS e SBO"</text>
        </outputEntry>
      </rule>
    </decisionTable>
  </decision>
</definitions>
