<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="https://www.omg.org/spec/DMN/20191111/MODEL/"
             xmlns:dmndi="https://www.omg.org/spec/DMN/20191111/DMNDI/"
             xmlns:dc="http://www.omg.org/spec/DD/20180521/DC/"
             id="Definitions_40808041"
             name="Tomografia - Tomografia de Cranio com Contraste"
             targetNamespace="http://camunda.org/schema/1.0/dmn">

  <!--
    ═══════════════════════════════════════════════════════════════════════════
    TUSS 40808041 - Tomografia - Tomografia de Cranio com Contraste
    Versao: 3.1.0-LEAN-TIER2 (2026-02-08)
    Especialidade: Tomografia
    ═══════════════════════════════════════════════════════════════════════════

    INDICACOES (Quando APROVAR):
    - Paciente com indicacao clinica adequada conforme protocolos DUT/ANS
    - Documentacao completa (laudo medico solicitante)
    - Exames previos realizados quando aplicavel
    - Sem contraindicacoes absolutas

    CONTRAINDICACOES (Quando REPROVAR):
    - Ausencia de indicacao clinica adequada
    - Gestante (para exames com radiacao/radiofarmacos)
    - Laudo medico nao anexado
    - Documentacao incompleta

    REFERENCIAS NORMATIVAS:
    - ANS - RN 465/2021 - Rol de Procedimentos
    - TUSS 2024 - Terminologia Unificada
    - DUT - Diretrizes de Utilizacao ANS
    - Protocolos das Sociedades de Especialidade
    ═══════════════════════════════════════════════════════════════════════════
  -->

  <decision id="Decision_40808041" name="Autorizacao - Tomografia de Cranio com Contraste">
    <decisionTable id="DecisionTable_40808041" hitPolicy="FIRST">

      <input id="Input_1" label="Diagnostico Principal (CID-10)">
        <inputExpression id="InputExpression_1" typeRef="string">
          <text>diagnosticoPrincipal</text>
        </inputExpression>
      </input>

      <input id="Input_2" label="Indicacao Clinica">
        <inputExpression id="InputExpression_2" typeRef="string">
          <text>indicacaoClinica</text>
        </inputExpression>
      </input>

      <input id="Input_3" label="Resultado Exame Anterior">
        <inputExpression id="InputExpression_3" typeRef="string">
          <text>resultadoExameAnterior</text>
        </inputExpression>
      </input>

      <input id="Input_4" label="Gestante">
        <inputExpression id="InputExpression_4" typeRef="boolean">
          <text>gestante</text>
        </inputExpression>
      </input>

      <input id="Input_5" label="Laudo Medico Anexado">
        <inputExpression id="InputExpression_5" typeRef="boolean">
          <text>laudoMedicoAnexado</text>
        </inputExpression>
      </input>

      <input id="Input_6" label="Dias desde Ultimo Exame Mesma Regiao">
        <inputExpression id="InputExpression_6" typeRef="integer">
          <text>ultimoExameMesmaRegiaoDias</text>
        </inputExpression>
      </input>

      <input id="Input_7" label="Frequencia Anual do Exame">
        <inputExpression id="InputExpression_7" typeRef="integer">
          <text>frequenciaAnualExame</text>
        </inputExpression>
      </input>

      <output id="Output_1" label="Resultado" name="resultado" typeRef="string">
        <outputValues id="OutputValues_1">
          <text>"Aprovado", "Reprovado", "Pendente"</text>
        </outputValues>
      </output>

      <output id="Output_2" label="Observacao" name="observacao" typeRef="string"/>

      <output id="Output_3" label="Fundamentacao" name="fundamentacao" typeRef="string"/>
      <output id="Output_alertasDesperdicio" name="alertasDesperdicio" typeRef="string">
        <outputValues><text>"NENHUM","DUP","FREQ","ESC","DOC","PROT","MULTI"</text></outputValues>
      </output>
      <output id="Output_acaoRecomendada" name="acaoRecomendada" typeRef="string">
        <outputValues><text>"APROVAR","NEGAR","SOLICITAR_INFO","AGUARDAR_PRAZO","SUGERIR_ALTERNATIVA"</text></outputValues>
      </output>

      <!-- WASTE DETECTION: DUP - Duplicidade -->
      <rule id="Rule_DUP_40808041">
        <description>TC mesma regiao em menos de 90 dias - Possivel duplicidade</description>
        <inputEntry id="InputEntry_DUP_1"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_DUP_2"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_DUP_3"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_DUP_4"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_DUP_5"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_DUP_6"><text>&lt; 90</text></inputEntry>
        <inputEntry id="InputEntry_DUP_7"><text>-</text></inputEntry>
        <outputEntry id="OutputEntry_DUP_1"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OutputEntry_DUP_2"><text>"TC de mesma regiao anatomica realizado ha menos de 90 dias. Possivel duplicidade."</text></outputEntry>
        <outputEntry id="OutputEntry_DUP_3"><text>"Choosing Wisely Brazil 2023 / CBR - TC repetida em intervalo inferior ao recomendado (exposicao a radiacao)."</text></outputEntry>
        <outputEntry id="OutputEntry_DUP_4"><text>"DUP"</text></outputEntry>
        <outputEntry id="OutputEntry_DUP_5"><text>"NEGAR"</text></outputEntry>
      </rule>

      <!-- WASTE DETECTION: FREQ - Frequencia Excessiva -->
      <rule id="Rule_FREQ_40808041">
        <description>TC mesma regiao mais de 4 vezes ao ano - Frequencia excessiva</description>
        <inputEntry id="InputEntry_FREQ_1"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_FREQ_2"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_FREQ_3"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_FREQ_4"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_FREQ_5"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_FREQ_6"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_FREQ_7"><text>&gt; 4</text></inputEntry>
        <outputEntry id="OutputEntry_FREQ_1"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OutputEntry_FREQ_2"><text>"Frequencia anual excede limite de 4 exames/ano para TC. Possivel uso excessivo."</text></outputEntry>
        <outputEntry id="OutputEntry_FREQ_3"><text>"ACR Appropriateness Criteria 2024 - TC limitada a 4/ano por exposicao cumulativa a radiacao."</text></outputEntry>
        <outputEntry id="OutputEntry_FREQ_4"><text>"FREQ"</text></outputEntry>
        <outputEntry id="OutputEntry_FREQ_5"><text>"NEGAR"</text></outputEntry>
      </rule>

      <!-- CONTRAINDICATION RULES -->
      <rule id="Rule_Contraindicacao_1">
        <description>Gestante - Contraindicacao para exame com radiacao</description>
        <inputEntry id="InputEntry_C1_1">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_C1_2">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_C1_3">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_C1_4">
          <text>true</text>
        </inputEntry>
        <inputEntry id="InputEntry_C1_5">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_C1_6"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_C1_7"><text>-</text></inputEntry>
        <outputEntry id="OutputEntry_C1_1">
          <text>"Reprovado"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_C1_2">
          <text>"Contraindicacao: Gestante. Tomografia envolve exposicao a radiacao ionizante."</text>
        </outputEntry>
        <outputEntry id="OutputEntry_C1_3">
          <text>"ACR Appropriateness Criteria - Tomografia contraindicada em gestantes exceto emergencias."</text>
        </outputEntry>
        <outputEntry id="OutputEntry_Rule_Contraindicacao_1_4"><text>"PROT"</text></outputEntry>
        <outputEntry id="OutputEntry_Rule_Contraindicacao_1_5"><text>"NEGAR"</text></outputEntry>
      </rule>

      <rule id="Rule_Contraindicacao_2">
        <description>Laudo medico nao anexado</description>
        <inputEntry id="InputEntry_C2_1">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_C2_2">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_C2_3">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_C2_4">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_C2_5">
          <text>false</text>
        </inputEntry>
        <inputEntry id="InputEntry_C2_6"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_C2_7"><text>-</text></inputEntry>
        <outputEntry id="OutputEntry_C2_1">
          <text>"Reprovado"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_C2_2">
          <text>"Documentacao incompleta: Laudo medico solicitante nao anexado."</text>
        </outputEntry>
        <outputEntry id="OutputEntry_C2_3">
          <text>"ANS RN 465/2021 - Exige laudo medico para autorizacao de tomografias."</text>
        </outputEntry>
        <outputEntry id="OutputEntry_Rule_Contraindicacao_2_4"><text>"DOC"</text></outputEntry>
        <outputEntry id="OutputEntry_Rule_Contraindicacao_2_5"><text>"NEGAR"</text></outputEntry>
      </rule>

      <!-- APPROVAL RULES -->
      <rule id="Rule_Aprovado_1">
        <description>Solicitacao com indicacao clinica adequada</description>
        <inputEntry id="InputEntry_A1_1">
          <text>not(null)</text>
        </inputEntry>
        <inputEntry id="InputEntry_A1_2">
          <text>not(null)</text>
        </inputEntry>
        <inputEntry id="InputEntry_A1_3">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_A1_4">
          <text>false</text>
        </inputEntry>
        <inputEntry id="InputEntry_A1_5">
          <text>true</text>
        </inputEntry>
        <inputEntry id="InputEntry_A1_6"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_A1_7"><text>-</text></inputEntry>
        <outputEntry id="OutputEntry_A1_1">
          <text>"Aprovado"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_A1_2">
          <text>"Exame aprovado. Indicacao clinica adequada e documentacao completa."</text>
        </outputEntry>
        <outputEntry id="OutputEntry_A1_3">
          <text>"ACR Appropriateness Criteria - Tomografia de Cranio com Contraste indicado para investigacao diagnostica."</text>
        </outputEntry>
        <outputEntry id="OutputEntry_Rule_Aprovado_1_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OutputEntry_Rule_Aprovado_1_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <!-- FALLBACK RULE -->
      <rule id="Rule_Fallback_40808041">
        <description>Criterios automaticos nao satisfeitos - Requer avaliacao manual</description>
        <inputEntry id="InputEntry_F_1">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_F_2">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_F_3">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_F_4">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_F_5">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_F_6"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_F_7"><text>-</text></inputEntry>
        <outputEntry id="OutputEntry_F_1">
          <text>"Pendente"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_F_2">
          <text>"Aguardando avaliacao manual por auditor medico. Criterios automaticos nao satisfeitos."</text>
        </outputEntry>
        <outputEntry id="OutputEntry_F_3">
          <text>"Verificar: diagnostico CID-10, indicacao clinica, documentacao anexada, contraindicacoes."</text>
        </outputEntry>
        <outputEntry id="OutputEntry_Rule_Fallback_40808041_4"><text>"DOC"</text></outputEntry>
        <outputEntry id="OutputEntry_Rule_Fallback_40808041_5"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>

    </decisionTable>
  </decision>

  <dmndi:DMNDI>
    <dmndi:DMNDiagram id="DMNDiagram_40808041">
      <dmndi:DMNShape id="DMNShape_Decision_40808041" dmnElementRef="Decision_40808041">
        <dc:Bounds height="80" width="180" x="160" y="100"/>
      </dmndi:DMNShape>
    </dmndi:DMNDiagram>
  </dmndi:DMNDI>

</definitions>
