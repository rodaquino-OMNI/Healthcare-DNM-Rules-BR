<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="https://www.omg.org/spec/DMN/20191111/MODEL/" xmlns:dmndi="https://www.omg.org/spec/DMN/20191111/DMNDI/" xmlns:dc="http://www.omg.org/spec/DMN/20180521/DC/" xmlns:modeler="http://camunda.org/schema/modeler/1.0" id="Definitions_OVER003" name="DRD" namespace="http://camunda.org/schema/1.0/dmn" exporter="Camunda Modeler" exporterVersion="5.0.0" modeler:executionPlatform="Camunda Cloud" modeler:executionPlatformVersion="8.0.0">
  <decision id="Decision_OVER003" name="OVER-003: Critérios de Admissão em UTI">
    <decisionTable id="DecisionTable_OVER003" hitPolicy="FIRST">
      <input id="Input_apacheScore" label="APACHE II Score">
        <inputExpression id="InputExpression_apacheScore" typeRef="number">
          <text>apacheScore</text>
        </inputExpression>
      </input>
      <input id="Input_sofaScore" label="SOFA Score">
        <inputExpression id="InputExpression_sofaScore" typeRef="number">
          <text>sofaScore</text>
        </inputExpression>
      </input>
      <input id="Input_instabilidadeHemodinamica" label="Instabilidade Hemodinâmica">
        <inputExpression id="InputExpression_instabilidadeHemodinamica" typeRef="boolean">
          <text>instabilidadeHemodinamica</text>
        </inputExpression>
      </input>
      <input id="Input_suporteVentilatório" label="Suporte Ventilatório Necessário">
        <inputExpression id="InputExpression_suporteVentilatorio" typeRef="boolean">
          <text>suporteVentilatorio</text>
        </inputExpression>
      </input>
      <output id="Output_resultado" label="Resultado" name="resultado" typeRef="string">
        <outputValues id="UnaryTests_resultado">
          <text>"Aprovado","Reprovado","Pendente"</text>
        </outputValues>
      </output>
      <output id="Output_observacao" label="Observação" name="observacao" typeRef="string" />
      <output id="Output_fundamentacao" label="Fundamentação" name="fundamentacao" typeRef="string" />
      <!-- Output 4: Alertas de Desperdicio -->
      <output id="Output_alertasDesperdicio" label="Alertas de Desperdicio" name="alertasDesperdicio" typeRef="string">
        <outputValues id="OutputValues_alertasDesperdicio">
          <text>"NENHUM","DUP","FREQ","ESC","DOC","PROT","MULTI"</text>
        </outputValues>
      </output>

      <!-- Output 5: Acao Recomendada -->
      <output id="Output_acaoRecomendada" label="Acao Recomendada" name="acaoRecomendada" typeRef="string">
        <outputValues id="OutputValues_acaoRecomendada">
          <text>"APROVAR","NEGAR","SOLICITAR_INFO","AGUARDAR_PRAZO","SUGERIR_ALTERNATIVA"</text>
        </outputValues>
      </output>


      <!-- APROVADO: Critérios graves para UTI -->
      <rule id="DecisionRule_R001">
        <inputEntry id="UnaryTests_R001_apache">
          <text>&gt;= 25</text>
        </inputEntry>
        <inputEntry id="UnaryTests_R001_sofa">
          <text>-</text>
        </inputEntry>
        <inputEntry id="UnaryTests_R001_hemodinamica">
          <text>-</text>
        </inputEntry>
        <inputEntry id="UnaryTests_R001_ventilatorio">
          <text>-</text>
        </inputEntry>
        <outputEntry id="LiteralExpression_R001_resultado">
          <text>"Aprovado"</text>
        </outputEntry>
        <outputEntry id="LiteralExpression_R001_observacao">
          <text>"APACHE II ≥25: risco de mortalidade >50%. Admissão em UTI indicada"</text>
        </outputEntry>
        <outputEntry id="LiteralExpression_R001_fundamentacao">
          <text>"Diretrizes AMIB: APACHE II ≥25 indica alta gravidade e necessidade de monitoramento intensivo"</text>
        </outputEntry>
        <outputEntry id="OE_DecisionRule_R001_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_DecisionRule_R001_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <!-- APROVADO: SOFA alto ou disfunção orgânica -->
      <rule id="DecisionRule_R002">
        <inputEntry id="UnaryTests_R002_apache">
          <text>-</text>
        </inputEntry>
        <inputEntry id="UnaryTests_R002_sofa">
          <text>&gt;= 10</text>
        </inputEntry>
        <inputEntry id="UnaryTests_R002_hemodinamica">
          <text>-</text>
        </inputEntry>
        <inputEntry id="UnaryTests_R002_ventilatorio">
          <text>-</text>
        </inputEntry>
        <outputEntry id="LiteralExpression_R002_resultado">
          <text>"Aprovado"</text>
        </outputEntry>
        <outputEntry id="LiteralExpression_R002_observacao">
          <text>"SOFA ≥10: disfunção orgânica múltipla. Admissão em UTI indicada"</text>
        </outputEntry>
        <outputEntry id="LiteralExpression_R002_fundamentacao">
          <text>"SOFA ≥10 correlaciona-se com mortalidade >50% em sepse/choque séptico (Sepsis-3 Consensus)"</text>
        </outputEntry>
        <outputEntry id="OE_DecisionRule_R002_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_DecisionRule_R002_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <!-- APROVADO: Instabilidade hemodinâmica crítica -->
      <rule id="DecisionRule_R003">
        <inputEntry id="UnaryTests_R003_apache">
          <text>[15..25)</text>
        </inputEntry>
        <inputEntry id="UnaryTests_R003_sofa">
          <text>-</text>
        </inputEntry>
        <inputEntry id="UnaryTests_R003_hemodinamica">
          <text>true</text>
        </inputEntry>
        <inputEntry id="UnaryTests_R003_ventilatorio">
          <text>-</text>
        </inputEntry>
        <outputEntry id="LiteralExpression_R003_resultado">
          <text>"Aprovado"</text>
        </outputEntry>
        <outputEntry id="LiteralExpression_R003_observacao">
          <text>"Instabilidade hemodinâmica com APACHE 15-24. Necessidade de vasopressores/monitoramento intensivo"</text>
        </outputEntry>
        <outputEntry id="LiteralExpression_R003_fundamentacao">
          <text>"AMIB: Instabilidade hemodinâmica (PAM <65mmHg, uso de vasopressores) é critério absoluto para UTI"</text>
        </outputEntry>
        <outputEntry id="OE_DecisionRule_R003_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_DecisionRule_R003_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <!-- APROVADO: Suporte ventilatório invasivo -->
      <rule id="DecisionRule_R004">
        <inputEntry id="UnaryTests_R004_apache">
          <text>-</text>
        </inputEntry>
        <inputEntry id="UnaryTests_R004_sofa">
          <text>-</text>
        </inputEntry>
        <inputEntry id="UnaryTests_R004_hemodinamica">
          <text>-</text>
        </inputEntry>
        <inputEntry id="UnaryTests_R004_ventilatorio">
          <text>true</text>
        </inputEntry>
        <outputEntry id="LiteralExpression_R004_resultado">
          <text>"Aprovado"</text>
        </outputEntry>
        <outputEntry id="LiteralExpression_R004_observacao">
          <text>"Necessidade de ventilação mecânica invasiva. Admissão em UTI indicada"</text>
        </outputEntry>
        <outputEntry id="LiteralExpression_R004_fundamentacao">
          <text>"Ventilação mecânica invasiva requer monitoramento em UTI para ajustes ventilatórios e prevenção de VILI"</text>
        </outputEntry>
        <outputEntry id="OE_DecisionRule_R004_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_DecisionRule_R004_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <!-- REPROVADO: Scores baixos sem critérios críticos -->
      <rule id="DecisionRule_R005">
        <inputEntry id="UnaryTests_R005_apache">
          <text>&lt; 10</text>
        </inputEntry>
        <inputEntry id="UnaryTests_R005_sofa">
          <text>&lt; 4</text>
        </inputEntry>
        <inputEntry id="UnaryTests_R005_hemodinamica">
          <text>false</text>
        </inputEntry>
        <inputEntry id="UnaryTests_R005_ventilatorio">
          <text>false</text>
        </inputEntry>
        <outputEntry id="LiteralExpression_R005_resultado">
          <text>"Reprovado"</text>
        </outputEntry>
        <outputEntry id="LiteralExpression_R005_observacao">
          <text>"Scores de baixa gravidade sem instabilidade. Cuidados em enfermaria apropriados"</text>
        </outputEntry>
        <outputEntry id="LiteralExpression_R005_fundamentacao">
          <text>"APACHE <10 e SOFA <4 indicam baixo risco. Admissão em UTI não justificada (uso excessivo de recursos)"</text>
        </outputEntry>
        <outputEntry id="OE_DecisionRule_R005_4"><text>"PROT"</text></outputEntry>
        <outputEntry id="OE_DecisionRule_R005_5"><text>"NEGAR"</text></outputEntry>
      </rule>

      <!-- PENDENTE: Faixa intermediária requer avaliação intensivista -->
      <rule id="DecisionRule_R006">
        <inputEntry id="UnaryTests_R006_apache">
          <text>[10..15)</text>
        </inputEntry>
        <inputEntry id="UnaryTests_R006_sofa">
          <text>[4..10)</text>
        </inputEntry>
        <inputEntry id="UnaryTests_R006_hemodinamica">
          <text>false</text>
        </inputEntry>
        <inputEntry id="UnaryTests_R006_ventilatorio">
          <text>false</text>
        </inputEntry>
        <outputEntry id="LiteralExpression_R006_resultado">
          <text>"Pendente"</text>
        </outputEntry>
        <outputEntry id="LiteralExpression_R006_observacao">
          <text>"Faixa intermediária de gravidade. Avaliação por intensivista recomendada"</text>
        </outputEntry>
        <outputEntry id="LiteralExpression_R006_fundamentacao">
          <text>"APACHE 10-15 indica risco moderado (10-25% mortalidade). Considerar unidade intermediária ou monitoramento em enfermaria"</text>
        </outputEntry>
        <outputEntry id="OE_DecisionRule_R006_4"><text>"DOC"</text></outputEntry>
        <outputEntry id="OE_DecisionRule_R006_5"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>

      <!-- FALLBACK -->
      <rule id="DecisionRule_Fallback">
        <inputEntry id="UnaryTests_Fallback_apache">
          <text>-</text>
        </inputEntry>
        <inputEntry id="UnaryTests_Fallback_sofa">
          <text>-</text>
        </inputEntry>
        <inputEntry id="UnaryTests_Fallback_hemodinamica">
          <text>-</text>
        </inputEntry>
        <inputEntry id="UnaryTests_Fallback_ventilatorio">
          <text>-</text>
        </inputEntry>
        <outputEntry id="LiteralExpression_Fallback_resultado">
          <text>"Pendente"</text>
        </outputEntry>
        <outputEntry id="LiteralExpression_Fallback_observacao">
          <text>"Análise manual necessária: dados clínicos insuficientes para decisão automatizada"</text>
        </outputEntry>
        <outputEntry id="LiteralExpression_Fallback_fundamentacao">
          <text>"Avaliação presencial por intensivista requerida"</text>
        </outputEntry>
        <outputEntry id="OE_DecisionRule_Fallback_4"><text>"DOC"</text></outputEntry>
        <outputEntry id="OE_DecisionRule_Fallback_5"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>
    </decisionTable>
  </decision>

  <dmndi:DMNDI>
    <dmndi:DMNDiagram>
      <dmndi:DMNShape dmnElementRef="Decision_OVER003">
        <dc:Bounds height="80" width="180" x="160" y="100" />
      </dmndi:DMNShape>
    </dmndi:DMNDiagram>
  </dmndi:DMNDI>
</definitions>
