<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="https://www.omg.org/spec/DMN/20191111/MODEL/"
             xmlns:dmndi="https://www.omg.org/spec/DMN/20191111/DMNDI/"
             xmlns:dc="http://www.omg.org/spec/DD/20100524/DC/"
             xmlns:di="http://www.omg.org/spec/DD/20100524/DI/"
             id="Definitions_TUSS_CODE"
             name="PROCEDURE_NAME"
             namespace="http://camunda.org/schema/1.0/dmn"
             exporter="Camunda Modeler"
             exporterVersion="5.0.0">
  <!--
    TUSS TUSS_CODE - PROCEDURE_NAME
    Versao: 1.0.0 (2026-02-06)
    Especialidade: SPECIALTY_NAME
    Categoria: Rehabilitation Therapy

    Indicacoes Clinicas:
    - Diagnostico funcional confirmado com limitacao funcional mensuravel [escala/criterio]
    - Objetivo terapeutico definido e mensuravel com meta funcional especifica
    - Frequencia adequada conforme diretriz: [X sessoes/semana por Y semanas]

    Contraindicacoes:
    - Ausencia de deficit funcional mensuravel
    - Frequencia solicitada incompativel com diretriz clinica
    - [Contraindicacao especifica 3]

    Documentacao Obrigatoria:
    - Avaliacao fisiatrica ou de especialista com objetivo terapeutico
    - Escala funcional de baseline documentada
    - Plano terapeutico com frequencia e duracao
    - Justificativa para frequencia solicitada
    - [Documento especifico adicional]

    Referencias Normativas:
    - DUT ANS 2024 - Diretrizes para Reabilitacao
    - RN 465/2021 - Rol de Procedimentos em Reabilitacao
    - ABRAFISM - Diretrizes de Medicina Fisica e Reabilitacao
    - [Protocolo clinico especifico]
  -->

  <decision id="Decision_TUSS_CODE" name="Criterios de Autorizacao - PROCEDURE_NAME">
    <decisionTable id="DecisionTable_TUSS_CODE" hitPolicy="FIRST">

      <!-- Input 1: Diagnostico Funcional -->
      <input id="Input_diagnosticoFuncional" label="Diagnostico Funcional (CID-10)">
        <inputExpression id="InputExpr_diagnosticoFuncional" typeRef="string">
          <text>diagnosticoFuncional</text>
        </inputExpression>
        <inputValues id="InputValues_diagnosticoFuncional">
          <text>"REHAB_INDICATION_1","REHAB_INDICATION_2","REHAB_INDICATION_3"</text>
        </inputValues>
      </input>

      <!-- Input 2: Objetivo Terapeutico -->
      <input id="Input_objetivoTerapeutico" label="Objetivo Terapeutico Definido">
        <inputExpression id="InputExpr_objetivoTerapeutico" typeRef="string">
          <text>objetivoTerapeutico</text>
        </inputExpression>
        <inputValues id="InputValues_objetivoTerapeutico">
          <text>"RECUPERACAO_FUNCIONAL_GLOBAL","GANHO_ADM","FORTALECIMENTO_MUSCULAR","REDUCAO_DOR","TREINO_MARCHA","REINTEGRACAO_AVD"</text>
        </inputValues>
      </input>

      <!-- Input 3: Frequencia Solicitada -->
      <input id="Input_frequenciaSolicitada" label="Frequencia Semanal Solicitada">
        <inputExpression id="InputExpr_frequencia" typeRef="string">
          <text>frequenciaSolicitada</text>
        </inputExpression>
        <inputValues id="InputValues_frequencia">
          <text>"1X_SEMANA","2X_SEMANA","3X_SEMANA","5X_SEMANA","DIARIA"</text>
        </inputValues>
      </input>

      <!-- Input 4: Avaliacao Fisiatrica -->
      <input id="Input_avaliacaoFisiatrica" label="Avaliacao Fisiatrica/Especialista">
        <inputExpression id="InputExpr_avaliacao" typeRef="boolean">
          <text>avaliacaoFisiatrica</text>
        </inputExpression>
      </input>

      <!-- Output 1: Resultado -->
      <output id="Output_resultado" label="Resultado" name="resultado" typeRef="string">
        <outputValues id="OutputValues_resultado">
          <text>"Aprovado","Reprovado","Pendente"</text>
        </outputValues>
      </output>

      <!-- Output 2: Observacao -->
      <output id="Output_observacao" label="Observacao" name="observacao" typeRef="string" />

      <!-- Output 3: Fundamentacao -->
      <output id="Output_fundamentacao" label="Fundamentacao Legal" name="fundamentacao" typeRef="string" />

      <!-- Output 4: Alertas de Desperdicio -->
      <output id="Output_alertasDesperdicio" label="Alertas de Desperdicio" name="alertasDesperdicio" typeRef="string">
        <outputValues id="OutputValues_alertasDesperdicio">
          <text>"NENHUM","DUP","FREQ","ESC","DOC","PROT","MULTI"</text>
        </outputValues>
      </output>

      <!-- Output 5: Acao Recomendada -->
      <output id="Output_acaoRecomendada" label="Acao Recomendada" name="acaoRecomendada" typeRef="string">
        <outputValues id="OutputValues_acaoRecomendada">
          <text>"APROVAR","NEGAR","SOLICITAR_INFO","AGUARDAR_PRAZO","SUGERIR_ALTERNATIVA"</text>
        </outputValues>
      </output>

      <!-- ============================================== -->
      <!-- CONTRAINDICATION: Sem avaliacao fisiatrica    -->
      <!-- MUST COME FIRST for global denial             -->
      <!-- ============================================== -->
      <rule id="Rule_TUSS_CODE_Contraindicacao_SemAvaliacao">
        <description>Contraindicacao - Documentacao obrigatoria ausente (avaliacao fisiatrica)</description>
        <inputEntry id="IE_Contra1_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Contra1_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Contra1_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Contra1_4"><text>false</text></inputEntry>
        <outputEntry id="OE_Contra1_1"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OE_Contra1_2"><text>"Avaliacao fisiatrica ou de especialista com objetivo terapeutico eh documentacao obrigatoria"</text></outputEntry>
        <outputEntry id="OE_Contra1_3"><text>"RN 465/2021 Art. 5 - Documentacao Minima para Reabilitacao"</text></outputEntry>
        <outputEntry id="OE_Contra1_4"><text>"DOC"</text></outputEntry>
        <outputEntry id="OE_Contra1_5"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>

      <!-- ============================================== -->
      <!-- CONTRAINDICATION: Frequencia excessiva        -->
      <!-- ============================================== -->
      <rule id="Rule_TUSS_CODE_Contraindicacao_FrequenciaExcessiva">
        <description>Contraindicacao - Frequencia solicitada acima da diretriz clinica</description>
        <inputEntry id="IE_Contra2_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Contra2_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Contra2_3"><text>"DIARIA"</text></inputEntry>
        <inputEntry id="IE_Contra2_4"><text>true</text></inputEntry>
        <outputEntry id="OE_Contra2_1"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OE_Contra2_2"><text>"Frequencia diaria acima da diretriz clinica - requer justificativa excepcional por auditor"</text></outputEntry>
        <outputEntry id="OE_Contra2_3"><text>"DUT ANS 2024 - Limite de frequencia para reabilitacao"</text></outputEntry>
        <outputEntry id="OE_Contra2_4"><text>"FREQ"</text></outputEntry>
        <outputEntry id="OE_Contra2_5"><text>"NEGAR"</text></outputEntry>
      </rule>

      <!-- ============================================== -->
      <!-- APPROVAL: Caso agudo com frequencia 5x        -->
      <!-- ============================================== -->
      <rule id="Rule_TUSS_CODE_Aprovacao_Agudo5x">
        <description>Aprovacao prioritaria - Caso agudo com frequencia intensiva 5x/semana</description>
        <inputEntry id="IE_Aprov1_1"><text>"REHAB_INDICATION_1"</text></inputEntry>
        <inputEntry id="IE_Aprov1_2"><text>"RECUPERACAO_FUNCIONAL_GLOBAL"</text></inputEntry>
        <inputEntry id="IE_Aprov1_3"><text>"5X_SEMANA"</text></inputEntry>
        <inputEntry id="IE_Aprov1_4"><text>true</text></inputEntry>
        <outputEntry id="OE_Aprov1_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Aprov1_2"><text>"Indicacao prioritaria para caso agudo com objetivo de recuperacao funcional - frequencia intensiva 5x/semana aprovada"</text></outputEntry>
        <outputEntry id="OE_Aprov1_3"><text>"DUT ANS 2024 - Reabilitacao Intensiva Fase Aguda"</text></outputEntry>
        <outputEntry id="OE_Aprov1_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Aprov1_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <!-- ============================================== -->
      <!-- APPROVAL: Caso subagudo com frequencia 3x     -->
      <!-- ============================================== -->
      <rule id="Rule_TUSS_CODE_Aprovacao_Subagudo3x">
        <description>Aprovacao secundaria - Caso subagudo com frequencia padrao 3x/semana</description>
        <inputEntry id="IE_Aprov2_1"><text>"REHAB_INDICATION_1","REHAB_INDICATION_2"</text></inputEntry>
        <inputEntry id="IE_Aprov2_2"><text>"GANHO_ADM","FORTALECIMENTO_MUSCULAR","REDUCAO_DOR"</text></inputEntry>
        <inputEntry id="IE_Aprov2_3"><text>"3X_SEMANA"</text></inputEntry>
        <inputEntry id="IE_Aprov2_4"><text>true</text></inputEntry>
        <outputEntry id="OE_Aprov2_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Aprov2_2"><text>"Indicacao secundaria para caso subagudo com objetivo especifico - frequencia padrao 3x/semana aprovada"</text></outputEntry>
        <outputEntry id="OE_Aprov2_3"><text>"DUT ANS 2024 - Reabilitacao Fase Subaguda"</text></outputEntry>
        <outputEntry id="OE_Aprov2_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Aprov2_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <!-- ============================================== -->
      <!-- APPROVAL: Caso cronico com frequencia 2x      -->
      <!-- ============================================== -->
      <rule id="Rule_TUSS_CODE_Aprovacao_Cronico2x">
        <description>Aprovacao terciaria - Caso cronico com frequencia manutencao 2x/semana</description>
        <inputEntry id="IE_Aprov3_1"><text>"REHAB_INDICATION_2","REHAB_INDICATION_3"</text></inputEntry>
        <inputEntry id="IE_Aprov3_2"><text>"TREINO_MARCHA","REINTEGRACAO_AVD"</text></inputEntry>
        <inputEntry id="IE_Aprov3_3"><text>"2X_SEMANA"</text></inputEntry>
        <inputEntry id="IE_Aprov3_4"><text>true</text></inputEntry>
        <outputEntry id="OE_Aprov3_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Aprov3_2"><text>"Indicacao terciaria para caso cronico com objetivo de manutencao funcional - frequencia 2x/semana aprovada"</text></outputEntry>
        <outputEntry id="OE_Aprov3_3"><text>"DUT ANS 2024 - Reabilitacao Fase Cronica"</text></outputEntry>
        <outputEntry id="OE_Aprov3_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Aprov3_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <!-- ============================================== -->
      <!-- APPROVAL: Caso cronico com frequencia 1x      -->
      <!-- ============================================== -->
      <rule id="Rule_TUSS_CODE_Aprovacao_Cronico1x">
        <description>Aprovacao quaternaria - Caso cronico estavel com frequencia minima 1x/semana</description>
        <inputEntry id="IE_Aprov4_1"><text>"REHAB_INDICATION_3"</text></inputEntry>
        <inputEntry id="IE_Aprov4_2"><text>"REDUCAO_DOR","REINTEGRACAO_AVD"</text></inputEntry>
        <inputEntry id="IE_Aprov4_3"><text>"1X_SEMANA"</text></inputEntry>
        <inputEntry id="IE_Aprov4_4"><text>true</text></inputEntry>
        <outputEntry id="OE_Aprov4_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Aprov4_2"><text>"Indicacao para caso cronico estavel com objetivo de manutencao - frequencia minima 1x/semana aprovada"</text></outputEntry>
        <outputEntry id="OE_Aprov4_3"><text>"DUT ANS 2024 - Reabilitacao Manutencao Cronica"</text></outputEntry>
        <outputEntry id="OE_Aprov4_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Aprov4_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <!-- ============================================== -->
      <!-- FALLBACK RULE - Casos nao cobertos            -->
      <!-- ============================================== -->
      <rule id="Rule_Fallback_TUSS_CODE">
        <description>Regra padrao - Casos nao cobertos requerem analise manual por fisiatra ou auditor especializado</description>
        <inputEntry id="IE_Fallback_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Fallback_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Fallback_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Fallback_4"><text>-</text></inputEntry>
        <outputEntry id="OE_Fallback_1"><text>"Pendente"</text></outputEntry>
        <outputEntry id="OE_Fallback_2"><text>"Caso requer analise manual por fisiatra ou auditor especializado - criterios nao atendidos automaticamente"</text></outputEntry>
        <outputEntry id="OE_Fallback_3"><text>"Processo manual de auditoria em reabilitacao"</text></outputEntry>
        <outputEntry id="OE_Fallback_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Fallback_5"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>

    </decisionTable>
  </decision>
</definitions>
