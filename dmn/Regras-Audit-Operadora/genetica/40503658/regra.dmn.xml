<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="https://www.omg.org/spec/DMN/20191111/MODEL/"
             id="Definitions_40503658"
             name="Teste Genético TUSS 40503658"
             targetNamespace="http://camunda.org/schema/1.0/dmn">
  <!-- TUSS 4.05.03.65-8 - Teste Genético TUSS 40503658
       Versao: 2.1.0 (2026-02-07)

       Indicacoes Clinicas (DUT/ANS):
       Conforme protocolos CONITEC e indicacao medica especializada

       Contraindicacoes:
       Ausência de justificativa clínica ou critérios CONITEC

       Tipo de Teste: Análise Genética Molecular
       Metodologia: Sequenciamento / Análise Molecular

       Referencias:
       - ANS/TUSS 2024
       - CONITEC - Protocolos de Genetica Medica
       - Sociedade Brasileira de Genetica Medica (SBGM)
       - CONITEC - Protocolos de Genetica / SBGM 2024

       Observacoes:
       - Historico familiar avaliado
       - Testes anteriores considerados
       - Justificativa clinica obrigatoria
       - Aconselhamento genetico recomendado
       - Prazo de liberacao: 30-45 dias úteis
  -->

  <decision id="Decision_40503658" name="Indicacao para Teste Genético TUSS 40503658">
    <decisionTable id="DecisionTable_40503658" hitPolicy="FIRST">

      <!-- Input 1: Suspected Diagnosis -->
      <input id="Input_1" label="Diagnostico Suspeita">
        <inputExpression id="InputExpression_1" typeRef="string">
          <text>diagnosticoSuspeita</text>
        </inputExpression>
      </input>

      <!-- Input 2: Family History -->
      <input id="Input_2" label="Historico Familiar">
        <inputExpression id="InputExpression_2" typeRef="boolean">
          <text>historicoFamiliar</text>
        </inputExpression>
      </input>

      <!-- Input 3: Previous Tests -->
      <input id="Input_3" label="Testes Anteriores">
        <inputExpression id="InputExpression_3" typeRef="string">
          <text>testesAnteriores</text>
        </inputExpression>
      </input>

      <!-- Input 4: Medical Justification -->
      <input id="Input_4" label="Justificativa Medica">
        <inputExpression id="InputExpression_4" typeRef="boolean">
          <text>justificativaMedica</text>
        </inputExpression>
      </input>

      <!-- Output 1: Result -->
      <output id="Output_1" label="Resultado" name="resultado" typeRef="string">
        <outputValues>
          <text>"Aprovado","Reprovado","Pendente"</text>
        </outputValues>
      </output>

      <!-- Output 2: Clinical Observation -->
      <output id="Output_2" label="Observacao" name="observacao" typeRef="string"/>

      <!-- Output 3: Clinical Foundation -->
      <output id="Output_3" label="Fundamentacao" name="fundamentacao" typeRef="string"/>
      <output id="Output_alertasDesperdicio" name="alertasDesperdicio" typeRef="string">
        <outputValues><text>"NENHUM","DUP","FREQ","ESC","DOC","PROT","MULTI"</text></outputValues>
      </output>
      <output id="Output_acaoRecomendada" name="acaoRecomendada" typeRef="string">
        <outputValues><text>"APROVAR","NEGAR","SOLICITAR_INFO","AGUARDAR_PRAZO","SUGERIR_ALTERNATIVA"</text></outputValues>
      </output>

      <!-- CONTRAINDICATIONS SECTION -->
      <rule id="Rule_Contraindicacao_SemJustificativa">
        <description>Ausencia de justificativa medica para teste genetico</description>
        <inputEntry id="InputEntry_Contra_1_1"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_Contra_1_2"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_Contra_1_3"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_Contra_1_4"><text>false</text></inputEntry>
        <outputEntry id="OutputEntry_Contra_1_1"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OutputEntry_Contra_1_2"><text>"Ausencia de justificativa clinica documentada para solicitacao de teste genetico Teste Genético TUSS 40503658."</text></outputEntry>
        <outputEntry id="OutputEntry_Contra_1_3"><text>"CONITEC - Testes geneticos requerem justificativa clinica fundamentada. ANS RN 465/2021 Art. 16 - Obrigatoriedade de documentacao clinica. Metodologia: Sequenciamento / Análise Molecular"</text></outputEntry>
        <outputEntry id="OutputEntry_Rule_Contraindicacao_SemJustificativa_4"><text>"DOC"</text></outputEntry>
        <outputEntry id="OutputEntry_Rule_Contraindicacao_SemJustificativa_5"><text>"NEGAR"</text></outputEntry>
      </rule>

      <rule id="Rule_Contraindicacao_TesteRedundante">
        <description>Teste genetico ja realizado com resultado conclusivo</description>
        <inputEntry id="InputEntry_Contra_2_1"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_Contra_2_2"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_Contra_2_3"><text>"conclusivo"</text></inputEntry>
        <inputEntry id="InputEntry_Contra_2_4"><text>true</text></inputEntry>
        <outputEntry id="OutputEntry_Contra_2_1"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OutputEntry_Contra_2_2"><text>"Teste genetico Teste Genético TUSS 40503658 ja realizado com resultado conclusivo. Repeticao nao justificada clinicamente."</text></outputEntry>
        <outputEntry id="OutputEntry_Contra_2_3"><text>"CONITEC - Evitar redundancia de testes geneticos. Considerar resultado anterior valido salvo nova indicacao clinica documentada. Custo-efetividade em medicina genetica."</text></outputEntry>
        <outputEntry id="OutputEntry_Rule_Contraindicacao_TesteRedundante_4"><text>"PROT"</text></outputEntry>
        <outputEntry id="OutputEntry_Rule_Contraindicacao_TesteRedundante_5"><text>"NEGAR"</text></outputEntry>
      </rule>

      <rule id="Rule_Contraindicacao_SemIndicacaoClinica">
        <description>Ausencia de criterios clinicos CONITEC para teste genetico</description>
        <inputEntry id="InputEntry_Contra_3_1"><text>"screening_populacional","ausencia_criterios_conitec"</text></inputEntry>
        <inputEntry id="InputEntry_Contra_3_2"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_Contra_3_3"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_Contra_3_4"><text>-</text></inputEntry>
        <outputEntry id="OutputEntry_Contra_3_1"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OutputEntry_Contra_3_2"><text>"Condicao clinica nao atende aos criterios CONITEC para indicacao de Teste Genético TUSS 40503658."</text></outputEntry>
        <outputEntry id="OutputEntry_Contra_3_3"><text>"CONITEC - Teste genetico Teste Genético TUSS 40503658 nao indicado para a hipotese diagnostica apresentada. Considerar metodos diagnosticos alternativos. Indicacoes validas: Conforme protocolos CONITEC e indicacao medica especializada"</text></outputEntry>
        <outputEntry id="OutputEntry_Rule_Contraindicacao_SemIndicacaoClinica_4"><text>"PROT"</text></outputEntry>
        <outputEntry id="OutputEntry_Rule_Contraindicacao_SemIndicacaoClinica_5"><text>"NEGAR"</text></outputEntry>
      </rule>

      <!-- APPROVAL SECTION -->
      <rule id="Rule_Aprovado_IndicacaoClinicaComHistorico">
        <description>Indicacao clinica com historico familiar positivo</description>
        <inputEntry id="InputEntry_Aprov_1_1"><text>"indicacao_genetica_documentada","historico_familiar_positivo","anomalias_congenitas"</text></inputEntry>
        <inputEntry id="InputEntry_Aprov_1_2"><text>true</text></inputEntry>
        <inputEntry id="InputEntry_Aprov_1_3"><text>"nenhum","inconclusivo"</text></inputEntry>
        <inputEntry id="InputEntry_Aprov_1_4"><text>true</text></inputEntry>
        <outputEntry id="OutputEntry_Aprov_1_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OutputEntry_Aprov_1_2"><text>"Teste genetico Teste Genético TUSS 40503658 autorizado. Historico familiar positivo e indicacao clinica documentada conforme protocolos CONITEC."</text></outputEntry>
        <outputEntry id="OutputEntry_Aprov_1_3"><text>"Remuneracao conforme ANS/TUSS 4.05.03.65-8. Metodologia: Sequenciamento / Análise Molecular. Aconselhamento genetico recomendado pre e pos-teste. Prazo: 30-45 dias úteis. Ref: CONITEC - Protocolos de Genetica / SBGM 2024"</text></outputEntry>
        <outputEntry id="OutputEntry_Rule_Aprovado_IndicacaoClinicaComHistorico_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OutputEntry_Rule_Aprovado_IndicacaoClinicaComHistorico_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <rule id="Rule_Aprovado_IndicacaoClinicaSemHistorico">
        <description>Indicacao clinica sem historico familiar mas com criterios CONITEC</description>
        <inputEntry id="InputEntry_Aprov_2_1"><text>"indicacao_genetica_documentada","historico_familiar_positivo","anomalias_congenitas"</text></inputEntry>
        <inputEntry id="InputEntry_Aprov_2_2"><text>false</text></inputEntry>
        <inputEntry id="InputEntry_Aprov_2_3"><text>"nenhum","inconclusivo"</text></inputEntry>
        <inputEntry id="InputEntry_Aprov_2_4"><text>true</text></inputEntry>
        <outputEntry id="OutputEntry_Aprov_2_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OutputEntry_Aprov_2_2"><text>"Teste genetico Teste Genético TUSS 40503658 autorizado. Indicacao clinica documentada conforme criterios CONITEC independente de historico familiar."</text></outputEntry>
        <outputEntry id="OutputEntry_Aprov_2_3"><text>"Remuneracao conforme ANS/TUSS 4.05.03.65-8. Metodologia: Sequenciamento / Análise Molecular. Aconselhamento genetico recomendado. Prazo: 30-45 dias úteis. Indicacoes: Conforme protocolos CONITEC e indicacao medica especializada"</text></outputEntry>
        <outputEntry id="OutputEntry_Rule_Aprovado_IndicacaoClinicaSemHistorico_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OutputEntry_Rule_Aprovado_IndicacaoClinicaSemHistorico_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <!-- FALLBACK RULE - MUST BE LAST -->
      <rule id="Rule_Fallback_40503658">
        <description>Dados insuficientes para decisao automatica - requer analise especializada</description>
        <inputEntry id="InputEntry_Fallback_1"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_Fallback_2"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_Fallback_3"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_Fallback_4"><text>-</text></inputEntry>
        <outputEntry id="OutputEntry_Fallback_1"><text>"Pendente"</text></outputEntry>
        <outputEntry id="OutputEntry_Fallback_2"><text>"Requer analise manual por auditor medico com especializacao em Genetica Medica ou aconselhador genetico."</text></outputEntry>
        <outputEntry id="OutputEntry_Fallback_3"><text>"Documentacao incompleta ou criterios nao claramente definidos. Encaminhar para comite de genetica medica para avaliacao de indicacao clinica. Metodologia: Sequenciamento / Análise Molecular"</text></outputEntry>
        <outputEntry id="OutputEntry_Rule_Fallback_40503658_4"><text>"DOC"</text></outputEntry>
        <outputEntry id="OutputEntry_Rule_Fallback_40503658_5"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>

    </decisionTable>
  </decision>
</definitions>
