<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="https://www.omg.org/spec/DMN/20191111/MODEL/"
             xmlns:dmndi="https://www.omg.org/spec/DMN/20191111/DMNDI/"
             xmlns:dc="http://www.omg.org/spec/DD/20100524/DC/"
             xmlns:di="http://www.omg.org/spec/DD/20100524/DI/"
             id="Definitions_30204011"
             name="Biópsia de glândula salivar"
             namespace="http://camunda.org/schema/1.0/dmn"
             exporter="Camunda Modeler"
             exporterVersion="5.0.0">
  <!--
    TUSS 30204011 - Biópsia de glândula salivar
    Versao: 3.0.0 (2026-02-07)
    Especialidade: Cabeca E Pescoco Cirurgia
    Categoria: Procedimentos Cirurgicos

    Indicacoes Clinicas (DUT ANS 2024):
- Falha documentada de tratamento clinico conservador por periodo minimo de 3-6 meses
- Progressao de doenca com comprometimento funcional significativo
- Complicacoes agudas que requerem intervencao cirurgica urgente
- Risco de complicacoes graves se nao tratado cirurgicamente

    Contraindicacoes:
- Paciente com risco cirurgico ASA V sem indicacao de extrema urgencia
- Ausencia de documentacao medica obrigatoria (CID-10, laudos)
- Contraindicacoes anestesicas absolutas nao controladas
- Paciente em condicoes clinicas desfavoraveis sem otimizacao pre-operatoria

    Documentacao Obrigatoria:
    - Diagnostico confirmado (CID-10) com laudo medico detalhado
    - Classificacao de risco cirurgico (ASA I-V)
    - Comprovacao de tratamentos previos quando aplicavel
    - Laudo de indicacao cirurgica assinado por especialista
    - Termo de consentimento informado assinado

    Referencias Normativas:
    - DUT ANS 2024 - Diretrizes de Utilizacao para Procedimentos Cirurgicos
    - RN 465/2021 - Rol de Procedimentos e Eventos em Saude
    - RN 428/2017 - Regulacao de Cobertura de Procedimentos
    - Resolucao CFM pertinente a especialidade cirurgica
  -->

  <decision id="Decision_30204011" name="Criterios de Autorizacao - Biópsia de glândula salivar">
    <decisionTable id="DecisionTable_30204011" hitPolicy="FIRST">

      <!-- Input 1: Diagnostico Confirmado (CID-10) -->
      <input id="Input_diagnosticoConfirmado" label="Diagnostico Confirmado (CID-10)">
        <inputExpression id="InputExpr_diagnosticoConfirmado" typeRef="string">
          <text>diagnosticoConfirmado</text>
        </inputExpression>
        <inputValues id="InputValues_diagnosticoConfirmado">
          <text>"K00","M00","N00","C00"</text>
        </inputValues>
      </input>

      <!-- Input 2: Estadiamento/Grau (quando aplicavel) -->
      <input id="Input_estadiamento" label="Estadiamento/Grau da Patologia">
        <inputExpression id="InputExpr_estadiamento" typeRef="string">
          <text>estadiamentoTumor</text>
        </inputExpression>
        <inputValues id="InputValues_estadiamento">
          <text>"Grau_I","Grau_II","Grau_III","Grau_IV","TNM_Estadio_I","TNM_Estadio_II","TNM_Estadio_III","TNM_Estadio_IV","Nao_Aplicavel"</text>
        </inputValues>
      </input>

      <!-- Input 3: Tratamentos Previos -->
      <input id="Input_tratamentosPrevios" label="Tratamentos Previos Documentados">
        <inputExpression id="InputExpr_tratamentosPrevios" typeRef="string">
          <text>tratamentosPrevios</text>
        </inputExpression>
        <inputValues id="InputValues_tratamentosPrevios">
          <text>"Documentado","Nao_Documentado","Nao_Aplicavel","Tratamento_Clinico_Falhou","Primeira_Linha"</text>
        </inputValues>
      </input>

      <!-- Input 4: Risco Cirurgico (ASA Classification) -->
      <input id="Input_riscoCirurgico" label="Classificacao de Risco Cirurgico (ASA)">
        <inputExpression id="InputExpr_riscoCirurgico" typeRef="string">
          <text>riscoCirurgico</text>
        </inputExpression>
        <inputValues id="InputValues_riscoCirurgico">
          <text>"ASA_I","ASA_II","ASA_III","ASA_IV","ASA_V"</text>
        </inputValues>
      </input>

      <!-- Input 5: Laudo de Indicacao -->
      <input id="Input_laudoIndicacao" label="Laudo de Indicacao Cirurgica Anexado">
        <inputExpression id="InputExpr_laudoIndicacao" typeRef="boolean">
          <text>laudoIndicacao</text>
        </inputExpression>
      </input>

      <!-- Output 1: Resultado -->
      <output id="Output_resultado" label="Resultado" name="resultado" typeRef="string">
        <outputValues id="OutputValues_resultado">
          <text>"Aprovado","Reprovado","Pendente"</text>
        </outputValues>
      </output>

      <!-- Output 2: Observacao -->
      <output id="Output_observacao" label="Observacao Clinica" name="observacao" typeRef="string" />

      <!-- Output 3: Fundamentacao -->
      <output id="Output_fundamentacao" label="Fundamentacao Legal/Tecnica" name="fundamentacao" typeRef="string" />
      <!-- Output 4: Waste Alerts -->
      <output id="Output_alertasDesperdicio" name="alertasDesperdicio" typeRef="string">
        <outputValues>
          <text>"NENHUM","DUP","FREQ","ESC","DOC","PROT","MULTI"</text>
        </outputValues>
      </output>

      <!-- Output 5: Recommended Action -->
      <output id="Output_acaoRecomendada" name="acaoRecomendada" typeRef="string">
        <outputValues>
          <text>"APROVAR","NEGAR","SOLICITAR_INFO","AGUARDAR_PRAZO","SUGERIR_ALTERNATIVA"</text>
        </outputValues>
      </output>


      <!-- ============================================== -->
      <!-- CONTRAINDICATION RULES (FIRST PRIORITY)       -->
      <!-- ============================================== -->

      <rule id="Rule_30204011_Contraindicacao_RiscoProibitivo">
        <description>Contraindicacao - Risco cirurgico ASA V (proibitivo)</description>
        <inputEntry id="IE_Contra1_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Contra1_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Contra1_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Contra1_4"><text>"ASA_V"</text></inputEntry>
        <inputEntry id="IE_Contra1_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Contra1_1"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OE_Contra1_2"><text>"Paciente ASA V apresenta risco cirurgico proibitivo - procedimento contraindicado salvo situacao de extrema urgencia com consentimento documentado"</text></outputEntry>
        <outputEntry id="OE_Contra1_3"><text>"ASA Classification Guidelines - Risco Cirurgico Proibitivo"</text></outputEntry>
        <outputEntry id="IE_4"><text>"PROT"</text></outputEntry>
        <outputEntry id="IE_5"><text>"NEGAR"</text></outputEntry>
      </rule>

      <rule id="Rule_30204011_Contraindicacao_SemLaudo">
        <description>Contraindicacao - Documentacao obrigatoria ausente</description>
        <inputEntry id="IE_Contra2_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Contra2_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Contra2_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Contra2_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Contra2_5"><text>false</text></inputEntry>
        <outputEntry id="OE_Contra2_1"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OE_Contra2_2"><text>"Laudo de indicacao cirurgica com justificativa clinica detalhada eh documentacao obrigatoria para autorizacao"</text></outputEntry>
        <outputEntry id="OE_Contra2_3"><text>"RN 465/2021 Art. 5 - Documentacao Minima Obrigatoria"</text></outputEntry>
        <outputEntry id="IE_4"><text>"PROT"</text></outputEntry>
        <outputEntry id="IE_5"><text>"NEGAR"</text></outputEntry>
      </rule>

      <!-- ============================================== -->
      <!-- APPROVAL RULES (AFTER CONTRAINDICATIONS)      -->
      <!-- ============================================== -->

      <rule id="Rule_30204011_Aprovacao_Indicacao1">
        <description>Aprovacao - Falha documentada de tratamento clinico conservador por periodo minimo de 3-6 meses</description>
        <inputEntry id="IE_Aprov1_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Aprov1_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Aprov1_3"><text>"Documentado"</text></inputEntry>
        <inputEntry id="IE_Aprov1_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Aprov1_5"><text>true</text></inputEntry>
        <outputEntry id="OE_Aprov1_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Aprov1_2"><text>"Falha documentada de tratamento clinico conservador por periodo minimo de 3-6 meses - criterios tecnicos atendidos conforme DUT ANS 2024"</text></outputEntry>
        <outputEntry id="OE_Aprov1_3"><text>"DUT ANS 2024 - Indicacao cirurgica validada"</text></outputEntry>
        <outputEntry id="IE_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="IE_5"><text>"APROVAR"</text></outputEntry>
      </rule>
      <rule id="Rule_30204011_Aprovacao_Indicacao2">
        <description>Aprovacao - Progressao de doenca com comprometimento funcional significativo</description>
        <inputEntry id="IE_Aprov2_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Aprov2_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Aprov2_3"><text>"Documentado"</text></inputEntry>
        <inputEntry id="IE_Aprov2_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Aprov2_5"><text>true</text></inputEntry>
        <outputEntry id="OE_Aprov2_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Aprov2_2"><text>"Progressao de doenca com comprometimento funcional significativo - criterios tecnicos atendidos conforme DUT ANS 2024"</text></outputEntry>
        <outputEntry id="OE_Aprov2_3"><text>"DUT ANS 2024 - Indicacao cirurgica validada"</text></outputEntry>
        <outputEntry id="IE_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="IE_5"><text>"APROVAR"</text></outputEntry>
      </rule>
      <rule id="Rule_30204011_Aprovacao_Indicacao3">
        <description>Aprovacao - Complicacoes agudas que requerem intervencao cirurgica urgente</description>
        <inputEntry id="IE_Aprov3_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Aprov3_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Aprov3_3"><text>"Documentado"</text></inputEntry>
        <inputEntry id="IE_Aprov3_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Aprov3_5"><text>true</text></inputEntry>
        <outputEntry id="OE_Aprov3_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Aprov3_2"><text>"Complicacoes agudas que requerem intervencao cirurgica urgente - criterios tecnicos atendidos conforme DUT ANS 2024"</text></outputEntry>
        <outputEntry id="OE_Aprov3_3"><text>"DUT ANS 2024 - Indicacao cirurgica validada"</text></outputEntry>
        <outputEntry id="IE_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="IE_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <!-- ============================================== -->
      <!-- FALLBACK RULE - Casos nao cobertos            -->
      <!-- ============================================== -->
      <rule id="Rule_Fallback_30204011">
        <description>Regra padrao - Casos nao cobertos requerem analise manual por auditor medico especializado</description>
        <inputEntry id="IE_Fallback_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Fallback_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Fallback_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Fallback_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Fallback_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Fallback_1"><text>"Pendente"</text></outputEntry>
        <outputEntry id="OE_Fallback_2"><text>"Caso requer analise manual por auditor medico especializado - criterios de autorizacao automatica nao foram atendidos"</text></outputEntry>
        <outputEntry id="OE_Fallback_3"><text>"Processo de auditoria medica especializada conforme RN 428/2017"</text></outputEntry>
        <outputEntry id="Rule_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="Rule_5"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>

    </decisionTable>
  </decision>
</definitions>