<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="https://www.omg.org/spec/DMN/20191111/MODEL/"
             xmlns:camunda="http://camunda.org/schema/1.0/dmn"
             id="Definitions_30901074"
             name="Tratamento de Hidrocefalia"
             namespace="http://camunda.org/schema/1.0/dmn">

  <!--
    ===============================================================================
    TUSS: 30901074
    Procedimento: Tratamento de Hidrocefalia (Terceiro Ventriculostomia Endoscopica)
    Versao: 3.1.0-LEAN-TIER2
    Data: 2026-02-07
    Enriquecido: LEAN TIER-2 Anti-Desperdicio (2026-02-08)
    ===============================================================================

    INDICACOES CLINICAS (DUT/ANS):
    Hidrocefalia obstrutiva (estenose de aqueduto, tumores, cistos),
    hidrocefalia pos-hemorragica ou pos-meningite com obstrucao,
    falha ou infeccao de DVP em hidrocefalia obstrutiva

    CONTRAINDICACOES:
    Hidrocefalia comunicante pura, espaco pre-pontino inadequado,
    infeccao ativa do SNC, coagulopatia grave, anatomia desfavoravel

    DOCUMENTACAO OBRIGATORIA:
    RM de cranio com cine-flow, avaliacao do espaco pre-pontino,
    documentacao da causa da obstrucao

    REFERENCIAS TECNICAS:
    AANS/CNS ETV Guidelines 2023, SBN 2023,
    ANS RN 465/2021, DUT 2024

    ===============================================================================
  -->

  <decision id="Decision_30901074" name="Regra Clinica - Tratamento de Hidrocefalia ETV">
    <decisionTable id="DecisionTable_30901074" hitPolicy="FIRST">

      <input id="Input_condicaoPaciente" label="Condicao do Paciente" camunda:inputVariable="condicaoPaciente">
        <inputExpression id="InputExpression_condicaoPaciente" typeRef="string">
          <text>condicaoPaciente</text>
        </inputExpression>
        <inputValues id="InputValues_condicaoPaciente">
          <text>"HidroObstrutivaAqueduto","HidroObstrutivaTumoral","HidroComunicante","FalhaDVP","InfeccaoAtivaSNC"</text>
        </inputValues>
      </input>

      <input id="Input_historicoClinico" label="Historico Clinico" camunda:inputVariable="historicoClinico">
        <inputExpression id="InputExpression_historicoClinico" typeRef="string">
          <text>historicoClinico</text>
        </inputExpression>
        <inputValues id="InputValues_historicoClinico">
          <text>"Adequado","Incompleto","NaoDocumentado"</text>
        </inputValues>
      </input>

      <input id="Input_classeIndicacao" label="Classe de Indicacao (AANS/SBN)" camunda:inputVariable="classeIndicacao">
        <inputExpression id="InputExpression_classeIndicacao" typeRef="string">
          <text>classeIndicacao</text>
        </inputExpression>
        <inputValues id="InputValues_classeIndicacao">
          <text>"Classe I","Classe IIa","Classe IIb","Classe III"</text>
        </inputValues>
      </input>

      <input id="Input_examesComprobatorios" label="Exames Comprobatorios" camunda:inputVariable="examesComprobatorios">
        <inputExpression id="InputExpression_examesComprobatorios" typeRef="string">
          <text>examesComprobatorios</text>
        </inputExpression>
        <inputValues id="InputValues_examesComprobatorios">
          <text>"RMCineFlowCompleta","RMSimples","ApenasTC","SemImagem"</text>
        </inputValues>
      </input>

      <input id="Input_expectativaVidaSuperior1Ano" label="Expectativa de Vida Superior 1 Ano" camunda:inputVariable="expectativaVidaSuperior1Ano">
        <inputExpression id="InputExpression_expectativaVidaSuperior1Ano" typeRef="boolean">
          <text>expectativaVidaSuperior1Ano</text>
        </inputExpression>
      </input>

      <input id="Input_ultimoProcedimentoDias" label="Dias Desde Ultimo Procedimento" camunda:inputVariable="ultimoProcedimentoDias">
        <inputExpression id="InputExpression_ultimoProcedimentoDias" typeRef="integer">
          <text>ultimoProcedimentoDias</text>
        </inputExpression>
      </input>


      <input id="Input_ultimoProcedimentoDias" label="Dias Desde Ultimo Procedimento" camunda:inputVariable="ultimoProcedimentoDias">
        <inputExpression id="InputExpression_ultimoProcedimentoDias" typeRef="integer">
          <text>ultimoProcedimentoDias</text>
        </inputExpression>
      </input>

      <output id="Output_resultado" label="Resultado" name="resultado" typeRef="string">
        <outputValues id="OutputValues_resultado">
          <text>"Aprovado","Reprovado","Pendente"</text>
        </outputValues>
      </output>

      <output id="Output_observacao" label="Observacao Clinica" name="observacao" typeRef="string" />

      <output id="Output_fundamentacao" label="Fundamentacao Tecnica" name="fundamentacao" typeRef="string" />
      <!-- Output 4: Alertas de Desperdicio -->
      <output id="Output_alertasDesperdicio" label="Alertas de Desperdicio" name="alertasDesperdicio" typeRef="string">
        <outputValues id="OutputValues_alertasDesperdicio">
          <text>"NENHUM","DUP","FREQ","ESC","DOC","PROT","MULTI"</text>
        </outputValues>
      </output>

      <!-- Output 5: Acao Recomendada -->
      <output id="Output_acaoRecomendada" label="Acao Recomendada" name="acaoRecomendada" typeRef="string">
        <outputValues id="OutputValues_acaoRecomendada">
          <text>"APROVAR","NEGAR","SOLICITAR_INFO","AGUARDAR_PRAZO","SUGERIR_ALTERNATIVA"</text>
        </outputValues>
      </output>


      <!-- REPROVACOES -->
      <rule id="Rule_Contraind_ClasseIII">
        <description>Contraindicacao: Procedimento Classe III</description>
        <inputEntry id="InputEntry_1_1"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_1_2"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_1_3"><text>"Classe III"</text></inputEntry>
        <inputEntry id="InputEntry_1_4"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_1_5"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_6"><text>-</text></inputEntry>
        <outputEntry id="OutputEntry_1_1"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OutputEntry_1_2"><text>"Procedimento nao indicado - Classe III"</text></outputEntry>
        <outputEntry id="OutputEntry_1_3"><text>"AANS/CNS ETV 2023 - Classe III: Sem indicacao"</text></outputEntry>
        <outputEntry id="OE_Rule_Contraind_ClasseIII_4"><text>"PROT"</text></outputEntry>
        <outputEntry id="OE_Rule_Contraind_ClasseIII_5"><text>"NEGAR"</text></outputEntry>
      </rule>

      <rule id="Rule_Contraind_HidroComunicante">
        <description>Contraindicacao: Hidrocefalia comunicante</description>
        <inputEntry id="InputEntry_2_1"><text>"HidroComunicante"</text></inputEntry>
        <inputEntry id="InputEntry_2_2"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_2_3"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_2_4"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_2_5"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_6"><text>-</text></inputEntry>
        <outputEntry id="OutputEntry_2_1"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OutputEntry_2_2"><text>"Hidrocefalia comunicante - ETV nao indicada, considerar DVP"</text></outputEntry>
        <outputEntry id="OutputEntry_2_3"><text>"AANS/CNS 2023 - ETV indicada apenas para hidrocefalia obstrutiva"</text></outputEntry>
        <outputEntry id="OE_Rule_Contraind_HidroComunicante_4"><text>"PROT"</text></outputEntry>
        <outputEntry id="OE_Rule_Contraind_HidroComunicante_5"><text>"NEGAR"</text></outputEntry>
      </rule>

      <rule id="Rule_Contraind_InfeccaoSNC">
        <description>Contraindicacao: Infeccao ativa do SNC</description>
        <inputEntry id="InputEntry_3_1"><text>"InfeccaoAtivaSNC"</text></inputEntry>
        <inputEntry id="InputEntry_3_2"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_3_3"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_3_4"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_3_5"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_6"><text>-</text></inputEntry>
        <outputEntry id="OutputEntry_3_1"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OutputEntry_3_2"><text>"Infeccao ativa do SNC - tratar antes de ETV"</text></outputEntry>
        <outputEntry id="OutputEntry_3_3"><text>"AANS/CNS 2023 - ETV contraindicada em infeccao ativa"</text></outputEntry>
        <outputEntry id="OE_Rule_Contraind_InfeccaoSNC_4"><text>"PROT"</text></outputEntry>
        <outputEntry id="OE_Rule_Contraind_InfeccaoSNC_5"><text>"NEGAR"</text></outputEntry>
      </rule>

      <rule id="Rule_Contraind_ExpectativaVida">
        <description>Contraindicacao: Expectativa de vida menor que 1 ano</description>
        <inputEntry id="InputEntry_4_1"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_4_2"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_4_3"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_4_4"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_4_5"><text>false</text></inputEntry>
        <inputEntry id="InputEntry_6"><text>-</text></inputEntry>
        <outputEntry id="OutputEntry_4_1"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OutputEntry_4_2"><text>"Expectativa de vida insuficiente - considerar manejo paliativo"</text></outputEntry>
        <outputEntry id="OutputEntry_4_3"><text>"AANS/CNS 2023 - Procedimento definitivo requer expectativa adequada"</text></outputEntry>
        <outputEntry id="OE_Rule_Contraind_ExpectativaVida_4"><text>"PROT"</text></outputEntry>
        <outputEntry id="OE_Rule_Contraind_ExpectativaVida_5"><text>"NEGAR"</text></outputEntry>
      </rule>

      <rule id="Rule_Reprovado_SemImagem">
        <description>Reprovado: Sem imagem</description>
        <inputEntry id="InputEntry_5_1"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_5_2"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_5_3"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_5_4"><text>"SemImagem"</text></inputEntry>
        <inputEntry id="InputEntry_5_5"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_6"><text>-</text></inputEntry>
        <outputEntry id="OutputEntry_5_1"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OutputEntry_5_2"><text>"Imagem obrigatoria para indicacao de ETV"</text></outputEntry>
        <outputEntry id="OutputEntry_5_3"><text>"AANS/CNS 2023 - RM essencial para avaliacao anatomica"</text></outputEntry>
        <outputEntry id="OE_Rule_Reprovado_SemImagem_4"><text>"PROT"</text></outputEntry>
        <outputEntry id="OE_Rule_Reprovado_SemImagem_5"><text>"NEGAR"</text></outputEntry>
      </rule>

      
      <rule id="Rule_30901074_DUP_Derivacao">
        <description>DUP: Revisao de derivacao em menos de 90 dias sem disfuncao documentada</description>
        <inputEntry id="IE_30901074_DUP_1"><text>-</text></inputEntry>
        <inputEntry id="IE_30901074_DUP_2"><text>"Incompleto","NaoDocumentado"</text></inputEntry>
        <inputEntry id="IE_30901074_DUP_3"><text>-</text></inputEntry>
        <inputEntry id="IE_30901074_DUP_4"><text>-</text></inputEntry>
        <inputEntry id="IE_30901074_DUP_5"><text>-</text></inputEntry>
        <inputEntry id="IE_30901074_DUP_6"><text>&lt; 90</text></inputEntry>
        <outputEntry id="OE_30901074_DUP_1"><text>"Pendente"</text></outputEntry>
        <outputEntry id="OE_30901074_DUP_2"><text>"Revisao de derivacao em menos de 90 dias. Documentar disfuncao com TC comparativa mostrando aumento ventricular"</text></outputEntry>
        <outputEntry id="OE_30901074_DUP_3"><text>"AANS/CNS Hydrocephalus Guidelines 2023 - Revisao de DVP requer evidencia de disfuncao"</text></outputEntry>
        <outputEntry id="OE_30901074_DUP_4"><text>"DUP"</text></outputEntry>
        <outputEntry id="OE_30901074_DUP_5"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>

      <rule id="Rule_30901074_ESC_Derivacao">
        <description>ESC: Derivacao/revisao sem TC comparativa</description>
        <inputEntry id="IE_30901074_ESC_1"><text>-</text></inputEntry>
        <inputEntry id="IE_30901074_ESC_2"><text>-</text></inputEntry>
        <inputEntry id="IE_30901074_ESC_3"><text>-</text></inputEntry>
        <inputEntry id="IE_30901074_ESC_4"><text>"SemImagem"</text></inputEntry>
        <inputEntry id="IE_30901074_ESC_5"><text>-</text></inputEntry>
        <inputEntry id="IE_30901074_ESC_6"><text>-</text></inputEntry>
        <outputEntry id="OE_30901074_ESC_1"><text>"Pendente"</text></outputEntry>
        <outputEntry id="OE_30901074_ESC_2"><text>"Derivacao requer TC comparativa previa para documentar hidrocefalia. Enviar imagem atual e comparativa"</text></outputEntry>
        <outputEntry id="OE_30901074_ESC_3"><text>"AANS/CNS 2024 - TC comparativa obrigatoria antes de derivacao/revisao"</text></outputEntry>
        <outputEntry id="OE_30901074_ESC_4"><text>"ESC"</text></outputEntry>
        <outputEntry id="OE_30901074_ESC_5"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>

      <rule id="Rule_30901074_DOC_Imagem">
        <description>DOC: Procedimento neurocirurgico sem imagem atual</description>
        <inputEntry id="IE_30901074_DOC_1"><text>-</text></inputEntry>
        <inputEntry id="IE_30901074_DOC_2"><text>-</text></inputEntry>
        <inputEntry id="IE_30901074_DOC_3"><text>"Classe I","Classe IIa"</text></inputEntry>
        <inputEntry id="IE_30901074_DOC_4"><text>"SemImagem"</text></inputEntry>
        <inputEntry id="IE_30901074_DOC_5"><text>-</text></inputEntry>
        <inputEntry id="IE_30901074_DOC_6"><text>-</text></inputEntry>
        <outputEntry id="OE_30901074_DOC_1"><text>"Pendente"</text></outputEntry>
        <outputEntry id="OE_30901074_DOC_2"><text>"Documentacao insuficiente - RNM ou TC obrigatoria para planejamento cirurgico"</text></outputEntry>
        <outputEntry id="OE_30901074_DOC_3"><text>"AANS/CNS 2024, ANS RN 465/2021 - Imagem atual obrigatoria para autorizacao"</text></outputEntry>
        <outputEntry id="OE_30901074_DOC_4"><text>"DOC"</text></outputEntry>
        <outputEntry id="OE_30901074_DOC_5"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>

      <!-- APROVACOES -->
      <rule id="Rule_Aprovado_Aqueduto">
        <description>Aprovado: Estenose de aqueduto</description>
        <inputEntry id="InputEntry_6_1"><text>"HidroObstrutivaAqueduto"</text></inputEntry>
        <inputEntry id="InputEntry_6_2"><text>"Adequado"</text></inputEntry>
        <inputEntry id="InputEntry_6_3"><text>"Classe I"</text></inputEntry>
        <inputEntry id="InputEntry_6_4"><text>"RMCineFlowCompleta"</text></inputEntry>
        <inputEntry id="InputEntry_6_5"><text>true</text></inputEntry>
        <inputEntry id="InputEntry_6"><text>-</text></inputEntry>
        <outputEntry id="OutputEntry_6_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OutputEntry_6_2"><text>"Estenose de aqueduto - ETV indicacao classica"</text></outputEntry>
        <outputEntry id="OutputEntry_6_3"><text>"AANS/CNS ETV 2023 - Classe I para estenose de aqueduto"</text></outputEntry>
        <outputEntry id="OE_Rule_Aprovado_Aqueduto_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Rule_Aprovado_Aqueduto_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <rule id="Rule_Aprovado_Tumoral">
        <description>Aprovado: Hidrocefalia obstrutiva tumoral</description>
        <inputEntry id="InputEntry_7_1"><text>"HidroObstrutivaTumoral"</text></inputEntry>
        <inputEntry id="InputEntry_7_2"><text>"Adequado"</text></inputEntry>
        <inputEntry id="InputEntry_7_3"><text>"Classe I","Classe IIa"</text></inputEntry>
        <inputEntry id="InputEntry_7_4"><text>"RMCineFlowCompleta"</text></inputEntry>
        <inputEntry id="InputEntry_7_5"><text>true</text></inputEntry>
        <inputEntry id="InputEntry_6"><text>-</text></inputEntry>
        <outputEntry id="OutputEntry_7_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OutputEntry_7_2"><text>"Hidrocefalia obstrutiva por tumor - ETV indicada"</text></outputEntry>
        <outputEntry id="OutputEntry_7_3"><text>"AANS/CNS 2023 - ETV para hidrocefalia tumoral obstrutiva"</text></outputEntry>
        <outputEntry id="OE_Rule_Aprovado_Tumoral_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Rule_Aprovado_Tumoral_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <rule id="Rule_Aprovado_FalhaDVP">
        <description>Aprovado: Falha de DVP em hidrocefalia obstrutiva</description>
        <inputEntry id="InputEntry_8_1"><text>"FalhaDVP"</text></inputEntry>
        <inputEntry id="InputEntry_8_2"><text>"Adequado"</text></inputEntry>
        <inputEntry id="InputEntry_8_3"><text>"Classe I","Classe IIa"</text></inputEntry>
        <inputEntry id="InputEntry_8_4"><text>"RMCineFlowCompleta"</text></inputEntry>
        <inputEntry id="InputEntry_8_5"><text>true</text></inputEntry>
        <inputEntry id="InputEntry_6"><text>-</text></inputEntry>
        <outputEntry id="OutputEntry_8_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OutputEntry_8_2"><text>"Falha de DVP - ETV como alternativa em hidro obstrutiva"</text></outputEntry>
        <outputEntry id="OutputEntry_8_3"><text>"AANS/CNS 2023 - ETV indicada apos falha de DVP em casos obstruticos"</text></outputEntry>
        <outputEntry id="OE_Rule_Aprovado_FalhaDVP_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Rule_Aprovado_FalhaDVP_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <!-- PENDENTES -->
      <rule id="Rule_Pendente_SemCineFlow">
        <description>Pendente: Sem RM cine-flow</description>
        <inputEntry id="InputEntry_9_1"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_9_2"><text>"Adequado"</text></inputEntry>
        <inputEntry id="InputEntry_9_3"><text>"Classe I","Classe IIa"</text></inputEntry>
        <inputEntry id="InputEntry_9_4"><text>"RMSimples","ApenasTC"</text></inputEntry>
        <inputEntry id="InputEntry_9_5"><text>true</text></inputEntry>
        <inputEntry id="InputEntry_6"><text>-</text></inputEntry>
        <outputEntry id="OutputEntry_9_1"><text>"Pendente"</text></outputEntry>
        <outputEntry id="OutputEntry_9_2"><text>"Necessario RM cine-flow para avaliacao do fluxo liquorico"</text></outputEntry>
        <outputEntry id="OutputEntry_9_3"><text>"AANS/CNS 2023 - Cine-flow recomendado para planejamento de ETV"</text></outputEntry>
        <outputEntry id="OE_Rule_Pendente_SemCineFlow_4"><text>"DOC"</text></outputEntry>
        <outputEntry id="OE_Rule_Pendente_SemCineFlow_5"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>

      <rule id="Rule_Pendente_DocIncompleta">
        <description>Pendente: Documentacao incompleta</description>
        <inputEntry id="InputEntry_10_1"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_10_2"><text>"Incompleto"</text></inputEntry>
        <inputEntry id="InputEntry_10_3"><text>"Classe I","Classe IIa"</text></inputEntry>
        <inputEntry id="InputEntry_10_4"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_10_5"><text>true</text></inputEntry>
        <inputEntry id="InputEntry_6"><text>-</text></inputEntry>
        <outputEntry id="OutputEntry_10_1"><text>"Pendente"</text></outputEntry>
        <outputEntry id="OutputEntry_10_2"><text>"Documentar causa da obstrucao e anatomia pre-pontina"</text></outputEntry>
        <outputEntry id="OutputEntry_10_3"><text>"ANS RN 465/2021 - Documentacao adequada necessaria"</text></outputEntry>
        <outputEntry id="OE_Rule_Pendente_DocIncompleta_4"><text>"DOC"</text></outputEntry>
        <outputEntry id="OE_Rule_Pendente_DocIncompleta_5"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>

      <!-- FALLBACK -->
      <rule id="Rule_Fallback_30901074">
        <description>Regra padrao - Analise adicional necessaria</description>
        <inputEntry id="InputEntry_11_1"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_11_2"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_11_3"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_11_4"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_11_5"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_6"><text>-</text></inputEntry>
        <outputEntry id="OutputEntry_11_1"><text>"Pendente"</text></outputEntry>
        <outputEntry id="OutputEntry_11_2"><text>"Caso requer avaliacao neurocirurgica especializada"</text></outputEntry>
        <outputEntry id="OutputEntry_11_3"><text>"Avaliacao conforme AANS/CNS ETV Guidelines 2023"</text></outputEntry>
        <outputEntry id="OE_Rule_Fallback_30901074_4"><text>"DOC"</text></outputEntry>
        <outputEntry id="OE_Rule_Fallback_30901074_5"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>

    </decisionTable>
  </decision>
</definitions>
