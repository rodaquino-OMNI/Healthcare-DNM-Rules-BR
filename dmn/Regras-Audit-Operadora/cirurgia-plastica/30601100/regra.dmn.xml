<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="https://www.omg.org/spec/DMN/20191111/MODEL/"
             xmlns:dmndi="https://www.omg.org/spec/DMN/20191111/DMNDI/"
             xmlns:dc="http://www.omg.org/spec/DD/20100524/DC/"
             xmlns:di="http://www.omg.org/spec/DD/20100524/DI/"
             id="Definitions_30601100"
             name="Retalho Cutaneo Local"
             namespace="http://camunda.org/schema/1.0/dmn"
             exporter="Camunda Modeler"
             exporterVersion="5.0.0">
  <!--
    TUSS 30601100 - Retalho cutaneo local
    Versao: 3.0.0 (2026-02-07)
    Especialidade: Cirurgia Plastica Reconstrutiva
    Categoria: Retalhos - Cobertura Cutanea

    Indicacoes Clinicas (ASPS 2024 / SBCP 2024):
    - Defeitos cutaneos onde fechamento primario nao e possivel
    - Exposicao de estruturas nobres (osso, cartilagem, tendao, nervos)
    - Necessidade de cobertura vascularizada
    - Resultado estetico superior ao enxerto
    - Feridas em areas de dificil aceitacao de enxerto (regiao pre-tibial)

    Tipos de Retalhos Locais:
    - Retalho de avanco (advancement flap)
    - Retalho de rotacao (rotation flap)
    - Retalho de transposicao (transposition flap)
    - Retalho bilobado, romboide, V-Y

    Vantagens sobre Enxerto:
    - Cobertura vascularizada imediata
    - Melhor resultado estetico (cor, textura, espessura)
    - Cobertura de estruturas expostas
    - Menor contratura

    Contraindicacoes:
    - Tecido local comprometido (radioterapia, infeccao, cicatriz extensa)
    - Defeito muito grande para retalho local
    - Vascularizacao regional comprometida

    Documentacao Obrigatoria:
    - Localizacao e dimensoes do defeito
    - Planejamento do retalho (tipo, pedÃ­culo)
    - Fotografias pre-operatorias
    - Condicao dos tecidos adjacentes

    Referencias Normativas:
    - ASPS Evidence-Based Guidelines: Local Flaps (2024)
    - SBCP 2024 - Retalhos em Cirurgia Plastica
    - RN 465/2021 ANS
  -->

  <decision id="Decision_30601100" name="Criterios de Autorizacao - Retalho Cutaneo Local">
    <decisionTable id="DecisionTable_30601100" hitPolicy="FIRST">

      <!-- Input 1: Condicao do Paciente -->
      <input id="Input_condicaoPaciente" label="Tipo e Localizacao do Defeito">
        <inputExpression id="InputExpr_condicaoPaciente" typeRef="string">
          <text>condicaoPaciente</text>
        </inputExpression>
        <inputValues id="InputValues_condicaoPaciente">
          <text>"defeito_facial_pequeno","defeito_facial_medio","exposicao_estrutura_nobre","defeito_couro_cabeludo","defeito_membro","tecido_local_saudavel","tecido_local_comprometido","defeito_extenso","area_irradiada"</text>
        </inputValues>
      </input>

      <!-- Input 2: Historico Clinico -->
      <input id="Input_historicoClinico" label="Etiologia e Condicao dos Tecidos">
        <inputExpression id="InputExpr_historicoClinico" typeRef="string">
          <text>historicoClinico</text>
        </inputExpression>
        <inputValues id="InputValues_historicoClinico">
          <text>"resseccao_tumoral","trauma_agudo","sequela_queimadura","ulcera_cronica","radioterapia_previa","multiplas_cirurgias_locais","vascularizacao_normal","vascularizacao_comprometida"</text>
        </inputValues>
      </input>

      <!-- Input 3: Classe de Indicacao -->
      <input id="Input_classeIndicacao" label="Classe de Indicacao Cirurgica">
        <inputExpression id="InputExpr_classeIndicacao" typeRef="string">
          <text>classeIndicacao</text>
        </inputExpression>
        <inputValues id="InputValues_classeIndicacao">
          <text>"classe_I_indicacao_absoluta","classe_II_indicacao_relativa","classe_III_beneficio_incerto","classe_IV_contraindicado"</text>
        </inputValues>
      </input>

      <!-- Input 4: Exames Comprobatorios -->
      <input id="Input_examesComprobatorios" label="Documentacao Clinica Completa">
        <inputExpression id="InputExpr_examesComprobatorios" typeRef="boolean">
          <text>examesComprobatorios</text>
        </inputExpression>
      </input>

      <!-- Input 5: Expectativa de Vida Superior a 1 Ano -->
      <input id="Input_expectativaVida" label="Expectativa de Vida Superior a 1 Ano">
        <inputExpression id="InputExpr_expectativaVida" typeRef="boolean">
          <text>expectativaVidaSuperior1Ano</text>
        </inputExpression>
      </input>

      <!-- Output 1: Resultado -->
      <output id="Output_resultado" label="Resultado" name="resultado" typeRef="string">
        <outputValues id="OutputValues_resultado">
          <text>"Aprovado","Reprovado","Pendente"</text>
        </outputValues>
      </output>

      <!-- Output 2: Observacao -->
      <output id="Output_observacao" label="Observacao Clinica" name="observacao" typeRef="string" />

      <!-- Output 3: Fundamentacao -->
      <output id="Output_fundamentacao" label="Fundamentacao Legal/Tecnica" name="fundamentacao" typeRef="string" />

      <output id="Output_alertasDesperdicio" name="alertasDesperdicio" typeRef="string">
        <outputValues>
          <text>"NENHUM","DUP","FREQ","ESC","DOC","PROT","MULTI"</text>
        </outputValues>
      </output>

      <output id="Output_acaoRecomendada" name="acaoRecomendada" typeRef="string">
        <outputValues>
          <text>"APROVAR","NEGAR","SOLICITAR_INFO","AGUARDAR_PRAZO","SUGERIR_ALTERNATIVA"</text>
        </outputValues>
      </output>

      <!-- ============================================== -->
      <!-- REGRAS DE REPROVACAO (PRIORIDADE MAXIMA)      -->
      <!-- ============================================== -->

      <rule id="Rule_30601100_Reprovacao_TecidoComprometido">
        <description>Reprovacao - Tecido local comprometido para retalho</description>
        <inputEntry id="IE_Rep1_1"><text>"tecido_local_comprometido","area_irradiada"</text></inputEntry>
        <inputEntry id="IE_Rep1_2"><text>"radioterapia_previa","multiplas_cirurgias_locais"</text></inputEntry>
        <inputEntry id="IE_Rep1_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep1_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep1_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Rep1_1"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OE_Rep1_2"><text>"Tecido local comprometido por radioterapia ou cirurgias previas. Retalho local com risco de necrose. Considerar retalho a distancia, livre ou expansao tissular."</text></outputEntry>
        <outputEntry id="OE_Rep1_3"><text>"ASPS 2024 - Irradiated Tissue Reconstruction"</text></outputEntry>
      </rule>

      <rule id="Rule_30601100_Reprovacao_VascularizacaoComprometida">
        <description>Reprovacao - Vascularizacao regional comprometida</description>
        <inputEntry id="IE_Rep2_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep2_2"><text>"vascularizacao_comprometida"</text></inputEntry>
        <inputEntry id="IE_Rep2_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep2_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep2_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Rep2_1"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OE_Rep2_2"><text>"Vascularizacao regional comprometida. Retalho local depende de perfusao adequada. Avaliar revascularizacao ou considerar retalho livre com anastomose vascular."</text></outputEntry>
        <outputEntry id="OE_Rep2_3"><text>"SBCP 2024 - Avaliacao Vascular Pre-Retalho"</text></outputEntry>
      </rule>

      <rule id="Rule_30601100_Reprovacao_DefeitoExtenso">
        <description>Reprovacao - Defeito muito extenso para retalho local</description>
        <inputEntry id="IE_Rep3_1"><text>"defeito_extenso"</text></inputEntry>
        <inputEntry id="IE_Rep3_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep3_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep3_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep3_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Rep3_1"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OE_Rep3_2"><text>"Defeito muito extenso para cobertura com retalho local. Tensao excessiva compromete viabilidade. Indicar retalho regional, pediculado a distancia ou livre."</text></outputEntry>
        <outputEntry id="OE_Rep3_3"><text>"ASPS 2024 - Reconstructive Ladder/Elevator"</text></outputEntry>
      </rule>

      <rule id="Rule_30601100_Reprovacao_ExpectativaVida">
        <description>Reprovacao - Expectativa de vida inferior a 1 ano</description>
        <inputEntry id="IE_Rep4_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep4_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep4_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep4_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep4_5"><text>false</text></inputEntry>
        <outputEntry id="OE_Rep4_1"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OE_Rep4_2"><text>"Expectativa de vida inferior a 12 meses. Procedimento eletivo nao prioritario. Considerar fechamento simples ou tratamento conservador."</text></outputEntry>
        <outputEntry id="OE_Rep4_3"><text>"Principios de Proporcionalidade"</text></outputEntry>
      </rule>

      <!-- ============================================== -->
      <!-- REGRAS DE APROVACAO                           -->
      <!-- ============================================== -->

      <rule id="Rule_30601100_Aprovacao_ExposicaoEstruturaNobre">
        <description>Aprovacao - Exposicao de estrutura nobre requer retalho</description>
        <inputEntry id="IE_Aprov1_1"><text>"exposicao_estrutura_nobre"</text></inputEntry>
        <inputEntry id="IE_Aprov1_2"><text>"resseccao_tumoral","trauma_agudo","vascularizacao_normal"</text></inputEntry>
        <inputEntry id="IE_Aprov1_3"><text>"classe_I_indicacao_absoluta"</text></inputEntry>
        <inputEntry id="IE_Aprov1_4"><text>true</text></inputEntry>
        <inputEntry id="IE_Aprov1_5"><text>true</text></inputEntry>
        <outputEntry id="OE_Aprov1_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Aprov1_2"><text>"Retalho cutaneo local aprovado para cobertura de estrutura nobre exposta (osso, cartilagem, tendao, nervo). Cobertura vascularizada obrigatoria. Enxerto insuficiente."</text></outputEntry>
        <outputEntry id="OE_Aprov1_3"><text>"ASPS 2024 - Flap Coverage of Exposed Structures; RN 465/2021"</text></outputEntry>
      </rule>

      <rule id="Rule_30601100_Aprovacao_DefeitoFacial">
        <description>Aprovacao - Defeito facial para resultado estetico</description>
        <inputEntry id="IE_Aprov2_1"><text>"defeito_facial_pequeno","defeito_facial_medio"</text></inputEntry>
        <inputEntry id="IE_Aprov2_2"><text>"resseccao_tumoral","vascularizacao_normal"</text></inputEntry>
        <inputEntry id="IE_Aprov2_3"><text>"classe_I_indicacao_absoluta","classe_II_indicacao_relativa"</text></inputEntry>
        <inputEntry id="IE_Aprov2_4"><text>true</text></inputEntry>
        <inputEntry id="IE_Aprov2_5"><text>true</text></inputEntry>
        <outputEntry id="OE_Aprov2_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Aprov2_2"><text>"Retalho local aprovado para reconstrucao facial. Resultado estetico superior ao enxerto. Planejar conforme subunidades esteticas. Tipos: rotacao, avanco, bilobado."</text></outputEntry>
        <outputEntry id="OE_Aprov2_3"><text>"ASPS 2024 - Facial Reconstruction; Subunit Principle"</text></outputEntry>
      </rule>

      <rule id="Rule_30601100_Aprovacao_CouroCabeludo">
        <description>Aprovacao - Defeito em couro cabeludo</description>
        <inputEntry id="IE_Aprov3_1"><text>"defeito_couro_cabeludo"</text></inputEntry>
        <inputEntry id="IE_Aprov3_2"><text>"resseccao_tumoral","trauma_agudo","vascularizacao_normal"</text></inputEntry>
        <inputEntry id="IE_Aprov3_3"><text>"classe_I_indicacao_absoluta"</text></inputEntry>
        <inputEntry id="IE_Aprov3_4"><text>true</text></inputEntry>
        <inputEntry id="IE_Aprov3_5"><text>true</text></inputEntry>
        <outputEntry id="OE_Aprov3_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Aprov3_2"><text>"Retalho local aprovado para couro cabeludo. Rica vascularizacao permite retalhos grandes. Manter foliculos pilosos. Tipos: rotacao, avanco, Orticochea."</text></outputEntry>
        <outputEntry id="OE_Aprov3_3"><text>"SBCP 2024 - Reconstrucao de Couro Cabeludo"</text></outputEntry>
      </rule>

      <rule id="Rule_30601100_Aprovacao_DefeitoMembro">
        <description>Aprovacao - Defeito em membro com tecido local saudavel</description>
        <inputEntry id="IE_Aprov4_1"><text>"defeito_membro","tecido_local_saudavel"</text></inputEntry>
        <inputEntry id="IE_Aprov4_2"><text>"trauma_agudo","vascularizacao_normal"</text></inputEntry>
        <inputEntry id="IE_Aprov4_3"><text>"classe_I_indicacao_absoluta","classe_II_indicacao_relativa"</text></inputEntry>
        <inputEntry id="IE_Aprov4_4"><text>true</text></inputEntry>
        <inputEntry id="IE_Aprov4_5"><text>true</text></inputEntry>
        <outputEntry id="OE_Aprov4_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Aprov4_2"><text>"Retalho cutaneo local aprovado para membro. Tecido adjacente saudavel permite retalho de rotacao ou transposicao. Avaliar mobilidade articular pos-operatoria."</text></outputEntry>
        <outputEntry id="OE_Aprov4_3"><text>"ASPS 2024 - Extremity Reconstruction"</text></outputEntry>
      </rule>

      <!-- ============================================== -->
      <!-- REGRAS DE PENDENCIA                           -->
      <!-- ============================================== -->

      <rule id="Rule_30601100_Pendente_SequelaCronica">
        <description>Pendente - Sequela cronica requer avaliacao</description>
        <inputEntry id="IE_Pend1_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Pend1_2"><text>"sequela_queimadura","ulcera_cronica"</text></inputEntry>
        <inputEntry id="IE_Pend1_3"><text>"classe_II_indicacao_relativa","classe_III_beneficio_incerto"</text></inputEntry>
        <inputEntry id="IE_Pend1_4"><text>true</text></inputEntry>
        <inputEntry id="IE_Pend1_5"><text>true</text></inputEntry>
        <outputEntry id="OE_Pend1_1"><text>"Pendente"</text></outputEntry>
        <outputEntry id="OE_Pend1_2"><text>"Sequela cronica requer avaliacao detalhada da qualidade do tecido local. Documentar condic do tecido adjacente, presenca de fibrose, elasticidade. Considerar alternativas se tecido comprometido."</text></outputEntry>
        <outputEntry id="OE_Pend1_3"><text>"SBCP 2024 - Reconstrucao de Sequelas"</text></outputEntry>
      </rule>

      <rule id="Rule_30601100_Pendente_SemDocumentacao">
        <description>Pendente - Documentacao incompleta</description>
        <inputEntry id="IE_Pend2_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Pend2_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Pend2_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Pend2_4"><text>false</text></inputEntry>
        <inputEntry id="IE_Pend2_5"><text>true</text></inputEntry>
        <outputEntry id="OE_Pend2_1"><text>"Pendente"</text></outputEntry>
        <outputEntry id="OE_Pend2_2"><text>"Documentacao incompleta. Anexar: dimensoes do defeito, fotografias, planejamento do retalho (tipo, direcao), condicao dos tecidos adjacentes, justificativa para retalho vs enxerto."</text></outputEntry>
        <outputEntry id="OE_Pend2_3"><text>"RN 465/2021 Art. 5 - Documentacao"</text></outputEntry>
      </rule>

      <!-- ============================================== -->
      <!-- REGRA FALLBACK                                -->
      <!-- ============================================== -->

      <rule id="Rule_Fallback_30601100">
        <description>Regra padrao - Casos nao cobertos</description>
        <inputEntry id="IE_Fallback_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Fallback_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Fallback_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Fallback_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Fallback_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Fallback_1"><text>"Pendente"</text></outputEntry>
        <outputEntry id="OE_Fallback_2"><text>"Caso nao enquadrado nos criterios automaticos. Encaminhar para auditoria especializada em cirurgia plastica reconstrutiva."</text></outputEntry>
        <outputEntry id="OE_Fallback_3"><text>"RN 428/2017 - Auditoria Especializada"</text></outputEntry>
      </rule>

    </decisionTable>
  </decision>
</definitions>
