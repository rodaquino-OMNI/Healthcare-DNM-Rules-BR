<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="https://www.omg.org/spec/DMN/20191111/MODEL/"
             xmlns:dmndi="https://www.omg.org/spec/DMN/20191111/DMNDI/"
             xmlns:dc="http://www.omg.org/spec/DD/20100524/DC/"
             xmlns:di="http://www.omg.org/spec/DD/20100524/DI/"
             id="Definitions_30602262"
             name="Substituição de Prótese Mamária"
             namespace="http://camunda.org/schema/1.0/dmn"
             exporter="Camunda Modeler"
             exporterVersion="5.0.0">
  <!--
    TUSS 30602262 - Substituição de prótese mamária
    Versao: 3.0.0 (2026-02-07)
    Especialidade: Cirurgia Plastica
    Categoria: Procedimentos Cirurgicos Reparadores

    Indicacoes Clinicas (SBCP 2024 / DUT ANS 2024):
    - Ruptura de prótese mamária documentada por ressonancia magnetica
    - Deformidade adquirida apos cirurgia anterior (contratura capsular moderada-grave)
    - Mau posicionamento da prótese com repercussao clinica significativa
    - Duplo contorno ou ptose severa apos reconstrução mamária oncologica

    Contraindicacoes Absolutas:
    - Paciente com risco cirurgico ASA V
    - Ausencia de documentacao medica (RMN, laudos)
    - Infeccao ativa na regiao mamaria
    - Contraindicacoes anestesicas absolutas

    Documentacao Obrigatoria:
    - Diagnostico confirmado (CID-10 N64.8)
    - RMN de mamas comprovando ruptura ou deformidade (obrigatorio)
    - Laudo de indicacao cirurgica com fotografias
    - Classificacao de risco cirurgico (ASA I-IV)
    - Consentimento informado assinado

    Referencias Normativas:
    - DUT ANS 2024 - Diretrizes de Utilizacao para Procedimentos Cirurgicos
    - SBCP 2024 - Reoperacoes em Cirurgia Plastica Mamaria
    - RN 465/2021 - Rol de Procedimentos e Eventos em Saude
    - Resolucao CFM 1.886/2008 - Etica em Cirurgia Plastica
  -->

  <decision id="Decision_30602262" name="Criterios de Autorizacao - Substituição de Prótese Mamária">
    <decisionTable id="DecisionTable_30602262" hitPolicy="FIRST">

      <!-- Input 1: Diagnostico Confirmado -->
      <input id="Input_diagnostico" label="Diagnostico Confirmado (CID-10)">
        <inputExpression id="InputExpr_diagnostico" typeRef="string">
          <text>diagnostico</text>
        </inputExpression>
        <inputValues id="InputValues_diagnostico">
          <text>"N64.8","Z90.8","Z42.1","C50"</text>
        </inputValues>
      </input>

      <!-- Input 2: RMN Comprovando Ruptura/Deformidade -->
      <input id="Input_RMNDocumentada" label="RMN Comprovando Ruptura ou Deformidade">
        <inputExpression id="InputExpr_RMNDocumentada" typeRef="boolean">
          <text>RMNDocumentada</text>
        </inputExpression>
      </input>

      <!-- Input 3: Tempo desde Cirurgia Anterior -->
      <input id="Input_tempoCircAnt" label="Tempo da Cirurgia Anterior (anos)">
        <inputExpression id="InputExpr_tempoCircAnt" typeRef="number">
          <text>anosDesdeCircurgiaAnterior</text>
        </inputExpression>
      </input>

      <!-- Input 4: Risco Cirurgico (ASA) -->
      <input id="Input_riscoCirurgico" label="Classificacao de Risco Cirurgico (ASA)">
        <inputExpression id="InputExpr_riscoCirurgico" typeRef="string">
          <text>riscoCirurgico</text>
        </inputExpression>
        <inputValues id="InputValues_riscoCirurgico">
          <text>"ASA_I","ASA_II","ASA_III","ASA_IV","ASA_V"</text>
        </inputValues>
      </input>

      <!-- Input 5: Laudo de Indicacao -->
      <input id="Input_laudoIndicacao" label="Laudo de Indicacao Cirurgica Anexado">
        <inputExpression id="InputExpr_laudoIndicacao" typeRef="boolean">
          <text>laudoIndicacao</text>
        </inputExpression>
      </input>

      <!-- Output 1: Resultado -->
      <output id="Output_resultado" label="Resultado" name="resultado" typeRef="string">
        <outputValues id="OutputValues_resultado">
          <text>"Aprovado","Reprovado","Pendente"</text>
        </outputValues>
      </output>

      <!-- Output 2: Observacao -->
      <output id="Output_observacao" label="Observacao Clinica" name="observacao" typeRef="string" />

      <!-- Output 3: Fundamentacao -->
      <output id="Output_fundamentacao" label="Fundamentacao Legal/Tecnica" name="fundamentacao" typeRef="string" />

      <output id="Output_alertasDesperdicio" name="alertasDesperdicio" typeRef="string">
        <outputValues>
          <text>"NENHUM","DUP","FREQ","ESC","DOC","PROT","MULTI"</text>
        </outputValues>
      </output>

      <output id="Output_acaoRecomendada" name="acaoRecomendada" typeRef="string">
        <outputValues>
          <text>"APROVAR","NEGAR","SOLICITAR_INFO","AGUARDAR_PRAZO","SUGERIR_ALTERNATIVA"</text>
        </outputValues>
      </output>

      <!-- ============================================== -->
      <!-- CONTRAINDICATION RULES (FIRST PRIORITY)       -->
      <!-- ============================================== -->

      <rule id="Rule_30602262_Contraindicacao_SemRMN">
        <description>Contraindicacao - RMN nao disponivel (obrigatoria para diagnostico)</description>
        <inputEntry id="IE_Contra1_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Contra1_2"><text>false</text></inputEntry>
        <inputEntry id="IE_Contra1_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Contra1_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Contra1_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Contra1_1"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OE_Contra1_2"><text>"RMN de mamas eh documentacao obrigatoria para comprovar ruptura ou deformidade da protese. Ausencia desta inviabiliza autorizacao."</text></outputEntry>
        <outputEntry id="OE_Contra1_3"><text>"RN 465/2021 Art. 5 - Documentacao Minima Obrigatoria"</text></outputEntry>
      </rule>

      <rule id="Rule_30602262_Contraindicacao_RiscoProibitivo">
        <description>Contraindicacao - Risco cirurgico ASA V</description>
        <inputEntry id="IE_Contra2_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Contra2_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Contra2_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Contra2_4"><text>"ASA_V"</text></inputEntry>
        <inputEntry id="IE_Contra2_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Contra2_1"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OE_Contra2_2"><text>"Paciente ASA V apresenta risco cirurgico proibitivo. Substituição de protese mamária contraindicada exceto extrema urgencia."</text></outputEntry>
        <outputEntry id="OE_Contra2_3"><text>"ASA Classification Guidelines - Risco Cirurgico Proibitivo"</text></outputEntry>
      </rule>

      <rule id="Rule_30602262_Contraindicacao_SemLaudo">
        <description>Contraindicacao - Laudo de indicacao ausente</description>
        <inputEntry id="IE_Contra3_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Contra3_2"><text>true</text></inputEntry>
        <inputEntry id="IE_Contra3_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Contra3_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Contra3_5"><text>false</text></inputEntry>
        <outputEntry id="OE_Contra3_1"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OE_Contra3_2"><text>"Laudo de indicacao cirurgica assinado por especialista eh documentacao obrigatoria. Deve detalhar complicacao e necessidade de substituição."</text></outputEntry>
        <outputEntry id="OE_Contra3_3"><text>"RN 465/2021 Art. 5 - Documentacao Minima Obrigatoria"</text></outputEntry>
      </rule>

      <!-- ============================================== -->
      <!-- APPROVAL RULES (AFTER CONTRAINDICATIONS)      -->
      <!-- ============================================== -->

      <rule id="Rule_30602262_Aprovacao_Ruptura">
        <description>Aprovacao - Ruptura de protese comprovada por RMN</description>
        <inputEntry id="IE_Aprov1_1"><text>"N64.8"</text></inputEntry>
        <inputEntry id="IE_Aprov1_2"><text>true</text></inputEntry>
        <inputEntry id="IE_Aprov1_3"><text>&gt;= 3</text></inputEntry>
        <inputEntry id="IE_Aprov1_4"><text>"ASA_I","ASA_II","ASA_III","ASA_IV"</text></inputEntry>
        <inputEntry id="IE_Aprov1_5"><text>true</text></inputEntry>
        <outputEntry id="OE_Aprov1_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Aprov1_2"><text>"Ruptura de protese mamária comprovada por RMN. Critério clinicamente indicado. Substituição de protese autorizada conforme SBCP 2024."</text></outputEntry>
        <outputEntry id="OE_Aprov1_3"><text>"DUT ANS 2024 + SBCP 2024 - Substituição de Protese por Ruptura"</text></outputEntry>
      </rule>

      <rule id="Rule_30602262_Aprovacao_DeformidadeAcquirida">
        <description>Aprovacao - Deformidade adquirida apos reconstrução oncologica (C50 ou Z42.1)</description>
        <inputEntry id="IE_Aprov2_1"><text>"C50","Z42.1"</text></inputEntry>
        <inputEntry id="IE_Aprov2_2"><text>true</text></inputEntry>
        <inputEntry id="IE_Aprov2_3"><text>&gt;= 2</text></inputEntry>
        <inputEntry id="IE_Aprov2_4"><text>"ASA_I","ASA_II","ASA_III"</text></inputEntry>
        <inputEntry id="IE_Aprov2_5"><text>true</text></inputEntry>
        <outputEntry id="OE_Aprov2_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Aprov2_2"><text>"Deformidade adquirida apos reconstrução mamária oncologica com documentacao RMN e laudo clinico. Substituição autorizada conforme SBCP 2024."</text></outputEntry>
        <outputEntry id="OE_Aprov2_3"><text>"SBCP 2024 - Reoperacoes em Reconstrução Mamária Oncologica"</text></outputEntry>
      </rule>

      <!-- ============================================== -->
      <!-- FALLBACK RULE - Casos nao cobertos            -->
      <!-- ============================================== -->
      <rule id="Rule_Fallback_30602262">
        <description>Regra padrao - Casos nao cobertos requerem analise manual por auditor medico especializado</description>
        <inputEntry id="IE_Fallback_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Fallback_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Fallback_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Fallback_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Fallback_5"><text>-</text></inputEntry>
        <outputEntry id="OE_Fallback_1"><text>"Pendente"</text></outputEntry>
        <outputEntry id="OE_Fallback_2"><text>"Caso requer analise manual por auditor medico especializado - criterios de autorizacao automatica nao foram atendidos."</text></outputEntry>
        <outputEntry id="OE_Fallback_3"><text>"Processo de auditoria medica especializada conforme RN 428/2017"</text></outputEntry>
      </rule>

    </decisionTable>
  </decision>
</definitions>
