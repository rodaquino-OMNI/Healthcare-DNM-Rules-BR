<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="https://www.omg.org/spec/DMN/20191111/MODEL/"
             xmlns:dmndi="https://www.omg.org/spec/DMN/20191111/DMNDI/"
             xmlns:dc="http://www.omg.org/spec/DD/20100524/DC/"
             xmlns:di="http://www.omg.org/spec/DD/20100524/DI/"
             id="Definitions_UNN_010"
             name="Prevencao de Procedimento Desnecessario - Vitamina D em Paciente Assintomatico"
             namespace="http://camunda.org/schema/1.0/dmn"
             exporter="Camunda Modeler"
             exporterVersion="5.0.0">
  <!--
    UNN-010 - Prevencao de Procedimento Desnecessario - Dosagem de Vitamina D em Paciente Assintomatico
    Versao: 1.0.0 (2026-02-07)
    Especialidade: Controle de Desperdicio
    Categoria: Unnecessary Procedure Prevention

    Objetivo:
    - Evitar dosagem de vitamina D em pacientes assintomaticos sem fator de risco
    - Reduzir exames laboratoriais desnecessarios
    - Seguir recomendacoes de rastreamento baseadas em evidencias

    Indicacoes para Bloqueio (Choosing Wisely):
    - Paciente assintomatico sem fator de risco para deficiencia
    - Ausencia de doenca ossea metabolica
    - Sem exposicao solar reduzida documentada

    Excecoes Permitidas:
    - Osteoporose ou osteopenia diagnosticada
    - Doenca renal cronica
    - Sindromes de ma absorcao
    - Uso de anticonvulsivantes ou corticoides cronicos
    - Idosos institucionalizados

    Referencias Normativas:
    - ABM Choosing Wisely Brasil 2024 - Endocrinologia
    - AACE - Vitamin D Guidelines 2023
    - US Preventive Services Task Force
  -->

  <decision id="Decision_UNN_010" name="Prevencao Desnecessario - Vitamina D Paciente Assintomatico">
    <decisionTable id="DecisionTable_UNN_010" hitPolicy="FIRST">

      <!-- Input 1: Paciente assintomatico sem fator de risco -->
      <input id="Input_pacienteAssintomaticoSemRisco" label="Paciente Assintomatico sem Fator de Risco">
        <inputExpression id="InputExpr_pacienteAssintomaticoSemRisco" typeRef="boolean">
          <text>pacienteAssintomaticoSemRisco</text>
        </inputExpression>
      </input>

      <!-- Input 2: Doenca ossea metabolica -->
      <input id="Input_doencaOsseaMetabolica" label="Osteoporose, Osteopenia ou Doenca Ossea Metabolica">
        <inputExpression id="InputExpr_doencaOsseaMetabolica" typeRef="boolean">
          <text>doencaOsseaMetabolica</text>
        </inputExpression>
      </input>

      <!-- Input 3: Doenca renal cronica ou ma absorcao -->
      <input id="Input_drcMaAbsorcao" label="Doenca Renal Cronica ou Sindrome de Ma Absorcao">
        <inputExpression id="InputExpr_drcMaAbsorcao" typeRef="boolean">
          <text>drcMaAbsorcao</text>
        </inputExpression>
      </input>

      <!-- Input 4: Uso cronico de medicamentos que afetam vitamina D -->
      <input id="Input_usoCronicoMedicamentos" label="Uso Cronico de Anticonvulsivantes ou Corticoides">
        <inputExpression id="InputExpr_usoCronicoMedicamentos" typeRef="boolean">
          <text>usoCronicoMedicamentos</text>
        </inputExpression>
      </input>

      <!-- Output 1: Resultado -->
      <output id="Output_resultado" label="Resultado" name="resultado" typeRef="string">
        <outputValues id="OutputValues_resultado">
          <text>"Aprovado","Reprovado","Pendente"</text>
        </outputValues>
      </output>

      <!-- Output 2: Observacao -->
      <output id="Output_observacao" label="Observacao" name="observacao" typeRef="string" />

      <!-- Output 3: Fundamentacao -->
      <output id="Output_fundamentacao" label="Fundamentacao Legal" name="fundamentacao" typeRef="string" />
      <!-- Output 4: Alertas de Desperdicio -->
      <output id="Output_alertasDesperdicio" label="Alertas de Desperdicio" name="alertasDesperdicio" typeRef="string">
        <outputValues id="OutputValues_alertasDesperdicio">
          <text>"NENHUM","DUP","FREQ","ESC","DOC","PROT","MULTI"</text>
        </outputValues>
      </output>

      <!-- Output 5: Acao Recomendada -->
      <output id="Output_acaoRecomendada" label="Acao Recomendada" name="acaoRecomendada" typeRef="string">
        <outputValues id="OutputValues_acaoRecomendada">
          <text>"APROVAR","NEGAR","SOLICITAR_INFO","AGUARDAR_PRAZO","SUGERIR_ALTERNATIVA"</text>
        </outputValues>
      </output>


      <!-- ============================================== -->
      <!-- REPROVADO: Rastreamento sem indicacao         -->
      <!-- ============================================== -->
      <rule id="Rule_UNN_010_Reprovado_SemIndicacao">
        <description>Reprovado - Dosagem de vitamina D em assintomatico sem fator de risco</description>
        <inputEntry id="IE_Rep1_1"><text>true</text></inputEntry>
        <inputEntry id="IE_Rep1_2"><text>false</text></inputEntry>
        <inputEntry id="IE_Rep1_3"><text>false</text></inputEntry>
        <inputEntry id="IE_Rep1_4"><text>false</text></inputEntry>
        <outputEntry id="OE_Rep1_1"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OE_Rep1_2"><text>"Dosagem de vitamina D nao recomendada como rastreamento em populacao geral assintomatica. Nao ha evidencia de beneficio em rastreamento populacional."</text></outputEntry>
        <outputEntry id="OE_Rep1_3"><text>"ABM Choosing Wisely 2024; US Preventive Services Task Force"</text></outputEntry>
        <outputEntry id="OE_Rule_UNN_010_Reprovado_SemIndicacao_4"><text>"PROT"</text></outputEntry>
        <outputEntry id="OE_Rule_UNN_010_Reprovado_SemIndicacao_5"><text>"NEGAR"</text></outputEntry>
      </rule>

      <!-- ============================================== -->
      <!-- APROVADO: Doenca ossea metabolica             -->
      <!-- ============================================== -->
      <rule id="Rule_UNN_010_Aprovado_DoencaOssea">
        <description>Aprovado - Doenca ossea metabolica requer monitoramento</description>
        <inputEntry id="IE_Aprov1_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Aprov1_2"><text>true</text></inputEntry>
        <inputEntry id="IE_Aprov1_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Aprov1_4"><text>-</text></inputEntry>
        <outputEntry id="OE_Aprov1_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Aprov1_2"><text>"Dosagem autorizada - Osteoporose ou doenca ossea metabolica requer avaliacao de vitamina D para manejo adequado."</text></outputEntry>
        <outputEntry id="OE_Aprov1_3"><text>"Doenca ossea - AACE Guidelines 2023"</text></outputEntry>
        <outputEntry id="OE_Rule_UNN_010_Aprovado_DoencaOssea_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Rule_UNN_010_Aprovado_DoencaOssea_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <!-- ============================================== -->
      <!-- APROVADO: DRC ou ma absorcao                  -->
      <!-- ============================================== -->
      <rule id="Rule_UNN_010_Aprovado_DRCMaAbsorcao">
        <description>Aprovado - DRC ou ma absorcao afetam metabolismo de vitamina D</description>
        <inputEntry id="IE_Aprov2_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Aprov2_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Aprov2_3"><text>true</text></inputEntry>
        <inputEntry id="IE_Aprov2_4"><text>-</text></inputEntry>
        <outputEntry id="OE_Aprov2_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Aprov2_2"><text>"Dosagem autorizada - DRC ou sindrome de ma absorcao comprometem metabolismo de vitamina D."</text></outputEntry>
        <outputEntry id="OE_Aprov2_3"><text>"Comorbidade relevante - Monitoramento indicado"</text></outputEntry>
        <outputEntry id="OE_Rule_UNN_010_Aprovado_DRCMaAbsorcao_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Rule_UNN_010_Aprovado_DRCMaAbsorcao_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <!-- ============================================== -->
      <!-- APROVADO: Uso cronico medicamentos            -->
      <!-- ============================================== -->
      <rule id="Rule_UNN_010_Aprovado_Medicamentos">
        <description>Aprovado - Medicamentos afetam metabolismo de vitamina D</description>
        <inputEntry id="IE_Aprov3_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Aprov3_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Aprov3_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Aprov3_4"><text>true</text></inputEntry>
        <outputEntry id="OE_Aprov3_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Aprov3_2"><text>"Dosagem autorizada - Uso cronico de anticonvulsivantes ou corticoides afeta metabolismo de vitamina D."</text></outputEntry>
        <outputEntry id="OE_Aprov3_3"><text>"Interacao medicamentosa - Monitoramento indicado"</text></outputEntry>
        <outputEntry id="OE_Rule_UNN_010_Aprovado_Medicamentos_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Rule_UNN_010_Aprovado_Medicamentos_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <!-- ============================================== -->
      <!-- APROVADO: Paciente com fator de risco         -->
      <!-- ============================================== -->
      <rule id="Rule_UNN_010_Aprovado_ComFatorRisco">
        <description>Aprovado - Paciente com fator de risco identificado</description>
        <inputEntry id="IE_Aprov4_1"><text>false</text></inputEntry>
        <inputEntry id="IE_Aprov4_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Aprov4_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Aprov4_4"><text>-</text></inputEntry>
        <outputEntry id="OE_Aprov4_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Aprov4_2"><text>"Dosagem autorizada - Paciente com fator de risco identificado para deficiencia de vitamina D."</text></outputEntry>
        <outputEntry id="OE_Aprov4_3"><text>"Fator de risco presente - Dosagem indicada"</text></outputEntry>
        <outputEntry id="OE_Rule_UNN_010_Aprovado_ComFatorRisco_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Rule_UNN_010_Aprovado_ComFatorRisco_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <!-- ============================================== -->
      <!-- PENDENTE: Fallback                            -->
      <!-- ============================================== -->
      <rule id="Rule_UNN_010_Pendente_Fallback">
        <description>Pendente - Requer analise manual por auditor</description>
        <inputEntry id="IE_Pend_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Pend_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Pend_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Pend_4"><text>-</text></inputEntry>
        <outputEntry id="OE_Pend_1"><text>"Pendente"</text></outputEntry>
        <outputEntry id="OE_Pend_2"><text>"Caso requer analise manual para avaliacao de indicacao de dosagem de vitamina D."</text></outputEntry>
        <outputEntry id="OE_Pend_3"><text>"Auditoria laboratorial - Processo manual"</text></outputEntry>
        <outputEntry id="OE_Rule_UNN_010_Pendente_Fallback_4"><text>"DOC"</text></outputEntry>
        <outputEntry id="OE_Rule_UNN_010_Pendente_Fallback_5"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>

    </decisionTable>
  </decision>
</definitions>
