<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="https://www.omg.org/spec/DMN/20191111/MODEL/"
             xmlns:dmndi="https://www.omg.org/spec/DMN/20191111/DMNDI/"
             xmlns:dc="http://www.omg.org/spec/DD/20100524/DC/"
             xmlns:di="http://www.omg.org/spec/DD/20100524/DI/"
             id="Definitions_UNN_001"
             name="Prevencao de Procedimento Desnecessario - Rastreamento Oncologico Fora do Grupo de Risco"
             namespace="http://camunda.org/schema/1.0/dmn"
             exporter="Camunda Modeler"
             exporterVersion="5.0.0">
  <!--
    UNN-001 - Prevencao de Procedimento Desnecessario - Rastreamento Oncologico Fora do Grupo de Risco
    Versao: 1.0.0 (2026-02-07)
    Especialidade: Controle de Desperdicio
    Categoria: Unnecessary Procedure Prevention

    Objetivo:
    - Evitar exames de rastreamento oncologico em pacientes fora do grupo de risco
    - Seguir diretrizes de rastreamento baseadas em evidencias
    - Reduzir exposicao a procedimentos invasivos desnecessarios

    Indicacoes para Bloqueio (Choosing Wisely):
    - Mamografia antes dos 40 anos sem fator de risco
    - PSA em homens com menos de 50 anos sem risco
    - Colonoscopia antes dos 45 anos sem indicacao clinica

    Excecoes Permitidas:
    - Historico familiar de cancer em 1o grau
    - Sindromes geneticas documentadas
    - Sintomas ou achados clinicos suspeitos

    Referencias Normativas:
    - ABM Choosing Wisely Brasil 2024
    - INCA - Diretrizes de Rastreamento 2023
    - NICE Do Not Do Recommendations
  -->

  <decision id="Decision_UNN_001" name="Prevencao Desnecessario - Rastreamento Oncologico Fora Grupo Risco">
    <decisionTable id="DecisionTable_UNN_001" hitPolicy="FIRST">

      <!-- Input 1: Paciente dentro do grupo de risco por idade -->
      <input id="Input_pacienteDentroGrupoRiscoIdade" label="Paciente Dentro do Grupo de Risco por Idade">
        <inputExpression id="InputExpr_pacienteDentroGrupoRiscoIdade" typeRef="boolean">
          <text>pacienteDentroGrupoRiscoIdade</text>
        </inputExpression>
      </input>

      <!-- Input 2: Historico familiar de cancer -->
      <input id="Input_historicoFamiliarCancer" label="Historico Familiar de Cancer em 1o Grau">
        <inputExpression id="InputExpr_historicoFamiliarCancer" typeRef="boolean">
          <text>historicoFamiliarCancer</text>
        </inputExpression>
      </input>

      <!-- Input 3: Sindrome genetica documentada -->
      <input id="Input_sindromeGeneticaDocumentada" label="Sindrome Genetica Documentada (BRCA, Lynch, etc.)">
        <inputExpression id="InputExpr_sindromeGeneticaDocumentada" typeRef="boolean">
          <text>sindromeGeneticaDocumentada</text>
        </inputExpression>
      </input>

      <!-- Input 4: Sintomas ou achados suspeitos -->
      <input id="Input_sintomasAchadosSuspeitos" label="Sintomas ou Achados Clinicos Suspeitos">
        <inputExpression id="InputExpr_sintomasAchadosSuspeitos" typeRef="boolean">
          <text>sintomasAchadosSuspeitos</text>
        </inputExpression>
      </input>

      <!-- Output 1: Resultado -->
      <output id="Output_resultado" label="Resultado" name="resultado" typeRef="string">
        <outputValues id="OutputValues_resultado">
          <text>"Aprovado","Reprovado","Pendente"</text>
        </outputValues>
      </output>

      <!-- Output 2: Observacao -->
      <output id="Output_observacao" label="Observacao" name="observacao" typeRef="string" />

      <!-- Output 3: Fundamentacao -->
      <output id="Output_fundamentacao" label="Fundamentacao Legal" name="fundamentacao" typeRef="string" />
      <!-- Output 4: Alertas de Desperdicio -->
      <output id="Output_alertasDesperdicio" label="Alertas de Desperdicio" name="alertasDesperdicio" typeRef="string">
        <outputValues id="OutputValues_alertasDesperdicio">
          <text>"NENHUM","DUP","FREQ","ESC","DOC","PROT","MULTI"</text>
        </outputValues>
      </output>

      <!-- Output 5: Acao Recomendada -->
      <output id="Output_acaoRecomendada" label="Acao Recomendada" name="acaoRecomendada" typeRef="string">
        <outputValues id="OutputValues_acaoRecomendada">
          <text>"APROVAR","NEGAR","SOLICITAR_INFO","AGUARDAR_PRAZO","SUGERIR_ALTERNATIVA"</text>
        </outputValues>
      </output>


      <!-- ============================================== -->
      <!-- REPROVADO: Fora do grupo de risco             -->
      <!-- ============================================== -->
      <rule id="Rule_UNN_001_Reprovado_ForaGrupoRisco">
        <description>Reprovado - Rastreamento fora do grupo de risco sem indicacao</description>
        <inputEntry id="IE_Rep1_1"><text>false</text></inputEntry>
        <inputEntry id="IE_Rep1_2"><text>false</text></inputEntry>
        <inputEntry id="IE_Rep1_3"><text>false</text></inputEntry>
        <inputEntry id="IE_Rep1_4"><text>false</text></inputEntry>
        <outputEntry id="OE_Rep1_1"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OE_Rep1_2"><text>"Rastreamento oncologico nao indicado. Paciente fora do grupo de risco por idade e sem fatores de risco adicionais. Conforme Choosing Wisely Brasil."</text></outputEntry>
        <outputEntry id="OE_Rep1_3"><text>"ABM Choosing Wisely Brasil 2024; INCA Diretrizes 2023"</text></outputEntry>
        <outputEntry id="OE_Rule_UNN_001_Reprovado_ForaGrupoRisco_4"><text>"PROT"</text></outputEntry>
        <outputEntry id="OE_Rule_UNN_001_Reprovado_ForaGrupoRisco_5"><text>"NEGAR"</text></outputEntry>
      </rule>

      <!-- ============================================== -->
      <!-- APROVADO: Sintomas ou achados suspeitos       -->
      <!-- ============================================== -->
      <rule id="Rule_UNN_001_Aprovado_Sintomas">
        <description>Aprovado - Sintomas ou achados clinicos suspeitos justificam investigacao</description>
        <inputEntry id="IE_Aprov1_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Aprov1_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Aprov1_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Aprov1_4"><text>true</text></inputEntry>
        <outputEntry id="OE_Aprov1_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Aprov1_2"><text>"Exame autorizado - Sintomas ou achados clinicos suspeitos justificam investigacao diagnostica."</text></outputEntry>
        <outputEntry id="OE_Aprov1_3"><text>"Investigacao diagnostica - Indicacao clinica"</text></outputEntry>
        <outputEntry id="OE_Rule_UNN_001_Aprovado_Sintomas_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Rule_UNN_001_Aprovado_Sintomas_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <!-- ============================================== -->
      <!-- APROVADO: Sindrome genetica documentada       -->
      <!-- ============================================== -->
      <rule id="Rule_UNN_001_Aprovado_SindromeGenetica">
        <description>Aprovado - Sindrome genetica documentada eleva risco</description>
        <inputEntry id="IE_Aprov2_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Aprov2_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Aprov2_3"><text>true</text></inputEntry>
        <inputEntry id="IE_Aprov2_4"><text>-</text></inputEntry>
        <outputEntry id="OE_Aprov2_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Aprov2_2"><text>"Rastreamento autorizado - Sindrome genetica documentada justifica rastreamento precoce."</text></outputEntry>
        <outputEntry id="OE_Aprov2_3"><text>"Alto risco genetico - NCCN Guidelines"</text></outputEntry>
        <outputEntry id="OE_Rule_UNN_001_Aprovado_SindromeGenetica_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Rule_UNN_001_Aprovado_SindromeGenetica_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <!-- ============================================== -->
      <!-- APROVADO: Historico familiar                  -->
      <!-- ============================================== -->
      <rule id="Rule_UNN_001_Aprovado_HistoricoFamiliar">
        <description>Aprovado - Historico familiar de cancer em 1o grau</description>
        <inputEntry id="IE_Aprov3_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Aprov3_2"><text>true</text></inputEntry>
        <inputEntry id="IE_Aprov3_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Aprov3_4"><text>-</text></inputEntry>
        <outputEntry id="OE_Aprov3_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Aprov3_2"><text>"Rastreamento autorizado - Historico familiar em parente de 1o grau eleva risco."</text></outputEntry>
        <outputEntry id="OE_Aprov3_3"><text>"Risco familiar elevado - INCA Diretrizes 2023"</text></outputEntry>
        <outputEntry id="OE_Rule_UNN_001_Aprovado_HistoricoFamiliar_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Rule_UNN_001_Aprovado_HistoricoFamiliar_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <!-- ============================================== -->
      <!-- APROVADO: Dentro do grupo de risco            -->
      <!-- ============================================== -->
      <rule id="Rule_UNN_001_Aprovado_GrupoRisco">
        <description>Aprovado - Paciente dentro do grupo de risco por idade</description>
        <inputEntry id="IE_Aprov4_1"><text>true</text></inputEntry>
        <inputEntry id="IE_Aprov4_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Aprov4_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Aprov4_4"><text>-</text></inputEntry>
        <outputEntry id="OE_Aprov4_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Aprov4_2"><text>"Rastreamento autorizado - Paciente dentro da faixa etaria recomendada para rastreamento."</text></outputEntry>
        <outputEntry id="OE_Aprov4_3"><text>"Rastreamento populacional - INCA 2023"</text></outputEntry>
        <outputEntry id="OE_Rule_UNN_001_Aprovado_GrupoRisco_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Rule_UNN_001_Aprovado_GrupoRisco_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <!-- ============================================== -->
      <!-- PENDENTE: Fallback                            -->
      <!-- ============================================== -->
      <rule id="Rule_UNN_001_Pendente_Fallback">
        <description>Pendente - Requer analise manual por auditor</description>
        <inputEntry id="IE_Pend_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Pend_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Pend_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Pend_4"><text>-</text></inputEntry>
        <outputEntry id="OE_Pend_1"><text>"Pendente"</text></outputEntry>
        <outputEntry id="OE_Pend_2"><text>"Caso requer analise manual para avaliacao de indicacao de rastreamento oncologico."</text></outputEntry>
        <outputEntry id="OE_Pend_3"><text>"Auditoria medica - Processo manual"</text></outputEntry>
        <outputEntry id="OE_Rule_UNN_001_Pendente_Fallback_4"><text>"DOC"</text></outputEntry>
        <outputEntry id="OE_Rule_UNN_001_Pendente_Fallback_5"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>

    </decisionTable>
  </decision>
</definitions>
