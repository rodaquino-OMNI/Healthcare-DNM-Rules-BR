<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="https://www.omg.org/spec/DMN/20191111/MODEL/"
             xmlns:dmndi="https://www.omg.org/spec/DMN/20191111/DMNDI/"
             xmlns:dc="http://www.omg.org/spec/DD/20100524/DC/"
             xmlns:di="http://www.omg.org/spec/DD/20100524/DI/"
             id="Definitions_UNN_003"
             name="Prevencao de Procedimento Desnecessario - Ressonancia para Lombalgia Aguda"
             namespace="http://camunda.org/schema/1.0/dmn"
             exporter="Camunda Modeler"
             exporterVersion="5.0.0">
  <!--
    UNN-003 - Prevencao de Procedimento Desnecessario - Ressonancia para Lombalgia Aguda
    Versao: 1.0.0 (2026-02-07)
    Especialidade: Controle de Desperdicio
    Categoria: Unnecessary Procedure Prevention

    Objetivo:
    - Evitar RM de coluna lombar nas primeiras 6 semanas de lombalgia aguda
    - Seguir diretriz Choosing Wisely para dor lombar
    - Reduzir custos e achados incidentais que levam a cirurgias desnecessarias

    Indicacoes para Bloqueio (Choosing Wisely):
    - RM de coluna nas primeiras 6 semanas de lombalgia
    - Ausencia de red flags (sinais de alerta)
    - Paciente sem deficit neurologico

    Excecoes Permitidas (Red Flags):
    - Deficit neurologico progressivo
    - Sindrome da cauda equina
    - Suspeita de infeccao ou neoplasia
    - Trauma significativo

    Referencias Normativas:
    - ABM Choosing Wisely Brasil 2024 - Ortopedia
    - ACR Appropriateness Criteria - Lombalgia
    - NICE Low Back Pain Guidelines 2023
  -->

  <decision id="Decision_UNN_003" name="Prevencao Desnecessario - Ressonancia para Lombalgia Aguda">
    <decisionTable id="DecisionTable_UNN_003" hitPolicy="FIRST">

      <!-- Input 1: Lombalgia aguda menos de 6 semanas -->
      <input id="Input_lombalgiaMenosSeisSemanas" label="Lombalgia Aguda com Menos de 6 Semanas">
        <inputExpression id="InputExpr_lombalgiaMenosSeisSemanas" typeRef="boolean">
          <text>lombalgiaMenosSeisSemanas</text>
        </inputExpression>
      </input>

      <!-- Input 2: Deficit neurologico presente -->
      <input id="Input_deficitNeurologicoPresente" label="Deficit Neurologico Presente ou Progressivo">
        <inputExpression id="InputExpr_deficitNeurologicoPresente" typeRef="boolean">
          <text>deficitNeurologicoPresente</text>
        </inputExpression>
      </input>

      <!-- Input 3: Suspeita de red flags -->
      <input id="Input_suspeitaRedFlags" label="Red Flags Presentes (infeccao, neoplasia, cauda equina)">
        <inputExpression id="InputExpr_suspeitaRedFlags" typeRef="boolean">
          <text>suspeitaRedFlags</text>
        </inputExpression>
      </input>

      <!-- Input 4: Trauma significativo -->
      <input id="Input_traumaSignificativo" label="Trauma Significativo Recente">
        <inputExpression id="InputExpr_traumaSignificativo" typeRef="boolean">
          <text>traumaSignificativo</text>
        </inputExpression>
      </input>

      <!-- Output 1: Resultado -->
      <output id="Output_resultado" label="Resultado" name="resultado" typeRef="string">
        <outputValues id="OutputValues_resultado">
          <text>"Aprovado","Reprovado","Pendente"</text>
        </outputValues>
      </output>

      <!-- Output 2: Observacao -->
      <output id="Output_observacao" label="Observacao" name="observacao" typeRef="string" />

      <!-- Output 3: Fundamentacao -->
      <output id="Output_fundamentacao" label="Fundamentacao Legal" name="fundamentacao" typeRef="string" />
      <!-- Output 4: Alertas de Desperdicio -->
      <output id="Output_alertasDesperdicio" label="Alertas de Desperdicio" name="alertasDesperdicio" typeRef="string">
        <outputValues id="OutputValues_alertasDesperdicio">
          <text>"NENHUM","DUP","FREQ","ESC","DOC","PROT","MULTI"</text>
        </outputValues>
      </output>

      <!-- Output 5: Acao Recomendada -->
      <output id="Output_acaoRecomendada" label="Acao Recomendada" name="acaoRecomendada" typeRef="string">
        <outputValues id="OutputValues_acaoRecomendada">
          <text>"APROVAR","NEGAR","SOLICITAR_INFO","AGUARDAR_PRAZO","SUGERIR_ALTERNATIVA"</text>
        </outputValues>
      </output>


      <!-- ============================================== -->
      <!-- REPROVADO: RM precoce sem red flags           -->
      <!-- ============================================== -->
      <rule id="Rule_UNN_003_Reprovado_RMPrecoce">
        <description>Reprovado - RM nas primeiras 6 semanas sem sinais de alarme</description>
        <inputEntry id="IE_Rep1_1"><text>true</text></inputEntry>
        <inputEntry id="IE_Rep1_2"><text>false</text></inputEntry>
        <inputEntry id="IE_Rep1_3"><text>false</text></inputEntry>
        <inputEntry id="IE_Rep1_4"><text>false</text></inputEntry>
        <outputEntry id="OE_Rep1_1"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OE_Rep1_2"><text>"RM de coluna nao indicada nas primeiras 6 semanas de lombalgia aguda sem red flags. Maioria dos casos resolve com tratamento conservador."</text></outputEntry>
        <outputEntry id="OE_Rep1_3"><text>"ABM Choosing Wisely 2024; ACR Appropriateness Criteria"</text></outputEntry>
        <outputEntry id="OE_Rule_UNN_003_Reprovado_RMPrecoce_4"><text>"PROT"</text></outputEntry>
        <outputEntry id="OE_Rule_UNN_003_Reprovado_RMPrecoce_5"><text>"NEGAR"</text></outputEntry>
      </rule>

      <!-- ============================================== -->
      <!-- APROVADO: Deficit neurologico                 -->
      <!-- ============================================== -->
      <rule id="Rule_UNN_003_Aprovado_DeficitNeuro">
        <description>Aprovado - Deficit neurologico requer investigacao imediata</description>
        <inputEntry id="IE_Aprov1_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Aprov1_2"><text>true</text></inputEntry>
        <inputEntry id="IE_Aprov1_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Aprov1_4"><text>-</text></inputEntry>
        <outputEntry id="OE_Aprov1_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Aprov1_2"><text>"RM autorizada - Deficit neurologico presente requer investigacao imediata."</text></outputEntry>
        <outputEntry id="OE_Aprov1_3"><text>"Red Flag - Deficit neurologico"</text></outputEntry>
        <outputEntry id="OE_Rule_UNN_003_Aprovado_DeficitNeuro_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Rule_UNN_003_Aprovado_DeficitNeuro_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <!-- ============================================== -->
      <!-- APROVADO: Red flags presentes                 -->
      <!-- ============================================== -->
      <rule id="Rule_UNN_003_Aprovado_RedFlags">
        <description>Aprovado - Red flags presentes (infeccao, neoplasia, cauda equina)</description>
        <inputEntry id="IE_Aprov2_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Aprov2_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Aprov2_3"><text>true</text></inputEntry>
        <inputEntry id="IE_Aprov2_4"><text>-</text></inputEntry>
        <outputEntry id="OE_Aprov2_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Aprov2_2"><text>"RM autorizada - Sinais de alarme presentes (suspeita de infeccao, neoplasia ou sindrome da cauda equina)."</text></outputEntry>
        <outputEntry id="OE_Aprov2_3"><text>"Red Flags - Investigacao urgente"</text></outputEntry>
        <outputEntry id="OE_Rule_UNN_003_Aprovado_RedFlags_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Rule_UNN_003_Aprovado_RedFlags_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <!-- ============================================== -->
      <!-- APROVADO: Trauma significativo                -->
      <!-- ============================================== -->
      <rule id="Rule_UNN_003_Aprovado_Trauma">
        <description>Aprovado - Trauma significativo requer investigacao</description>
        <inputEntry id="IE_Aprov3_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Aprov3_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Aprov3_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Aprov3_4"><text>true</text></inputEntry>
        <outputEntry id="OE_Aprov3_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Aprov3_2"><text>"RM autorizada - Trauma significativo requer avaliacao de lesoes estruturais."</text></outputEntry>
        <outputEntry id="OE_Aprov3_3"><text>"Trauma - Investigacao indicada"</text></outputEntry>
        <outputEntry id="OE_Rule_UNN_003_Aprovado_Trauma_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Rule_UNN_003_Aprovado_Trauma_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <!-- ============================================== -->
      <!-- APROVADO: Lombalgia cronica (>6 sem)          -->
      <!-- ============================================== -->
      <rule id="Rule_UNN_003_Aprovado_Cronica">
        <description>Aprovado - Lombalgia cronica apos 6 semanas sem melhora</description>
        <inputEntry id="IE_Aprov4_1"><text>false</text></inputEntry>
        <inputEntry id="IE_Aprov4_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Aprov4_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Aprov4_4"><text>-</text></inputEntry>
        <outputEntry id="OE_Aprov4_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Aprov4_2"><text>"RM autorizada - Lombalgia persistente apos 6 semanas de tratamento conservador."</text></outputEntry>
        <outputEntry id="OE_Aprov4_3"><text>"Lombalgia cronica - Investigacao indicada"</text></outputEntry>
        <outputEntry id="OE_Rule_UNN_003_Aprovado_Cronica_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Rule_UNN_003_Aprovado_Cronica_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <!-- ============================================== -->
      <!-- PENDENTE: Fallback                            -->
      <!-- ============================================== -->
      <rule id="Rule_UNN_003_Pendente_Fallback">
        <description>Pendente - Requer analise manual por auditor</description>
        <inputEntry id="IE_Pend_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Pend_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Pend_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Pend_4"><text>-</text></inputEntry>
        <outputEntry id="OE_Pend_1"><text>"Pendente"</text></outputEntry>
        <outputEntry id="OE_Pend_2"><text>"Caso requer analise manual para avaliacao de indicacao de RM de coluna."</text></outputEntry>
        <outputEntry id="OE_Pend_3"><text>"Auditoria medica - Processo manual"</text></outputEntry>
        <outputEntry id="OE_Rule_UNN_003_Pendente_Fallback_4"><text>"DOC"</text></outputEntry>
        <outputEntry id="OE_Rule_UNN_003_Pendente_Fallback_5"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>

    </decisionTable>
  </decision>
</definitions>
