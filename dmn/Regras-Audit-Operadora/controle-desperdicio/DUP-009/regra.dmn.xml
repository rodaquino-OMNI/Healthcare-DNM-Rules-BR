<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="https://www.omg.org/spec/DMN/20191111/MODEL/"
             xmlns:dmndi="https://www.omg.org/spec/DMN/20191111/DMNDI/"
             xmlns:dc="http://www.omg.org/spec/DD/20100524/DC/"
             xmlns:di="http://www.omg.org/spec/DD/20100524/DI/"
             id="Definitions_DUP_009"
             name="Prevencao de Duplicidade - Internacao Readmissao Precoce"
             namespace="http://camunda.org/schema/1.0/dmn"
             exporter="Camunda Modeler"
             exporterVersion="5.0.0">
  <!--
    DUP-009 - Prevencao de Duplicidade de Internacao - Readmissao Precoce
    Versao: 1.0.0 (2026-02-07)
    Especialidade: Controle de Desperdicio
    Categoria: Duplicate Procedure Prevention

    Objetivo:
    - Detectar readmissoes hospitalares dentro de 30 dias
    - Avaliar se readmissao e continuidade do mesmo episodio
    - Garantir qualidade assistencial evitando altas precoces

    Indicacoes para Bloqueio:
    - Readmissao em menos de 72h pela mesma causa
    - Readmissao em 30 dias sem evolucao clinica documentada
    - Alta precoce seguida de complicacao

    Excecoes Permitidas:
    - Internacao programada (quimioterapia, dialise)
    - Nova patologia nao relacionada
    - Complicacao imprevisivel documentada

    Referencias Normativas:
    - ANS - RN 465/2021 - Internacao Hospitalar
    - CFM - Resolucao sobre Alta Hospitalar
    - ANAHP - Indicadores de Qualidade 2023
  -->

  <decision id="Decision_DUP_009" name="Prevencao Duplicidade - Internacao Readmissao Precoce">
    <decisionTable id="DecisionTable_DUP_009" hitPolicy="FIRST">

      <!-- Input 1: Readmissao em menos de 30 dias -->
      <input id="Input_readmissaoMenos30Dias" label="Readmissao em Menos de 30 Dias">
        <inputExpression id="InputExpr_readmissaoMenos30Dias" typeRef="boolean">
          <text>readmissaoMenos30Dias</text>
        </inputExpression>
      </input>

      <!-- Input 2: Mesma causa da internacao anterior -->
      <input id="Input_mesmaCausaInternacaoAnterior" label="Mesma Causa da Internacao Anterior">
        <inputExpression id="InputExpr_mesmaCausaInternacaoAnterior" typeRef="boolean">
          <text>mesmaCausaInternacaoAnterior</text>
        </inputExpression>
      </input>

      <!-- Input 3: Internacao programada -->
      <input id="Input_internacaoProgramada" label="Internacao Programada (QT, Dialise, etc.)">
        <inputExpression id="InputExpr_internacaoProgramada" typeRef="boolean">
          <text>internacaoProgramada</text>
        </inputExpression>
      </input>

      <!-- Input 4: Complicacao imprevisivel documentada -->
      <input id="Input_complicacaoImprevisivelDocumentada" label="Complicacao Imprevisivel Documentada">
        <inputExpression id="InputExpr_complicacaoImprevisivelDocumentada" typeRef="boolean">
          <text>complicacaoImprevisivelDocumentada</text>
        </inputExpression>
      </input>

      <!-- Output 1: Resultado -->
      <output id="Output_resultado" label="Resultado" name="resultado" typeRef="string">
        <outputValues id="OutputValues_resultado">
          <text>"Aprovado","Reprovado","Pendente"</text>
        </outputValues>
      </output>

      <!-- Output 2: Observacao -->
      <output id="Output_observacao" label="Observacao" name="observacao" typeRef="string" />

      <!-- Output 3: Fundamentacao -->
      <output id="Output_fundamentacao" label="Fundamentacao Legal" name="fundamentacao" typeRef="string" />
      <!-- Output 4: Alertas de Desperdicio -->
      <output id="Output_alertasDesperdicio" label="Alertas de Desperdicio" name="alertasDesperdicio" typeRef="string">
        <outputValues id="OutputValues_alertasDesperdicio">
          <text>"NENHUM","DUP","FREQ","ESC","DOC","PROT","MULTI"</text>
        </outputValues>
      </output>

      <!-- Output 5: Acao Recomendada -->
      <output id="Output_acaoRecomendada" label="Acao Recomendada" name="acaoRecomendada" typeRef="string">
        <outputValues id="OutputValues_acaoRecomendada">
          <text>"APROVAR","NEGAR","SOLICITAR_INFO","AGUARDAR_PRAZO","SUGERIR_ALTERNATIVA"</text>
        </outputValues>
      </output>


      <!-- ============================================== -->
      <!-- REPROVADO: Readmissao precoce mesma causa     -->
      <!-- ============================================== -->
      <rule id="Rule_DUP_009_Reprovado_ReadmissaoPrecoce">
        <description>Reprovado - Readmissao precoce pela mesma causa sugere alta prematura</description>
        <inputEntry id="IE_Rep1_1"><text>true</text></inputEntry>
        <inputEntry id="IE_Rep1_2"><text>true</text></inputEntry>
        <inputEntry id="IE_Rep1_3"><text>false</text></inputEntry>
        <inputEntry id="IE_Rep1_4"><text>false</text></inputEntry>
        <outputEntry id="OE_Rep1_1"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OE_Rep1_2"><text>"Readmissao precoce pela mesma causa. Avaliar continuidade do episodio anterior. Solicitar justificativa de alta da internacao precedente."</text></outputEntry>
        <outputEntry id="OE_Rep1_3"><text>"ANAHP Indicadores Qualidade 2023; ANS RN 465/2021"</text></outputEntry>
        <outputEntry id="OE_Rule_DUP_009_Reprovado_ReadmissaoPrecoce_4"><text>"DOC"</text></outputEntry>
        <outputEntry id="OE_Rule_DUP_009_Reprovado_ReadmissaoPrecoce_5"><text>"NEGAR"</text></outputEntry>
      </rule>

      <!-- ============================================== -->
      <!-- APROVADO: Internacao programada               -->
      <!-- ============================================== -->
      <rule id="Rule_DUP_009_Aprovado_Programada">
        <description>Aprovado - Internacao programada nao configura readmissao</description>
        <inputEntry id="IE_Aprov1_1"><text>true</text></inputEntry>
        <inputEntry id="IE_Aprov1_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Aprov1_3"><text>true</text></inputEntry>
        <inputEntry id="IE_Aprov1_4"><text>-</text></inputEntry>
        <outputEntry id="OE_Aprov1_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Aprov1_2"><text>"Internacao autorizada - Internacao programada (quimioterapia, dialise, procedimento eletivo)."</text></outputEntry>
        <outputEntry id="OE_Aprov1_3"><text>"Internacao programada - Excecao aplicavel"</text></outputEntry>
        <outputEntry id="OE_Rule_DUP_009_Aprovado_Programada_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Rule_DUP_009_Aprovado_Programada_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <!-- ============================================== -->
      <!-- APROVADO: Complicacao imprevisivel            -->
      <!-- ============================================== -->
      <rule id="Rule_DUP_009_Aprovado_Complicacao">
        <description>Aprovado - Complicacao imprevisivel documentada</description>
        <inputEntry id="IE_Aprov2_1"><text>true</text></inputEntry>
        <inputEntry id="IE_Aprov2_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Aprov2_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Aprov2_4"><text>true</text></inputEntry>
        <outputEntry id="OE_Aprov2_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Aprov2_2"><text>"Internacao autorizada - Complicacao imprevisivel documentada justifica nova admissao."</text></outputEntry>
        <outputEntry id="OE_Aprov2_3"><text>"Complicacao documentada - Internacao justificada"</text></outputEntry>
        <outputEntry id="OE_Rule_DUP_009_Aprovado_Complicacao_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Rule_DUP_009_Aprovado_Complicacao_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <!-- ============================================== -->
      <!-- APROVADO: Causa diferente                     -->
      <!-- ============================================== -->
      <rule id="Rule_DUP_009_Aprovado_CausaDiferente">
        <description>Aprovado - Nova internacao por causa diferente</description>
        <inputEntry id="IE_Aprov3_1"><text>true</text></inputEntry>
        <inputEntry id="IE_Aprov3_2"><text>false</text></inputEntry>
        <inputEntry id="IE_Aprov3_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Aprov3_4"><text>-</text></inputEntry>
        <outputEntry id="OE_Aprov3_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Aprov3_2"><text>"Internacao autorizada - Nova patologia nao relacionada a internacao anterior."</text></outputEntry>
        <outputEntry id="OE_Aprov3_3"><text>"Patologia distinta - Novo episodio"</text></outputEntry>
        <outputEntry id="OE_Rule_DUP_009_Aprovado_CausaDiferente_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Rule_DUP_009_Aprovado_CausaDiferente_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <!-- ============================================== -->
      <!-- APROVADO: Sem readmissao precoce              -->
      <!-- ============================================== -->
      <rule id="Rule_DUP_009_Aprovado_SemReadmissao">
        <description>Aprovado - Intervalo adequado desde ultima internacao</description>
        <inputEntry id="IE_Aprov4_1"><text>false</text></inputEntry>
        <inputEntry id="IE_Aprov4_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Aprov4_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Aprov4_4"><text>-</text></inputEntry>
        <outputEntry id="OE_Aprov4_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Aprov4_2"><text>"Internacao autorizada - Mais de 30 dias desde ultima internacao."</text></outputEntry>
        <outputEntry id="OE_Aprov4_3"><text>"Verificacao de readmissao - OK"</text></outputEntry>
        <outputEntry id="OE_Rule_DUP_009_Aprovado_SemReadmissao_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Rule_DUP_009_Aprovado_SemReadmissao_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <!-- ============================================== -->
      <!-- PENDENTE: Fallback                            -->
      <!-- ============================================== -->
      <rule id="Rule_DUP_009_Pendente_Fallback">
        <description>Pendente - Requer analise manual por auditor</description>
        <inputEntry id="IE_Pend_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Pend_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Pend_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Pend_4"><text>-</text></inputEntry>
        <outputEntry id="OE_Pend_1"><text>"Pendente"</text></outputEntry>
        <outputEntry id="OE_Pend_2"><text>"Caso requer analise manual por auditor para avaliacao de readmissao hospitalar."</text></outputEntry>
        <outputEntry id="OE_Pend_3"><text>"Auditoria hospitalar - Processo manual"</text></outputEntry>
        <outputEntry id="OE_Rule_DUP_009_Pendente_Fallback_4"><text>"DOC"</text></outputEntry>
        <outputEntry id="OE_Rule_DUP_009_Pendente_Fallback_5"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>

    </decisionTable>
  </decision>
</definitions>
