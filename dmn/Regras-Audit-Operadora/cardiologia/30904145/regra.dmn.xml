<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="https://www.omg.org/spec/DMN/20191111/MODEL/"
             xmlns:camunda="http://camunda.org/schema/1.0/dmn"
             id="Definitions_30904145"
             name="Denervacao Renal por Cateter"
             namespace="http://camunda.org/schema/1.0/dmn">

  <!--
    ===============================================================================
    TUSS: 30904145
    Procedimento: Denervacao Renal por Cateter
    Versao: 1.0.0-LEAN-TIER2
    Data: 2026-02-07
    ===============================================================================

    INDICACOES CLINICAS (ACC/AHA/ESC 2024):
    - Hipertensao resistente confirmada (>= 3 anti-hipertensivos + diuretico) (Classe IIa)
    - Hipertensao refrataria (falha a 5+ drogas) (Classe IIa)
    - Intolerancia a multiplos anti-hipertensivos (Classe IIb)
    - Hipertensao com alta descarga simpatica (Classe IIb)

    CONTRAINDICACOES:
    - Anatomia renal desfavoravel (estenose > 50%, arteria < 4mm)
    - TFG < 45 ml/min/1.73m2
    - Hipertensao secundaria nao tratada
    - Gestacao ou planejamento de gestacao
    - Classe III: PA controlada, pseudoresistencia

    ALERTAS DE DESPERDICIO:
    - DUP: Repeticao denervacao < 365 dias sem justificativa
    - FREQ: Multiplas denervacoes
    - DOC: Falta MAPA 24h, AngioTC renal
    - ESC: Denervacao sem TMO otimizada (3+ drogas)
    - PROT: HAS nao resistente, secundaria nao tratada

    REFERENCIAS TECNICAS:
    - ACC/AHA 2024 Hypertension Guidelines
    - ESC 2023 Hypertension Guidelines
    - SYMPLICITY HTN-3, SPYRAL HTN-ON/OFF MED
    - RADIANCE-HTN SOLO/TRIO
    - SBC 2024 Diretrizes Hipertensao

    ===============================================================================
  -->

  <decision id="Decision_30904145" name="Regra Clinica LEAN TIER-2 - Denervacao Renal">
    <decisionTable id="DecisionTable_30904145" hitPolicy="FIRST">

      <!-- ========== INPUTS (6 - Padrao LEAN TIER-2) ========== -->

      <input id="Input_tipoHAS" label="Tipo de Hipertensao" camunda:inputVariable="tipoHAS">
        <inputExpression id="InputExpression_tipoHAS" typeRef="string">
          <text>tipoHAS</text>
        </inputExpression>
        <inputValues id="InputValues_tipoHAS">
          <text>"ResistenteConfirmada","Refrataria","IntoleranciaMultipla","Secundaria","NaoResistente"</text>
        </inputValues>
      </input>

      <input id="Input_historicoClinico" label="Historico Clinico" camunda:inputVariable="historicoClinico">
        <inputExpression id="InputExpression_historicoClinico" typeRef="string">
          <text>historicoClinico</text>
        </inputExpression>
        <inputValues id="InputValues_historicoClinico">
          <text>"Adequado","Incompleto","NaoDocumentado"</text>
        </inputValues>
      </input>

      <input id="Input_classeIndicacao" label="Classe de Indicacao (ACC/AHA)" camunda:inputVariable="classeIndicacao">
        <inputExpression id="InputExpression_classeIndicacao" typeRef="string">
          <text>classeIndicacao</text>
        </inputExpression>
        <inputValues id="InputValues_classeIndicacao">
          <text>"Classe I","Classe IIa","Classe IIb","Classe III"</text>
        </inputValues>
      </input>

      <input id="Input_anatomiaRenal" label="Anatomia Renal" camunda:inputVariable="anatomiaRenal">
        <inputExpression id="InputExpression_anatomiaRenal" typeRef="string">
          <text>anatomiaRenal</text>
        </inputExpression>
        <inputValues id="InputValues_anatomiaRenal">
          <text>"Favoravel","Desfavoravel","NaoAvaliada"</text>
        </inputValues>
      </input>

      <input id="Input_funcaoRenal" label="Funcao Renal (TFG)" camunda:inputVariable="funcaoRenal">
        <inputExpression id="InputExpression_funcaoRenal" typeRef="string">
          <text>funcaoRenal</text>
        </inputExpression>
        <inputValues id="InputValues_funcaoRenal">
          <text>"Maior60","45a60","Menor45","NaoAvaliada"</text>
        </inputValues>
      </input>

      <input id="Input_ultimoProcedimentoDias" label="Ultimo Procedimento Similar (dias)" camunda:inputVariable="ultimoProcedimentoDias">
        <inputExpression id="InputExpression_ultimoProcedimentoDias" typeRef="integer">
          <text>ultimoProcedimentoDias</text>
        </inputExpression>
      </input>

      <!-- ========== OUTPUTS (5 - Padrao LEAN TIER-2) ========== -->

      <output id="Output_resultado" label="Resultado" name="resultado" typeRef="string">
        <outputValues id="OutputValues_resultado">
          <text>"Aprovado","Reprovado","Pendente"</text>
        </outputValues>
      </output>

      <output id="Output_observacao" label="Observacao Clinica" name="observacao" typeRef="string" />

      <output id="Output_fundamentacao" label="Fundamentacao Tecnica" name="fundamentacao" typeRef="string" />

      <output id="Output_alertasDesperdicio" label="Alertas de Desperdicio" name="alertasDesperdicio" typeRef="string">
        <outputValues id="OutputValues_alertasDesperdicio">
          <text>"NENHUM","DUP","FREQ","ESC","DOC","PROT","MULTI"</text>
        </outputValues>
      </output>

      <output id="Output_acaoRecomendada" label="Acao Recomendada" name="acaoRecomendada" typeRef="string">
        <outputValues id="OutputValues_acaoRecomendada">
          <text>"APROVAR","NEGAR","SOLICITAR_INFO","AGUARDAR_PRAZO","SUGERIR_ALTERNATIVA"</text>
        </outputValues>
      </output>

      <!-- =============================================================== -->
      <!-- REGRAS DE REPROVACAO (Prioridade Maxima - Waste Detection)      -->
      <!-- =============================================================== -->

      <!-- REGRA 1: PROT - Classe III nao indicado -->
      <rule id="Rule_PROT_ClasseIII">
        <description>WASTE PROT: Classe III - denervacao renal nao indicada</description>
        <inputEntry id="InputEntry_PROT1_1"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_PROT1_2"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_PROT1_3"><text>"Classe III"</text></inputEntry>
        <inputEntry id="InputEntry_PROT1_4"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_PROT1_5"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_PROT1_6"><text>-</text></inputEntry>
        <outputEntry id="OutputEntry_PROT1_resultado"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OutputEntry_PROT1_observacao"><text>"Classe III - denervacao renal nao indicada para PA controlada ou pseudoresistencia"</text></outputEntry>
        <outputEntry id="OutputEntry_PROT1_fundamentacao"><text>"ACC/AHA 2024 Classe III: Denervacao sem beneficio em PA controlada. Otimizar adesao e revisar esquema"</text></outputEntry>
        <outputEntry id="OutputEntry_PROT1_alertasDesperdicio"><text>"PROT"</text></outputEntry>
        <outputEntry id="OutputEntry_PROT1_acaoRecomendada"><text>"NEGAR"</text></outputEntry>
      </rule>

      <!-- REGRA 2: PROT - Anatomia renal desfavoravel -->
      <rule id="Rule_PROT_AnatomiaDesfavoravel">
        <description>WASTE PROT: Anatomia renal desfavoravel - procedimento contraindicado</description>
        <inputEntry id="InputEntry_PROT2_1"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_PROT2_2"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_PROT2_3"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_PROT2_4"><text>"Desfavoravel"</text></inputEntry>
        <inputEntry id="InputEntry_PROT2_5"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_PROT2_6"><text>-</text></inputEntry>
        <outputEntry id="OutputEntry_PROT2_resultado"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OutputEntry_PROT2_observacao"><text>"Anatomia renal desfavoravel (estenose maior 50%, arteria menor 4mm) - contraindicado"</text></outputEntry>
        <outputEntry id="OutputEntry_PROT2_fundamentacao"><text>"Criterios anatomicos mandatorios: arterias maior 4mm, comprimento maior 20mm, sem estenose maior 50%"</text></outputEntry>
        <outputEntry id="OutputEntry_PROT2_alertasDesperdicio"><text>"PROT"</text></outputEntry>
        <outputEntry id="OutputEntry_PROT2_acaoRecomendada"><text>"NEGAR"</text></outputEntry>
      </rule>

      <!-- REGRA 3: PROT - TFG < 45 -->
      <rule id="Rule_PROT_TFGBaixa">
        <description>WASTE PROT: TFG menor 45 - risco renal elevado</description>
        <inputEntry id="InputEntry_PROT3_1"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_PROT3_2"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_PROT3_3"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_PROT3_4"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_PROT3_5"><text>"Menor45"</text></inputEntry>
        <inputEntry id="InputEntry_PROT3_6"><text>-</text></inputEntry>
        <outputEntry id="OutputEntry_PROT3_resultado"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OutputEntry_PROT3_observacao"><text>"TFG menor 45 ml/min - risco de nefrotoxicidade por contraste e progressao DRC"</text></outputEntry>
        <outputEntry id="OutputEntry_PROT3_fundamentacao"><text>"RADIANCE/SPYRAL: TFG maior ou igual 40-45 mandatorio. Priorizar nefroprotetores (iSGLT2, iECA/BRA)"</text></outputEntry>
        <outputEntry id="OutputEntry_PROT3_alertasDesperdicio"><text>"PROT"</text></outputEntry>
        <outputEntry id="OutputEntry_PROT3_acaoRecomendada"><text>"NEGAR"</text></outputEntry>
      </rule>

      <!-- REGRA 4: PROT - Hipertensao secundaria -->
      <rule id="Rule_PROT_Secundaria">
        <description>WASTE PROT: Hipertensao secundaria nao tratada - tratar causa base primeiro</description>
        <inputEntry id="InputEntry_PROT4_1"><text>"Secundaria"</text></inputEntry>
        <inputEntry id="InputEntry_PROT4_2"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_PROT4_3"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_PROT4_4"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_PROT4_5"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_PROT4_6"><text>-</text></inputEntry>
        <outputEntry id="OutputEntry_PROT4_resultado"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OutputEntry_PROT4_observacao"><text>"Hipertensao secundaria - excluir e tratar causa base antes de considerar denervacao"</text></outputEntry>
        <outputEntry id="OutputEntry_PROT4_fundamentacao"><text>"Excluir: aldosteronismo, feocromocitoma, renovascular, apneia, Cushing antes de denervacao"</text></outputEntry>
        <outputEntry id="OutputEntry_PROT4_alertasDesperdicio"><text>"PROT"</text></outputEntry>
        <outputEntry id="OutputEntry_PROT4_acaoRecomendada"><text>"SUGERIR_ALTERNATIVA"</text></outputEntry>
      </rule>

      <!-- REGRA 5: ESC - HAS nao resistente -->
      <rule id="Rule_ESC_NaoResistente">
        <description>WASTE ESC: HAS nao resistente - step therapy nao cumprido</description>
        <inputEntry id="InputEntry_ESC_1"><text>"NaoResistente"</text></inputEntry>
        <inputEntry id="InputEntry_ESC_2"><text>"Adequado"</text></inputEntry>
        <inputEntry id="InputEntry_ESC_3"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_ESC_4"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_ESC_5"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_ESC_6"><text>-</text></inputEntry>
        <outputEntry id="OutputEntry_ESC_resultado"><text>"Pendente"</text></outputEntry>
        <outputEntry id="OutputEntry_ESC_observacao"><text>"HAS nao resistente - primeiro otimizar 3+ anti-hipertensivos incluindo diuretico por 3+ meses"</text></outputEntry>
        <outputEntry id="OutputEntry_ESC_fundamentacao"><text>"Definicao HAS resistente: PA nao controlada com 3+ drogas incluindo diuretico em dose otima"</text></outputEntry>
        <outputEntry id="OutputEntry_ESC_alertasDesperdicio"><text>"ESC"</text></outputEntry>
        <outputEntry id="OutputEntry_ESC_acaoRecomendada"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>

      <!-- REGRA 6: DUP - Repeticao < 365 dias -->
      <rule id="Rule_DUP_MenosDe365Dias">
        <description>WASTE DUP: Denervacao realizada ha menos de 1 ano sem justificativa</description>
        <inputEntry id="InputEntry_DUP_1"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_DUP_2"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_DUP_3"><text>"Classe IIb","Classe III"</text></inputEntry>
        <inputEntry id="InputEntry_DUP_4"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_DUP_5"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_DUP_6"><text>&lt; 365</text></inputEntry>
        <outputEntry id="OutputEntry_DUP_resultado"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OutputEntry_DUP_observacao"><text>"Denervacao realizada ha menos de 1 ano - aguardar avaliacao de resposta ao procedimento"</text></outputEntry>
        <outputEntry id="OutputEntry_DUP_fundamentacao"><text>"SPYRAL/RADIANCE: Resposta ao procedimento pode levar meses. Repeticao precoce sem justificativa"</text></outputEntry>
        <outputEntry id="OutputEntry_DUP_alertasDesperdicio"><text>"DUP"</text></outputEntry>
        <outputEntry id="OutputEntry_DUP_acaoRecomendada"><text>"AGUARDAR_PRAZO"</text></outputEntry>
      </rule>

      <!-- REGRA 7: DOC - Documentacao incompleta -->
      <rule id="Rule_DOC_Incompleto">
        <description>WASTE DOC: Documentacao incompleta - MAPA e AngioTC necessarios</description>
        <inputEntry id="InputEntry_DOC_1"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_DOC_2"><text>"Incompleto","NaoDocumentado"</text></inputEntry>
        <inputEntry id="InputEntry_DOC_3"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_DOC_4"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_DOC_5"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_DOC_6"><text>-</text></inputEntry>
        <outputEntry id="OutputEntry_DOC_resultado"><text>"Pendente"</text></outputEntry>
        <outputEntry id="OutputEntry_DOC_observacao"><text>"Documentacao incompleta - necessario MAPA 24h, AngioTC renal, TFG, prescricao anti-HAS"</text></outputEntry>
        <outputEntry id="OutputEntry_DOC_fundamentacao"><text>"ANS RN 465/2021: Procedimento requer documentacao de HAS resistente (MAPA) e anatomia favoravel (AngioTC)"</text></outputEntry>
        <outputEntry id="OutputEntry_DOC_alertasDesperdicio"><text>"DOC"</text></outputEntry>
        <outputEntry id="OutputEntry_DOC_acaoRecomendada"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>

      <!-- =============================================================== -->
      <!-- REGRAS DE APROVACAO (Indicacoes Classe IIa)                     -->
      <!-- =============================================================== -->

      <!-- REGRA 8: Aprovado - HAS resistente confirmada -->
      <rule id="Rule_Aprovado_Resistente">
        <description>Aprovado: HAS resistente confirmada com anatomia favoravel</description>
        <inputEntry id="InputEntry_Aprov1_1"><text>"ResistenteConfirmada"</text></inputEntry>
        <inputEntry id="InputEntry_Aprov1_2"><text>"Adequado"</text></inputEntry>
        <inputEntry id="InputEntry_Aprov1_3"><text>"Classe IIa"</text></inputEntry>
        <inputEntry id="InputEntry_Aprov1_4"><text>"Favoravel"</text></inputEntry>
        <inputEntry id="InputEntry_Aprov1_5"><text>"Maior60","45a60"</text></inputEntry>
        <inputEntry id="InputEntry_Aprov1_6"><text>-</text></inputEntry>
        <outputEntry id="OutputEntry_Aprov1_resultado"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OutputEntry_Aprov1_observacao"><text>"HAS resistente confirmada com MAPA, 3+ drogas em dose otima, anatomia favoravel"</text></outputEntry>
        <outputEntry id="OutputEntry_Aprov1_fundamentacao"><text>"ACC/AHA 2024 Classe IIa. SPYRAL/RADIANCE: Reducao PA 5-10mmHg ambulatorial, durabilidade maior 3 anos"</text></outputEntry>
        <outputEntry id="OutputEntry_Aprov1_alertasDesperdicio"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OutputEntry_Aprov1_acaoRecomendada"><text>"APROVAR"</text></outputEntry>
      </rule>

      <!-- REGRA 9: Aprovado - HAS refrataria -->
      <rule id="Rule_Aprovado_Refrataria">
        <description>Aprovado: HAS refrataria (5+ drogas)</description>
        <inputEntry id="InputEntry_Aprov2_1"><text>"Refrataria"</text></inputEntry>
        <inputEntry id="InputEntry_Aprov2_2"><text>"Adequado"</text></inputEntry>
        <inputEntry id="InputEntry_Aprov2_3"><text>"Classe IIa"</text></inputEntry>
        <inputEntry id="InputEntry_Aprov2_4"><text>"Favoravel"</text></inputEntry>
        <inputEntry id="InputEntry_Aprov2_5"><text>"Maior60","45a60"</text></inputEntry>
        <inputEntry id="InputEntry_Aprov2_6"><text>-</text></inputEntry>
        <outputEntry id="OutputEntry_Aprov2_resultado"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OutputEntry_Aprov2_observacao"><text>"HAS refrataria com 5+ drogas em dose maxima - denervacao como opcao adicional"</text></outputEntry>
        <outputEntry id="OutputEntry_Aprov2_fundamentacao"><text>"ESC 2023 Classe IIa: HAS refrataria com 5+ drogas indica intervencao alem de farmacoterapia"</text></outputEntry>
        <outputEntry id="OutputEntry_Aprov2_alertasDesperdicio"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OutputEntry_Aprov2_acaoRecomendada"><text>"APROVAR"</text></outputEntry>
      </rule>

      <!-- REGRA 10: Aprovado - Intolerancia multipla -->
      <rule id="Rule_Aprovado_Intolerancia">
        <description>Aprovado: Intolerancia a multiplos anti-hipertensivos</description>
        <inputEntry id="InputEntry_Aprov3_1"><text>"IntoleranciaMultipla"</text></inputEntry>
        <inputEntry id="InputEntry_Aprov3_2"><text>"Adequado"</text></inputEntry>
        <inputEntry id="InputEntry_Aprov3_3"><text>"Classe IIb"</text></inputEntry>
        <inputEntry id="InputEntry_Aprov3_4"><text>"Favoravel"</text></inputEntry>
        <inputEntry id="InputEntry_Aprov3_5"><text>"Maior60","45a60"</text></inputEntry>
        <inputEntry id="InputEntry_Aprov3_6"><text>&gt;= 365</text></inputEntry>
        <outputEntry id="OutputEntry_Aprov3_resultado"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OutputEntry_Aprov3_observacao"><text>"Intolerancia documentada a 3+ classes anti-hipertensivas - denervacao pode ser considerada"</text></outputEntry>
        <outputEntry id="OutputEntry_Aprov3_fundamentacao"><text>"ESC 2023 Classe IIb: Opcao quando farmacoterapia e limitada por intolerancia"</text></outputEntry>
        <outputEntry id="OutputEntry_Aprov3_alertasDesperdicio"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OutputEntry_Aprov3_acaoRecomendada"><text>"APROVAR"</text></outputEntry>
      </rule>

      <!-- =============================================================== -->
      <!-- FALLBACK RULE                                                   -->
      <!-- =============================================================== -->

      <rule id="Rule_Fallback_30904145">
        <description>Regra padrao - especialista em hipertensao</description>
        <inputEntry id="InputEntry_Fallback_1"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_Fallback_2"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_Fallback_3"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_Fallback_4"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_Fallback_5"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_Fallback_6"><text>-</text></inputEntry>
        <outputEntry id="OutputEntry_Fallback_resultado"><text>"Pendente"</text></outputEntry>
        <outputEntry id="OutputEntry_Fallback_observacao"><text>"Caso requer parecer de especialista em hipertensao com documentacao completa"</text></outputEntry>
        <outputEntry id="OutputEntry_Fallback_fundamentacao"><text>"ACC/AHA 2024, ESC 2023: Avaliacao individualizada por especialista HAS"</text></outputEntry>
        <outputEntry id="OutputEntry_Fallback_alertasDesperdicio"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OutputEntry_Fallback_acaoRecomendada"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>

    </decisionTable>
  </decision>
</definitions>
