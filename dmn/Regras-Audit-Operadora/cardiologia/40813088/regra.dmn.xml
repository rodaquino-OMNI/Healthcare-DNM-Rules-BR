<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="https://www.omg.org/spec/DMN/20191111/MODEL/"
             xmlns:camunda="http://camunda.org/schema/1.0/dmn"
             id="Definitions_40813088"
             name="PET-CT Cardiaco - LEAN Anti-Desperdicio"
             namespace="http://camunda.org/schema/1.0/dmn">

  <!--
    ===============================================================================
    TUSS: 40813088
    Procedimento: PET-CT Cardiaco (Tomografia por Emissao de Positrons)
    Versao: 1.0.0-LEAN-TIER2
    Data: 2026-02-07
    ===============================================================================

    INDICACOES CLINICAS (DUT/ANS + ASNC 2024):
    - Viabilidade miocardica (alternativa a RM)
    - Perfusao miocardica (FDG-PET)
    - Sarcoidose cardiaca
    - Endocardite de dispositivo
    - Avaliacao de isquemia em pacientes complexos

    CONTRAINDICACOES:
    - Gravidez
    - Glicemia descontrolada (protocolo FDG)
    - Incapacidade de jejum prolongado

    REFERENCIAS TECNICAS:
    ASNC PET Guidelines 2024, ACC AUC 2024, ESC 2024

    ALERTAS DE DESPERDICIO (LEAN TIER-2):
    - NENHUM: Sem alertas identificados
    - DUP: Duplicidade de procedimento (PET em menos de 365 dias)
    - FREQ: Frequencia acima do esperado
    - ESC: Escalonamento inadequado (PET sem SPECT previo)
    - DOC: Documentacao insuficiente
    - PROT: Protocolo nao seguido
    - MULTI: Multiplos alertas combinados

    ===============================================================================
  -->

  <decision id="Decision_40813088" name="Regra Clinica LEAN - PET-CT Cardiaco">
    <decisionTable id="DecisionTable_40813088" hitPolicy="FIRST">

      <!-- ========== INPUTS (6 - Padrao LEAN TIER-2 Cardiologia) ========== -->

      <input id="Input_indicacaoClinica" label="Indicacao Clinica" camunda:inputVariable="indicacaoClinica">
        <inputExpression id="InputExpression_indicacaoClinica" typeRef="string">
          <text>indicacaoClinica</text>
        </inputExpression>
        <inputValues id="InputValues_indicacaoClinica">
          <text>"ViabilidadeMiocardica","PerfusaoMiocardica","SarcoidoseCardiaca","EndocarditeDispositivo","IsquemiaComplexa","AvaliacaoRotina"</text>
        </inputValues>
      </input>

      <input id="Input_classeIndicacao" label="Classe de Indicacao (ASNC/ACC)" camunda:inputVariable="classeIndicacao">
        <inputExpression id="InputExpression_classeIndicacao" typeRef="string">
          <text>classeIndicacao</text>
        </inputExpression>
        <inputValues id="InputValues_classeIndicacao">
          <text>"Classe I","Classe IIa","Classe IIb","Classe III"</text>
        </inputValues>
      </input>

      <input id="Input_historicoClinico" label="Historico Clinico" camunda:inputVariable="historicoClinico">
        <inputExpression id="InputExpression_historicoClinico" typeRef="string">
          <text>historicoClinico</text>
        </inputExpression>
        <inputValues id="InputValues_historicoClinico">
          <text>"Adequado","Incompleto","NaoDocumentado"</text>
        </inputValues>
      </input>

      <input id="Input_ultimoProcedimentoDias" label="Dias desde Ultimo PET Cardiaco" camunda:inputVariable="ultimoProcedimentoDias">
        <inputExpression id="InputExpression_ultimoProcedimentoDias" typeRef="integer">
          <text>ultimoProcedimentoDias</text>
        </inputExpression>
      </input>

      <input id="Input_spect_ou_rm_previa" label="SPECT ou RM Previa Realizada" camunda:inputVariable="spectOuRmPrevia">
        <inputExpression id="InputExpression_spectOuRmPrevia" typeRef="string">
          <text>spectOuRmPrevia</text>
        </inputExpression>
        <inputValues id="InputValues_spectOuRmPrevia">
          <text>"SPECT_Inconclusiva","RM_Contraindicada","SPECT_Positiva","Nenhuma","NaoDocumentado"</text>
        </inputValues>
      </input>

      <input id="Input_gravidez" label="Gravidez" camunda:inputVariable="gravidez">
        <inputExpression id="InputExpression_gravidez" typeRef="boolean">
          <text>gravidez</text>
        </inputExpression>
      </input>

      <!-- ========== OUTPUTS (5 - Padrao LEAN TIER-2) ========== -->

      <output id="Output_resultado" label="Resultado" name="resultado" typeRef="string">
        <outputValues id="OutputValues_resultado">
          <text>"Aprovado","Reprovado","Pendente"</text>
        </outputValues>
      </output>

      <output id="Output_observacao" label="Observacao Clinica" name="observacao" typeRef="string" />

      <output id="Output_fundamentacao" label="Fundamentacao Tecnica" name="fundamentacao" typeRef="string" />

      <output id="Output_alertasDesperdicio" label="Alertas de Desperdicio" name="alertasDesperdicio" typeRef="string">
        <outputValues id="OutputValues_alertasDesperdicio">
          <text>"NENHUM","DUP","FREQ","ESC","DOC","PROT","MULTI"</text>
        </outputValues>
      </output>

      <output id="Output_acaoRecomendada" label="Acao Recomendada" name="acaoRecomendada" typeRef="string">
        <outputValues id="OutputValues_acaoRecomendada">
          <text>"APROVAR","NEGAR","SOLICITAR_INFO","AGUARDAR_PRAZO","SUGERIR_ALTERNATIVA"</text>
        </outputValues>
      </output>

      <!-- ========== RULES - CONTRAINDICACOES ABSOLUTAS ========== -->

      <rule id="Rule_Contraind_Gravidez">
        <description>Contraindicacao: Gravidez - radiacao contraindicada</description>
        <inputEntry id="InputEntry_Grav_1"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_Grav_2"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_Grav_3"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_Grav_4"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_Grav_5"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_Grav_6"><text>true</text></inputEntry>
        <outputEntry id="OE_Grav_resultado"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OE_Grav_observacao"><text>"Gravidez - PET-CT contraindicado por radiacao. Adiar para pos-parto"</text></outputEntry>
        <outputEntry id="OE_Grav_fundamentacao"><text>"ASNC 2024: Exames com radiacao contraindicados na gestacao. Alternativa: RM Cardiaca sem gadolinio ou Eco de estresse"</text></outputEntry>
        <outputEntry id="OE_Grav_alerta"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Grav_acao"><text>"NEGAR"</text></outputEntry>
      </rule>

      <rule id="Rule_Reprovado_ClasseIII">
        <description>Reprovado: Classe III - Procedimento nao indicado</description>
        <inputEntry id="InputEntry_CIII_1"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_CIII_2"><text>"Classe III"</text></inputEntry>
        <inputEntry id="InputEntry_CIII_3"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_CIII_4"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_CIII_5"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_CIII_6"><text>false</text></inputEntry>
        <outputEntry id="OE_CIII_resultado"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OE_CIII_observacao"><text>"PET cardiaco Classe III - nao indicado para avaliacao de rotina"</text></outputEntry>
        <outputEntry id="OE_CIII_fundamentacao"><text>"ASNC 2024: PET reservado para indicacoes especificas onde outros metodos sao inadequados"</text></outputEntry>
        <outputEntry id="OE_CIII_alerta"><text>"PROT"</text></outputEntry>
        <outputEntry id="OE_CIII_acao"><text>"NEGAR"</text></outputEntry>
      </rule>

      <!-- ========== RULES - ALERTAS DE DESPERDICIO ========== -->

      <rule id="Rule_Reprovado_DUP_Recente">
        <description>Reprovado DUP: PET cardiaco realizado ha menos de 180 dias sem nova indicacao</description>
        <inputEntry id="InputEntry_DUP_1"><text>"PerfusaoMiocardica","IsquemiaComplexa"</text></inputEntry>
        <inputEntry id="InputEntry_DUP_2"><text>"Classe IIb","Classe III"</text></inputEntry>
        <inputEntry id="InputEntry_DUP_3"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_DUP_4"><text>&lt; 180</text></inputEntry>
        <inputEntry id="InputEntry_DUP_5"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_DUP_6"><text>false</text></inputEntry>
        <outputEntry id="OE_DUP_resultado"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OE_DUP_observacao"><text>"PET cardiaco realizado ha menos de 180 dias. Sem indicacao de novo exame sem mudanca clinica significativa"</text></outputEntry>
        <outputEntry id="OE_DUP_fundamentacao"><text>"ASNC 2024: Repeticao de PET cardiaco em menos de 6 meses requer justificativa clinica excepcional"</text></outputEntry>
        <outputEntry id="OE_DUP_alerta"><text>"DUP"</text></outputEntry>
        <outputEntry id="OE_DUP_acao"><text>"AGUARDAR_PRAZO"</text></outputEntry>
      </rule>

      <rule id="Rule_Pendente_ESC_SemSPECT">
        <description>Pendente ESC: Perfusao sem SPECT ou RM previa - escalonamento inadequado</description>
        <inputEntry id="InputEntry_ESC_1"><text>"PerfusaoMiocardica"</text></inputEntry>
        <inputEntry id="InputEntry_ESC_2"><text>"Classe IIa","Classe IIb"</text></inputEntry>
        <inputEntry id="InputEntry_ESC_3"><text>"Adequado"</text></inputEntry>
        <inputEntry id="InputEntry_ESC_4"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_ESC_5"><text>"Nenhuma"</text></inputEntry>
        <inputEntry id="InputEntry_ESC_6"><text>false</text></inputEntry>
        <outputEntry id="OE_ESC_resultado"><text>"Pendente"</text></outputEntry>
        <outputEntry id="OE_ESC_observacao"><text>"SPECT ou RM devem ser realizados antes de PET para perfusao. PET reservado para casos inconclusivos"</text></outputEntry>
        <outputEntry id="OE_ESC_fundamentacao"><text>"ASNC 2024, ACC AUC 2024: SPECT e mais custo-efetivo como primeiro teste. PET para casos complexos ou inconclusivos"</text></outputEntry>
        <outputEntry id="OE_ESC_alerta"><text>"ESC"</text></outputEntry>
        <outputEntry id="OE_ESC_acao"><text>"SUGERIR_ALTERNATIVA"</text></outputEntry>
      </rule>

      <rule id="Rule_Pendente_DOC_Incompleto">
        <description>Pendente DOC: Historico clinico incompleto</description>
        <inputEntry id="InputEntry_DOC_1"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_DOC_2"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_DOC_3"><text>"Incompleto"</text></inputEntry>
        <inputEntry id="InputEntry_DOC_4"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_DOC_5"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_DOC_6"><text>false</text></inputEntry>
        <outputEntry id="OE_DOC_resultado"><text>"Pendente"</text></outputEntry>
        <outputEntry id="OE_DOC_observacao"><text>"Documentacao clinica incompleta - solicitar historico detalhado e justificativa para PET"</text></outputEntry>
        <outputEntry id="OE_DOC_fundamentacao"><text>"ANS RN 465/2021, CDC Art. 39 - Documentacao completa e adequada e necessaria para autorizacao"</text></outputEntry>
        <outputEntry id="OE_DOC_alerta"><text>"DOC"</text></outputEntry>
        <outputEntry id="OE_DOC_acao"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>

      <rule id="Rule_Reprovado_DOC_Ausente">
        <description>Reprovado DOC: Documentacao ausente</description>
        <inputEntry id="InputEntry_DOC_Aus_1"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_DOC_Aus_2"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_DOC_Aus_3"><text>"NaoDocumentado"</text></inputEntry>
        <inputEntry id="InputEntry_DOC_Aus_4"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_DOC_Aus_5"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_DOC_Aus_6"><text>false</text></inputEntry>
        <outputEntry id="OE_DOC_Aus_resultado"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OE_DOC_Aus_observacao"><text>"Documentacao clinica essencial ausente - impossivel avaliar indicacao"</text></outputEntry>
        <outputEntry id="OE_DOC_Aus_fundamentacao"><text>"ANS RN 465/2021, CPC 25 - Autorizacao impossivel sem documentacao minima exigida"</text></outputEntry>
        <outputEntry id="OE_DOC_Aus_alerta"><text>"DOC"</text></outputEntry>
        <outputEntry id="OE_DOC_Aus_acao"><text>"NEGAR"</text></outputEntry>
      </rule>

      <!-- ========== RULES - APROVACOES ========== -->

      <rule id="Rule_Aprovado_Sarcoidose">
        <description>Aprovado: Sarcoidose cardiaca suspeita ou diagnosticada</description>
        <inputEntry id="InputEntry_Sarc_1"><text>"SarcoidoseCardiaca"</text></inputEntry>
        <inputEntry id="InputEntry_Sarc_2"><text>"Classe I","Classe IIa"</text></inputEntry>
        <inputEntry id="InputEntry_Sarc_3"><text>"Adequado"</text></inputEntry>
        <inputEntry id="InputEntry_Sarc_4"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_Sarc_5"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_Sarc_6"><text>false</text></inputEntry>
        <outputEntry id="OE_Sarc_resultado"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Sarc_observacao"><text>"Sarcoidose cardiaca - PET-FDG e exame de escolha para deteccao de inflamacao ativa"</text></outputEntry>
        <outputEntry id="OE_Sarc_fundamentacao"><text>"ASNC 2024, HRS 2024: PET-FDG e padrao-ouro para deteccao de inflamacao ativa em sarcoidose cardiaca"</text></outputEntry>
        <outputEntry id="OE_Sarc_alerta"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Sarc_acao"><text>"APROVAR"</text></outputEntry>
      </rule>

      <rule id="Rule_Aprovado_EndocarditeDispositivo">
        <description>Aprovado: Endocardite de dispositivo suspeita</description>
        <inputEntry id="InputEntry_EndoDev_1"><text>"EndocarditeDispositivo"</text></inputEntry>
        <inputEntry id="InputEntry_EndoDev_2"><text>"Classe I","Classe IIa"</text></inputEntry>
        <inputEntry id="InputEntry_EndoDev_3"><text>"Adequado"</text></inputEntry>
        <inputEntry id="InputEntry_EndoDev_4"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_EndoDev_5"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_EndoDev_6"><text>false</text></inputEntry>
        <outputEntry id="OE_EndoDev_resultado"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_EndoDev_observacao"><text>"Endocardite de dispositivo - PET-FDG para deteccao de infeccao (criterios Duke modificados)"</text></outputEntry>
        <outputEntry id="OE_EndoDev_fundamentacao"><text>"ESC IE 2023, ASNC 2024: PET-FDG incluso nos criterios Duke modificados para endocardite de dispositivo"</text></outputEntry>
        <outputEntry id="OE_EndoDev_alerta"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_EndoDev_acao"><text>"APROVAR"</text></outputEntry>
      </rule>

      <rule id="Rule_Aprovado_Viabilidade_RMContra">
        <description>Aprovado: Viabilidade quando RM contraindicada</description>
        <inputEntry id="InputEntry_ViabRM_1"><text>"ViabilidadeMiocardica"</text></inputEntry>
        <inputEntry id="InputEntry_ViabRM_2"><text>"Classe I","Classe IIa"</text></inputEntry>
        <inputEntry id="InputEntry_ViabRM_3"><text>"Adequado"</text></inputEntry>
        <inputEntry id="InputEntry_ViabRM_4"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_ViabRM_5"><text>"RM_Contraindicada"</text></inputEntry>
        <inputEntry id="InputEntry_ViabRM_6"><text>false</text></inputEntry>
        <outputEntry id="OE_ViabRM_resultado"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_ViabRM_observacao"><text>"Viabilidade com RM contraindicada - PET e alternativa de escolha"</text></outputEntry>
        <outputEntry id="OE_ViabRM_fundamentacao"><text>"ASNC 2024: PET-FDG e alternativa padrao-ouro para viabilidade quando RM nao disponivel ou contraindicada"</text></outputEntry>
        <outputEntry id="OE_ViabRM_alerta"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_ViabRM_acao"><text>"APROVAR"</text></outputEntry>
      </rule>

      <rule id="Rule_Aprovado_Perfusao_SPECTInconclusiva">
        <description>Aprovado: Perfusao quando SPECT inconclusiva</description>
        <inputEntry id="InputEntry_PerfSPECT_1"><text>"PerfusaoMiocardica","IsquemiaComplexa"</text></inputEntry>
        <inputEntry id="InputEntry_PerfSPECT_2"><text>"Classe I","Classe IIa"</text></inputEntry>
        <inputEntry id="InputEntry_PerfSPECT_3"><text>"Adequado"</text></inputEntry>
        <inputEntry id="InputEntry_PerfSPECT_4"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_PerfSPECT_5"><text>"SPECT_Inconclusiva"</text></inputEntry>
        <inputEntry id="InputEntry_PerfSPECT_6"><text>false</text></inputEntry>
        <outputEntry id="OE_PerfSPECT_resultado"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_PerfSPECT_observacao"><text>"Cintilografia SPECT inconclusiva - PET para esclarecimento diagnostico"</text></outputEntry>
        <outputEntry id="OE_PerfSPECT_fundamentacao"><text>"ASNC 2024: PET tem maior resolucao espacial e acuracia diagnostica que SPECT. Indicado apos SPECT inconclusiva"</text></outputEntry>
        <outputEntry id="OE_PerfSPECT_alerta"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_PerfSPECT_acao"><text>"APROVAR"</text></outputEntry>
      </rule>

      <!-- ========== FALLBACK RULE ========== -->

      <rule id="Rule_Fallback_40813088">
        <description>Regra padrao - Analise clinica adicional necessaria</description>
        <inputEntry id="InputEntry_FB_1"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_FB_2"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_FB_3"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_FB_4"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_FB_5"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_FB_6"><text>-</text></inputEntry>
        <outputEntry id="OE_FB_resultado"><text>"Pendente"</text></outputEntry>
        <outputEntry id="OE_FB_observacao"><text>"Caso requer analise clinica adicional para PET cardiaco - verificar indicacao e step therapy"</text></outputEntry>
        <outputEntry id="OE_FB_fundamentacao"><text>"ASNC 2024: Avaliacao individualizada necessaria conforme complexidade clinica"</text></outputEntry>
        <outputEntry id="OE_FB_alerta"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_FB_acao"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>

    </decisionTable>
  </decision>
</definitions>
