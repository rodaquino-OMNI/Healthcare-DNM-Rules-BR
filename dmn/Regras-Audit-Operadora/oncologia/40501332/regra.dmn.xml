<?xml version='1.0' encoding='utf-8'?>
<definitions xmlns="https://www.omg.org/spec/DMN/20191111/MODEL/" xmlns:modeler="http://camunda.org/schema/modeler/1.0" id="Definitions_QT_Paliativa_2L" name="DRD" namespace="http://camunda.org/schema/1.0/dmn" exporter="Camunda Modeler" exporterVersion="5.20.0" modeler:executionPlatform="Camunda Cloud" modeler:executionPlatformVersion="8.4.0">
  <decision id="Decision_QT_40501332" name="Autorização QT Paliativa 2L [LEAN TIER-2]">
    <decisionTable id="DecisionTable_QT_40501332" hitPolicy="FIRST">
      <input id="Input_diagnostico_QT2L" label="Diagnóstico Oncológico">
        <inputExpression id="InputExpression_diagnostico_QT2L" typeRef="string">
          <text>diagnosticoOncologico</text>
        </inputExpression>
        <inputValues id="UnaryTests_diagnostico_QT2L">
          <text>"C34.0","C34.1","C34.2","C34.3","C34.9","C18.0","C18.1","C18.2","C18.3","C18.4","C18.5","C18.6","C18.7","C18.8","C18.9","C19","C20","C50.0","C50.1","C50.2","C50.3","C50.4","C50.5","C50.6","C50.8","C50.9","C16.0","C16.1","C16.2","C16.3","C16.4","C16.5","C16.6","C16.8","C16.9"</text>
        </inputValues>
      </input>
      <input id="Input_estadiamento_QT2L" label="Estadiamento TNM">
        <inputExpression id="InputExpression_estadiamento_QT2L" typeRef="string">
          <text>estadiamentoTNM</text>
        </inputExpression>
        <inputValues id="UnaryTests_estadiamento_QT2L">
          <text>"T0","T1","T2","T3","T4","Tis","TX"</text>
        </inputValues>
      </input>
      <input id="Input_ecog_QT2L" label="Performance Status ECOG">
        <inputExpression id="InputExpression_ecog_QT2L" typeRef="string">
          <text>performanceStatusECOG</text>
        </inputExpression>
        <inputValues id="UnaryTests_ecog_QT2L">
          <text>"0","1","2","3","4"</text>
        </inputValues>
      </input>
      <input id="Input_linhas_QT2L" label="Linhas Tratamento Prévias">
        <inputExpression id="InputExpression_linhas_QT2L" typeRef="string">
          <text>linhasTratamentoPrevias</text>
        </inputExpression>
        <inputValues id="UnaryTests_linhas_QT2L">
          <text>"0","1","2","3+"</text>
        </inputValues>
      </input>
      <input id="Input_protocolo_QT2L" label="Protocolo Terapêutico Definido">
        <inputExpression id="InputExpression_protocolo_QT2L" typeRef="boolean">
          <text>protocoloTerapeutico</text>
        </inputExpression>
      </input>
      <!-- Input: Dias desde ultimo procedimento (DUP detection) -->
      <input id="Input_ultimoProcedimentoDias" label="Dias Desde Ultimo Procedimento">
        <inputExpression id="InputExpression_ultimoProcedimentoDias" typeRef="number">
          <text>ultimoProcedimentoDias</text>
        </inputExpression>
      </input>

      <output id="Output_resultado_QT2L" label="Resultado" name="resultado" typeRef="string" />
      <output id="Output_observacao_QT2L" label="Observação" name="observacao" typeRef="string" />
      <output id="Output_fundamentacao_QT2L" label="Fundamentação" name="fundamentacao" typeRef="string" />
      <output id="Output_alertasDesperdicio" label="Alertas de Desperdicio" name="alertasDesperdicio" typeRef="string">
        <outputValues id="OutputValues_alertasDesperdicio">
          <text>"NENHUM","DUP","FREQ","ESC","DOC","PROT","MULTI"</text>
        </outputValues>
      </output>
      <output id="Output_acaoRecomendada" label="Acao Recomendada" name="acaoRecomendada" typeRef="string">
        <outputValues id="OutputValues_acaoRecomendada">
          <text>"APROVAR","NEGAR","SOLICITAR_INFO","AGUARDAR_PRAZO","SUGERIR_ALTERNATIVA"</text>
        </outputValues>
      </output>

      

      <!-- WASTE DETECTION: DUP -->
      <rule id="Rule_40501332_DUP">
        <description>DUP - Ciclo QT paliativa 2L repetido em menos de 21 dias</description>
        <inputEntry id="IE_DUP_40501332_1"><text>-</text></inputEntry>
        <inputEntry id="IE_DUP_40501332_2"><text>-</text></inputEntry>
        <inputEntry id="IE_DUP_40501332_3"><text>-</text></inputEntry>
        <inputEntry id="IE_DUP_40501332_4"><text>-</text></inputEntry>
        <inputEntry id="IE_DUP_40501332_5"><text>-</text></inputEntry>
        <inputEntry id="IE_DUP_40501332_ultimo"><text>&lt; 21</text></inputEntry>
        <outputEntry id="OE_DUP_40501332_resultado"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OE_DUP_40501332_observacao"><text>"Ciclo QT paliativa 2L repetido em menos de 21 dias"</text></outputEntry>
        <outputEntry id="OE_DUP_40501332_fundamentacao"><text>"NCCN 2024: Intervalo minimo entre ciclos QT 21 dias"</text></outputEntry>
        <outputEntry id="OE_DUP_40501332_alertasDesperdicio"><text>"DUP"</text></outputEntry>
        <outputEntry id="OE_DUP_40501332_acaoRecomendada"><text>"AGUARDAR_PRAZO"</text></outputEntry>
      </rule>
<rule id="Rule_Contraind_40501332_1">
        <description>Performance status ECOG 3-4 incompatível com QT 2ª linha</description>
        <inputEntry id="UnaryTests_contraind_diag_1">
          <text />
        </inputEntry>
        <inputEntry id="UnaryTests_contraind_tnm_1">
          <text />
        </inputEntry>
        <inputEntry id="UnaryTests_contraind_ecog_1">
          <text>"3","4"</text>
        </inputEntry>
        <inputEntry id="UnaryTests_contraind_linhas_1">
          <text />
        </inputEntry>
        <inputEntry id="UnaryTests_contraind_protocolo_1">
          <text />
        </inputEntry>
        <inputEntry id="IE_Rule_Contraind_40501332_1_ultimo"><text>-</text></inputEntry>
        <outputEntry id="LiteralExpression_contraind_resultado_1">
          <text>"NEGADO"</text>
        </outputEntry>
        <outputEntry id="LiteralExpression_contraind_obs_1">
          <text>"Paciente ECOG 3-4 não candidato a quimioterapia 2ª linha"</text>
        </outputEntry>
        <outputEntry id="LiteralExpression_contraind_fund_1">
          <text>"Deterioração funcional: BSC preferível. Sem evidência benefício em PS 3-4."</text>
        </outputEntry>
        <outputEntry id="OE_Rule_Contraind_40501332_1_alerta"><text>"PROT"</text></outputEntry>
        <outputEntry id="OE_Rule_Contraind_40501332_1_acao"><text>"NEGAR"</text></outputEntry>
      </rule>
      <rule id="Rule_Contraind_40501332_2">
        <description>Paciente sem linha prévia documentada</description>
        <inputEntry id="UnaryTests_contraind_diag_2">
          <text />
        </inputEntry>
        <inputEntry id="UnaryTests_contraind_tnm_2">
          <text />
        </inputEntry>
        <inputEntry id="UnaryTests_contraind_ecog_2">
          <text />
        </inputEntry>
        <inputEntry id="UnaryTests_contraind_linhas_2">
          <text>"0"</text>
        </inputEntry>
        <inputEntry id="UnaryTests_contraind_protocolo_2">
          <text />
        </inputEntry>
        <inputEntry id="IE_Rule_Contraind_40501332_2_ultimo"><text>-</text></inputEntry>
        <outputEntry id="LiteralExpression_contraind_resultado_2">
          <text>"NEGADO"</text>
        </outputEntry>
        <outputEntry id="LiteralExpression_contraind_obs_2">
          <text>"Código TUSS 40501332 exclusivo para segunda linha paliativa"</text>
        </outputEntry>
        <outputEntry id="LiteralExpression_contraind_fund_2">
          <text>"Paciente sem linha prévia deve usar código de 1ª linha (40501331)."</text>
        </outputEntry>
        <outputEntry id="OE_Rule_Contraind_40501332_2_alerta"><text>"PROT"</text></outputEntry>
        <outputEntry id="OE_Rule_Contraind_40501332_2_acao"><text>"NEGAR"</text></outputEntry>
      </rule>
      <rule id="Rule_Contraind_40501332_3">
        <description>Paciente já recebeu 2+ linhas prévias</description>
        <inputEntry id="UnaryTests_contraind_diag_3">
          <text />
        </inputEntry>
        <inputEntry id="UnaryTests_contraind_tnm_3">
          <text />
        </inputEntry>
        <inputEntry id="UnaryTests_contraind_ecog_3">
          <text />
        </inputEntry>
        <inputEntry id="UnaryTests_contraind_linhas_3">
          <text>"2","3+"</text>
        </inputEntry>
        <inputEntry id="UnaryTests_contraind_protocolo_3">
          <text />
        </inputEntry>
        <inputEntry id="IE_Rule_Contraind_40501332_3_ultimo"><text>-</text></inputEntry>
        <outputEntry id="LiteralExpression_contraind_resultado_3">
          <text>"NEGADO"</text>
        </outputEntry>
        <outputEntry id="LiteralExpression_contraind_obs_3">
          <text>"Paciente com 2+ linhas prévias deve usar código de 3ª linha (40501333)"</text>
        </outputEntry>
        <outputEntry id="LiteralExpression_contraind_fund_3">
          <text>"TUSS 40501332 limitado a segunda linha. Linhas posteriores usam código distinto."</text>
        </outputEntry>
        <outputEntry id="OE_Rule_Contraind_40501332_3_alerta"><text>"PROT"</text></outputEntry>
        <outputEntry id="OE_Rule_Contraind_40501332_3_acao"><text>"NEGAR"</text></outputEntry>
      </rule>
      <rule id="Rule_Contraind_40501332_4">
        <description>Protocolo terapêutico não definido ou não validado para 2L</description>
        <inputEntry id="UnaryTests_contraind_diag_4">
          <text />
        </inputEntry>
        <inputEntry id="UnaryTests_contraind_tnm_4">
          <text />
        </inputEntry>
        <inputEntry id="UnaryTests_contraind_ecog_4">
          <text />
        </inputEntry>
        <inputEntry id="UnaryTests_contraind_linhas_4">
          <text />
        </inputEntry>
        <inputEntry id="UnaryTests_contraind_protocolo_4">
          <text>false</text>
        </inputEntry>
        <inputEntry id="IE_Rule_Contraind_40501332_4_ultimo"><text>-</text></inputEntry>
        <outputEntry id="LiteralExpression_contraind_resultado_4">
          <text>"NEGADO"</text>
        </outputEntry>
        <outputEntry id="LiteralExpression_contraind_obs_4">
          <text>"Protocolo quimioterápico 2L não informado ou não validado"</text>
        </outputEntry>
        <outputEntry id="LiteralExpression_contraind_fund_4">
          <text>"Necessário protocolo 2L baseado em guidelines NCCN/ESMO/SBOC para aprovação."</text>
        </outputEntry>
        <outputEntry id="OE_Rule_Contraind_40501332_4_alerta"><text>"DOC"</text></outputEntry>
        <outputEntry id="OE_Rule_Contraind_40501332_4_acao"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>
      <rule id="Rule_Aprovado_40501332_1">
        <description>Progressão pós-1L, ECOG 0-2, protocolo 2L validado</description>
        <inputEntry id="UnaryTests_aprovado_diag_1">
          <text>"C34.0","C34.1","C34.2","C34.3","C34.9","C18.0","C18.1","C18.2","C18.3","C18.4","C18.5","C18.6","C18.7","C18.8","C18.9","C19","C20","C50.0","C50.1","C50.2","C50.3","C50.4","C50.5","C50.6","C50.8","C50.9","C16.0","C16.1","C16.2","C16.3","C16.4","C16.5","C16.6","C16.8","C16.9"</text>
        </inputEntry>
        <inputEntry id="UnaryTests_aprovado_tnm_1">
          <text>"T3","T4","TX"</text>
        </inputEntry>
        <inputEntry id="UnaryTests_aprovado_ecog_1">
          <text>"0","1","2"</text>
        </inputEntry>
        <inputEntry id="UnaryTests_aprovado_linhas_1">
          <text>"1"</text>
        </inputEntry>
        <inputEntry id="UnaryTests_aprovado_protocolo_1">
          <text>true</text>
        </inputEntry>
        <inputEntry id="IE_Rule_Aprovado_40501332_1_ultimo"><text>-</text></inputEntry>
        <outputEntry id="LiteralExpression_aprovado_resultado_1">
          <text>"APROVADO"</text>
        </outputEntry>
        <outputEntry id="LiteralExpression_aprovado_obs_1">
          <text>"QT paliativa 2ª linha autorizada para progressão pós-1L ECOG 0-2"</text>
        </outputEntry>
        <outputEntry id="LiteralExpression_aprovado_fund_1">
          <text>"NCCN + ESMO: QT 2L com benefício em sobrevida para PS 0-2 pós-progressão."</text>
        </outputEntry>
        <outputEntry id="OE_Rule_Aprovado_40501332_1_alerta"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Rule_Aprovado_40501332_1_acao"><text>"APROVAR"</text></outputEntry>
      </rule>
      <rule id="Rule_Aprovado_40501332_2">
        <description>NSCLC, CCR, mama, gástrico com protocolos validados 2L</description>
        <inputEntry id="UnaryTests_aprovado_diag_2">
          <text>"C34.0","C34.1","C34.2","C34.3","C34.9","C18.0","C18.1","C18.2","C18.3","C18.4","C18.5","C18.6","C18.7","C18.8","C18.9","C19","C20","C50.0","C50.1","C50.2","C50.3","C50.4","C50.5","C50.6","C50.8","C50.9","C16.0","C16.1","C16.2","C16.3","C16.4","C16.5","C16.6","C16.8","C16.9"</text>
        </inputEntry>
        <inputEntry id="UnaryTests_aprovado_tnm_2">
          <text>"T3","T4","TX"</text>
        </inputEntry>
        <inputEntry id="UnaryTests_aprovado_ecog_2">
          <text>"0","1"</text>
        </inputEntry>
        <inputEntry id="UnaryTests_aprovado_linhas_2">
          <text>"1"</text>
        </inputEntry>
        <inputEntry id="UnaryTests_aprovado_protocolo_2">
          <text>true</text>
        </inputEntry>
        <inputEntry id="IE_Rule_Aprovado_40501332_2_ultimo"><text>-</text></inputEntry>
        <outputEntry id="LiteralExpression_aprovado_resultado_2">
          <text>"APROVADO"</text>
        </outputEntry>
        <outputEntry id="LiteralExpression_aprovado_obs_2">
          <text>"QT 2L autorizada: NSCLC (docetaxel), CCR (irinotecan), Mama (capecitabina), Gástrico (ramucirumabe)"</text>
        </outputEntry>
        <outputEntry id="LiteralExpression_aprovado_fund_2">
          <text>"Protocolos 2L aprovados: pulmão ECOG 0-1, coloretal TAS-102/regorafenibe, mama taxano."</text>
        </outputEntry>
        <outputEntry id="OE_Rule_Aprovado_40501332_2_alerta"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Rule_Aprovado_40501332_2_acao"><text>"APROVAR"</text></outputEntry>
      </rule>
      <rule id="Rule_Pendente_40501332_1">
        <description>ECOG 2 pós-1L requer avaliação individualizada</description>
        <inputEntry id="UnaryTests_pendente_diag_1">
          <text />
        </inputEntry>
        <inputEntry id="UnaryTests_pendente_tnm_1">
          <text />
        </inputEntry>
        <inputEntry id="UnaryTests_pendente_ecog_1">
          <text>"2"</text>
        </inputEntry>
        <inputEntry id="UnaryTests_pendente_linhas_1">
          <text>"1"</text>
        </inputEntry>
        <inputEntry id="UnaryTests_pendente_protocolo_1">
          <text>true</text>
        </inputEntry>
        <inputEntry id="IE_Rule_Pendente_40501332_1_ultimo"><text>-</text></inputEntry>
        <outputEntry id="LiteralExpression_pendente_resultado_1">
          <text>"PENDENTE"</text>
        </outputEntry>
        <outputEntry id="LiteralExpression_pendente_obs_1">
          <text>"ECOG 2 pós-1L: requer avaliação oncológica para definir viabilidade 2L"</text>
        </outputEntry>
        <outputEntry id="LiteralExpression_pendente_fund_1">
          <text>"ECOG 2 limítrofe: avaliar toxicidade 1L, comorbidades, preferência paciente antes de 2L."</text>
        </outputEntry>
        <outputEntry id="OE_Rule_Pendente_40501332_1_alerta"><text>"DOC"</text></outputEntry>
        <outputEntry id="OE_Rule_Pendente_40501332_1_acao"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>
      <rule id="Rule_Fallback_40501332">
        <description>Casos não categorizados nas regras anteriores</description>
        <inputEntry id="UnaryTests_fallback_diag">
          <text />
        </inputEntry>
        <inputEntry id="UnaryTests_fallback_tnm">
          <text />
        </inputEntry>
        <inputEntry id="UnaryTests_fallback_ecog">
          <text />
        </inputEntry>
        <inputEntry id="UnaryTests_fallback_linhas">
          <text />
        </inputEntry>
        <inputEntry id="UnaryTests_fallback_protocolo">
          <text />
        </inputEntry>
        <inputEntry id="IE_Rule_Fallback_40501332_ultimo"><text>-</text></inputEntry>
        <outputEntry id="LiteralExpression_fallback_resultado">
          <text>"PENDENTE"</text>
        </outputEntry>
        <outputEntry id="LiteralExpression_fallback_obs">
          <text>"Caso requer análise manual pela auditoria médica"</text>
        </outputEntry>
        <outputEntry id="LiteralExpression_fallback_fund">
          <text>"Situação clínica não prevista nas regras automatizadas. Revisão necessária."</text>
        </outputEntry>
        <outputEntry id="OE_Rule_Fallback_40501332_alerta"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Rule_Fallback_40501332_acao"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>
    </decisionTable>
  </decision>
</definitions>