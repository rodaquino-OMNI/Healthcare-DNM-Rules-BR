<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="https://www.omg.org/spec/DMN/20191111/MODEL/"
             xmlns:dmndi="https://www.omg.org/spec/DMN/20191111/DMNDI/"
             xmlns:dc="http://www.omg.org/spec/DD/20100524/DC/"
             xmlns:di="http://www.omg.org/spec/DD/20100524/DI/"
             id="Definitions_30801015"
             name="Quimioterapia Paliativa Avancada"
             namespace="http://camunda.org/schema/1.0/dmn"
             exporter="Camunda Modeler"
             exporterVersion="5.0.0">
  <!--
    TUSS 30801015 - Quimioterapia Paliativa Avancada
    Versao: 3.1.0-LEAN-TIER2 (2026-02-08)
    Especialidade: Oncologia
    Categoria: Tratamento Sistemico Paliativo

    Indicacoes Clinicas (NCCN/ESMO 2024):
    - Neoplasia maligna avancada (estadio III-IV) sem possibilidade curativa
    - Performance status ECOG 0-2 (tolerancia ao tratamento)
    - Funcao organica adequada (renal, hepatica, medular)
    - Objetivo: controle de sintomas, qualidade de vida, sobrevida

    Contraindicacoes:
    - ECOG 4 (acamado, dependente total)
    - Disfuncao organica grave nao reversivel
    - Expectativa de vida inferior a 4 semanas
    - Recusa do paciente apos esclarecimento

    Documentacao Obrigatoria:
    - Diagnostico histopatologico confirmado
    - Estadiamento completo (TNM ou especifico da neoplasia)
    - Avaliacao de performance status (ECOG/Karnofsky)
    - Exames laboratoriais recentes (hemograma, funcao renal/hepatica)
    - Termo de consentimento informado

    Referencias Normativas:
    - NCCN Guidelines Palliative Care (2024)
    - ESMO Clinical Practice Guidelines (2024)
    - SBOC Diretrizes Oncologia (2023)
    - ANS RN 465/2021 - Rol de Procedimentos
    - DUT ANS 2024
  -->

  <decision id="Decision_30801015" name="Criterios de Autorizacao - Quimioterapia Paliativa Avancada [LEAN TIER-2]">
    <decisionTable id="DecisionTable_30801015" hitPolicy="FIRST">

      <!-- Input 1: Condicao Paciente -->
      <input id="Input_condicaoPaciente" label="Condicao Clinica do Paciente">
        <inputExpression id="InputExpr_condicaoPaciente" typeRef="string">
          <text>condicaoPaciente</text>
        </inputExpression>
        <inputValues id="InputValues_condicaoPaciente">
          <text>"Neoplasia avancada ECOG 0-1","Neoplasia avancada ECOG 2","Neoplasia avancada ECOG 3","Neoplasia avancada ECOG 4","Neoplasia estadio inicial","Outra"</text>
        </inputValues>
      </input>

      <!-- Input 2: Historico Clinico -->
      <input id="Input_historicoClinico" label="Historico Clinico Documentado">
        <inputExpression id="InputExpr_historicoClinico" typeRef="string">
          <text>historicoClinico</text>
        </inputExpression>
        <inputValues id="InputValues_historicoClinico">
          <text>"Adequado","Incompleto","NaoDocumentado"</text>
        </inputValues>
      </input>

      <!-- Input 3: Classe Indicacao -->
      <input id="Input_classeIndicacao" label="Classe de Indicacao (NCCN/ESMO)">
        <inputExpression id="InputExpr_classeIndicacao" typeRef="string">
          <text>classeIndicacao</text>
        </inputExpression>
        <inputValues id="InputValues_classeIndicacao">
          <text>"Categoria 1","Categoria 2A","Categoria 2B","Categoria 3"</text>
        </inputValues>
      </input>

      <!-- Input 4: Exames Comprobatorios -->
      <input id="Input_examesComprobatorios" label="Exames Comprobatorios">
        <inputExpression id="InputExpr_examesComprobatorios" typeRef="string">
          <text>examesComprobatorios</text>
        </inputExpression>
        <inputValues id="InputValues_examesComprobatorios">
          <text>"Completos e adequados","Parciais","Ausentes","Contraindicam tratamento"</text>
        </inputValues>
      </input>

      <!-- Input 5: Expectativa de Vida -->
      <input id="Input_expectativaVida" label="Expectativa de Vida Superior a 1 Ano">
        <inputExpression id="InputExpr_expectativaVida" typeRef="boolean">
          <text>expectativaVidaSuperior1Ano</text>
        </inputExpression>
      </input>

      <!-- Output 1: Resultado -->
      <!-- Input: Dias desde ultimo procedimento (DUP detection) -->
      <input id="Input_ultimoProcedimentoDias" label="Dias Desde Ultimo Procedimento">
        <inputExpression id="InputExpression_ultimoProcedimentoDias" typeRef="number">
          <text>ultimoProcedimentoDias</text>
        </inputExpression>
      </input>

      <output id="Output_resultado" label="Resultado" name="resultado" typeRef="string">
        <outputValues id="OutputValues_resultado">
          <text>"Aprovado","Reprovado","Pendente"</text>
        </outputValues>
      </output>

      <!-- Output 2: Observacao -->
      <output id="Output_observacao" label="Observacao Clinica" name="observacao" typeRef="string" />

      <!-- Output 3: Fundamentacao -->
      <output id="Output_fundamentacao" label="Fundamentacao Legal/Tecnica" name="fundamentacao" typeRef="string" />

      <!-- Output 4: Alertas de Desperdicio -->
      <output id="Output_alertasDesperdicio" label="Alertas de Desperdicio" name="alertasDesperdicio" typeRef="string">
        <outputValues id="OutputValues_alertasDesperdicio"><text>"NENHUM","DUP","FREQ","ESC","DOC","PROT","MULTI"</text></outputValues>
      </output>

      <!-- Output 5: Acao Recomendada -->
      <output id="Output_acaoRecomendada" label="Acao Recomendada" name="acaoRecomendada" typeRef="string">
        <outputValues id="OutputValues_acaoRecomendada"><text>"APROVAR","NEGAR","SOLICITAR_INFO","AGUARDAR_PRAZO","SUGERIR_ALTERNATIVA"</text></outputValues>
      </output>

      <!-- REPROVACAO RULES -->
      <rule id="Rule_30801015_Reprovacao_1">
        <description>Reprovacao - ECOG 4 (paciente acamado)</description>
        <inputEntry id="IE_Rep1_1"><text>"Neoplasia avancada ECOG 4"</text></inputEntry>
        <inputEntry id="IE_Rep1_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep1_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep1_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep1_5"><text>-</text></inputEntry>
        <inputEntry id="IE_Rule_30801015_Reprovacao_1_ultimo"><text>-</text></inputEntry>
        <outputEntry id="OE_Rep1_1"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OE_Rep1_2"><text>"Performance status ECOG 4 contraindica quimioterapia. Paciente acamado com dependencia total. Recomenda-se cuidados paliativos exclusivos"</text></outputEntry>
        <outputEntry id="OE_Rep1_3"><text>"NCCN Palliative Care 2024, ESMO Guidelines - QT contraindicada em ECOG 4"</text></outputEntry>
        <outputEntry id="OE_Rep1_4"><text>"PROT"</text></outputEntry>
        <outputEntry id="OE_Rep1_5"><text>"NEGAR"</text></outputEntry>
      </rule>

      <rule id="Rule_30801015_Reprovacao_2">
        <description>Reprovacao - Exames contraindicam tratamento</description>
        <inputEntry id="IE_Rep2_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep2_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep2_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep2_4"><text>"Contraindicam tratamento"</text></inputEntry>
        <inputEntry id="IE_Rep2_5"><text>-</text></inputEntry>
        <inputEntry id="IE_Rule_30801015_Reprovacao_2_ultimo"><text>-</text></inputEntry>
        <outputEntry id="OE_Rep2_1"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OE_Rep2_2"><text>"Exames laboratoriais demonstram disfuncao organica grave que contraindica quimioterapia. Avaliar suporte clinico e cuidados paliativos"</text></outputEntry>
        <outputEntry id="OE_Rep2_3"><text>"Criterios de funcao organica CTCAE v5.0 - toxicidade grau 4 previa"</text></outputEntry>
        <outputEntry id="OE_Rep2_4"><text>"PROT"</text></outputEntry>
        <outputEntry id="OE_Rep2_5"><text>"NEGAR"</text></outputEntry>
      </rule>

      <rule id="Rule_30801015_Reprovacao_3">
        <description>Reprovacao - Neoplasia em estadio inicial (curativo indicado)</description>
        <inputEntry id="IE_Rep3_1"><text>"Neoplasia estadio inicial"</text></inputEntry>
        <inputEntry id="IE_Rep3_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep3_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep3_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Rep3_5"><text>-</text></inputEntry>
        <inputEntry id="IE_Rule_30801015_Reprovacao_3_ultimo"><text>-</text></inputEntry>
        <outputEntry id="OE_Rep3_1"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OE_Rep3_2"><text>"Neoplasia em estadio inicial com intencao curativa. QT paliativa nao indicada. Avaliar tratamento com intencao curativa (cirurgia, QT adjuvante/neoadjuvante)"</text></outputEntry>
        <outputEntry id="OE_Rep3_3"><text>"NCCN Guidelines - Tratamento curativo prioritario quando factivel"</text></outputEntry>
        <outputEntry id="OE_Rep3_4"><text>"PROT"</text></outputEntry>
        <outputEntry id="OE_Rep3_5"><text>"NEGAR"</text></outputEntry>
      </rule>

      <!-- WASTE DETECTION: DUP -->
      <rule id="Rule_30801015_DUP">
        <description>DUP - Ciclo QT paliativa repetido em menos de 21 dias</description>
        <inputEntry id="IE_DUP_30801015_1"><text>-</text></inputEntry>
        <inputEntry id="IE_DUP_30801015_2"><text>-</text></inputEntry>
        <inputEntry id="IE_DUP_30801015_3"><text>-</text></inputEntry>
        <inputEntry id="IE_DUP_30801015_4"><text>-</text></inputEntry>
        <inputEntry id="IE_DUP_30801015_5"><text>-</text></inputEntry>
        <inputEntry id="IE_DUP_30801015_ultimo"><text>&lt; 21</text></inputEntry>
        <outputEntry id="OE_DUP_30801015_resultado"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OE_DUP_30801015_observacao"><text>"Ciclo QT paliativa repetido em menos de 21 dias"</text></outputEntry>
        <outputEntry id="OE_DUP_30801015_fundamentacao"><text>"NCCN 2024: Intervalo minimo entre ciclos QT 21 dias. Protocolos 14 dias requerem justificativa"</text></outputEntry>
        <outputEntry id="OE_DUP_30801015_alertasDesperdicio"><text>"DUP"</text></outputEntry>
        <outputEntry id="OE_DUP_30801015_acaoRecomendada"><text>"AGUARDAR_PRAZO"</text></outputEntry>
      </rule>

      <!-- WASTE DETECTION: DOC -->
      <rule id="Rule_30801015_DOC">
        <description>DOC - Documentacao obrigatoria incompleta (historico, estadiamento, ECOG, consentimento)</description>
        <inputEntry id="IE_DOC_30801015_1"><text>-</text></inputEntry>
        <inputEntry id="IE_DOC_30801015_2"><text>"Incompleto","NaoDocumentado"</text></inputEntry>
        <inputEntry id="IE_DOC_30801015_3"><text>-</text></inputEntry>
        <inputEntry id="IE_DOC_30801015_4"><text>-</text></inputEntry>
        <inputEntry id="IE_DOC_30801015_5"><text>-</text></inputEntry>
        <inputEntry id="IE_DOC_30801015_ultimo"><text>-</text></inputEntry>
        <outputEntry id="OE_DOC_30801015_resultado"><text>"Pendente"</text></outputEntry>
        <outputEntry id="OE_DOC_30801015_observacao"><text>"Documentacao obrigatoria ausente: histopatologico, estadiamento, ECOG, laboratorio, termo consentimento"</text></outputEntry>
        <outputEntry id="OE_DOC_30801015_fundamentacao"><text>"NCCN Palliative Care 2024: Documentacao completa obrigatoria para QT paliativa"</text></outputEntry>
        <outputEntry id="OE_DOC_30801015_alertasDesperdicio"><text>"DOC"</text></outputEntry>
        <outputEntry id="OE_DOC_30801015_acaoRecomendada"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>

      <!-- APROVACAO RULES -->
      <rule id="Rule_30801015_Aprovacao_1">
        <description>Aprovacao - ECOG 0-1 com documentacao completa</description>
        <inputEntry id="IE_Aprov1_1"><text>"Neoplasia avancada ECOG 0-1"</text></inputEntry>
        <inputEntry id="IE_Aprov1_2"><text>"Adequado"</text></inputEntry>
        <inputEntry id="IE_Aprov1_3"><text>"Categoria 1","Categoria 2A"</text></inputEntry>
        <inputEntry id="IE_Aprov1_4"><text>"Completos e adequados"</text></inputEntry>
        <inputEntry id="IE_Aprov1_5"><text>true</text></inputEntry>
        <inputEntry id="IE_Rule_30801015_Aprovacao_1_ultimo"><text>-</text></inputEntry>
        <outputEntry id="OE_Aprov1_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Aprov1_2"><text>"Paciente com neoplasia avancada, bom performance status (ECOG 0-1), funcao organica preservada. QT paliativa indicada para controle de doenca e qualidade de vida"</text></outputEntry>
        <outputEntry id="OE_Aprov1_3"><text>"NCCN Guidelines 2024, ESMO Guidelines 2024, SBOC 2023 - Categoria 1/2A"</text></outputEntry>
        <outputEntry id="OE_Aprov1_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Aprov1_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <rule id="Rule_30801015_Aprovacao_2">
        <description>Aprovacao - ECOG 2 com indicacao adequada</description>
        <inputEntry id="IE_Aprov2_1"><text>"Neoplasia avancada ECOG 2"</text></inputEntry>
        <inputEntry id="IE_Aprov2_2"><text>"Adequado"</text></inputEntry>
        <inputEntry id="IE_Aprov2_3"><text>"Categoria 1","Categoria 2A"</text></inputEntry>
        <inputEntry id="IE_Aprov2_4"><text>"Completos e adequados"</text></inputEntry>
        <inputEntry id="IE_Aprov2_5"><text>true</text></inputEntry>
        <inputEntry id="IE_Rule_30801015_Aprovacao_2_ultimo"><text>-</text></inputEntry>
        <outputEntry id="OE_Aprov2_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Aprov2_2"><text>"ECOG 2 ainda permite QT paliativa com ajuste de dose. Monitorar tolerancia. Objetivo: controle sintomatico e qualidade de vida"</text></outputEntry>
        <outputEntry id="OE_Aprov2_3"><text>"ESMO Guidelines 2024 - QT possivel em ECOG 2 selecionados"</text></outputEntry>
        <outputEntry id="OE_Aprov2_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Aprov2_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <rule id="Rule_30801015_Aprovacao_3">
        <description>Aprovacao - Expectativa menor que 1 ano mas maior que 3 meses</description>
        <inputEntry id="IE_Aprov3_1"><text>"Neoplasia avancada ECOG 0-1","Neoplasia avancada ECOG 2"</text></inputEntry>
        <inputEntry id="IE_Aprov3_2"><text>"Adequado"</text></inputEntry>
        <inputEntry id="IE_Aprov3_3"><text>"Categoria 1","Categoria 2A"</text></inputEntry>
        <inputEntry id="IE_Aprov3_4"><text>"Completos e adequados"</text></inputEntry>
        <inputEntry id="IE_Aprov3_5"><text>false</text></inputEntry>
        <inputEntry id="IE_Rule_30801015_Aprovacao_3_ultimo"><text>-</text></inputEntry>
        <outputEntry id="OE_Aprov3_1"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OE_Aprov3_2"><text>"QT paliativa pode ser considerada mesmo com expectativa inferior a 1 ano se superior a 3 meses. Objetivo: controle de sintomas e qualidade de vida"</text></outputEntry>
        <outputEntry id="OE_Aprov3_3"><text>"ASCO Value Framework, ESMO MCBS - Beneficio clinico significativo"</text></outputEntry>
        <outputEntry id="OE_Aprov3_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Aprov3_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <!-- PENDENTE RULE -->
      <rule id="Rule_30801015_Pendente_1">
        <description>Pendente - ECOG 3 requer avaliacao individualizada</description>
        <inputEntry id="IE_Pend1_1"><text>"Neoplasia avancada ECOG 3"</text></inputEntry>
        <inputEntry id="IE_Pend1_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Pend1_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Pend1_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Pend1_5"><text>-</text></inputEntry>
        <inputEntry id="IE_Rule_30801015_Pendente_1_ultimo"><text>-</text></inputEntry>
        <outputEntry id="OE_Pend1_1"><text>"Pendente"</text></outputEntry>
        <outputEntry id="OE_Pend1_2"><text>"ECOG 3 requer avaliacao cuidadosa. Considerar QT de baixa toxicidade ou cuidados paliativos exclusivos. Discussao em tumor board recomendada"</text></outputEntry>
        <outputEntry id="OE_Pend1_3"><text>"Avaliacao individualizada conforme NCCN Palliative Care 2024"</text></outputEntry>
        <outputEntry id="OE_Pend1_4"><text>"DOC"</text></outputEntry>
        <outputEntry id="OE_Pend1_5"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>

      <!-- FALLBACK -->
      <rule id="Rule_Fallback_30801015">
        <description>Regra padrao - analise manual por auditor medico</description>
        <inputEntry id="IE_Fallback_1"><text>-</text></inputEntry>
        <inputEntry id="IE_Fallback_2"><text>-</text></inputEntry>
        <inputEntry id="IE_Fallback_3"><text>-</text></inputEntry>
        <inputEntry id="IE_Fallback_4"><text>-</text></inputEntry>
        <inputEntry id="IE_Fallback_5"><text>-</text></inputEntry>
        <inputEntry id="IE_Rule_Fallback_30801015_ultimo"><text>-</text></inputEntry>
        <outputEntry id="OE_Fallback_1"><text>"Pendente"</text></outputEntry>
        <outputEntry id="OE_Fallback_2"><text>"Caso requer analise manual por auditor medico oncologista. Documentacao adicional pode ser solicitada"</text></outputEntry>
        <outputEntry id="OE_Fallback_3"><text>"Auditoria medica conforme RN 428/2017 e DUT ANS 2024"</text></outputEntry>
        <outputEntry id="OE_Fallback_4"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OE_Fallback_5"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>

    </decisionTable>
  </decision>
</definitions>
