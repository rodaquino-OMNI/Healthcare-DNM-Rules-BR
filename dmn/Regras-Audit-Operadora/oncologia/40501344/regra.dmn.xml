<?xml version="1.0" encoding="UTF-8"?>
<!--
  ONQ-DRUG-019: Cabozantinib Indications
  TUSS: 40501344
  Versao: 3.1.0-LEAN-TIER2 (2026-02-08)
  Especialidade: Oncologia

  ============================================================================
  INDICACOES CLINICAS:
  ============================================================================
  - RCC: 1L com nivolumabe (CheckMate-9ER) ou 2L+ pos-TKI (METEOR)
  - HCC: 2L pos-sorafenibe (CELESTIAL)
  - Ca tireoide medular: progressivo (EXAM)
  - DTC refratario a RAI: progressivo (COSMIC-311)

  ============================================================================
  REFERENCIAS NORMATIVAS:
  ============================================================================
  - CheckMate-9ER (RCC 1L cabo+nivo)
  - METEOR (RCC 2L)
  - CELESTIAL (HCC 2L)
  - EXAM (MTC)
  - NCCN Kidney Cancer 2024, NCCN HCC 2024, NCCN Thyroid 2024
-->
<definitions xmlns="https://www.omg.org/spec/DMN/20191111/MODEL/" xmlns:dmndi="https://www.omg.org/spec/DMN/20191111/DMNDI/" xmlns:dc="http://www.omg.org/spec/DMN/20180521/DC/" xmlns:modeler="http://camunda.org/schema/modeler/1.0" id="Definitions_ONQ_DRUG_019" name="DRD" namespace="http://camunda.org/schema/1.0/dmn" exporter="Camunda Modeler" exporterVersion="5.14.0" modeler:executionPlatform="Camunda Cloud" modeler:executionPlatformVersion="8.2.0">
  <decision id="Decision_ONQ_DRUG_019" name="ONQ-DRUG-019: Cabozantinib Indications [LEAN TIER-2]">
    <decisionTable id="DecisionTable_ONQ_DRUG_019" hitPolicy="FIRST">
      <input id="Input_tumor_type" label="Tumor Type">
        <inputExpression id="InputExpression_tumor_type" typeRef="string">
          <text>tumorType</text>
        </inputExpression>
      </input>
      <input id="Input_prior_treatment" label="Prior Treatment">
        <inputExpression id="InputExpression_prior_treatment" typeRef="string">
          <text>priorTreatment</text>
        </inputExpression>
      </input>
      <input id="Input_combination" label="Proposed Combination">
        <inputExpression id="InputExpression_combination" typeRef="string">
          <text>proposedCombination</text>
        </inputExpression>
      </input>
      <input id="Input_rai_refractory" label="RAI Refractory (Thyroid)">
        <inputExpression id="InputExpression_rai_refractory" typeRef="boolean">
          <text>raiRefractory</text>
        </inputExpression>
      </input>
      <!-- Input: Dias desde ultimo procedimento (DUP detection) -->
      <input id="Input_ultimoProcedimentoDias" label="Dias Desde Ultimo Procedimento">
        <inputExpression id="InputExpression_ultimoProcedimentoDias" typeRef="number">
          <text>ultimoProcedimentoDias</text>
        </inputExpression>
      </input>

      <output id="Output_resultado" label="Resultado" name="resultado" typeRef="string">
        <outputValues id="UnaryTests_resultado">
          <text>"Aprovado","Reprovado","Pendente"</text>
        </outputValues>
      </output>
      <output id="Output_observacao" label="Observacao" name="observacao" typeRef="string" />
      <output id="Output_fundamentacao" label="Fundamentacao" name="fundamentacao" typeRef="string" />
      <output id="Output_alertasDesperdicio" label="Alertas de Desperdicio" name="alertasDesperdicio" typeRef="string">
        <outputValues id="OutputValues_alertasDesperdicio">
          <text>"NENHUM","DUP","FREQ","ESC","DOC","PROT","MULTI"</text>
        </outputValues>
      </output>
      <output id="Output_acaoRecomendada" label="Acao Recomendada" name="acaoRecomendada" typeRef="string">
        <outputValues id="OutputValues_acaoRecomendada">
          <text>"APROVAR","NEGAR","SOLICITAR_INFO","AGUARDAR_PRAZO","SUGERIR_ALTERNATIVA"</text>
        </outputValues>
      </output>
      <rule id="DecisionRule_reject_non_approved">
        <description>Reject non-approved tumors</description>
        <inputEntry id="InputEntry_tumor_type_non">
          <text>not("RCC","renal_cell_carcinoma","HCC","hepatocellular","MTC","medullary_thyroid","DTC","differentiated_thyroid")</text>
        </inputEntry>
        <inputEntry id="InputEntry_prior_treatment_non">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_combination_non">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_rai_refractory_non">
          <text>-</text>
        </inputEntry>
        <inputEntry id="IE_DecisionRule_reject_non_approved_ultimo"><text>-</text></inputEntry>
        <outputEntry id="OutputEntry_resultado_non">
          <text>"Reprovado"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_observacao_non">
          <text>"Cabozantinibe: apenas RCC, HCC, tireoide medular ou diferenciado"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_fundamentacao_non">
          <text>"Indicacoes aprovadas: METEOR/9ER (RCC), CELESTIAL (HCC), EXAM (MTC)"</text>
        </outputEntry>
        <outputEntry id="OE_reject_non_approved_alertas">
          <text>"PROT"</text>
        </outputEntry>
        <outputEntry id="OE_reject_non_approved_acao">
          <text>"NEGAR"</text>
        </outputEntry>
      </rule>
      <rule id="DecisionRule_approve_rcc_1l_combo">
        <description>Approve RCC 1L with nivolumab</description>
        <inputEntry id="InputEntry_tumor_type_1l">
          <text>"RCC","renal_cell_carcinoma"</text>
        </inputEntry>
        <inputEntry id="InputEntry_prior_treatment_1l">
          <text>"none","naive"</text>
        </inputEntry>
        <inputEntry id="InputEntry_combination_1l">
          <text>"cabo_nivo","cabozantinib_nivolumab"</text>
        </inputEntry>
        <inputEntry id="InputEntry_rai_refractory_1l">
          <text>-</text>
        </inputEntry>
        <inputEntry id="IE_DecisionRule_approve_rcc_1l_combo_ultimo"><text>-</text></inputEntry>
        <outputEntry id="OutputEntry_resultado_1l">
          <text>"Aprovado"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_observacao_1l">
          <text>"Cabo+Nivo aprovado: CCR 1L todos os riscos. Nivo Q2S + cabo 40mg/dia"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_fundamentacao_1l">
          <text>"CheckMate-9ER: PFS 16.6 vs 8.3m (sunitinibe); ORR 55%. Opcao preferida 1L"</text>
        </outputEntry>
        <outputEntry id="OE_approve_rcc_1l_combo_alertas">
          <text>"NENHUM"</text>
        </outputEntry>
        <outputEntry id="OE_approve_rcc_1l_combo_acao">
          <text>"APROVAR"</text>
        </outputEntry>
      </rule>
      <rule id="DecisionRule_approve_rcc_2l">
        <description>Approve RCC 2L+ monotherapy</description>
        <inputEntry id="InputEntry_tumor_type_2l">
          <text>"RCC","renal_cell_carcinoma"</text>
        </inputEntry>
        <inputEntry id="InputEntry_prior_treatment_2l">
          <text>"TKI","sunitinib","pazopanib","axitinib"</text>
        </inputEntry>
        <inputEntry id="InputEntry_combination_2l">
          <text>"monotherapy","cabozantinib_mono"</text>
        </inputEntry>
        <inputEntry id="InputEntry_rai_refractory_2l">
          <text>-</text>
        </inputEntry>
        <inputEntry id="IE_DecisionRule_approve_rcc_2l_ultimo"><text>-</text></inputEntry>
        <outputEntry id="OutputEntry_resultado_2l">
          <text>"Aprovado"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_observacao_2l">
          <text>"Cabozantinibe mono aprovado: CCR 2L+ pos-TKI. 60mg/dia"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_fundamentacao_2l">
          <text>"METEOR: PFS 7.4 vs 3.8m (everolimus); OS 21.4 vs 16.5m"</text>
        </outputEntry>
        <outputEntry id="OE_approve_rcc_2l_alertas">
          <text>"NENHUM"</text>
        </outputEntry>
        <outputEntry id="OE_approve_rcc_2l_acao">
          <text>"APROVAR"</text>
        </outputEntry>
      </rule>
      <rule id="DecisionRule_approve_hcc_2l">
        <description>Approve HCC 2L</description>
        <inputEntry id="InputEntry_tumor_type_hcc">
          <text>"HCC","hepatocellular"</text>
        </inputEntry>
        <inputEntry id="InputEntry_prior_treatment_hcc">
          <text>"sorafenib","lenvatinib","atezolizumab_bevacizumab"</text>
        </inputEntry>
        <inputEntry id="InputEntry_combination_hcc">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_rai_refractory_hcc">
          <text>-</text>
        </inputEntry>
        <inputEntry id="IE_DecisionRule_approve_hcc_2l_ultimo"><text>-</text></inputEntry>
        <outputEntry id="OutputEntry_resultado_hcc">
          <text>"Aprovado"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_observacao_hcc">
          <text>"Cabozantinibe aprovado: CHC 2L pos-sorafenibe ou atezobeva. Child-Pugh A"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_fundamentacao_hcc">
          <text>"CELESTIAL: OS 10.2 vs 8.0m; PFS 5.2 vs 1.9m. Apenas Child-Pugh A"</text>
        </outputEntry>
        <outputEntry id="OE_approve_hcc_2l_alertas">
          <text>"NENHUM"</text>
        </outputEntry>
        <outputEntry id="OE_approve_hcc_2l_acao">
          <text>"APROVAR"</text>
        </outputEntry>
      </rule>
      <rule id="DecisionRule_approve_mtc">
        <description>Approve medullary thyroid</description>
        <inputEntry id="InputEntry_tumor_type_mtc">
          <text>"MTC","medullary_thyroid"</text>
        </inputEntry>
        <inputEntry id="InputEntry_prior_treatment_mtc">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_combination_mtc">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_rai_refractory_mtc">
          <text>-</text>
        </inputEntry>
        <inputEntry id="IE_DecisionRule_approve_mtc_ultimo"><text>-</text></inputEntry>
        <outputEntry id="OutputEntry_resultado_mtc">
          <text>"Aprovado"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_observacao_mtc">
          <text>"Cabozantinibe aprovado: tireoide medular progressivo. Alternativa: vandetanibe"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_fundamentacao_mtc">
          <text>"EXAM: PFS 11.2 vs 4.0m; ORR 28%. Ativo em RET+ e RET-"</text>
        </outputEntry>
        <outputEntry id="OE_approve_mtc_alertas">
          <text>"NENHUM"</text>
        </outputEntry>
        <outputEntry id="OE_approve_mtc_acao">
          <text>"APROVAR"</text>
        </outputEntry>
      </rule>
      <rule id="DecisionRule_approve_dtc">
        <description>Approve DTC RAI-refractory</description>
        <inputEntry id="InputEntry_tumor_type_dtc">
          <text>"DTC","differentiated_thyroid"</text>
        </inputEntry>
        <inputEntry id="InputEntry_prior_treatment_dtc">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_combination_dtc">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_rai_refractory_dtc">
          <text>true</text>
        </inputEntry>
        <inputEntry id="IE_DecisionRule_approve_dtc_ultimo"><text>-</text></inputEntry>
        <outputEntry id="OutputEntry_resultado_dtc">
          <text>"Aprovado"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_observacao_dtc">
          <text>"Cabozantinibe aprovado: tireoide diferenciado refratario a RAI progressivo"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_fundamentacao_dtc">
          <text>"COSMIC-311: PFS 11.0 vs 1.9m pos-TKI; opcao pos-lenvatinibe/sorafenibe"</text>
        </outputEntry>
        <outputEntry id="OE_approve_dtc_alertas">
          <text>"NENHUM"</text>
        </outputEntry>
        <outputEntry id="OE_approve_dtc_acao">
          <text>"APROVAR"</text>
        </outputEntry>
      </rule>
      <rule id="DecisionRule_reject_dtc_rai_sensitive">
        <description>Reject DTC if RAI sensitive</description>
        <inputEntry id="InputEntry_tumor_type_rai_sens">
          <text>"DTC","differentiated_thyroid"</text>
        </inputEntry>
        <inputEntry id="InputEntry_prior_treatment_rai_sens">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_combination_rai_sens">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_rai_refractory_rai_sens">
          <text>false</text>
        </inputEntry>
        <inputEntry id="IE_DecisionRule_reject_dtc_rai_sensitive_ultimo"><text>-</text></inputEntry>
        <outputEntry id="OutputEntry_resultado_rai_sens">
          <text>"Reprovado"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_observacao_rai_sens">
          <text>"DTC sensivel a RAI: tratar com iodo radioativo, nao TKI"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_fundamentacao_rai_sens">
          <text>"TKI reservados para RAI-refratario; RAI sensivel tem excelente prognostico"</text>
        </outputEntry>
        <outputEntry id="OE_reject_dtc_rai_sensitive_alertas">
          <text>"PROT"</text>
        </outputEntry>
        <outputEntry id="OE_reject_dtc_rai_sensitive_acao">
          <text>"NEGAR"</text>
        </outputEntry>
      </rule>

      <!-- WASTE DETECTION: ESC -->
      <rule id="Rule_40501344_ESC">
        <description>ESC - Cabozantinib sem documentacao falha TKI/checkpoint previo</description>
        <inputEntry id="IE_ESC_40501344_1"><text>-</text></inputEntry>
        <inputEntry id="IE_ESC_40501344_2"><text>-</text></inputEntry>
        <inputEntry id="IE_ESC_40501344_3"><text>-</text></inputEntry>
        <inputEntry id="IE_ESC_40501344_4"><text>-</text></inputEntry>
        <inputEntry id="IE_ESC_40501344_ultimo"><text>-</text></inputEntry>
        <outputEntry id="OE_ESC_40501344_resultado"><text>"Pendente"</text></outputEntry>
        <outputEntry id="OE_ESC_40501344_observacao"><text>"Cabozantinib sem documentacao falha TKI/checkpoint previo"</text></outputEntry>
        <outputEntry id="OE_ESC_40501344_fundamentacao"><text>"NCCN RCC/HCC 2024: Cabozantinib 2L+ requer falha terapia previa documentada"</text></outputEntry>
        <outputEntry id="OE_ESC_40501344_alertasDesperdicio"><text>"ESC"</text></outputEntry>
        <outputEntry id="OE_ESC_40501344_acaoRecomendada"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>

      <!-- WASTE DETECTION: FREQ -->
      <rule id="Rule_40501344_FREQ">
        <description>FREQ - Verificar frequencia dispensacao medicamento oral oncologico. Ciclo 28 dias padr</description>
        <inputEntry id="IE_FREQ_40501344_1"><text>-</text></inputEntry>
        <inputEntry id="IE_FREQ_40501344_2"><text>-</text></inputEntry>
        <inputEntry id="IE_FREQ_40501344_3"><text>-</text></inputEntry>
        <inputEntry id="IE_FREQ_40501344_4"><text>-</text></inputEntry>
        <inputEntry id="IE_FREQ_40501344_ultimo"><text>-</text></inputEntry>
        <outputEntry id="OE_FREQ_40501344_resultado"><text>"Pendente"</text></outputEntry>
        <outputEntry id="OE_FREQ_40501344_observacao"><text>"Verificar frequencia dispensacao medicamento oral oncologico. Ciclo 28 dias padrao"</text></outputEntry>
        <outputEntry id="OE_FREQ_40501344_fundamentacao"><text>"ANS RN 465/2021, SBOC 2023: Dispensacao oral oncologico ciclo 28 dias, max 3 ciclos por autorizacao"</text></outputEntry>
        <outputEntry id="OE_FREQ_40501344_alertasDesperdicio"><text>"FREQ"</text></outputEntry>
        <outputEntry id="OE_FREQ_40501344_acaoRecomendada"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>

      <rule id="DecisionRule_fallback">
        <description>Fallback rule</description>
        <inputEntry id="InputEntry_tumor_type_fallback">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_prior_treatment_fallback">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_combination_fallback">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_rai_refractory_fallback">
          <text>-</text>
        </inputEntry>
        <inputEntry id="IE_DecisionRule_fallback_ultimo"><text>-</text></inputEntry>
        <outputEntry id="OutputEntry_resultado_fallback">
          <text>"Pendente"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_observacao_fallback">
          <text>"Dados insuficientes para avaliacao de cabozantinibe"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_fundamentacao_fallback">
          <text>"Necessario: tipo tumoral, tratamento previo, combinacao, status RAI (tireoide)"</text>
        </outputEntry>
        <outputEntry id="OE_fallback_alertas">
          <text>"NENHUM"</text>
        </outputEntry>
        <outputEntry id="OE_fallback_acao">
          <text>"SOLICITAR_INFO"</text>
        </outputEntry>
      </rule>
    </decisionTable>
  </decision>
  <dmndi:DMNDI>
    <dmndi:DMNDiagram>
      <dmndi:DMNShape dmnElementRef="Decision_ONQ_DRUG_019">
        <dc:Bounds height="80" width="180" x="160" y="100" />
      </dmndi:DMNShape>
    </dmndi:DMNDiagram>
  </dmndi:DMNDI>
</definitions>
