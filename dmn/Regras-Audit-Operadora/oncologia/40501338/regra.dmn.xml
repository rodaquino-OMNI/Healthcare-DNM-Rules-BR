<?xml version="1.0" encoding="UTF-8"?>
<!--
  ONQ-DRUG-013: Daratumumab for Myeloma
  TUSS: 40501338
  Versao: 3.1.0-LEAN-TIER2 (2026-02-08)
  Especialidade: Oncologia

  ============================================================================
  INDICACOES CLINICAS:
  ============================================================================
  - MM 1L: + VRd (GRIFFIN), + DVd (ALCYONE) para inelegiveis TMO
  - MM recidivado: + Rd (POLLUX), + Vd (CASTOR), + pomalidomida (APOLLO)
  - Monoterapia: >= 4L (single-agent studies)
  - Via SC preferida (menor tempo infusao, menos reacoes)

  ============================================================================
  REFERENCIAS NORMATIVAS:
  ============================================================================
  - GRIFFIN (dara-VRd transplant eligible)
  - ALCYONE (dara-VMP transplant ineligible)
  - POLLUX (dara-Rd relapsed)
  - CASTOR (dara-Vd relapsed)
  - NCCN Multiple Myeloma 2024
-->
<definitions xmlns="https://www.omg.org/spec/DMN/20191111/MODEL/" xmlns:dmndi="https://www.omg.org/spec/DMN/20191111/DMNDI/" xmlns:dc="http://www.omg.org/spec/DMN/20180521/DC/" xmlns:modeler="http://camunda.org/schema/modeler/1.0" id="Definitions_ONQ_DRUG_013" name="DRD" namespace="http://camunda.org/schema/1.0/dmn" exporter="Camunda Modeler" exporterVersion="5.14.0" modeler:executionPlatform="Camunda Cloud" modeler:executionPlatformVersion="8.2.0">
  <decision id="Decision_ONQ_DRUG_013" name="ONQ-DRUG-013: Daratumumab for Myeloma [LEAN TIER-2]">
    <decisionTable id="DecisionTable_ONQ_DRUG_013" hitPolicy="FIRST">
      <input id="Input_disease" label="Disease">
        <inputExpression id="InputExpression_disease" typeRef="string">
          <text>disease</text>
        </inputExpression>
      </input>
      <input id="Input_transplant_eligible" label="Transplant Eligible">
        <inputExpression id="InputExpression_transplant_eligible" typeRef="boolean">
          <text>transplantEligible</text>
        </inputExpression>
      </input>
      <input id="Input_combination" label="Proposed Combination">
        <inputExpression id="InputExpression_combination" typeRef="string">
          <text>proposedCombination</text>
        </inputExpression>
      </input>
      <input id="Input_line" label="Treatment Line">
        <inputExpression id="InputExpression_line" typeRef="number">
          <text>treatmentLine</text>
        </inputExpression>
      </input>
      <!-- Input: Dias desde ultimo procedimento (DUP detection) -->
      <input id="Input_ultimoProcedimentoDias" label="Dias Desde Ultimo Procedimento">
        <inputExpression id="InputExpression_ultimoProcedimentoDias" typeRef="number">
          <text>ultimoProcedimentoDias</text>
        </inputExpression>
      </input>

      <output id="Output_resultado" label="Resultado" name="resultado" typeRef="string">
        <outputValues id="UnaryTests_resultado">
          <text>"Aprovado","Reprovado","Pendente"</text>
        </outputValues>
      </output>
      <output id="Output_observacao" label="Observacao" name="observacao" typeRef="string" />
      <output id="Output_fundamentacao" label="Fundamentacao" name="fundamentacao" typeRef="string" />
      <output id="Output_alertasDesperdicio" label="Alertas de Desperdicio" name="alertasDesperdicio" typeRef="string">
        <outputValues id="OutputValues_alertasDesperdicio">
          <text>"NENHUM","DUP","FREQ","ESC","DOC","PROT","MULTI"</text>
        </outputValues>
      </output>
      <output id="Output_acaoRecomendada" label="Acao Recomendada" name="acaoRecomendada" typeRef="string">
        <outputValues id="OutputValues_acaoRecomendada">
          <text>"APROVAR","NEGAR","SOLICITAR_INFO","AGUARDAR_PRAZO","SUGERIR_ALTERNATIVA"</text>
        </outputValues>
      </output>
      <rule id="DecisionRule_reject_non_myeloma">
        <description>Reject non-myeloma</description>
        <inputEntry id="InputEntry_disease_non">
          <text>not("multiple_myeloma","MM","myeloma")</text>
        </inputEntry>
        <inputEntry id="InputEntry_transplant_eligible_non">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_combination_non">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_line_non">
          <text>-</text>
        </inputEntry>
        <inputEntry id="IE_DecisionRule_reject_non_myeloma_ultimo"><text>-</text></inputEntry>
        <outputEntry id="OutputEntry_resultado_non">
          <text>"Reprovado"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_observacao_non">
          <text>"Daratumumabe: apenas mieloma multiplo"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_fundamentacao_non">
          <text>"Indicacao exclusiva para mieloma multiplo; amiloidose AL em estudo"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_alertasDesperdicio_non">
          <text>"PROT"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_acaoRecomendada_non">
          <text>"NEGAR"</text>
        </outputEntry>
      </rule>
      <rule id="DecisionRule_approve_1l_transplant">
        <description>Approve 1L transplant-eligible with VRd</description>
        <inputEntry id="InputEntry_disease_1l_te">
          <text>"multiple_myeloma","MM","myeloma"</text>
        </inputEntry>
        <inputEntry id="InputEntry_transplant_eligible_1l_te">
          <text>true</text>
        </inputEntry>
        <inputEntry id="InputEntry_combination_1l_te">
          <text>"dara_VRd","daratumumab_bortezomib_lenalidomide_dex"</text>
        </inputEntry>
        <inputEntry id="InputEntry_line_1l_te">
          <text>1</text>
        </inputEntry>
        <inputEntry id="IE_DecisionRule_approve_1l_transplant_ultimo"><text>-</text></inputEntry>
        <outputEntry id="OutputEntry_resultado_1l_te">
          <text>"Aprovado"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_observacao_1l_te">
          <text>"Dara-VRd aprovado: MM 1L elegivel TMO. Via SC preferida"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_fundamentacao_1l_te">
          <text>"GRIFFIN: sCR 42% vs 32%; MRD- 51% vs 20%. Inducao + consolidacao + manutencao"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_alertasDesperdicio_1l_te">
          <text>"NENHUM"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_acaoRecomendada_1l_te">
          <text>"APROVAR"</text>
        </outputEntry>
      </rule>
      <rule id="DecisionRule_approve_1l_ineligible">
        <description>Approve 1L transplant-ineligible with VMP</description>
        <inputEntry id="InputEntry_disease_1l_ti">
          <text>"multiple_myeloma","MM","myeloma"</text>
        </inputEntry>
        <inputEntry id="InputEntry_transplant_eligible_1l_ti">
          <text>false</text>
        </inputEntry>
        <inputEntry id="InputEntry_combination_1l_ti">
          <text>"dara_VMP","daratumumab_bortezomib_melphalan_pred"</text>
        </inputEntry>
        <inputEntry id="InputEntry_line_1l_ti">
          <text>1</text>
        </inputEntry>
        <inputEntry id="IE_DecisionRule_approve_1l_ineligible_ultimo"><text>-</text></inputEntry>
        <outputEntry id="OutputEntry_resultado_1l_ti">
          <text>"Aprovado"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_observacao_1l_ti">
          <text>"Dara-VMP aprovado: MM 1L inelegivel TMO. 9 ciclos VMP + dara manutencao"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_fundamentacao_1l_ti">
          <text>"ALCYONE: OS 36m superior; MRD- 22% vs 6%. Manutencao dara q4s ate progressao"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_alertasDesperdicio_1l_ti">
          <text>"NENHUM"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_acaoRecomendada_1l_ti">
          <text>"APROVAR"</text>
        </outputEntry>
      </rule>
      <rule id="DecisionRule_approve_relapsed_rd">
        <description>Approve relapsed with Rd</description>
        <inputEntry id="InputEntry_disease_rel_rd">
          <text>"multiple_myeloma","MM","myeloma"</text>
        </inputEntry>
        <inputEntry id="InputEntry_transplant_eligible_rel_rd">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_combination_rel_rd">
          <text>"dara_Rd","daratumumab_lenalidomide_dex"</text>
        </inputEntry>
        <inputEntry id="InputEntry_line_rel_rd">
          <text>>= 2</text>
        </inputEntry>
        <inputEntry id="IE_DecisionRule_approve_relapsed_rd_ultimo"><text>-</text></inputEntry>
        <outputEntry id="OutputEntry_resultado_rel_rd">
          <text>"Aprovado"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_observacao_rel_rd">
          <text>"Dara-Rd aprovado: MM recidivado. Lenalidomida refratario: usar dara-Vd"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_fundamentacao_rel_rd">
          <text>"POLLUX: PFS NR vs 17.5m; resposta rapida e duradoura"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_alertasDesperdicio_rel_rd">
          <text>"NENHUM"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_acaoRecomendada_rel_rd">
          <text>"APROVAR"</text>
        </outputEntry>
      </rule>
      <rule id="DecisionRule_approve_relapsed_vd">
        <description>Approve relapsed with Vd</description>
        <inputEntry id="InputEntry_disease_rel_vd">
          <text>"multiple_myeloma","MM","myeloma"</text>
        </inputEntry>
        <inputEntry id="InputEntry_transplant_eligible_rel_vd">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_combination_rel_vd">
          <text>"dara_Vd","daratumumab_bortezomib_dex"</text>
        </inputEntry>
        <inputEntry id="InputEntry_line_rel_vd">
          <text>>= 2</text>
        </inputEntry>
        <inputEntry id="IE_DecisionRule_approve_relapsed_vd_ultimo"><text>-</text></inputEntry>
        <outputEntry id="OutputEntry_resultado_rel_vd">
          <text>"Aprovado"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_observacao_rel_vd">
          <text>"Dara-Vd aprovado: MM recidivado, especialmente lenalidomida-refratario"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_fundamentacao_rel_vd">
          <text>"CASTOR: PFS 16.7 vs 7.1m; beneficio consistente em subgrupos de alto risco"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_alertasDesperdicio_rel_vd">
          <text>"NENHUM"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_acaoRecomendada_rel_vd">
          <text>"APROVAR"</text>
        </outputEntry>
      </rule>
      <rule id="DecisionRule_approve_mono_4l">
        <description>Approve monotherapy 4L+</description>
        <inputEntry id="InputEntry_disease_mono">
          <text>"multiple_myeloma","MM","myeloma"</text>
        </inputEntry>
        <inputEntry id="InputEntry_transplant_eligible_mono">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_combination_mono">
          <text>"monotherapy","daratumumab_mono"</text>
        </inputEntry>
        <inputEntry id="InputEntry_line_mono">
          <text>>= 4</text>
        </inputEntry>
        <inputEntry id="IE_DecisionRule_approve_mono_4l_ultimo"><text>-</text></inputEntry>
        <outputEntry id="OutputEntry_resultado_mono">
          <text>"Aprovado"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_observacao_mono">
          <text>"Dara monoterapia aprovado: MM >= 4L, refratario a PI e IMiD"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_fundamentacao_mono">
          <text>"SIRIUS/GEN501: ORR 29-36% em pesadamente tratados; opcao paliativa"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_alertasDesperdicio_mono">
          <text>"NENHUM"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_acaoRecomendada_mono">
          <text>"APROVAR"</text>
        </outputEntry>
      </rule>
      <rule id="DecisionRule_reject_mono_early">
        <description>Reject monotherapy in early lines</description>
        <inputEntry id="InputEntry_disease_mono_early">
          <text>"multiple_myeloma","MM","myeloma"</text>
        </inputEntry>
        <inputEntry id="InputEntry_transplant_eligible_mono_early">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_combination_mono_early">
          <text>"monotherapy","daratumumab_mono"</text>
        </inputEntry>
        <inputEntry id="InputEntry_line_mono_early">
          <text>[1..3]</text>
        </inputEntry>
        <inputEntry id="IE_DecisionRule_reject_mono_early_ultimo"><text>-</text></inputEntry>
        <outputEntry id="OutputEntry_resultado_mono_early">
          <text>"Reprovado"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_observacao_mono_early">
          <text>"Monoterapia em linhas precoces: usar dara em combinacao para maior eficacia"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_fundamentacao_mono_early">
          <text>"Combinacoes (dara-Rd, dara-Vd, dara-VMP) superiores a monoterapia em L1-3"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_alertasDesperdicio_mono_early">
          <text>"PROT"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_acaoRecomendada_mono_early">
          <text>"NEGAR"</text>
        </outputEntry>
      </rule>

      <!-- WASTE DETECTION: DUP -->
      <rule id="Rule_40501338_DUP">
        <description>DUP - Daratumumab dose repetida em menos de 14 dias</description>
        <inputEntry id="IE_DUP_40501338_1"><text>-</text></inputEntry>
        <inputEntry id="IE_DUP_40501338_2"><text>-</text></inputEntry>
        <inputEntry id="IE_DUP_40501338_3"><text>-</text></inputEntry>
        <inputEntry id="IE_DUP_40501338_4"><text>-</text></inputEntry>
        <inputEntry id="IE_DUP_40501338_ultimo"><text>&lt; 14</text></inputEntry>
        <outputEntry id="OE_DUP_40501338_resultado"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OE_DUP_40501338_observacao"><text>"Daratumumab dose repetida em menos de 14 dias"</text></outputEntry>
        <outputEntry id="OE_DUP_40501338_fundamentacao"><text>"Bula daratumumab: Semanal (ciclos 1-2), quinzenal (ciclos 3-6), mensal (manutencao)"</text></outputEntry>
        <outputEntry id="OE_DUP_40501338_alertasDesperdicio"><text>"DUP"</text></outputEntry>
        <outputEntry id="OE_DUP_40501338_acaoRecomendada"><text>"AGUARDAR_PRAZO"</text></outputEntry>
      </rule>

      <rule id="DecisionRule_fallback">
        <description>Fallback rule</description>
        <inputEntry id="InputEntry_disease_fallback">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_transplant_eligible_fallback">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_combination_fallback">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_line_fallback">
          <text>-</text>
        </inputEntry>
        <inputEntry id="IE_DecisionRule_fallback_ultimo"><text>-</text></inputEntry>
        <outputEntry id="OutputEntry_resultado_fallback">
          <text>"Pendente"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_observacao_fallback">
          <text>"Dados insuficientes para avaliacao de daratumumabe"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_fundamentacao_fallback">
          <text>"Necessario: doenca, elegibilidade TMO, combinacao proposta, linha de tratamento"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_alertasDesperdicio_fallback">
          <text>"DOC"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_acaoRecomendada_fallback">
          <text>"SOLICITAR_INFO"</text>
        </outputEntry>
      </rule>
    </decisionTable>
  </decision>
  <dmndi:DMNDI>
    <dmndi:DMNDiagram>
      <dmndi:DMNShape dmnElementRef="Decision_ONQ_DRUG_013">
        <dc:Bounds height="80" width="180" x="160" y="100" />
      </dmndi:DMNShape>
    </dmndi:DMNDiagram>
  </dmndi:DMNDI>
</definitions>
