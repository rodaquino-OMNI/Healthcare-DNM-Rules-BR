<?xml version="1.0" encoding="UTF-8"?>
<!-- Versao: 3.1.0-LEAN-TIER2 (2026-02-08) -->
<definitions xmlns="https://www.omg.org/spec/DMN/20191111/MODEL/" xmlns:dmndi="https://www.omg.org/spec/DMN/20191111/DMNDI/" xmlns:dc="http://www.omg.org/spec/DMN/20180521/DC/" xmlns:modeler="http://camunda.org/schema/modeler/1.0" id="Definitions_ONQ_LINE_004" name="DRD" namespace="http://camunda.org/schema/1.0/dmn" exporter="Camunda Modeler" exporterVersion="5.14.0" modeler:executionPlatform="Camunda Cloud" modeler:executionPlatformVersion="8.2.0">
  <decision id="Decision_ONQ_LINE_004" name="ONQ-LINE-004: Third-Line Therapy Criteria [LEAN TIER-2]">
    <decisionTable id="DecisionTable_ONQ_LINE_004" hitPolicy="FIRST">
      <input id="Input_ecog_ps" label="ECOG Performance Status">
        <inputExpression id="InputExpression_ecog_ps" typeRef="number">
          <text>ecogPS</text>
        </inputExpression>
      </input>
      <input id="Input_prior_lines" label="Prior Treatment Lines">
        <inputExpression id="InputExpression_prior_lines" typeRef="number">
          <text>priorLines</text>
        </inputExpression>
      </input>
      <input id="Input_evidence_based_option" label="Evidence-Based 3L Option">
        <inputExpression id="InputExpression_evidence_based_option" typeRef="boolean">
          <text>evidenceBasedOption</text>
        </inputExpression>
      </input>
      <input id="Input_organ_function" label="Organ Function Adequate">
        <inputExpression id="InputExpression_organ_function" typeRef="boolean">
          <text>organFunctionAdequate</text>
        </inputExpression>
      </input>
      <input id="Input_ultimoProcedimentoDias" label="Dias Desde Ultimo Procedimento">
        <inputExpression id="InputExpression_ultimoProcedimentoDias" typeRef="number">
          <text>ultimoProcedimentoDias</text>
        </inputExpression>
      </input>
      <output id="Output_resultado" label="Resultado" name="resultado" typeRef="string">
        <outputValues id="UnaryTests_resultado">
          <text>"Aprovado","Reprovado","Pendente"</text>
        </outputValues>
      </output>
      <output id="Output_observacao" label="Observação" name="observacao" typeRef="string" />
      <output id="Output_fundamentacao" label="Fundamentação" name="fundamentacao" typeRef="string" />
      <output id="Output_alertasDesperdicio" label="Alertas de Desperdicio" name="alertasDesperdicio" typeRef="string">
        <outputValues id="OutputValues_alertasDesperdicio">
          <text>"NENHUM","DUP","FREQ","ESC","DOC","PROT","MULTI"</text>
        </outputValues>
      </output>
      <output id="Output_acaoRecomendada" label="Acao Recomendada" name="acaoRecomendada" typeRef="string">
        <outputValues id="OutputValues_acaoRecomendada">
          <text>"APROVAR","NEGAR","SOLICITAR_INFO","AGUARDAR_PRAZO","SUGERIR_ALTERNATIVA"</text>
        </outputValues>
      </output>
      <rule id="DecisionRule_reject_poor_ps">
        <inputEntry id="InputEntry_ecog_ps_reject">
          <text>[3..4]</text>
        </inputEntry>
        <inputEntry id="InputEntry_prior_lines_reject">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_evidence_based_option_reject">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_organ_function_reject">
          <text>-</text>
        </inputEntry>
        <inputEntry id="IE_DecisionRule_reject_poor_ps_ultimo"><text>-</text></inputEntry>
        <outputEntry id="OutputEntry_resultado_reject">
          <text>"Reprovado"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_observacao_reject">
          <text>"ECOG 3-4: Terapia sistemica improvavel de beneficiar; cuidados paliativos recomendados"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_fundamentacao_reject">
          <text>"ECOG 3-4 prediz alto risco de toxicidade e beneficio minimo da terapia 3L conforme diretrizes ASCO 2024"</text>
        </outputEntry>
        <outputEntry id="OE_reject_alertasDesperdicio">
          <text>"PROT"</text>
        </outputEntry>
        <outputEntry id="OE_reject_acaoRecomendada">
          <text>"NEGAR"</text>
        </outputEntry>
      </rule>
      <rule id="Rule_40501310_ESC_escalonamento">
        <description>ESC - Escalonamento inadequado sem falha linha anterior documentada</description>
        <inputEntry id="IE_ESC_ecog">
          <text>-</text>
        </inputEntry>
        <inputEntry id="IE_ESC_lines">
          <text>-</text>
        </inputEntry>
        <inputEntry id="IE_ESC_evidence">
          <text>-</text>
        </inputEntry>
        <inputEntry id="IE_ESC_organ">
          <text>-</text>
        </inputEntry>
        <inputEntry id="IE_ESC_ultimo">
          <text>-</text>
        </inputEntry>
        <outputEntry id="OE_ESC_resultado">
          <text>"Pendente"</text>
        </outputEntry>
        <outputEntry id="OE_ESC_observacao">
          <text>"Documentar falha/intolerancia linha terapeutica anterior antes de escalonar"</text>
        </outputEntry>
        <outputEntry id="OE_ESC_fundamentacao">
          <text>"NCCN/CONITEC 2024: Step therapy obrigatoria - documentar falha antes de progredir para proxima linha"</text>
        </outputEntry>
        <outputEntry id="OE_ESC_alertasDesperdicio">
          <text>"ESC"</text>
        </outputEntry>
        <outputEntry id="OE_ESC_acaoRecomendada">
          <text>"SUGERIR_ALTERNATIVA"</text>
        </outputEntry>
      </rule>
      <rule id="DecisionRule_reject_no_evidence">
        <inputEntry id="InputEntry_ecog_ps_no_evidence">
          <text>[0..2]</text>
        </inputEntry>
        <inputEntry id="InputEntry_prior_lines_no_evidence">
          <text>&gt;= 2</text>
        </inputEntry>
        <inputEntry id="InputEntry_evidence_based_option_no_evidence">
          <text>false</text>
        </inputEntry>
        <inputEntry id="InputEntry_organ_function_no_evidence">
          <text>-</text>
        </inputEntry>
        <inputEntry id="IE_DecisionRule_reject_no_evidence_ultimo"><text>-</text></inputEntry>
        <outputEntry id="OutputEntry_resultado_no_evidence">
          <text>"Reprovado"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_observacao_no_evidence">
          <text>"Sem opcao de 3L baseada em evidencia para este tipo de tumor. Considerar ensaio clinico ou melhor cuidado de suporte"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_fundamentacao_no_evidence">
          <text>"Terapia futilmente aumenta toxicidade sem beneficio de sobrevida conforme diretrizes baseadas em evidencia NCCN/ASCO 2024"</text>
        </outputEntry>
        <outputEntry id="OE_no_evidence_alertasDesperdicio">
          <text>"PROT"</text>
        </outputEntry>
        <outputEntry id="OE_no_evidence_acaoRecomendada">
          <text>"NEGAR"</text>
        </outputEntry>
      </rule>
      <rule id="DecisionRule_approve_good_ps">
        <inputEntry id="InputEntry_ecog_ps_good">
          <text>[0..1]</text>
        </inputEntry>
        <inputEntry id="InputEntry_prior_lines_good">
          <text>2</text>
        </inputEntry>
        <inputEntry id="InputEntry_evidence_based_option_good">
          <text>true</text>
        </inputEntry>
        <inputEntry id="InputEntry_organ_function_good">
          <text>true</text>
        </inputEntry>
        <inputEntry id="IE_DecisionRule_approve_good_ps_ultimo"><text>-</text></inputEntry>
        <outputEntry id="OutputEntry_resultado_good">
          <text>"Aprovado"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_observacao_good">
          <text>"Terapia de terceira linha aprovada: ECOG 0-1, funcao organica adequada, opcao baseada em evidencia disponivel"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_fundamentacao_good">
          <text>"Regimes selecionados de 3L mostram beneficio de SO em pacientes elegivel (p.ex., TAS-102 mCRC, docetaxel NSCLC, regorafenib) 2024"</text>
        </outputEntry>
        <outputEntry id="OE_good_alertasDesperdicio">
          <text>"NENHUM"</text>
        </outputEntry>
        <outputEntry id="OE_good_acaoRecomendada">
          <text>"APROVAR"</text>
        </outputEntry>
      </rule>
      <rule id="DecisionRule_pending_ecog2">
        <inputEntry id="InputEntry_ecog_ps_ecog2">
          <text>2</text>
        </inputEntry>
        <inputEntry id="InputEntry_prior_lines_ecog2">
          <text>&gt;= 2</text>
        </inputEntry>
        <inputEntry id="InputEntry_evidence_based_option_ecog2">
          <text>true</text>
        </inputEntry>
        <inputEntry id="InputEntry_organ_function_ecog2">
          <text>true</text>
        </inputEntry>
        <inputEntry id="IE_DecisionRule_pending_ecog2_ultimo"><text>-</text></inputEntry>
        <outputEntry id="OutputEntry_resultado_ecog2">
          <text>"Pendente"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_observacao_ecog2">
          <text>"ECOG 2 requer revisao de oncologia. Avaliacao risco-beneficio: toxicidade vs beneficio potencial de sobrevida"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_fundamentacao_ecog2">
          <text>"Pacientes ECOG 2 mostram toxicidade maior; considerar terapia de intensidade reduzida ou alvo conforme discussao MTB 2024"</text>
        </outputEntry>
        <outputEntry id="OE_ecog2_alertasDesperdicio">
          <text>"NENHUM"</text>
        </outputEntry>
        <outputEntry id="OE_ecog2_acaoRecomendada">
          <text>"SOLICITAR_INFO"</text>
        </outputEntry>
      </rule>
      <rule id="DecisionRule_pending_organ_dysfunction">
        <inputEntry id="InputEntry_ecog_ps_organ">
          <text>[0..2]</text>
        </inputEntry>
        <inputEntry id="InputEntry_prior_lines_organ">
          <text>&gt;= 2</text>
        </inputEntry>
        <inputEntry id="InputEntry_evidence_based_option_organ">
          <text>true</text>
        </inputEntry>
        <inputEntry id="InputEntry_organ_function_organ">
          <text>false</text>
        </inputEntry>
        <inputEntry id="IE_DecisionRule_pending_organ_dysfunction_ultimo"><text>-</text></inputEntry>
        <outputEntry id="OutputEntry_resultado_organ">
          <text>"Pendente"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_observacao_organ">
          <text>"Disfuncao organica requer modificacao de dose ou regime alternativo. Consulta nefrologia/hepatologia se necessario"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_fundamentacao_organ">
          <text>"Insuficiencia renal/hepatica aumenta toxicidade do farmaco; ajustes de dose conforme rotulo FDA ou agentes alternativos 2024"</text>
        </outputEntry>
        <outputEntry id="OE_organ_alertasDesperdicio">
          <text>"NENHUM"</text>
        </outputEntry>
        <outputEntry id="OE_organ_acaoRecomendada">
          <text>"SOLICITAR_INFO"</text>
        </outputEntry>
      </rule>
      <rule id="DecisionRule_fallback">
        <inputEntry id="InputEntry_ecog_ps_fallback">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_prior_lines_fallback">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_evidence_based_option_fallback">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_organ_function_fallback">
          <text>-</text>
        </inputEntry>
        <inputEntry id="IE_DecisionRule_fallback_ultimo"><text>-</text></inputEntry>
        <outputEntry id="OutputEntry_resultado_fallback">
          <text>"Pendente"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_observacao_fallback">
          <text>"Dados incompletos. ECOG PS, linhas de tratamento previas e funcao organica requeridos"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_fundamentacao_fallback">
          <text>"Revisao de comite multidisciplinar de tumores recomendada para apropriacao da terapia 3L conforme NCCN 2024"</text>
        </outputEntry>
        <outputEntry id="OE_fallback_alertasDesperdicio">
          <text>"NENHUM"</text>
        </outputEntry>
        <outputEntry id="OE_fallback_acaoRecomendada">
          <text>"SOLICITAR_INFO"</text>
        </outputEntry>
      </rule>
    </decisionTable>
  </decision>
  <dmndi:DMNDI>
    <dmndi:DMNDiagram>
      <dmndi:DMNShape dmnElementRef="Decision_ONQ_LINE_004">
        <dc:Bounds height="80" width="180" x="160" y="100" />
      </dmndi:DMNShape>
    </dmndi:DMNDiagram>
  </dmndi:DMNDI>
</definitions>
