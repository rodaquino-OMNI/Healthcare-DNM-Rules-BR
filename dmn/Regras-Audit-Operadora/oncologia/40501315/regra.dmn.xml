<?xml version="1.0" encoding="UTF-8"?>
<!--
  ONQ-LINE-009: Palliative vs Curative Intent
  TUSS: 40501315
  Versao: 3.1.0-LEAN-TIER2 (2026-02-08)
  Especialidade: Oncologia

  ============================================================================
  INDICACOES CLINICAS:
  ============================================================================
  - Curativo: Estadio I-III ressecavel, ECOG 0-1, expectativa de vida adequada
  - Paliativo: Estadio IV, metastatico, foco em controle de sintomas
  - Hibrido: Doenca oligometastatica potencialmente curavel

  ============================================================================
  CRITERIOS DE INTENCAO TERAPEUTICA:
  ============================================================================
  - Curativo: tratamento agressivo visando cura ou controle prolongado
  - Paliativo: qualidade de vida, controle sintomatico, toxicidade minima
  - Oligometastatico: avaliacao multidisciplinar para terapia ablativa

  ============================================================================
  DOCUMENTACAO OBRIGATORIA:
  ============================================================================
  - Estadiamento completo (TNM)
  - Performance status (ECOG/Karnofsky)
  - Discussao de preferencias do paciente documentada
  - Avaliacao de expectativa de vida

  ============================================================================
  REFERENCIAS NORMATIVAS:
  ============================================================================
  - ASCO Goals of Care Discussion Guidelines 2024
  - ESMO Palliative Care Guidelines 2024
  - SBOC Consenso de Oligometastase 2024
-->
<definitions xmlns="https://www.omg.org/spec/DMN/20191111/MODEL/" xmlns:dmndi="https://www.omg.org/spec/DMN/20191111/DMNDI/" xmlns:dc="http://www.omg.org/spec/DMN/20180521/DC/" xmlns:modeler="http://camunda.org/schema/modeler/1.0" id="Definitions_ONQ_LINE_009" name="DRD" namespace="http://camunda.org/schema/1.0/dmn" exporter="Camunda Modeler" exporterVersion="5.14.0" modeler:executionPlatform="Camunda Cloud" modeler:executionPlatformVersion="8.2.0">
  <decision id="Decision_ONQ_LINE_009" name="ONQ-LINE-009: Palliative vs Curative Intent [LEAN TIER-2]">
    <decisionTable id="DecisionTable_ONQ_LINE_009" hitPolicy="FIRST">
      <input id="Input_stage" label="Disease Stage">
        <inputExpression id="InputExpression_stage" typeRef="string">
          <text>diseaseStage</text>
        </inputExpression>
      </input>
      <input id="Input_ecog_ps" label="ECOG Performance Status">
        <inputExpression id="InputExpression_ecog_ps" typeRef="number">
          <text>ecogPS</text>
        </inputExpression>
      </input>
      <input id="Input_life_expectancy" label="Life Expectancy (months)">
        <inputExpression id="InputExpression_life_expectancy" typeRef="number">
          <text>lifeExpectancyMonths</text>
        </inputExpression>
      </input>
      <input id="Input_patient_goals" label="Patient Goals">
        <inputExpression id="InputExpression_patient_goals" typeRef="string">
          <text>patientGoals</text>
        </inputExpression>
      </input>
      <input id="Input_ultimoProcedimentoDias" label="Dias Desde Ultimo Procedimento">
        <inputExpression id="InputExpression_ultimoProcedimentoDias" typeRef="number">
          <text>ultimoProcedimentoDias</text>
        </inputExpression>
      </input>
      <output id="Output_resultado" label="Resultado" name="resultado" typeRef="string">
        <outputValues id="UnaryTests_resultado">
          <text>"Aprovado","Reprovado","Pendente"</text>
        </outputValues>
      </output>
      <output id="Output_observacao" label="Observacao" name="observacao" typeRef="string" />
      <output id="Output_fundamentacao" label="Fundamentacao" name="fundamentacao" typeRef="string" />
      <!-- Output 4: Alertas de Desperdicio - Anti-Waste Intelligence -->
      <output id="Output_alertasDesperdicio" label="Alertas de Desperdicio" name="alertasDesperdicio" typeRef="string">
        <outputValues id="OutputValues_alertasDesperdicio">
          <text>"NENHUM","DUP","FREQ","ESC","DOC","PROT","MULTI"</text>
        </outputValues>
      </output>
      <!-- Output 5: Acao Recomendada -->
      <output id="Output_acaoRecomendada" label="Acao Recomendada" name="acaoRecomendada" typeRef="string">
        <outputValues id="OutputValues_acaoRecomendada">
          <text>"APROVAR","NEGAR","SOLICITAR_INFO","AGUARDAR_PRAZO","SUGERIR_ALTERNATIVA"</text>
        </outputValues>
      </output>
      <!-- WASTE DETECTION: ESC - Avaliacao de escalonamento terapeutico -->
      <rule id="Rule_40501315_ESC_step">
        <description>ESC - Avaliacao de escalonamento terapeutico</description>
        <inputEntry id="InputEntry_stage_esc">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_ecog_ps_esc">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_life_expectancy_esc">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_patient_goals_esc">
          <text>-</text>
        </inputEntry>
        <inputEntry id="IE_Rule_40501315_ESC_step_ultimo"><text>-</text></inputEntry>
        <outputEntry id="OutputEntry_resultado_esc">
          <text>"Pendente"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_observacao_esc">
          <text>"Documentar criterio de escalonamento/transicao paliativo-curativo"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_fundamentacao_esc">
          <text>"NCCN Palliative Care 2024: Transicao curativo-paliativo requer documentacao clara de intent"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_alertasDesperdicio_esc">
          <text>"ESC"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_acaoRecomendada_esc">
          <text>"SOLICITAR_INFO"</text>
        </outputEntry>
      </rule>
      <rule id="DecisionRule_reject_aggressive_terminal">
        <description>Reject aggressive treatment for terminal patients</description>
        <inputEntry id="InputEntry_stage_reject">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_ecog_ps_reject">
          <text>[3..4]</text>
        </inputEntry>
        <inputEntry id="InputEntry_life_expectancy_reject">
          <text>&lt; 3</text>
        </inputEntry>
        <inputEntry id="InputEntry_patient_goals_reject">
          <text>"comfort_only"</text>
        </inputEntry>
        <inputEntry id="IE_DecisionRule_reject_aggressive_terminal_ultimo"><text>-</text></inputEntry>
        <outputEntry id="OutputEntry_resultado_reject">
          <text>"Reprovado"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_observacao_reject">
          <text>"Tratamento agressivo contraindicado: ECOG 3-4, expectativa &lt;3 meses, foco em conforto"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_fundamentacao_reject">
          <text>"Quimioterapia em fase terminal associada a piora de QoL e morte precoce per Prigerson et al. JAMA"</text>
        </outputEntry>
        <outputEntry id="OE_DecisionRule_reject_aggressive_terminal_alertasDesperdicio">
          <text>"PROT"</text>
        </outputEntry>
        <outputEntry id="OE_DecisionRule_reject_aggressive_terminal_acaoRecomendada">
          <text>"NEGAR"</text>
        </outputEntry>
      </rule>
      <rule id="DecisionRule_approve_curative">
        <description>Approve curative intent treatment for early stage</description>
        <inputEntry id="InputEntry_stage_curative">
          <text>"I","II","III"</text>
        </inputEntry>
        <inputEntry id="InputEntry_ecog_ps_curative">
          <text>[0..1]</text>
        </inputEntry>
        <inputEntry id="InputEntry_life_expectancy_curative">
          <text>&gt;= 12</text>
        </inputEntry>
        <inputEntry id="InputEntry_patient_goals_curative">
          <text>"curative","aggressive_treatment"</text>
        </inputEntry>
        <inputEntry id="IE_DecisionRule_approve_curative_ultimo"><text>-</text></inputEntry>
        <outputEntry id="OutputEntry_resultado_curative">
          <text>"Aprovado"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_observacao_curative">
          <text>"Intencao curativa aprovada: estadio inicial, bom PS, tratamento agressivo indicado"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_fundamentacao_curative">
          <text>"Estadios I-III tem potencial curativo com cirurgia/RT/QT multimodal per diretrizes NCCN"</text>
        </outputEntry>
        <outputEntry id="OE_DecisionRule_approve_curative_alertasDesperdicio">
          <text>"NENHUM"</text>
        </outputEntry>
        <outputEntry id="OE_DecisionRule_approve_curative_acaoRecomendada">
          <text>"APROVAR"</text>
        </outputEntry>
      </rule>
      <rule id="DecisionRule_approve_palliative">
        <description>Approve palliative intent for metastatic disease</description>
        <inputEntry id="InputEntry_stage_palliative">
          <text>"IV","metastatic"</text>
        </inputEntry>
        <inputEntry id="InputEntry_ecog_ps_palliative">
          <text>[2..3]</text>
        </inputEntry>
        <inputEntry id="InputEntry_life_expectancy_palliative">
          <text>[3..12]</text>
        </inputEntry>
        <inputEntry id="InputEntry_patient_goals_palliative">
          <text>"quality_of_life","symptom_control"</text>
        </inputEntry>
        <inputEntry id="IE_DecisionRule_approve_palliative_ultimo"><text>-</text></inputEntry>
        <outputEntry id="OutputEntry_resultado_palliative">
          <text>"Aprovado"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_observacao_palliative">
          <text>"Intencao paliativa aprovada: foco em qualidade de vida e controle sintomatico"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_fundamentacao_palliative">
          <text>"Paliacao precoce melhora sobrevida e QoL per Temel et al. NEJM 2010 (mOS +2.7 meses)"</text>
        </outputEntry>
        <outputEntry id="OE_DecisionRule_approve_palliative_alertasDesperdicio">
          <text>"NENHUM"</text>
        </outputEntry>
        <outputEntry id="OE_DecisionRule_approve_palliative_acaoRecomendada">
          <text>"APROVAR"</text>
        </outputEntry>
      </rule>
      <rule id="DecisionRule_approve_oligomet">
        <description>Approve hybrid approach for oligometastatic disease</description>
        <inputEntry id="InputEntry_stage_oligo">
          <text>"oligometastatic"</text>
        </inputEntry>
        <inputEntry id="InputEntry_ecog_ps_oligo">
          <text>[0..1]</text>
        </inputEntry>
        <inputEntry id="InputEntry_life_expectancy_oligo">
          <text>&gt;= 12</text>
        </inputEntry>
        <inputEntry id="InputEntry_patient_goals_oligo">
          <text>"curative","aggressive_treatment"</text>
        </inputEntry>
        <inputEntry id="IE_DecisionRule_approve_oligomet_ultimo"><text>-</text></inputEntry>
        <outputEntry id="OutputEntry_resultado_oligo">
          <text>"Aprovado"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_observacao_oligo">
          <text>"Abordagem oligometastatica aprovada: terapia ablativa de metastases pode ser curativa"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_fundamentacao_oligo">
          <text>"SABR-COMET: sobrevida 5 anos 42% com ablacao oligomet vs 17% controle; potencial curativo"</text>
        </outputEntry>
        <outputEntry id="OE_DecisionRule_approve_oligomet_alertasDesperdicio">
          <text>"NENHUM"</text>
        </outputEntry>
        <outputEntry id="OE_DecisionRule_approve_oligomet_acaoRecomendada">
          <text>"APROVAR"</text>
        </outputEntry>
      </rule>
      <rule id="DecisionRule_pending_stage4_fit">
        <description>Pending MDT review for fit stage IV patients</description>
        <inputEntry id="InputEntry_stage_fit4">
          <text>"IV","metastatic"</text>
        </inputEntry>
        <inputEntry id="InputEntry_ecog_ps_fit4">
          <text>[0..1]</text>
        </inputEntry>
        <inputEntry id="InputEntry_life_expectancy_fit4">
          <text>&gt;= 12</text>
        </inputEntry>
        <inputEntry id="InputEntry_patient_goals_fit4">
          <text>"curative","aggressive_treatment"</text>
        </inputEntry>
        <inputEntry id="IE_DecisionRule_pending_stage4_fit_ultimo"><text>-</text></inputEntry>
        <outputEntry id="OutputEntry_resultado_fit4">
          <text>"Pendente"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_observacao_fit4">
          <text>"Estadio IV com bom PS: avaliar oligometastase ou indicacao de terapia agressiva em MTB"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_fundamentacao_fit4">
          <text>"Subgrupos de estadio IV (ex: oligomet, tumores sensiveis) podem ter sobrevida prolongada"</text>
        </outputEntry>
        <outputEntry id="OE_DecisionRule_pending_stage4_fit_alertasDesperdicio">
          <text>"NENHUM"</text>
        </outputEntry>
        <outputEntry id="OE_DecisionRule_pending_stage4_fit_acaoRecomendada">
          <text>"SOLICITAR_INFO"</text>
        </outputEntry>
      </rule>
      <rule id="DecisionRule_pending_goals_discussion">
        <description>Pending if goals of care not documented</description>
        <inputEntry id="InputEntry_stage_goals">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_ecog_ps_goals">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_life_expectancy_goals">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_patient_goals_goals">
          <text>"not_discussed","unknown"</text>
        </inputEntry>
        <inputEntry id="IE_DecisionRule_pending_goals_discussion_ultimo"><text>-</text></inputEntry>
        <outputEntry id="OutputEntry_resultado_goals">
          <text>"Pendente"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_observacao_goals">
          <text>"Preferencias do paciente nao documentadas. Realizar discussao de objetivos de cuidado"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_fundamentacao_goals">
          <text>"Discussao de GOC mandatoria antes de definir intencao terapeutica per ASCO/SBOC guidelines"</text>
        </outputEntry>
        <outputEntry id="OE_DecisionRule_pending_goals_discussion_alertasDesperdicio">
          <text>"DOC"</text>
        </outputEntry>
        <outputEntry id="OE_DecisionRule_pending_goals_discussion_acaoRecomendada">
          <text>"SOLICITAR_INFO"</text>
        </outputEntry>
      </rule>
      <rule id="DecisionRule_fallback">
        <description>Fallback rule for incomplete data</description>
        <inputEntry id="InputEntry_stage_fallback">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_ecog_ps_fallback">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_life_expectancy_fallback">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_patient_goals_fallback">
          <text>-</text>
        </inputEntry>
        <inputEntry id="IE_DecisionRule_fallback_ultimo"><text>-</text></inputEntry>
        <outputEntry id="OutputEntry_resultado_fallback">
          <text>"Pendente"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_observacao_fallback">
          <text>"Dados insuficientes para definir intencao terapeutica"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_fundamentacao_fallback">
          <text>"Necessario: estadiamento, ECOG, expectativa de vida, preferencias do paciente"</text>
        </outputEntry>
        <outputEntry id="OE_DecisionRule_fallback_alertasDesperdicio">
          <text>"DOC"</text>
        </outputEntry>
        <outputEntry id="OE_DecisionRule_fallback_acaoRecomendada">
          <text>"SOLICITAR_INFO"</text>
        </outputEntry>
      </rule>
    </decisionTable>
  </decision>
  <dmndi:DMNDI>
    <dmndi:DMNDiagram>
      <dmndi:DMNShape dmnElementRef="Decision_ONQ_LINE_009">
        <dc:Bounds height="80" width="180" x="160" y="100" />
      </dmndi:DMNShape>
    </dmndi:DMNDiagram>
  </dmndi:DMNDI>
</definitions>
