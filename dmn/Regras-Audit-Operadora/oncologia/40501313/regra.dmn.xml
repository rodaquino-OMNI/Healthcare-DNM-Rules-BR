<?xml version="1.0" encoding="UTF-8"?>
<!--
  ONQ-LINE-007: Biosimilar-First Policy
  TUSS: 40501313
  Versao: 3.1.0-LEAN-TIER2 (2026-02-08)
  Especialidade: Oncologia

  ============================================================================
  INDICACOES CLINICAS (Politica de Biossimilares):
  ============================================================================
  - Biossimilar obrigatorio para pacientes naive (rituximabe, trastuzumabe, bevacizumabe)
  - Originador permitido apenas com intolerancia documentada ao biossimilar
  - Troca de originador para biossimilar permitida sem washout

  ============================================================================
  CONTRAINDICACOES PARA BIOSSIMILAR:
  ============================================================================
  - Reacao infusional grave (grau 3-4) ao biossimilar especifico
  - Imunogenicidade documentada (anticorpos anti-droga)

  ============================================================================
  DOCUMENTACAO OBRIGATORIA:
  ============================================================================
  - Para originador: laudo de intolerancia assinado pelo oncologista
  - Descricao da reacao adversa e grau de toxicidade
  - Tentativa previa documentada com biossimilar

  ============================================================================
  REFERENCIAS NORMATIVAS:
  ============================================================================
  - ANVISA RDC 55/2010 - Registro de Biossimilares
  - ESMO Position Paper on Biosimilars 2024
  - ANS Nota Tecnica sobre Biossimilares 2024
-->
<definitions xmlns="https://www.omg.org/spec/DMN/20191111/MODEL/" xmlns:dmndi="https://www.omg.org/spec/DMN/20191111/DMNDI/" xmlns:dc="http://www.omg.org/spec/DMN/20180521/DC/" xmlns:modeler="http://camunda.org/schema/modeler/1.0" id="Definitions_ONQ_LINE_007" name="DRD" namespace="http://camunda.org/schema/1.0/dmn" exporter="Camunda Modeler" exporterVersion="5.14.0" modeler:executionPlatform="Camunda Cloud" modeler:executionPlatformVersion="8.2.0">
  <decision id="Decision_ONQ_LINE_007" name="ONQ-LINE-007: Biosimilar-First Policy [LEAN TIER-2]">
    <decisionTable id="DecisionTable_ONQ_LINE_007" hitPolicy="FIRST">
      <input id="Input_drug_class" label="Drug Class">
        <inputExpression id="InputExpression_drug_class" typeRef="string">
          <text>drugClass</text>
        </inputExpression>
      </input>
      <input id="Input_prior_exposure" label="Prior Drug Exposure">
        <inputExpression id="InputExpression_prior_exposure" typeRef="string">
          <text>priorExposure</text>
        </inputExpression>
      </input>
      <input id="Input_intolerance_documented" label="Biosimilar Intolerance Documented">
        <inputExpression id="InputExpression_intolerance_documented" typeRef="boolean">
          <text>intoleranceDocumented</text>
        </inputExpression>
      </input>
      <input id="Input_product_requested" label="Product Requested">
        <inputExpression id="InputExpression_product_requested" typeRef="string">
          <text>productRequested</text>
        </inputExpression>
      </input>
      <!-- Input: Dias desde ultimo procedimento (DUP detection) -->
      <input id="Input_ultimoProcedimentoDias" label="Dias Desde Ultimo Procedimento">
        <inputExpression id="InputExpression_ultimoProcedimentoDias" typeRef="number">
          <text>ultimoProcedimentoDias</text>
        </inputExpression>
      </input>

      <input id="Input_ultimoProcedimentoDias" label="Dias Desde Ultimo Procedimento">
        <inputExpression id="InputExpression_ultimoProcedimentoDias" typeRef="number">
          <text>ultimoProcedimentoDias</text>
        </inputExpression>
      </input>
      <output id="Output_resultado" label="Resultado" name="resultado" typeRef="string">
        <outputValues id="UnaryTests_resultado">
          <text>"Aprovado","Reprovado","Pendente"</text>
        </outputValues>
      </output>
      <output id="Output_observacao" label="Observacao" name="observacao" typeRef="string" />
      <output id="Output_fundamentacao" label="Fundamentacao" name="fundamentacao" typeRef="string" />
      <!-- Output 4: Alertas de Desperdicio - Anti-Waste Intelligence -->
      <output id="Output_alertasDesperdicio" label="Alertas de Desperdicio" name="alertasDesperdicio" typeRef="string">
        <outputValues id="OutputValues_alertasDesperdicio">
          <text>"NENHUM","DUP","FREQ","ESC","DOC","PROT","MULTI"</text>
        </outputValues>
      </output>
      <!-- Output 5: Acao Recomendada -->
      <output id="Output_acaoRecomendada" label="Acao Recomendada" name="acaoRecomendada" typeRef="string">
        <outputValues id="OutputValues_acaoRecomendada">
          <text>"APROVAR","NEGAR","SOLICITAR_INFO","AGUARDAR_PRAZO","SUGERIR_ALTERNATIVA"</text>
        </outputValues>
      </output>
      <rule id="DecisionRule_reject_originator_naive">
        <description>Reject originator for treatment-naive patients without intolerance</description>
        <inputEntry id="InputEntry_drug_class_reject">
          <text>"rituximab","trastuzumab","bevacizumab"</text>
        </inputEntry>
        <inputEntry id="InputEntry_prior_exposure_reject">
          <text>"naive","none"</text>
        </inputEntry>
        <inputEntry id="InputEntry_intolerance_documented_reject">
          <text>false</text>
        </inputEntry>
        <inputEntry id="InputEntry_product_requested_reject">
          <text>"originator"</text>
        </inputEntry>
        <inputEntry id="IE_DecisionRule_reject_originator_naive_ultimo"><text>-</text></inputEntry>
                <inputEntry id="IE_DecisionRule_reject_originator_naive_ultimo">
          <text>-</text>
        </inputEntry>
<outputEntry id="OutputEntry_resultado_reject">
          <text>"Reprovado"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_observacao_reject">
          <text>"Originador nao aprovado para paciente naive. Biossimilar e primeira escolha obrigatoria"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_fundamentacao_reject">
          <text>"Biossimilares aprovados pela ANVISA tem equivalencia clinica comprovada; politica de custo-efetividade"</text>
        </outputEntry>
        <outputEntry id="OE_DecisionRule_reject_originator_naive_alertasDesperdicio">
          <text>"PROT"</text>
        </outputEntry>
        <outputEntry id="OE_DecisionRule_reject_originator_naive_acaoRecomendada">
          <text>"NEGAR"</text>
        </outputEntry>
      </rule>
      <rule id="Rule_40501313_ESC_escalonamento">
        <description>ESC - Escalonamento inadequado sem falha linha anterior documentada</description>
        <inputEntry id="IE_ESC_1">
          <text>-</text>
        </inputEntry>
        <inputEntry id="IE_ESC_2">
          <text>-</text>
        </inputEntry>
        <inputEntry id="IE_ESC_3">
          <text>-</text>
        </inputEntry>
        <inputEntry id="IE_ESC_4">
          <text>-</text>
        </inputEntry>
        <inputEntry id="IE_ESC_5">
          <text>-</text>
        </inputEntry>
        <inputEntry id="IE_ESC_6">
          <text>-</text>
        </inputEntry>

        <outputEntry id="OE_ESC_resultado">
          <text>"Pendente"</text>
        </outputEntry>
        <outputEntry id="OE_ESC_observacao">
          <text>"Documentar falha/intolerancia linha terapeutica anterior antes de escalonar"</text>
        </outputEntry>
        <outputEntry id="OE_ESC_fundamentacao">
          <text>"NCCN/CONITEC 2024: Step therapy obrigatoria - documentar falha antes de progredir para proxima linha"</text>
        </outputEntry>
        <outputEntry id="OE_ESC_alertasDesperdicio">
          <text>"ESC"</text>
        </outputEntry>
        <outputEntry id="OE_ESC_acaoRecomendada">
          <text>"SUGERIR_ALTERNATIVA"</text>
        </outputEntry>
      </rule>

      <!-- WASTE DETECTION: ESC -->
      <rule id="Rule_40501313_ESC">
        <description>ESC - Medicamento marca quando biosimilar disponivel sem justificativa</description>
        <inputEntry id="IE_ESC_40501313_1"><text>-</text></inputEntry>
        <inputEntry id="IE_ESC_40501313_2"><text>-</text></inputEntry>
        <inputEntry id="IE_ESC_40501313_3"><text>-</text></inputEntry>
        <inputEntry id="IE_ESC_40501313_4"><text>-</text></inputEntry>
        <inputEntry id="IE_ESC_40501313_ultimo"><text>-</text></inputEntry>
                <inputEntry id="IE_Rule_40501313_ESC_ultimo">
          <text>-</text>
        </inputEntry>
<outputEntry id="OE_ESC_40501313_resultado"><text>"Pendente"</text></outputEntry>
        <outputEntry id="OE_ESC_40501313_observacao"><text>"Medicamento marca quando biosimilar disponivel sem justificativa"</text></outputEntry>
        <outputEntry id="OE_ESC_40501313_fundamentacao"><text>"CONITEC/ANS 2024: Biosimilar aprovado deve ser primeira escolha. Marca requer justificativa clinica"</text></outputEntry>
        <outputEntry id="OE_ESC_40501313_alertasDesperdicio"><text>"ESC"</text></outputEntry>
        <outputEntry id="OE_ESC_40501313_acaoRecomendada"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>

      <rule id="DecisionRule_approve_biosimilar_naive">
        <description>Approve biosimilar for treatment-naive patients</description>
        <inputEntry id="InputEntry_drug_class_bio">
          <text>"rituximab","trastuzumab","bevacizumab"</text>
        </inputEntry>
        <inputEntry id="InputEntry_prior_exposure_bio">
          <text>"naive","none"</text>
        </inputEntry>
        <inputEntry id="InputEntry_intolerance_documented_bio">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_product_requested_bio">
          <text>"biosimilar"</text>
        </inputEntry>
        <inputEntry id="IE_DecisionRule_approve_biosimilar_naive_ultimo"><text>-</text></inputEntry>
                <inputEntry id="IE_DecisionRule_approve_biosimilar_naive_ultimo">
          <text>-</text>
        </inputEntry>
<outputEntry id="OutputEntry_resultado_bio">
          <text>"Aprovado"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_observacao_bio">
          <text>"Biossimilar aprovado para paciente naive. Eficacia e seguranca equivalentes ao originador"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_fundamentacao_bio">
          <text>"Estudos de equivalencia: BERENICE (trastuzumab), REFLECTIONS (rituximab) demonstram bioequivalencia"</text>
        </outputEntry>
        <outputEntry id="OE_DecisionRule_approve_biosimilar_naive_alertasDesperdicio">
          <text>"NENHUM"</text>
        </outputEntry>
        <outputEntry id="OE_DecisionRule_approve_biosimilar_naive_acaoRecomendada">
          <text>"APROVAR"</text>
        </outputEntry>
      </rule>
      <rule id="DecisionRule_approve_originator_intolerance">
        <description>Approve originator if biosimilar intolerance documented</description>
        <inputEntry id="InputEntry_drug_class_intol">
          <text>"rituximab","trastuzumab","bevacizumab"</text>
        </inputEntry>
        <inputEntry id="InputEntry_prior_exposure_intol">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_intolerance_documented_intol">
          <text>true</text>
        </inputEntry>
        <inputEntry id="InputEntry_product_requested_intol">
          <text>"originator"</text>
        </inputEntry>
        <inputEntry id="IE_DecisionRule_approve_originator_intolerance_ultimo"><text>-</text></inputEntry>
                <inputEntry id="IE_DecisionRule_approve_originator_intolerance_ultimo">
          <text>-</text>
        </inputEntry>
<outputEntry id="OutputEntry_resultado_intol">
          <text>"Aprovado"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_observacao_intol">
          <text>"Originador aprovado devido a intolerancia documentada ao biossimilar"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_fundamentacao_intol">
          <text>"Intolerancia a excipientes ou imunogenicidade ao biossimilar justifica uso do originador"</text>
        </outputEntry>
        <outputEntry id="OE_DecisionRule_approve_originator_intolerance_alertasDesperdicio">
          <text>"NENHUM"</text>
        </outputEntry>
        <outputEntry id="OE_DecisionRule_approve_originator_intolerance_acaoRecomendada">
          <text>"APROVAR"</text>
        </outputEntry>
      </rule>
      <rule id="DecisionRule_approve_switch">
        <description>Approve switch from originator to biosimilar</description>
        <inputEntry id="InputEntry_drug_class_switch">
          <text>"rituximab","trastuzumab","bevacizumab"</text>
        </inputEntry>
        <inputEntry id="InputEntry_prior_exposure_switch">
          <text>"originator"</text>
        </inputEntry>
        <inputEntry id="InputEntry_intolerance_documented_switch">
          <text>false</text>
        </inputEntry>
        <inputEntry id="InputEntry_product_requested_switch">
          <text>"biosimilar"</text>
        </inputEntry>
        <inputEntry id="IE_DecisionRule_approve_switch_ultimo"><text>-</text></inputEntry>
                <inputEntry id="IE_DecisionRule_approve_switch_ultimo">
          <text>-</text>
        </inputEntry>
<outputEntry id="OutputEntry_resultado_switch">
          <text>"Aprovado"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_observacao_switch">
          <text>"Troca de originador para biossimilar aprovada. Nao requer washout"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_fundamentacao_switch">
          <text>"NOR-SWITCH e estudos subsequentes: troca unica segura sem perda de eficacia"</text>
        </outputEntry>
        <outputEntry id="OE_DecisionRule_approve_switch_alertasDesperdicio">
          <text>"NENHUM"</text>
        </outputEntry>
        <outputEntry id="OE_DecisionRule_approve_switch_acaoRecomendada">
          <text>"APROVAR"</text>
        </outputEntry>
      </rule>
      <rule id="DecisionRule_approve_continue_originator">
        <description>Approve continuation of originator in ongoing treatment</description>
        <inputEntry id="InputEntry_drug_class_cont">
          <text>"rituximab","trastuzumab","bevacizumab"</text>
        </inputEntry>
        <inputEntry id="InputEntry_prior_exposure_cont">
          <text>"originator"</text>
        </inputEntry>
        <inputEntry id="InputEntry_intolerance_documented_cont">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_product_requested_cont">
          <text>"originator"</text>
        </inputEntry>
        <inputEntry id="IE_DecisionRule_approve_continue_originator_ultimo"><text>-</text></inputEntry>
                <inputEntry id="IE_DecisionRule_approve_continue_originator_ultimo">
          <text>-</text>
        </inputEntry>
<outputEntry id="OutputEntry_resultado_cont">
          <text>"Pendente"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_observacao_cont">
          <text>"Paciente em uso de originador: avaliar troca para biossimilar visando reducao de custos"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_fundamentacao_cont">
          <text>"Continuidade do originador aceitavel, mas troca para biossimilar recomendada por politica institucional"</text>
        </outputEntry>
        <outputEntry id="OE_DecisionRule_approve_continue_originator_alertasDesperdicio">
          <text>"NENHUM"</text>
        </outputEntry>
        <outputEntry id="OE_DecisionRule_approve_continue_originator_acaoRecomendada">
          <text>"SUGERIR_ALTERNATIVA"</text>
        </outputEntry>
      </rule>
      <rule id="DecisionRule_pending_no_biosimilar">
        <description>Pending if no biosimilar available for drug class</description>
        <inputEntry id="InputEntry_drug_class_none">
          <text>not("rituximab","trastuzumab","bevacizumab")</text>
        </inputEntry>
        <inputEntry id="InputEntry_prior_exposure_none">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_intolerance_documented_none">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_product_requested_none">
          <text>-</text>
        </inputEntry>
        <inputEntry id="IE_DecisionRule_pending_no_biosimilar_ultimo"><text>-</text></inputEntry>
                <inputEntry id="IE_DecisionRule_pending_no_biosimilar_ultimo">
          <text>-</text>
        </inputEntry>
<outputEntry id="OutputEntry_resultado_none">
          <text>"Pendente"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_observacao_none">
          <text>"Classe sem biossimilar disponivel no Brasil. Avaliar conforme protocolo padrao"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_fundamentacao_none">
          <text>"Politica de biossimilares aplicavel apenas a classes com alternativas aprovadas pela ANVISA"</text>
        </outputEntry>
        <outputEntry id="OE_DecisionRule_pending_no_biosimilar_alertasDesperdicio">
          <text>"NENHUM"</text>
        </outputEntry>
        <outputEntry id="OE_DecisionRule_pending_no_biosimilar_acaoRecomendada">
          <text>"SOLICITAR_INFO"</text>
        </outputEntry>
      </rule>
      <rule id="DecisionRule_fallback">
        <description>Fallback rule for incomplete data</description>
        <inputEntry id="InputEntry_drug_class_fallback">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_prior_exposure_fallback">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_intolerance_documented_fallback">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_product_requested_fallback">
          <text>-</text>
        </inputEntry>
        <inputEntry id="IE_DecisionRule_fallback_ultimo"><text>-</text></inputEntry>
                <inputEntry id="IE_DecisionRule_fallback_ultimo">
          <text>-</text>
        </inputEntry>
<outputEntry id="OutputEntry_resultado_fallback">
          <text>"Pendente"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_observacao_fallback">
          <text>"Dados insuficientes para aplicacao da politica de biossimilares"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_fundamentacao_fallback">
          <text>"Necessario: classe da droga, exposicao previa, documentacao de intolerancia se aplicavel"</text>
        </outputEntry>
        <outputEntry id="OE_DecisionRule_fallback_alertasDesperdicio">
          <text>"DOC"</text>
        </outputEntry>
        <outputEntry id="OE_DecisionRule_fallback_acaoRecomendada">
          <text>"SOLICITAR_INFO"</text>
        </outputEntry>
      </rule>
    </decisionTable>
  </decision>
  <dmndi:DMNDI>
    <dmndi:DMNDiagram>
      <dmndi:DMNShape dmnElementRef="Decision_ONQ_LINE_007">
        <dc:Bounds height="80" width="180" x="160" y="100" />
      </dmndi:DMNShape>
    </dmndi:DMNDiagram>
  </dmndi:DMNDI>
</definitions>
