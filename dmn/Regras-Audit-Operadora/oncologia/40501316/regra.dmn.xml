<?xml version="1.0" encoding="UTF-8"?>
<!--
  ONQ-LINE-010: Performance Status Gating (ECOG)
  TUSS: 40501316
  Versao: 3.1.0-LEAN-TIER2 (2026-02-08)
  Especialidade: Oncologia

  ============================================================================
  INDICACOES CLINICAS (Estratificacao por ECOG):
  ============================================================================
  - ECOG 0-1: Elegivel para terapia intensiva (QT combinada, cirurgia, RT)
  - ECOG 2: Terapia de intensidade reduzida ou agentes alvo
  - ECOG 3-4: Apenas cuidados paliativos, terapia sistemica contraindicada

  ============================================================================
  ESCALA ECOG:
  ============================================================================
  - 0: Totalmente ativo, sem restricoes
  - 1: Restrito a atividades fisicas extenuantes
  - 2: Ambulatorial, autocuidado, incapaz de trabalhar (>50% acordado)
  - 3: Autocuidado limitado, confinado cama/cadeira >50% do dia
  - 4: Completamente dependente, confinado cama/cadeira

  ============================================================================
  DOCUMENTACAO OBRIGATORIA:
  ============================================================================
  - Avaliacao de ECOG datada pelo oncologista
  - Justificativa se ECOG diferir de registros anteriores
  - Comorbidades que afetam funcionalidade

  ============================================================================
  REFERENCIAS NORMATIVAS:
  ============================================================================
  - ECOG-ACRIN Performance Status Scale
  - NCCN All Tumor Guidelines - PS Requirements
  - Karnofsky Performance Status correlation
-->
<definitions xmlns="https://www.omg.org/spec/DMN/20191111/MODEL/" xmlns:dmndi="https://www.omg.org/spec/DMN/20191111/DMNDI/" xmlns:dc="http://www.omg.org/spec/DMN/20180521/DC/" xmlns:modeler="http://camunda.org/schema/modeler/1.0" id="Definitions_ONQ_LINE_010" name="DRD" namespace="http://camunda.org/schema/1.0/dmn" exporter="Camunda Modeler" exporterVersion="5.14.0" modeler:executionPlatform="Camunda Cloud" modeler:executionPlatformVersion="8.2.0">
  <decision id="Decision_ONQ_LINE_010" name="ONQ-LINE-010: Performance Status Gating (ECOG) [LEAN TIER-2]">
    <decisionTable id="DecisionTable_ONQ_LINE_010" hitPolicy="FIRST">
      <input id="Input_ecog_ps" label="ECOG Performance Status">
        <inputExpression id="InputExpression_ecog_ps" typeRef="number">
          <text>ecogPS</text>
        </inputExpression>
      </input>
      <input id="Input_treatment_intensity" label="Treatment Intensity Requested">
        <inputExpression id="InputExpression_treatment_intensity" typeRef="string">
          <text>treatmentIntensity</text>
        </inputExpression>
      </input>
      <input id="Input_tumor_type" label="Tumor Type">
        <inputExpression id="InputExpression_tumor_type" typeRef="string">
          <text>tumorType</text>
        </inputExpression>
      </input>
      <input id="Input_comorbidities" label="Significant Comorbidities">
        <inputExpression id="InputExpression_comorbidities" typeRef="boolean">
          <text>significantComorbidities</text>
        </inputExpression>
      </input>
      <input id="Input_ultimoProcedimentoDias" label="Dias Desde Ultimo Procedimento">
        <inputExpression id="InputExpression_ultimoProcedimentoDias" typeRef="number">
          <text>ultimoProcedimentoDias</text>
        </inputExpression>
      </input>
      <output id="Output_resultado" label="Resultado" name="resultado" typeRef="string">
        <outputValues id="UnaryTests_resultado">
          <text>"Aprovado","Reprovado","Pendente"</text>
        </outputValues>
      </output>
      <output id="Output_observacao" label="Observacao" name="observacao" typeRef="string" />
      <output id="Output_fundamentacao" label="Fundamentacao" name="fundamentacao" typeRef="string" />
      <!-- Output 4: Alertas de Desperdicio - Anti-Waste Intelligence -->
      <output id="Output_alertasDesperdicio" label="Alertas de Desperdicio" name="alertasDesperdicio" typeRef="string">
        <outputValues id="OutputValues_alertasDesperdicio">
          <text>"NENHUM","DUP","FREQ","ESC","DOC","PROT","MULTI"</text>
        </outputValues>
      </output>
      <!-- Output 5: Acao Recomendada -->
      <output id="Output_acaoRecomendada" label="Acao Recomendada" name="acaoRecomendada" typeRef="string">
        <outputValues id="OutputValues_acaoRecomendada">
          <text>"APROVAR","NEGAR","SOLICITAR_INFO","AGUARDAR_PRAZO","SUGERIR_ALTERNATIVA"</text>
        </outputValues>
      </output>
      <rule id="DecisionRule_reject_ecog4_systemic">
        <description>Reject systemic therapy for ECOG 4</description>
        <inputEntry id="InputEntry_ecog_ps_reject4">
          <text>4</text>
        </inputEntry>
        <inputEntry id="InputEntry_treatment_intensity_reject4">
          <text>"intensive","standard","reduced"</text>
        </inputEntry>
        <inputEntry id="InputEntry_tumor_type_reject4">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_comorbidities_reject4">
          <text>-</text>
        </inputEntry>
        <inputEntry id="IE_DecisionRule_reject_ecog4_systemic_ultimo"><text>-</text></inputEntry>
        <outputEntry id="OutputEntry_resultado_reject4">
          <text>"Reprovado"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_observacao_reject4">
          <text>"ECOG 4: terapia sistemica contraindicada. Indicado cuidados paliativos exclusivos"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_fundamentacao_reject4">
          <text>"ECOG 4 associado a sobrevida mediana &lt;1 mes; QT acelera obito per multiplos estudos retrospectivos"</text>
        </outputEntry>
        <outputEntry id="OE_DecisionRule_reject_ecog4_systemic_alertasDesperdicio">
          <text>"PROT"</text>
        </outputEntry>
        <outputEntry id="OE_DecisionRule_reject_ecog4_systemic_acaoRecomendada">
          <text>"NEGAR"</text>
        </outputEntry>
      </rule>
      <rule id="DecisionRule_reject_ecog3_intensive">
        <description>Reject intensive therapy for ECOG 3</description>
        <inputEntry id="InputEntry_ecog_ps_reject3">
          <text>3</text>
        </inputEntry>
        <inputEntry id="InputEntry_treatment_intensity_reject3">
          <text>"intensive"</text>
        </inputEntry>
        <inputEntry id="InputEntry_tumor_type_reject3">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_comorbidities_reject3">
          <text>-</text>
        </inputEntry>
        <inputEntry id="IE_DecisionRule_reject_ecog3_intensive_ultimo"><text>-</text></inputEntry>
        <outputEntry id="OutputEntry_resultado_reject3">
          <text>"Reprovado"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_observacao_reject3">
          <text>"ECOG 3: terapia intensiva contraindicada. Considerar dose reduzida ou paliacao"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_fundamentacao_reject3">
          <text>"ECOG 3 tem TRM &gt;30% com QT intensiva; beneficio de sobrevida improvavel per meta-analises"</text>
        </outputEntry>
        <outputEntry id="OE_DecisionRule_reject_ecog3_intensive_alertasDesperdicio">
          <text>"PROT"</text>
        </outputEntry>
        <outputEntry id="OE_DecisionRule_reject_ecog3_intensive_acaoRecomendada">
          <text>"NEGAR"</text>
        </outputEntry>
      </rule>

      <!-- WASTE DETECTION: ESC -->
      <rule id="Rule_40501316_ESC">
        <description>ESC - Tratamento intensivo sem avaliacao ECOG documentada</description>
        <inputEntry id="IE_ESC_40501316_1"><text>-</text></inputEntry>
        <inputEntry id="IE_ESC_40501316_2"><text>-</text></inputEntry>
        <inputEntry id="IE_ESC_40501316_3"><text>-</text></inputEntry>
        <inputEntry id="IE_ESC_40501316_4"><text>-</text></inputEntry>
        <inputEntry id="IE_ESC_40501316_ultimo"><text>-</text></inputEntry>
        <outputEntry id="OE_ESC_40501316_resultado"><text>"Pendente"</text></outputEntry>
        <outputEntry id="OE_ESC_40501316_observacao"><text>"Tratamento intensivo sem avaliacao ECOG documentada"</text></outputEntry>
        <outputEntry id="OE_ESC_40501316_fundamentacao"><text>"NCCN 2024: ECOG obrigatorio antes de tratamento sistemico. ECOG 3-4 contraindica QT intensiva"</text></outputEntry>
        <outputEntry id="OE_ESC_40501316_alertasDesperdicio"><text>"ESC"</text></outputEntry>
        <outputEntry id="OE_ESC_40501316_acaoRecomendada"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>

      <rule id="DecisionRule_approve_ecog01_intensive">
        <description>Approve intensive therapy for ECOG 0-1</description>
        <inputEntry id="InputEntry_ecog_ps_approve">
          <text>[0..1]</text>
        </inputEntry>
        <inputEntry id="InputEntry_treatment_intensity_approve">
          <text>"intensive","standard"</text>
        </inputEntry>
        <inputEntry id="InputEntry_tumor_type_approve">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_comorbidities_approve">
          <text>false</text>
        </inputEntry>
        <inputEntry id="IE_DecisionRule_approve_ecog01_intensive_ultimo"><text>-</text></inputEntry>
        <outputEntry id="OutputEntry_resultado_approve">
          <text>"Aprovado"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_observacao_approve">
          <text>"ECOG 0-1 sem comorbidades: elegivel para terapia intensiva padrao"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_fundamentacao_approve">
          <text>"ECOG 0-1 e criterio de inclusao universal em ensaios fase III; maior beneficio terapeutico"</text>
        </outputEntry>
        <outputEntry id="OE_DecisionRule_approve_ecog01_intensive_alertasDesperdicio">
          <text>"NENHUM"</text>
        </outputEntry>
        <outputEntry id="OE_DecisionRule_approve_ecog01_intensive_acaoRecomendada">
          <text>"APROVAR"</text>
        </outputEntry>
      </rule>
      <rule id="DecisionRule_approve_ecog2_reduced">
        <description>Approve reduced-intensity for ECOG 2</description>
        <inputEntry id="InputEntry_ecog_ps_ecog2">
          <text>2</text>
        </inputEntry>
        <inputEntry id="InputEntry_treatment_intensity_ecog2">
          <text>"reduced","targeted"</text>
        </inputEntry>
        <inputEntry id="InputEntry_tumor_type_ecog2">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_comorbidities_ecog2">
          <text>-</text>
        </inputEntry>
        <inputEntry id="IE_DecisionRule_approve_ecog2_reduced_ultimo"><text>-</text></inputEntry>
        <outputEntry id="OutputEntry_resultado_ecog2">
          <text>"Aprovado"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_observacao_ecog2">
          <text>"ECOG 2: terapia de intensidade reduzida ou alvo molecular aprovada"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_fundamentacao_ecog2">
          <text>"ECOG 2 tolera monoterapia ou TKIs; evitar combinacoes intensivas per NCCN senior guidelines"</text>
        </outputEntry>
        <outputEntry id="OE_DecisionRule_approve_ecog2_reduced_alertasDesperdicio">
          <text>"NENHUM"</text>
        </outputEntry>
        <outputEntry id="OE_DecisionRule_approve_ecog2_reduced_acaoRecomendada">
          <text>"APROVAR"</text>
        </outputEntry>
      </rule>
      <rule id="DecisionRule_approve_ecog3_sensitive">
        <description>Approve minimal therapy for ECOG 3 in sensitive tumors</description>
        <inputEntry id="InputEntry_ecog_ps_ecog3">
          <text>3</text>
        </inputEntry>
        <inputEntry id="InputEntry_treatment_intensity_ecog3">
          <text>"minimal","targeted","palliative"</text>
        </inputEntry>
        <inputEntry id="InputEntry_tumor_type_ecog3">
          <text>"germ_cell","lymphoma","leukemia"</text>
        </inputEntry>
        <inputEntry id="InputEntry_comorbidities_ecog3">
          <text>-</text>
        </inputEntry>
        <inputEntry id="IE_DecisionRule_approve_ecog3_sensitive_ultimo"><text>-</text></inputEntry>
        <outputEntry id="OutputEntry_resultado_ecog3">
          <text>"Pendente"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_observacao_ecog3">
          <text>"ECOG 3 em tumor altamente sensivel: avaliacao individualizada pelo oncologista"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_fundamentacao_ecog3">
          <text>"Tumores curativos (germ cell, linfoma) podem justificar terapia mesmo com PS ruim; risco/beneficio"</text>
        </outputEntry>
        <outputEntry id="OE_DecisionRule_approve_ecog3_sensitive_alertasDesperdicio">
          <text>"NENHUM"</text>
        </outputEntry>
        <outputEntry id="OE_DecisionRule_approve_ecog3_sensitive_acaoRecomendada">
          <text>"SOLICITAR_INFO"</text>
        </outputEntry>
      </rule>
      <rule id="DecisionRule_pending_comorbid">
        <description>Pending if significant comorbidities present</description>
        <inputEntry id="InputEntry_ecog_ps_comorbid">
          <text>[0..2]</text>
        </inputEntry>
        <inputEntry id="InputEntry_treatment_intensity_comorbid">
          <text>"intensive"</text>
        </inputEntry>
        <inputEntry id="InputEntry_tumor_type_comorbid">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_comorbidities_comorbid">
          <text>true</text>
        </inputEntry>
        <inputEntry id="IE_DecisionRule_pending_comorbid_ultimo"><text>-</text></inputEntry>
        <outputEntry id="OutputEntry_resultado_comorbid">
          <text>"Pendente"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_observacao_comorbid">
          <text>"Comorbidades significativas: avaliar se terapia intensiva e segura (CCI, funcao cardiaca/renal)"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_fundamentacao_comorbid">
          <text>"Charlson Comorbidity Index &gt;2 aumenta toxicidade; considerar reducao de dose ou agente alternativo"</text>
        </outputEntry>
        <outputEntry id="OE_DecisionRule_pending_comorbid_alertasDesperdicio">
          <text>"NENHUM"</text>
        </outputEntry>
        <outputEntry id="OE_DecisionRule_pending_comorbid_acaoRecomendada">
          <text>"SOLICITAR_INFO"</text>
        </outputEntry>
      </rule>
      <rule id="DecisionRule_pending_ecog2_intensive">
        <description>Pending review for ECOG 2 requesting intensive therapy</description>
        <inputEntry id="InputEntry_ecog_ps_ecog2int">
          <text>2</text>
        </inputEntry>
        <inputEntry id="InputEntry_treatment_intensity_ecog2int">
          <text>"intensive","standard"</text>
        </inputEntry>
        <inputEntry id="InputEntry_tumor_type_ecog2int">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_comorbidities_ecog2int">
          <text>-</text>
        </inputEntry>
        <inputEntry id="IE_DecisionRule_pending_ecog2_intensive_ultimo"><text>-</text></inputEntry>
        <outputEntry id="OutputEntry_resultado_ecog2int">
          <text>"Pendente"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_observacao_ecog2int">
          <text>"ECOG 2 + terapia intensiva: requer justificativa clinica e discussao de risco/beneficio"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_fundamentacao_ecog2int">
          <text>"ECOG 2 excluido de muitos ensaios fase III; dados de eficacia extrapolados podem nao aplicar"</text>
        </outputEntry>
        <outputEntry id="OE_DecisionRule_pending_ecog2_intensive_alertasDesperdicio">
          <text>"NENHUM"</text>
        </outputEntry>
        <outputEntry id="OE_DecisionRule_pending_ecog2_intensive_acaoRecomendada">
          <text>"SOLICITAR_INFO"</text>
        </outputEntry>
      </rule>
      <rule id="DecisionRule_fallback">
        <description>Fallback rule for incomplete data</description>
        <inputEntry id="InputEntry_ecog_ps_fallback">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_treatment_intensity_fallback">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_tumor_type_fallback">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_comorbidities_fallback">
          <text>-</text>
        </inputEntry>
        <inputEntry id="IE_DecisionRule_fallback_ultimo"><text>-</text></inputEntry>
        <outputEntry id="OutputEntry_resultado_fallback">
          <text>"Pendente"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_observacao_fallback">
          <text>"Dados insuficientes para avaliacao de elegibilidade por performance status"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_fundamentacao_fallback">
          <text>"Necessario: ECOG atual, intensidade proposta, comorbidades relevantes"</text>
        </outputEntry>
        <outputEntry id="OE_DecisionRule_fallback_alertasDesperdicio">
          <text>"DOC"</text>
        </outputEntry>
        <outputEntry id="OE_DecisionRule_fallback_acaoRecomendada">
          <text>"SOLICITAR_INFO"</text>
        </outputEntry>
      </rule>
    </decisionTable>
  </decision>
  <dmndi:DMNDI>
    <dmndi:DMNDiagram>
      <dmndi:DMNShape dmnElementRef="Decision_ONQ_LINE_010">
        <dc:Bounds height="80" width="180" x="160" y="100" />
      </dmndi:DMNShape>
    </dmndi:DMNDiagram>
  </dmndi:DMNDI>
</definitions>
