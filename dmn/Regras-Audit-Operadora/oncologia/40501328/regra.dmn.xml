<?xml version="1.0" encoding="UTF-8"?>
<!--
  ONQ-DRUG-003: Rituximab Maintenance
  TUSS: 40501328
  Versao: 3.1.0-LEAN-TIER2 (2026-02-08)
  Especialidade: Oncologia/Hematologia

  ============================================================================
  INDICACOES CLINICAS:
  ============================================================================
  - Linfoma Folicular: Manutencao 2 anos apos resposta a inducao (PRIMA)
  - LLC: Manutencao apos resposta (CLL11 obinutuzumabe preferido)
  - LNH indolente: Manutencao em respondedores

  ============================================================================
  DURACAO E POSOLOGIA:
  ============================================================================
  - LF: 375 mg/m2 a cada 8 semanas por 2 anos (12 doses total)
  - Nao exceder 2 anos (sem beneficio adicional demonstrado)

  ============================================================================
  CONTRAINDICACOES:
  ============================================================================
  - LDGCB: Manutencao NAO indicada (sem beneficio)
  - Infeccao ativa
  - Hepatite B ativa (reativar; profilaxia se HBcAb+)

  ============================================================================
  REFERENCIAS NORMATIVAS:
  ============================================================================
  - PRIMA Trial (Lancet 2011, JCO 2020 update)
  - NCCN Follicular Lymphoma Guidelines 2024
  - ESMO Follicular Lymphoma Guidelines
-->
<definitions xmlns="https://www.omg.org/spec/DMN/20191111/MODEL/" xmlns:dmndi="https://www.omg.org/spec/DMN/20191111/DMNDI/" xmlns:dc="http://www.omg.org/spec/DMN/20180521/DC/" xmlns:modeler="http://camunda.org/schema/modeler/1.0" id="Definitions_ONQ_DRUG_003" name="DRD" namespace="http://camunda.org/schema/1.0/dmn" exporter="Camunda Modeler" exporterVersion="5.14.0" modeler:executionPlatform="Camunda Cloud" modeler:executionPlatformVersion="8.2.0">
  <decision id="Decision_ONQ_DRUG_003" name="ONQ-DRUG-003: Rituximab Maintenance [LEAN TIER-2]">
    <decisionTable id="DecisionTable_ONQ_DRUG_003" hitPolicy="FIRST">
      <input id="Input_lymphoma_type" label="Lymphoma Type">
        <inputExpression id="InputExpression_lymphoma_type" typeRef="string">
          <text>lymphomaType</text>
        </inputExpression>
      </input>
      <input id="Input_induction_response" label="Induction Response">
        <inputExpression id="InputExpression_induction_response" typeRef="string">
          <text>inductionResponse</text>
        </inputExpression>
      </input>
      <input id="Input_months_on_maintenance" label="Months on Maintenance">
        <inputExpression id="InputExpression_months_on_maintenance" typeRef="number">
          <text>monthsOnMaintenance</text>
        </inputExpression>
      </input>
      <input id="Input_hep_b_status" label="Hepatitis B Status">
        <inputExpression id="InputExpression_hep_b_status" typeRef="string">
          <text>hepatitisBStatus</text>
        </inputExpression>
      </input>
      <!-- Input: Dias desde ultimo procedimento (DUP detection) -->
      <input id="Input_ultimoProcedimentoDias" label="Dias Desde Ultimo Procedimento">
        <inputExpression id="InputExpression_ultimoProcedimentoDias" typeRef="number">
          <text>ultimoProcedimentoDias</text>
        </inputExpression>
      </input>

      <output id="Output_resultado" label="Resultado" name="resultado" typeRef="string">
        <outputValues id="UnaryTests_resultado">
          <text>"Aprovado","Reprovado","Pendente"</text>
        </outputValues>
      </output>
      <output id="Output_observacao" label="Observacao" name="observacao" typeRef="string" />
      <output id="Output_fundamentacao" label="Fundamentacao" name="fundamentacao" typeRef="string" />
      <!-- Output 4: Alertas de Desperdicio - Anti-Waste Intelligence -->
      <output id="Output_alertasDesperdicio" label="Alertas de Desperdicio" name="alertasDesperdicio" typeRef="string">
        <outputValues id="OutputValues_alertasDesperdicio">
          <text>"NENHUM","DUP","FREQ","ESC","DOC","PROT","MULTI"</text>
        </outputValues>
      </output>
      <!-- Output 5: Acao Recomendada -->
      <output id="Output_acaoRecomendada" label="Acao Recomendada" name="acaoRecomendada" typeRef="string">
        <outputValues id="OutputValues_acaoRecomendada">
          <text>"APROVAR","NEGAR","SOLICITAR_INFO","AGUARDAR_PRAZO","SUGERIR_ALTERNATIVA"</text>
        </outputValues>
      </output>
      <rule id="DecisionRule_reject_dlbcl">
        <description>Reject maintenance for DLBCL</description>
        <inputEntry id="InputEntry_lymphoma_type_dlbcl">
          <text>"DLBCL","diffuse_large_B_cell"</text>
        </inputEntry>
        <inputEntry id="InputEntry_induction_response_dlbcl">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_months_on_maintenance_dlbcl">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_hep_b_status_dlbcl">
          <text>-</text>
        </inputEntry>
        <inputEntry id="IE_DecisionRule_reject_dlbcl_ultimo"><text>-</text></inputEntry>
        <outputEntry id="OutputEntry_resultado_dlbcl">
          <text>"Reprovado"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_observacao_dlbcl">
          <text>"Manutencao com rituximabe NAO indicada para LDGCB: sem beneficio de sobrevida"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_fundamentacao_dlbcl">
          <text>"ECOG 1411, LNH02-3B: manutencao nao melhora PFS ou OS em LDGCB apos R-CHOP"</text>
        </outputEntry>
        <outputEntry id="OE_DecisionRule_reject_dlbcl_alertasDesperdicio">
          <text>"FREQ"</text>
        </outputEntry>
        <outputEntry id="OE_DecisionRule_reject_dlbcl_acaoRecomendada">
          <text>"NEGAR"</text>
        </outputEntry>
      </rule>
      <rule id="DecisionRule_reject_hepb_active">
        <description>Reject if active Hepatitis B</description>
        <inputEntry id="InputEntry_lymphoma_type_hepb">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_induction_response_hepb">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_months_on_maintenance_hepb">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_hep_b_status_hepb">
          <text>"HBsAg_positive","active_infection"</text>
        </inputEntry>
        <inputEntry id="IE_DecisionRule_reject_hepb_active_ultimo"><text>-</text></inputEntry>
        <outputEntry id="OutputEntry_resultado_hepb">
          <text>"Reprovado"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_observacao_hepb">
          <text>"Hepatite B ativa: rituximabe pode reativar. Tratar HBV antes de retomar"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_fundamentacao_hepb">
          <text>"Reativacao HBV fatal relatada; HBsAg+ requer antiviral profilatico durante e 12 meses apos"</text>
        </outputEntry>
        <outputEntry id="OE_DecisionRule_reject_hepb_active_alertasDesperdicio">
          <text>"PROT"</text>
        </outputEntry>
        <outputEntry id="OE_DecisionRule_reject_hepb_active_acaoRecomendada">
          <text>"NEGAR"</text>
        </outputEntry>
      </rule>
      <rule id="DecisionRule_reject_over_24mo">
        <description>Reject maintenance beyond 24 months</description>
        <inputEntry id="InputEntry_lymphoma_type_24">
          <text>"follicular","indolent_NHL"</text>
        </inputEntry>
        <inputEntry id="InputEntry_induction_response_24">
          <text>"CR","PR"</text>
        </inputEntry>
        <inputEntry id="InputEntry_months_on_maintenance_24">
          <text>&gt; 24</text>
        </inputEntry>
        <inputEntry id="InputEntry_hep_b_status_24">
          <text>-</text>
        </inputEntry>
        <inputEntry id="IE_DecisionRule_reject_over_24mo_ultimo"><text>-</text></inputEntry>
        <outputEntry id="OutputEntry_resultado_24">
          <text>"Reprovado"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_observacao_24">
          <text>"Manutencao rituximabe: 2 anos completos. Extensao nao indicada"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_fundamentacao_24">
          <text>"PRIMA: beneficio demonstrado ate 2 anos; sem dados de extensao alem deste periodo"</text>
        </outputEntry>
        <outputEntry id="OE_DecisionRule_reject_over_24mo_alertasDesperdicio">
          <text>"FREQ"</text>
        </outputEntry>
        <outputEntry id="OE_DecisionRule_reject_over_24mo_acaoRecomendada">
          <text>"NEGAR"</text>
        </outputEntry>
      </rule>

      <!-- WASTE DETECTION: DUP -->
      <rule id="Rule_40501328_DUP">
        <description>DUP - Rituximab dose repetida em menos de 14 dias</description>
        <inputEntry id="IE_DUP_40501328_1"><text>-</text></inputEntry>
        <inputEntry id="IE_DUP_40501328_2"><text>-</text></inputEntry>
        <inputEntry id="IE_DUP_40501328_3"><text>-</text></inputEntry>
        <inputEntry id="IE_DUP_40501328_4"><text>-</text></inputEntry>
        <inputEntry id="IE_DUP_40501328_ultimo"><text>&lt; 14</text></inputEntry>
        <outputEntry id="OE_DUP_40501328_resultado"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OE_DUP_40501328_observacao"><text>"Rituximab dose repetida em menos de 14 dias"</text></outputEntry>
        <outputEntry id="OE_DUP_40501328_fundamentacao"><text>"Bula rituximab: Infusao semanal (inducao) ou a cada 2-3 meses (manutencao)"</text></outputEntry>
        <outputEntry id="OE_DUP_40501328_alertasDesperdicio"><text>"DUP"</text></outputEntry>
        <outputEntry id="OE_DUP_40501328_acaoRecomendada"><text>"AGUARDAR_PRAZO"</text></outputEntry>
      </rule>

      <rule id="DecisionRule_approve_follicular">
        <description>Approve maintenance for follicular lymphoma responding</description>
        <inputEntry id="InputEntry_lymphoma_type_fl">
          <text>"follicular","FL"</text>
        </inputEntry>
        <inputEntry id="InputEntry_induction_response_fl">
          <text>"CR","PR"</text>
        </inputEntry>
        <inputEntry id="InputEntry_months_on_maintenance_fl">
          <text>&lt;= 24</text>
        </inputEntry>
        <inputEntry id="InputEntry_hep_b_status_fl">
          <text>"negative","HBcAb_only_with_prophylaxis"</text>
        </inputEntry>
        <inputEntry id="IE_DecisionRule_approve_follicular_ultimo"><text>-</text></inputEntry>
        <outputEntry id="OutputEntry_resultado_fl">
          <text>"Aprovado"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_observacao_fl">
          <text>"Rituximabe manutencao aprovado: 375mg/m2 cada 8 semanas por ate 2 anos"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_fundamentacao_fl">
          <text>"PRIMA: PFS 74.9% vs 57.6% aos 3 anos; beneficio OS em analise de longo prazo"</text>
        </outputEntry>
        <outputEntry id="OE_DecisionRule_approve_follicular_alertasDesperdicio">
          <text>"NENHUM"</text>
        </outputEntry>
        <outputEntry id="OE_DecisionRule_approve_follicular_acaoRecomendada">
          <text>"APROVAR"</text>
        </outputEntry>
      </rule>
      <rule id="DecisionRule_approve_cll">
        <description>Approve maintenance for CLL</description>
        <inputEntry id="InputEntry_lymphoma_type_cll">
          <text>"CLL","chronic_lymphocytic_leukemia"</text>
        </inputEntry>
        <inputEntry id="InputEntry_induction_response_cll">
          <text>"CR","PR"</text>
        </inputEntry>
        <inputEntry id="InputEntry_months_on_maintenance_cll">
          <text>&lt;= 24</text>
        </inputEntry>
        <inputEntry id="InputEntry_hep_b_status_cll">
          <text>"negative","HBcAb_only_with_prophylaxis"</text>
        </inputEntry>
        <inputEntry id="IE_DecisionRule_approve_cll_ultimo"><text>-</text></inputEntry>
        <outputEntry id="OutputEntry_resultado_cll">
          <text>"Pendente"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_observacao_cll">
          <text>"LLC: preferir obinutuzumabe ou venetoclax-based. Rituximabe manutencao menos comum"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_fundamentacao_cll">
          <text>"CLL14: venetoclax+obi x 12 meses superior; manutencao rituximabe e alternativa historica"</text>
        </outputEntry>
        <outputEntry id="OE_DecisionRule_approve_cll_alertasDesperdicio">
          <text>"NENHUM"</text>
        </outputEntry>
        <outputEntry id="OE_DecisionRule_approve_cll_acaoRecomendada">
          <text>"SOLICITAR_INFO"</text>
        </outputEntry>
      </rule>
      <rule id="DecisionRule_pending_pd">
        <description>Pending if progressive disease</description>
        <inputEntry id="InputEntry_lymphoma_type_pd">
          <text>"follicular","indolent_NHL"</text>
        </inputEntry>
        <inputEntry id="InputEntry_induction_response_pd">
          <text>"SD","PD"</text>
        </inputEntry>
        <inputEntry id="InputEntry_months_on_maintenance_pd">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_hep_b_status_pd">
          <text>-</text>
        </inputEntry>
        <inputEntry id="IE_DecisionRule_pending_pd_ultimo"><text>-</text></inputEntry>
        <outputEntry id="OutputEntry_resultado_pd">
          <text>"Pendente"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_observacao_pd">
          <text>"Resposta subotima a inducao: manutencao pode nao beneficiar. Avaliar alternativas"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_fundamentacao_pd">
          <text>"PRIMA: beneficio maior em CR/PR; SD e PD nao foram incluidos no estudo"</text>
        </outputEntry>
        <outputEntry id="OE_DecisionRule_pending_pd_alertasDesperdicio">
          <text>"NENHUM"</text>
        </outputEntry>
        <outputEntry id="OE_DecisionRule_pending_pd_acaoRecomendada">
          <text>"SOLICITAR_INFO"</text>
        </outputEntry>
      </rule>
      <rule id="DecisionRule_fallback">
        <description>Fallback rule for incomplete data</description>
        <inputEntry id="InputEntry_lymphoma_type_fallback">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_induction_response_fallback">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_months_on_maintenance_fallback">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_hep_b_status_fallback">
          <text>-</text>
        </inputEntry>
        <inputEntry id="IE_DecisionRule_fallback_ultimo"><text>-</text></inputEntry>
        <outputEntry id="OutputEntry_resultado_fallback">
          <text>"Pendente"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_observacao_fallback">
          <text>"Dados insuficientes para avaliacao de manutencao com rituximabe"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_fundamentacao_fallback">
          <text>"Necessario: tipo de linfoma, resposta a inducao, duracao, status HBV"</text>
        </outputEntry>
        <outputEntry id="OE_DecisionRule_fallback_alertasDesperdicio">
          <text>"NENHUM"</text>
        </outputEntry>
        <outputEntry id="OE_DecisionRule_fallback_acaoRecomendada">
          <text>"SOLICITAR_INFO"</text>
        </outputEntry>
      </rule>
    </decisionTable>
  </decision>
  <dmndi:DMNDI>
    <dmndi:DMNDiagram>
      <dmndi:DMNShape dmnElementRef="Decision_ONQ_DRUG_003">
        <dc:Bounds height="80" width="180" x="160" y="100" />
      </dmndi:DMNShape>
    </dmndi:DMNDiagram>
  </dmndi:DMNDI>
</definitions>
