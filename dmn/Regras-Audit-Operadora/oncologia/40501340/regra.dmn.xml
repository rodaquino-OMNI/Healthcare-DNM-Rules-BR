<?xml version="1.0" encoding="UTF-8"?>
<!--
  ONQ-DRUG-015: Lenalidomide Maintenance
  TUSS: 40501340
  Versao: 3.1.0-LEAN-TIER2 (2026-02-08)
  Especialidade: Oncologia

  ============================================================================
  INDICACOES CLINICAS:
  ============================================================================
  - MM pos-TMO: manutencao ate progressao (CALGB 100104, IFM 2005-02)
  - MM inelegivel TMO: manutencao apos VMP ou Rd
  - Linfoma folicular: manutencao apos R2 (AUGMENT)
  - LCM: manutencao apos R-CHOP (LyMa)

  ============================================================================
  REFERENCIAS NORMATIVAS:
  ============================================================================
  - CALGB 100104, IFM 2005-02, Myeloma XI (MM maintenance)
  - AUGMENT (FL)
  - LyMa (MCL)
  - NCCN Multiple Myeloma 2024, NCCN FL 2024, NCCN MCL 2024
-->
<definitions xmlns="https://www.omg.org/spec/DMN/20191111/MODEL/" xmlns:dmndi="https://www.omg.org/spec/DMN/20191111/DMNDI/" xmlns:dc="http://www.omg.org/spec/DMN/20180521/DC/" xmlns:modeler="http://camunda.org/schema/modeler/1.0" id="Definitions_ONQ_DRUG_015" name="DRD" namespace="http://camunda.org/schema/1.0/dmn" exporter="Camunda Modeler" exporterVersion="5.14.0" modeler:executionPlatform="Camunda Cloud" modeler:executionPlatformVersion="8.2.0">
  <decision id="Decision_ONQ_DRUG_015" name="ONQ-DRUG-015: Lenalidomide Maintenance [LEAN TIER-2]">
    <decisionTable id="DecisionTable_ONQ_DRUG_015" hitPolicy="FIRST">
      <input id="Input_disease" label="Disease">
        <inputExpression id="InputExpression_disease" typeRef="string">
          <text>disease</text>
        </inputExpression>
      </input>
      <input id="Input_prior_treatment" label="Prior Treatment">
        <inputExpression id="InputExpression_prior_treatment" typeRef="string">
          <text>priorTreatment</text>
        </inputExpression>
      </input>
      <input id="Input_response" label="Response to Prior Treatment">
        <inputExpression id="InputExpression_response" typeRef="string">
          <text>responseToPrior</text>
        </inputExpression>
      </input>
      <input id="Input_cytogenetic_risk" label="Cytogenetic Risk">
        <inputExpression id="InputExpression_cytogenetic_risk" typeRef="string">
          <text>cytogeneticRisk</text>
        </inputExpression>
      </input>
      <!-- Input: Dias desde ultimo procedimento (DUP detection) -->
      <input id="Input_ultimoProcedimentoDias" label="Dias Desde Ultimo Procedimento">
        <inputExpression id="InputExpression_ultimoProcedimentoDias" typeRef="number">
          <text>ultimoProcedimentoDias</text>
        </inputExpression>
      </input>

      <output id="Output_resultado" label="Resultado" name="resultado" typeRef="string">
        <outputValues id="UnaryTests_resultado">
          <text>"Aprovado","Reprovado","Pendente"</text>
        </outputValues>
      </output>
      <output id="Output_observacao" label="Observacao" name="observacao" typeRef="string" />
      <output id="Output_fundamentacao" label="Fundamentacao" name="fundamentacao" typeRef="string" />
      <output id="Output_alertasDesperdicio" label="Alertas de Desperdicio" name="alertasDesperdicio" typeRef="string">
        <outputValues id="OutputValues_alertasDesperdicio">
          <text>"NENHUM","DUP","FREQ","ESC","DOC","PROT","MULTI"</text>
        </outputValues>
      </output>
      <output id="Output_acaoRecomendada" label="Acao Recomendada" name="acaoRecomendada" typeRef="string">
        <outputValues id="OutputValues_acaoRecomendada">
          <text>"APROVAR","NEGAR","SOLICITAR_INFO","AGUARDAR_PRAZO","SUGERIR_ALTERNATIVA"</text>
        </outputValues>
      </output>
      <rule id="DecisionRule_reject_pd">
        <description>Reject if progressive disease</description>
        <inputEntry id="InputEntry_disease_pd">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_prior_treatment_pd">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_response_pd">
          <text>"PD","progressive_disease"</text>
        </inputEntry>
        <inputEntry id="InputEntry_cytogenetic_risk_pd">
          <text>-</text>
        </inputEntry>
        <inputEntry id="IE_DecisionRule_reject_pd_ultimo"><text>-</text></inputEntry>
        <outputEntry id="OutputEntry_resultado_pd">
          <text>"Reprovado"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_observacao_pd">
          <text>"Progressao: manutencao com lenalidomida nao indicada. Trocar linha de tratamento"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_fundamentacao_pd">
          <text>"Manutencao requer resposta previa (CR/VGPR/PR); PD requer mudanca de estrategia"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_alertasDesperdicio_pd">
          <text>"PROT"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_acaoRecomendada_pd">
          <text>"NEGAR"</text>
        </outputEntry>
      </rule>
      <rule id="DecisionRule_reject_non_approved">
        <description>Reject non-approved diseases</description>
        <inputEntry id="InputEntry_disease_non">
          <text>not("multiple_myeloma","MM","myeloma","follicular_lymphoma","FL","MCL","mantle_cell_lymphoma")</text>
        </inputEntry>
        <inputEntry id="InputEntry_prior_treatment_non">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_response_non">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_cytogenetic_risk_non">
          <text>-</text>
        </inputEntry>
        <inputEntry id="IE_DecisionRule_reject_non_approved_ultimo"><text>-</text></inputEntry>
        <outputEntry id="OutputEntry_resultado_non">
          <text>"Reprovado"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_observacao_non">
          <text>"Lenalidomida manutencao: apenas MM, LF ou LCM"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_fundamentacao_non">
          <text>"Indicacoes aprovadas: CALGB (MM), AUGMENT (FL), LyMa (MCL)"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_alertasDesperdicio_non">
          <text>"PROT"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_acaoRecomendada_non">
          <text>"NEGAR"</text>
        </outputEntry>
      </rule>

      <!-- WASTE DETECTION: FREQ -->
      <rule id="Rule_40501340_FREQ">
        <description>FREQ - Lenalidomide manutencao: reavaliar necessidade a cada 12 meses</description>
        <inputEntry id="IE_FREQ_40501340_1"><text>-</text></inputEntry>
        <inputEntry id="IE_FREQ_40501340_2"><text>-</text></inputEntry>
        <inputEntry id="IE_FREQ_40501340_3"><text>-</text></inputEntry>
        <inputEntry id="IE_FREQ_40501340_4"><text>-</text></inputEntry>
        <inputEntry id="IE_FREQ_40501340_ultimo"><text>-</text></inputEntry>
        <outputEntry id="OE_FREQ_40501340_resultado"><text>"Pendente"</text></outputEntry>
        <outputEntry id="OE_FREQ_40501340_observacao"><text>"Lenalidomide manutencao: reavaliar necessidade a cada 12 meses"</text></outputEntry>
        <outputEntry id="OE_FREQ_40501340_fundamentacao"><text>"NCCN Myeloma 2024: Lenalidomide manutencao ate progressao, reavaliar anualmente"</text></outputEntry>
        <outputEntry id="OE_FREQ_40501340_alertasDesperdicio"><text>"FREQ"</text></outputEntry>
        <outputEntry id="OE_FREQ_40501340_acaoRecomendada"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>

      <!-- WASTE DETECTION: FREQ -->
      <rule id="Rule_40501340_FREQ">
        <description>FREQ - Verificar frequencia dispensacao medicamento oral oncologico. Ciclo 28 dias padr</description>
        <inputEntry id="IE_FREQ_40501340_1"><text>-</text></inputEntry>
        <inputEntry id="IE_FREQ_40501340_2"><text>-</text></inputEntry>
        <inputEntry id="IE_FREQ_40501340_3"><text>-</text></inputEntry>
        <inputEntry id="IE_FREQ_40501340_4"><text>-</text></inputEntry>
        <inputEntry id="IE_FREQ_40501340_ultimo"><text>-</text></inputEntry>
        <outputEntry id="OE_FREQ_40501340_resultado"><text>"Pendente"</text></outputEntry>
        <outputEntry id="OE_FREQ_40501340_observacao"><text>"Verificar frequencia dispensacao medicamento oral oncologico. Ciclo 28 dias padrao"</text></outputEntry>
        <outputEntry id="OE_FREQ_40501340_fundamentacao"><text>"ANS RN 465/2021, SBOC 2023: Dispensacao oral oncologico ciclo 28 dias, max 3 ciclos por autorizacao"</text></outputEntry>
        <outputEntry id="OE_FREQ_40501340_alertasDesperdicio"><text>"FREQ"</text></outputEntry>
        <outputEntry id="OE_FREQ_40501340_acaoRecomendada"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>

      <rule id="DecisionRule_approve_mm_post_tmo">
        <description>Approve MM post-transplant</description>
        <inputEntry id="InputEntry_disease_tmo">
          <text>"multiple_myeloma","MM","myeloma"</text>
        </inputEntry>
        <inputEntry id="InputEntry_prior_treatment_tmo">
          <text>"ASCT","auto_transplant","TMO"</text>
        </inputEntry>
        <inputEntry id="InputEntry_response_tmo">
          <text>"CR","VGPR","PR"</text>
        </inputEntry>
        <inputEntry id="InputEntry_cytogenetic_risk_tmo">
          <text>-</text>
        </inputEntry>
        <inputEntry id="IE_DecisionRule_approve_mm_post_tmo_ultimo"><text>-</text></inputEntry>
        <outputEntry id="OutputEntry_resultado_tmo">
          <text>"Aprovado"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_observacao_tmo">
          <text>"Lenalidomida manutencao aprovada: MM pos-TMO ate progressao ou toxicidade"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_fundamentacao_tmo">
          <text>"Meta-analise: OS beneficio (HR 0.75); iniciar 10mg D1-21 apos recuperacao"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_alertasDesperdicio_tmo">
          <text>"NENHUM"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_acaoRecomendada_tmo">
          <text>"APROVAR"</text>
        </outputEntry>
      </rule>
      <rule id="DecisionRule_pending_high_risk">
        <description>Pending for high-risk cytogenetics</description>
        <inputEntry id="InputEntry_disease_hr">
          <text>"multiple_myeloma","MM","myeloma"</text>
        </inputEntry>
        <inputEntry id="InputEntry_prior_treatment_hr">
          <text>"ASCT","auto_transplant","TMO"</text>
        </inputEntry>
        <inputEntry id="InputEntry_response_hr">
          <text>"CR","VGPR","PR"</text>
        </inputEntry>
        <inputEntry id="InputEntry_cytogenetic_risk_hr">
          <text>"high_risk","del17p","t(4;14)","t(14;16)"</text>
        </inputEntry>
        <inputEntry id="IE_DecisionRule_pending_high_risk_ultimo"><text>-</text></inputEntry>
        <outputEntry id="OutputEntry_resultado_hr">
          <text>"Pendente"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_observacao_hr">
          <text>"Alto risco citogenetico: considerar lena+bortezomibe ou lena+ixazomib manutencao"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_fundamentacao_hr">
          <text>"TOURMALINE-MM3: ixazomib+lena pode beneficiar alto risco; lena mono subotimo"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_alertasDesperdicio_hr">
          <text>"NENHUM"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_acaoRecomendada_hr">
          <text>"SOLICITAR_INFO"</text>
        </outputEntry>
      </rule>
      <rule id="DecisionRule_approve_mm_ineligible">
        <description>Approve MM ineligible post-induction</description>
        <inputEntry id="InputEntry_disease_inel">
          <text>"multiple_myeloma","MM","myeloma"</text>
        </inputEntry>
        <inputEntry id="InputEntry_prior_treatment_inel">
          <text>"VMP","Rd","VRd"</text>
        </inputEntry>
        <inputEntry id="InputEntry_response_inel">
          <text>"CR","VGPR","PR"</text>
        </inputEntry>
        <inputEntry id="InputEntry_cytogenetic_risk_inel">
          <text>-</text>
        </inputEntry>
        <inputEntry id="IE_DecisionRule_approve_mm_ineligible_ultimo"><text>-</text></inputEntry>
        <outputEntry id="OutputEntry_resultado_inel">
          <text>"Aprovado"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_observacao_inel">
          <text>"Lenalidomida manutencao aprovada: MM inelegivel TMO pos-inducao"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_fundamentacao_inel">
          <text>"Myeloma XI: beneficio de lena manutencao apos inducao em inelegiveis"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_alertasDesperdicio_inel">
          <text>"NENHUM"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_acaoRecomendada_inel">
          <text>"APROVAR"</text>
        </outputEntry>
      </rule>
      <rule id="DecisionRule_approve_fl">
        <description>Approve follicular lymphoma</description>
        <inputEntry id="InputEntry_disease_fl">
          <text>"follicular_lymphoma","FL"</text>
        </inputEntry>
        <inputEntry id="InputEntry_prior_treatment_fl">
          <text>"R2","rituximab_lenalidomide"</text>
        </inputEntry>
        <inputEntry id="InputEntry_response_fl">
          <text>"CR","PR"</text>
        </inputEntry>
        <inputEntry id="InputEntry_cytogenetic_risk_fl">
          <text>-</text>
        </inputEntry>
        <inputEntry id="IE_DecisionRule_approve_fl_ultimo"><text>-</text></inputEntry>
        <outputEntry id="OutputEntry_resultado_fl">
          <text>"Aprovado"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_observacao_fl">
          <text>"Lenalidomida+rituximabe aprovado: LF recidivado (AUGMENT)"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_fundamentacao_fl">
          <text>"AUGMENT: PFS 39.4 vs 14.1m para R2 vs rituximabe. Duracao: 12 ciclos"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_alertasDesperdicio_fl">
          <text>"NENHUM"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_acaoRecomendada_fl">
          <text>"APROVAR"</text>
        </outputEntry>
      </rule>
      <rule id="DecisionRule_approve_mcl">
        <description>Approve MCL maintenance</description>
        <inputEntry id="InputEntry_disease_mcl">
          <text>"MCL","mantle_cell_lymphoma"</text>
        </inputEntry>
        <inputEntry id="InputEntry_prior_treatment_mcl">
          <text>"R-CHOP","R-DHAP","induction"</text>
        </inputEntry>
        <inputEntry id="InputEntry_response_mcl">
          <text>"CR","PR"</text>
        </inputEntry>
        <inputEntry id="InputEntry_cytogenetic_risk_mcl">
          <text>-</text>
        </inputEntry>
        <inputEntry id="IE_DecisionRule_approve_mcl_ultimo"><text>-</text></inputEntry>
        <outputEntry id="OutputEntry_resultado_mcl">
          <text>"Aprovado"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_observacao_mcl">
          <text>"Lenalidomida manutencao aprovada: LCM pos-inducao (LyMa trial)"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_fundamentacao_mcl">
          <text>"LyMa: lena manutencao prolonga PFS apos resposta; alternativa a rituximabe"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_alertasDesperdicio_mcl">
          <text>"NENHUM"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_acaoRecomendada_mcl">
          <text>"APROVAR"</text>
        </outputEntry>
      </rule>
      <rule id="DecisionRule_fallback">
        <description>Fallback rule</description>
        <inputEntry id="InputEntry_disease_fallback">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_prior_treatment_fallback">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_response_fallback">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_cytogenetic_risk_fallback">
          <text>-</text>
        </inputEntry>
        <inputEntry id="IE_DecisionRule_fallback_ultimo"><text>-</text></inputEntry>
        <outputEntry id="OutputEntry_resultado_fallback">
          <text>"Pendente"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_observacao_fallback">
          <text>"Dados insuficientes para avaliacao de lenalidomida manutencao"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_fundamentacao_fallback">
          <text>"Necessario: doenca, tratamento previo, resposta, risco citogenetico"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_alertasDesperdicio_fallback">
          <text>"DOC"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_acaoRecomendada_fallback">
          <text>"SOLICITAR_INFO"</text>
        </outputEntry>
      </rule>
    </decisionTable>
  </decision>
  <dmndi:DMNDI>
    <dmndi:DMNDiagram>
      <dmndi:DMNShape dmnElementRef="Decision_ONQ_DRUG_015">
        <dc:Bounds height="80" width="180" x="160" y="100" />
      </dmndi:DMNShape>
    </dmndi:DMNDiagram>
  </dmndi:DMNDI>
</definitions>
