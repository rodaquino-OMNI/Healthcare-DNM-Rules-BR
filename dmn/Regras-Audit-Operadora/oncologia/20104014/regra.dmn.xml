<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="https://www.omg.org/spec/DMN/20191111/MODEL/"
             id="Definitions_20104014"
             name="Consulta Oncologica"
             targetNamespace="http://camunda.org/schema/1.0/dmn">
  <!--
    TUSS 20104014 - Consulta Oncologica
    Procedimento: Consulta medica em oncologia clinica
    Versao: 3.1.0-LEAN-TIER2 (2026-02-08)

    Indicacoes clinicas DUT/ANS:
    - Diagnostico confirmado de neoplasia maligna
    - Suspeita fundada de cancer (nodulo, massa, exame alterado)
    - Seguimento pos-tratamento oncologico (rastreamento recidiva)
    - Orientacao terapeutica para paciente em tratamento
    - Segunda opiniao em casos oncologicos complexos

    Contraindicacoes:
    - Ausencia de diagnostico oncologico ou suspeita fundada
    - Consulta de rotina sem contexto oncologico

    Referencias:
    - Portaria SAS/MS 876/2013 (Diretrizes Diagnosticas e Terapeuticas Oncologia)
    - RN ANS 465/2021 Rol de Procedimentos
  -->
  <decision id="Decision_20104014" name="Indicacao para Consulta Oncologica [LEAN TIER-2]">
    <decisionTable id="DecisionTable_20104014" hitPolicy="FIRST">
      <!-- Input 1: Diagnostico Oncologico -->
      <input id="Input_1" label="Diagnostico Oncologico">
        <inputExpression id="InputExpression_1" typeRef="string">
          <text>diagnosticoOncologico</text>
        </inputExpression>
        <inputValues id="InputValues_1">
          <text>"NEOPLASIA_CONFIRMADA", "SUSPEITA_FUNDADA", "SEGUIMENTO_POS_TRATAMENTO", "EM_TRATAMENTO", "AUSENTE"</text>
        </inputValues>
      </input>
      <!-- Input 2: CID-10 da Neoplasia -->
      <input id="Input_2" label="CID-10 Neoplasia">
        <inputExpression id="InputExpression_2" typeRef="string">
          <text>cidNeoplasia</text>
        </inputExpression>
      </input>
      <!-- Input 3: Exames Complementares -->
      <input id="Input_3" label="Exames Complementares">
        <inputExpression id="InputExpression_3" typeRef="boolean">
          <text>examesComplementares</text>
        </inputExpression>
      </input>
      <!-- Input 4: Performance Status -->
      <input id="Input_4" label="Performance Status ECOG">
        <inputExpression id="InputExpression_4" typeRef="string">
          <text>performanceStatus</text>
        </inputExpression>
        <inputValues id="InputValues_4">
          <text>"ECOG_0", "ECOG_1", "ECOG_2", "ECOG_3", "ECOG_4", "NAO_INFORMADO"</text>
        </inputValues>
      </input>
      <!-- Input 5: Dias Desde Ultimo Procedimento -->
      <input id="Input_ultimoProcedimentoDias" label="Dias Desde Ultimo Procedimento">
        <inputExpression id="InputExpression_ultimoProcedimentoDias" typeRef="number">
          <text>ultimoProcedimentoDias</text>
        </inputExpression>
      </input>
      <!-- Output -->
      <output id="Output_1" label="Resultado" name="resultado" typeRef="string"/>
      <output id="Output_2" label="Observacao" name="observacao" typeRef="string"/>
      <output id="Output_3" label="Fundamentacao" name="fundamentacao" typeRef="string"/>
      <output id="Output_4" label="Alertas de Desperdicio" name="alertasDesperdicio" typeRef="string">
        <outputValues id="OutputValues_4">
          <text>"NENHUM","DUP","FREQ","ESC","DOC","PROT","MULTI"</text>
        </outputValues>
      </output>
      <output id="Output_5" label="Acao Recomendada" name="acaoRecomendada" typeRef="string">
        <outputValues id="OutputValues_5">
          <text>"APROVAR","NEGAR","SOLICITAR_INFO","AGUARDAR_PRAZO","SUGERIR_ALTERNATIVA"</text>
        </outputValues>
      </output>

      <!-- REGRA 1: Contraindicacao - Sem diagnostico oncologico -->
      <rule id="Rule_Contraindicacao_SemDiagnostico">
        <description>Ausencia de diagnostico ou suspeita oncologica</description>
        <inputEntry id="InputEntry_1_1"><text>"AUSENTE"</text></inputEntry>
        <inputEntry id="InputEntry_2_1"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_3_1"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_4_1"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_5_1"><text>-</text></inputEntry>
        <outputEntry id="OutputEntry_1_1"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OutputEntry_2_1"><text>"Consulta oncologica nao indicada - ausencia de diagnostico ou suspeita fundada de neoplasia."</text></outputEntry>
        <outputEntry id="OutputEntry_3_1"><text>"RN ANS 465/2021 - Consulta oncologica requer diagnostico confirmado ou suspeita fundada."</text></outputEntry>
        <outputEntry id="OutputEntry_4_1"><text>"PROT"</text></outputEntry>
        <outputEntry id="OutputEntry_5_1"><text>"NEGAR"</text></outputEntry>
      </rule>

      <!-- REGRA 1.1: Waste Detection - DUP consulta <7 dias -->
      <rule id="Rule_20104014_DUP_consulta">
        <description>DUP - Consulta oncologica repetida em menos de 7 dias</description>
        <inputEntry id="InputEntry_1_1_1"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_2_1_1"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_3_1_1"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_4_1_1"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_5_1_1"><text>&lt; 7</text></inputEntry>
        <outputEntry id="OutputEntry_1_1_1"><text>"Reprovado"</text></outputEntry>
        <outputEntry id="OutputEntry_2_1_1"><text>"Consulta oncologica repetida em menos de 7 dias sem justificativa de urgencia"</text></outputEntry>
        <outputEntry id="OutputEntry_3_1_1"><text>"ANS RN 465/2021: Consulta especializada intervalo minimo 7 dias exceto urgencia"</text></outputEntry>
        <outputEntry id="OutputEntry_4_1_1"><text>"DUP"</text></outputEntry>
        <outputEntry id="OutputEntry_5_1_1"><text>"AGUARDAR_PRAZO"</text></outputEntry>
      </rule>

      <!-- REGRA 2: Aprovado - Neoplasia confirmada -->
      <rule id="Rule_Aprovado_NeoplasiaConfirmada">
        <description>Diagnostico confirmado de neoplasia maligna</description>
        <inputEntry id="InputEntry_1_2"><text>"NEOPLASIA_CONFIRMADA"</text></inputEntry>
        <inputEntry id="InputEntry_2_2"><text>starts with(cidNeoplasia, "C")</text></inputEntry>
        <inputEntry id="InputEntry_3_2"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_4_2"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_5_2"><text>-</text></inputEntry>
        <outputEntry id="OutputEntry_1_2"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OutputEntry_2_2"><text>"Aprovado - consulta oncologica para neoplasia maligna confirmada (CID-10: " + cidNeoplasia + ")."</text></outputEntry>
        <outputEntry id="OutputEntry_3_2"><text>"Portaria SAS/MS 876/2013 - Consulta oncologica indicada para diagnostico confirmado."</text></outputEntry>
        <outputEntry id="OutputEntry_4_2"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OutputEntry_5_2"><text>"APROVAR"</text></outputEntry>
      </rule>

      <!-- REGRA 3: Aprovado - Suspeita fundada com exames -->
      <rule id="Rule_Aprovado_SuspeitaFundada">
        <description>Suspeita fundada com exames complementares</description>
        <inputEntry id="InputEntry_1_3"><text>"SUSPEITA_FUNDADA"</text></inputEntry>
        <inputEntry id="InputEntry_2_3"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_3_3"><text>true</text></inputEntry>
        <inputEntry id="InputEntry_4_3"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_5_3"><text>-</text></inputEntry>
        <outputEntry id="OutputEntry_1_3"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OutputEntry_2_3"><text>"Aprovado - consulta oncologica para suspeita fundada de neoplasia com exames complementares."</text></outputEntry>
        <outputEntry id="OutputEntry_3_3"><text>"RN ANS 465/2021 - Consulta para elucidacao diagnostica de suspeita oncologica."</text></outputEntry>
        <outputEntry id="OutputEntry_4_3"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OutputEntry_5_3"><text>"APROVAR"</text></outputEntry>
      </rule>

      <!-- REGRA 4: Pendente - Suspeita sem exames -->
      <rule id="Rule_Pendente_SuspeitaSemExames">
        <description>Suspeita fundada sem exames complementares</description>
        <inputEntry id="InputEntry_1_4"><text>"SUSPEITA_FUNDADA"</text></inputEntry>
        <inputEntry id="InputEntry_2_4"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_3_4"><text>false</text></inputEntry>
        <inputEntry id="InputEntry_4_4"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_5_4"><text>-</text></inputEntry>
        <outputEntry id="OutputEntry_1_4"><text>"Pendente"</text></outputEntry>
        <outputEntry id="OutputEntry_2_4"><text>"Solicitar exames complementares para investigacao da suspeita oncologica (imagem, marcadores, biopsia)."</text></outputEntry>
        <outputEntry id="OutputEntry_3_4"><text>"Diretrizes SAS/MS - Investigacao adequada requer exames complementares."</text></outputEntry>
        <outputEntry id="OutputEntry_4_4"><text>"DOC"</text></outputEntry>
        <outputEntry id="OutputEntry_5_4"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>

      <!-- REGRA 5: Aprovado - Seguimento pos-tratamento -->
      <rule id="Rule_Aprovado_Seguimento">
        <description>Seguimento pos-tratamento oncologico</description>
        <inputEntry id="InputEntry_1_5"><text>"SEGUIMENTO_POS_TRATAMENTO"</text></inputEntry>
        <inputEntry id="InputEntry_2_5"><text>starts with(cidNeoplasia, "C")</text></inputEntry>
        <inputEntry id="InputEntry_3_5"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_4_5"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_5_5"><text>-</text></inputEntry>
        <outputEntry id="OutputEntry_1_5"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OutputEntry_2_5"><text>"Aprovado - consulta de seguimento pos-tratamento para rastreamento de recidiva."</text></outputEntry>
        <outputEntry id="OutputEntry_3_5"><text>"Portaria SAS/MS 876/2013 - Seguimento oncologico para deteccao precoce de recidiva."</text></outputEntry>
        <outputEntry id="OutputEntry_4_5"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OutputEntry_5_5"><text>"APROVAR"</text></outputEntry>
      </rule>

      <!-- REGRA 6: Aprovado - Paciente em tratamento -->
      <rule id="Rule_Aprovado_EmTratamento">
        <description>Paciente em tratamento oncologico ativo</description>
        <inputEntry id="InputEntry_1_6"><text>"EM_TRATAMENTO"</text></inputEntry>
        <inputEntry id="InputEntry_2_6"><text>starts with(cidNeoplasia, "C")</text></inputEntry>
        <inputEntry id="InputEntry_3_6"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_4_6"><text>"ECOG_0", "ECOG_1", "ECOG_2", "ECOG_3"</text></inputEntry>
        <inputEntry id="InputEntry_5_6"><text>-</text></inputEntry>
        <outputEntry id="OutputEntry_1_6"><text>"Aprovado"</text></outputEntry>
        <outputEntry id="OutputEntry_2_6"><text>"Aprovado - consulta para acompanhamento de tratamento oncologico em curso."</text></outputEntry>
        <outputEntry id="OutputEntry_3_6"><text>"RN ANS 465/2021 - Acompanhamento oncologico durante tratamento ativo."</text></outputEntry>
        <outputEntry id="OutputEntry_4_6"><text>"NENHUM"</text></outputEntry>
        <outputEntry id="OutputEntry_5_6"><text>"APROVAR"</text></outputEntry>
      </rule>

      <!-- REGRA 7: Fallback -->
      <rule id="Rule_Fallback_20104014">
        <description>Dados incompletos - requer avaliacao</description>
        <inputEntry id="InputEntry_1_7"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_2_7"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_3_7"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_4_7"><text>-</text></inputEntry>
        <inputEntry id="InputEntry_5_7"><text>-</text></inputEntry>
        <outputEntry id="OutputEntry_1_7"><text>"Pendente"</text></outputEntry>
        <outputEntry id="OutputEntry_2_7"><text>"Dados incompletos. Necessario: (1) Diagnostico/suspeita oncologica, (2) CID-10 se confirmado, (3) Exames complementares."</text></outputEntry>
        <outputEntry id="OutputEntry_3_7"><text>"Requer avaliacao do auditor medico para complementacao de informacoes."</text></outputEntry>
        <outputEntry id="OutputEntry_4_7"><text>"DOC"</text></outputEntry>
        <outputEntry id="OutputEntry_5_7"><text>"SOLICITAR_INFO"</text></outputEntry>
      </rule>
    </decisionTable>
  </decision>
</definitions>
