{
  "ruleCode": "BILL-OPME-002",
  "ruleName": "Validacao Preco OPME",
  "category": "BILL",
  "subcategory": "OPME",
  "version": "1.0.0",
  "status": "active",
  "perspective": "HOSPITAL",
  "hitPolicy": "FIRST",
  "createdAt": "2026-02-06T00:00:00Z",
  "updatedAt": "2026-02-06T00:00:00Z",

  "inputs": [
    {
      "name": "percentualMargemAtual",
      "type": "number",
      "label": "Percentual Margem Atual",
      "required": true,
      "description": "Percentual de margem entre preco de compra e venda do OPME"
    },
    {
      "name": "limiteMargemContrato",
      "type": "number",
      "label": "Limite Margem Contrato",
      "required": true,
      "description": "Limite maximo de margem permitido pelo contrato com operadora"
    },
    {
      "name": "precoVendaMaiorCusto",
      "type": "boolean",
      "label": "Preco Venda Maior Custo",
      "required": true,
      "description": "Indica se o preco de venda e superior ao custo de aquisicao"
    },
    {
      "name": "tabelaReferenciaDisponivel",
      "type": "boolean",
      "label": "Tabela Referencia Disponivel",
      "required": true,
      "description": "Indica se existe tabela de referencia (SIMPRO/Brasindice) para o OPME"
    }
  ],

  "outputs": [
    {
      "name": "resultado",
      "type": "string",
      "label": "Resultado",
      "allowedValues": ["Prosseguir", "Bloquear", "Alertar", "Revisar"],
      "description": "Resultado da validacao de preco"
    },
    {
      "name": "observacao",
      "type": "string",
      "label": "Observacao",
      "description": "Justificativa detalhada para trilha de auditoria"
    },
    {
      "name": "acaoRecomendada",
      "type": "string",
      "label": "Acao Recomendada",
      "allowedValues": ["FATURAR", "AJUSTAR_PRECO", "NEGOCIAR_OPERADORA", "REVISAR_CUSTO"],
      "description": "Proxima acao recomendada para o faturista"
    },
    {
      "name": "codigoGlosaPotencial",
      "type": "string",
      "label": "Codigo Glosa Potencial",
      "allowedValues": ["P001", "P002", "P003", "N/A"],
      "description": "Codigo de glosa potencial se ignorar a regra"
    }
  ],

  "revenueImpact": "HIGH",
  "denialRiskIfIgnored": "ALTO",

  "relatedCodes": ["OPME", "SIMPRO", "BRASINDICE", "MARGEM", "PRECO"],
  "relatedMaterials": [
    {
      "category": "OPME",
      "examples": ["Proteses", "Orteses", "Materiais Especiais"],
      "rule": "Preco deve respeitar margem contratual e tabela de referencia"
    }
  ],

  "regulatoryBasis": [
    "Contrato Operadora - Clausula de Materiais",
    "Tabela SIMPRO - Precos de Referencia",
    "Tabela Brasindice - Precos de Referencia",
    "RN ANS 465/2021 - Transparencia de Precos"
  ],

  "references": [
    "HOSPITAL_COUNTER_RULES_BLUEPRINT.md - Price Validation Section",
    "Clausulas Contratuais de Materiais"
  ],

  "tags": ["billing", "opme", "preco", "margem", "contrato", "revenue-protection", "tier1-critical"],

  "changelog": [
    {
      "version": "1.0.0",
      "date": "2026-02-06",
      "changes": "Criacao inicial da regra de validacao de preco OPME",
      "author": "DMN Generator Agent"
    }
  ]
}
