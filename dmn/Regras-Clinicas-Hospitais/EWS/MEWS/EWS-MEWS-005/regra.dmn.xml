<?xml version="1.0" encoding="UTF-8"?>
<!--
  ============================================================================
  EWS-MEWS-005: MEWS Cardiovascular Component Alert
  ============================================================================

  Modified Early Warning Score - Cardiovascular Parameter Focus.
  This rule triggers alerts for hemodynamic instability indicators.

  Evidence Base: Subbe et al. (2001)
  Cardiovascular Scoring:
  - Systolic BP: <70=3, 71-80=2, 81-100=1, 101-199=0, >=200=2
  - Heart Rate: <40=2, 41-50=1, 51-100=0, 101-110=1, 111-129=2, >=130=3

  ============================================================================
-->
<definitions xmlns="https://www.omg.org/spec/DMN/20191111/MODEL/"
             xmlns:dmndi="https://www.omg.org/spec/DMN/20191111/DMNDI/"
             xmlns:dc="http://www.omg.org/spec/DMN/20180521/DC/"
             id="Definitions_EWS_MEWS_005"
             name="MEWS Cardiovascular Alert"
             targetNamespace="http://camunda.org/schema/1.0/dmn">

  <!--
    ═══════════════════════════════════════════════════════════════════════════
    EWS-MEWS-005: MEWS Cardiovascular Component Alert
    Version: 1.0.0 (2026-02-06)
    Clinical Domain: Cardiology / Critical Care
    ═══════════════════════════════════════════════════════════════════════════

    TRIGGER CONDITIONS:
    - Hypotension (SBP <100 mmHg)
    - Tachycardia (HR >110 bpm)
    - Bradycardia (HR <50 bpm)
    - Hypertensive crisis (SBP >=200 mmHg)

    CLINICAL ACTIONS:
    - Hemodynamic assessment
    - ECG if arrhythmia suspected
    - Consider fluid resuscitation or vasopressors
    - Monitor for end-organ perfusion

    EVIDENCE BASE:
    - Cardiovascular parameters key predictors of shock
    - Combined BP + HR abnormalities increase mortality 4x
    ═══════════════════════════════════════════════════════════════════════════
  -->

  <decision id="Decision_EWS_MEWS_005" name="MEWS Cardiovascular Component Evaluation">
    <decisionTable id="DecisionTable_EWS_MEWS_005" hitPolicy="FIRST">

      <!-- INPUT 1: Systolic Blood Pressure -->
      <input id="Input_1" label="PA Sistolica">
        <inputExpression id="InputExpression_1" typeRef="number">
          <text>paSistolica</text>
        </inputExpression>
      </input>

      <!-- INPUT 2: Heart Rate -->
      <input id="Input_2" label="Frequencia Cardiaca">
        <inputExpression id="InputExpression_2" typeRef="number">
          <text>frequenciaCardiaca</text>
        </inputExpression>
      </input>

      <!-- INPUT 3: Signs of Poor Perfusion -->
      <input id="Input_3" label="Sinais Hipoperfusao">
        <inputExpression id="InputExpression_3" typeRef="boolean">
          <text>sinaisHipoperfusao</text>
        </inputExpression>
      </input>

      <!-- INPUT 4: Known Cardiac Disease -->
      <input id="Input_4" label="Cardiopatia Conhecida">
        <inputExpression id="InputExpression_4" typeRef="boolean">
          <text>cardiopatiaConhecida</text>
        </inputExpression>
      </input>

      <!-- OUTPUT 1: Alert Level -->
      <output id="Output_1" label="Nivel Alerta" name="nivelAlerta" typeRef="string">
        <outputValues id="OutputValues_1">
          <text>"Alerta", "Atencao", "Informativo", "OK", "Revisar"</text>
        </outputValues>
      </output>

      <!-- OUTPUT 2: Urgency -->
      <output id="Output_2" label="Urgencia" name="urgencia" typeRef="string">
        <outputValues id="OutputValues_2">
          <text>"IMEDIATA", "URGENTE", "ROTINA", "INFORMATIVA"</text>
        </outputValues>
      </output>

      <!-- OUTPUT 3: Required Action -->
      <output id="Output_3" label="Acao Requerida" name="acaoRequerida" typeRef="string"/>

      <!-- OUTPUT 4: Clinical Justification -->
      <output id="Output_4" label="Justificativa Cientifica" name="justificativaCientifica" typeRef="string"/>

      <!-- RULE 1: CRITICAL - Severe Hypotension (SBP <70) -->
      <rule id="Rule_Critical_SevereHypotension">
        <description>SBP  &lt; 70 mmHg indicates circulatory shock</description>
        <inputEntry id="InputEntry_1_1">
          <text>&lt; 70</text>
        </inputEntry>
        <inputEntry id="InputEntry_1_2">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_1_3">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_1_4">
          <text>-</text>
        </inputEntry>
        <outputEntry id="OutputEntry_1_1">
          <text>"Alerta"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_1_2">
          <text>"IMEDIATA"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_1_3">
          <text>"CHOQUE CIRCULATORIO. Ativar equipe de resposta rapida. Dois acessos venosos calibrosos. Iniciar reposicao volemica agressiva. Colher lactato e gasometria. Preparar vasopressores. Considerar UTI."</text>
        </outputEntry>
        <outputEntry id="OutputEntry_1_4">
          <text>"PAS&lt; 70 mmHg indica choque descompensado (score MEWS = 3). Perfusao de orgaos vitais comprometida. Mortalidade >50% sem intervencao imediata. Cada hora de atraso aumenta mortalidade em 7.6%."</text>
        </outputEntry>
      </rule>

      <!-- RULE 2: CRITICAL - Severe Tachycardia (HR >=130) -->
      <rule id="Rule_Critical_SevereTachycardia">
        <description>HR  &gt; =130 bpm indicates severe tachycardia</description>
        <inputEntry id="InputEntry_2_1">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_2_2">
          <text>&gt;= 130</text>
        </inputEntry>
        <inputEntry id="InputEntry_2_3">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_2_4">
          <text>-</text>
        </inputEntry>
        <outputEntry id="OutputEntry_2_1">
          <text>"Alerta"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_2_2">
          <text>"IMEDIATA"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_2_3">
          <text>"Taquicardia grave. ECG de 12 derivacoes URGENTE. Avaliar estabilidade hemodinamica. Identificar ritmo (sinusal vs arritmia). Se FA rapida considerar controle de frequencia. Se instavel preparar cardioversao."</text>
        </outputEntry>
        <outputEntry id="OutputEntry_2_4">
          <text>"FC&gt; =130 bpm indica estresse cardiovascular severo (score MEWS = 3). Pode representar: sepse, hipovolemia, TEP, arritmia primaria. Debito cardiaco pode cair se FC muito alta (tempo diastolico reduzido)."</text>
        </outputEntry>
      </rule>

      <!-- RULE 3: HIGH RISK - Hypotension + Tachycardia (Shock pattern) -->
      <rule id="Rule_HighRisk_ShockPattern">
        <description>Hypotension with tachycardia - classic shock presentation</description>
        <inputEntry id="InputEntry_3_1">
          <text>&lt; 100</text>
        </inputEntry>
        <inputEntry id="InputEntry_3_2">
          <text>&gt; 100</text>
        </inputEntry>
        <inputEntry id="InputEntry_3_3">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_3_4">
          <text>-</text>
        </inputEntry>
        <outputEntry id="OutputEntry_3_1">
          <text>"Alerta"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_3_2">
          <text>"IMEDIATA"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_3_3">
          <text>"Padrao de CHOQUE (hipotensao + taquicardia). Avaliacao medica IMEDIATA. Monitorizar. Acesso venoso calibroso. Iniciar cristaloide 500ml bolus. Lactato. Investigar causa: hemorragia, sepse, cardiogenico, TEP."</text>
        </outputEntry>
        <outputEntry id="OutputEntry_3_4">
          <text>"Combinacao de PAS&lt; 100 + FC >100 e um padrao classico de choque compensado. Taquicardia e resposta compensatoria a hipotensao. Indica perda de 15-30% do volume circulante ou falencia de bomba."</text>
        </outputEntry>
      </rule>

      <!-- RULE 4: ATTENTION - Bradycardia -->
      <rule id="Rule_Attention_Bradycardia">
        <description>HR  &lt; 50 - assess for symptomatic bradycardia</description>
        <inputEntry id="InputEntry_4_1">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_4_2">
          <text>&lt; 50</text>
        </inputEntry>
        <inputEntry id="InputEntry_4_3">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_4_4">
          <text>-</text>
        </inputEntry>
        <outputEntry id="OutputEntry_4_1">
          <text>"Atencao"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_4_2">
          <text>"URGENTE"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_4_3">
          <text>"Bradicardia detectada. Avaliar sintomas (tonturas, sincope, dispneia). ECG para avaliar ritmo e bloqueios. Revisar medicacoes (beta-bloqueadores, digitalis). Se sintomatico, preparar atropina. Avaliar necessidade de marca-passo."</text>
        </outputEntry>
        <outputEntry id="OutputEntry_4_4">
          <text>"FC&lt; 50 bpm (score MEWS = 1-2). Se assintomatico em atleta pode ser normal. Se sintomatico ou em idoso/cardiopata, indica bloqueio ou doenca do no sinusal. Risco de assistolia se nao tratado."</text>
        </outputEntry>
      </rule>

      <!-- RULE 5: ATTENTION - Hypertensive Crisis -->
      <rule id="Rule_Attention_HypertensiveCrisis">
        <description>SBP  &gt; =200 mmHg - hypertensive crisis</description>
        <inputEntry id="InputEntry_5_1">
          <text>&gt;= 200</text>
        </inputEntry>
        <inputEntry id="InputEntry_5_2">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_5_3">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_5_4">
          <text>-</text>
        </inputEntry>
        <outputEntry id="OutputEntry_5_1">
          <text>"Atencao"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_5_2">
          <text>"URGENTE"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_5_3">
          <text>"CRISE HIPERTENSIVA. Avaliar lesao de orgao-alvo (cefaleia, alteracao visual, dor toracica). ECG. Fundo de olho se possivel. Se emergencia (LOA): nitroprussiato IV. Se urgencia: captopril SL ou VO. Nao reduzir PA abruptamente."</text>
        </outputEntry>
        <outputEntry id="OutputEntry_5_4">
          <text>"PAS&gt; =200 mmHg (score MEWS = 2). Risco de AVC hemorragico, disseccao aortica, encefalopatia hipertensiva. Reduzir 25% nas primeiras 2h, nao mais. Reducao abrupta pode causar isquemia."</text>
        </outputEntry>
      </rule>

      <!-- RULE 6: FALLBACK -->
      <rule id="Rule_Fallback_EWS_MEWS_005">
        <description>Parametros cardiovasculares normais ou dados incompletos</description>
        <inputEntry id="InputEntry_F_1">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_F_2">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_F_3">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_F_4">
          <text>-</text>
        </inputEntry>
        <outputEntry id="OutputEntry_F_1">
          <text>"Revisar"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_F_2">
          <text>"ROTINA"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_F_3">
          <text>"Verificar PA e FC. Se PAS 100-199 e FC 51-100, componentes cardiovasculares do MEWS estao adequados. Monitorar de rotina."</text>
        </outputEntry>
        <outputEntry id="OutputEntry_F_4">
          <text>"Parametros cardiovasculares dentro da normalidade (PAS 100-199, FC 51-100) indicam estabilidade hemodinamica. Monitoramento de rotina apropriado."</text>
        </outputEntry>
      </rule>

    </decisionTable>
  </decision>

  <dmndi:DMNDI>
    <dmndi:DMNDiagram id="DMNDiagram_EWS_MEWS_005">
      <dmndi:DMNShape id="DMNShape_Decision_EWS_MEWS_005" dmnElementRef="Decision_EWS_MEWS_005">
        <dc:Bounds height="80" width="180" x="160" y="100"/>
      </dmndi:DMNShape>
    </dmndi:DMNDiagram>
  </dmndi:DMNDI>

</definitions>
