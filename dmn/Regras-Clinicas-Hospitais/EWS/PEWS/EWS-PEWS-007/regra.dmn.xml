<?xml version="1.0" encoding="UTF-8"?>
<!--
  ============================================================================
  EWS-PEWS-007: PEWS Neonatal Adaptation (<28 days)
  ============================================================================

  Pediatric Early Warning Score adapted for neonates.
  Neonates have different physiological parameters and presentations.

  Evidence Base: Neonatal early warning score literature
  Neonatal Considerations:
  - Higher baseline respiratory and heart rates
  - Limited ability to regulate temperature
  - Subtle presentation of sepsis
  - Fontanelle assessment valuable

  ============================================================================
-->
<definitions xmlns="https://www.omg.org/spec/DMN/20191111/MODEL/"
             xmlns:dmndi="https://www.omg.org/spec/DMN/20191111/DMNDI/"
             xmlns:dc="http://www.omg.org/spec/DMN/20180521/DC/"
             id="Definitions_EWS_PEWS_007"
             name="PEWS Neonatal Adaptation"
             targetNamespace="http://camunda.org/schema/1.0/dmn">

  <!--
    ═══════════════════════════════════════════════════════════════════════════
    EWS-PEWS-007: PEWS Neonatal Adaptation (<28 days)
    Version: 1.0.0 (2026-02-06)
    Clinical Domain: Neonatology / Pediatric Emergency
    ═══════════════════════════════════════════════════════════════════════════

    NEONATAL SPECIFICS:
    - Normal RR: 30-60/min
    - Normal HR: 100-180 bpm
    - Temperature instability common with sepsis
    - Fontanelle: bulging (increased ICP), sunken (dehydration)
    - Feeding behavior very sensitive indicator

    CLINICAL SIGNIFICANCE:
    - Neonates can deteriorate extremely rapidly
    - Sepsis may present with hypothermia, not fever
    - "Baby doesn't look right" is a red flag
    ═══════════════════════════════════════════════════════════════════════════
  -->

  <decision id="Decision_EWS_PEWS_007" name="PEWS Neonatal Adaptation Evaluation">
    <decisionTable id="DecisionTable_EWS_PEWS_007" hitPolicy="FIRST">

      <!-- INPUT 1: Age in Days -->
      <input id="Input_1" label="Idade Dias">
        <inputExpression id="InputExpression_1" typeRef="number">
          <text>idadeDias</text>
        </inputExpression>
      </input>

      <!-- INPUT 2: Temperature -->
      <input id="Input_2" label="Temperatura">
        <inputExpression id="InputExpression_2" typeRef="number">
          <text>temperatura</text>
        </inputExpression>
      </input>

      <!-- INPUT 3: Feeding Behavior -->
      <input id="Input_3" label="Alimentacao">
        <inputExpression id="InputExpression_3" typeRef="string">
          <text>alimentacao</text>
        </inputExpression>
      </input>

      <!-- INPUT 4: Fontanelle Status -->
      <input id="Input_4" label="Fontanela">
        <inputExpression id="InputExpression_4" typeRef="string">
          <text>fontanela</text>
        </inputExpression>
      </input>

      <!-- OUTPUT 1: Alert Level -->
      <output id="Output_1" label="Nivel Alerta" name="nivelAlerta" typeRef="string">
        <outputValues id="OutputValues_1">
          <text>"Alerta", "Atencao", "Informativo", "OK", "Revisar"</text>
        </outputValues>
      </output>

      <!-- OUTPUT 2: Urgency -->
      <output id="Output_2" label="Urgencia" name="urgencia" typeRef="string">
        <outputValues id="OutputValues_2">
          <text>"IMEDIATA", "URGENTE", "ROTINA", "INFORMATIVA"</text>
        </outputValues>
      </output>

      <!-- OUTPUT 3: Required Action -->
      <output id="Output_3" label="Acao Requerida" name="acaoRequerida" typeRef="string"/>

      <!-- OUTPUT 4: Clinical Justification -->
      <output id="Output_4" label="Justificativa Cientifica" name="justificativaCientifica" typeRef="string"/>

      <!-- RULE 1: CRITICAL - Hypothermia in neonate (<36°C) -->
      <rule id="Rule_Critical_NeonatalHypothermia">
        <description>Hypothermia in neonate - sepsis until proven otherwise</description>
        <inputEntry id="InputEntry_1_1">
          <text>&lt; 28</text>
        </inputEntry>
        <inputEntry id="InputEntry_1_2">
          <text>&lt; 36</text>
        </inputEntry>
        <inputEntry id="InputEntry_1_3">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_1_4">
          <text>-</text>
        </inputEntry>
        <outputEntry id="OutputEntry_1_1">
          <text>"Alerta"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_1_2">
          <text>"IMEDIATA"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_1_3">
          <text>"HIPOTERMIA NEONATAL - SEPSE ATE PROVA CONTRARIA. Hemoculturas (periferico + cateter se presente). Hemograma, PCR, LCR se estavel. Antibiotico (ampicilina + gentamicina) IMEDIATO apos culturas. Aquecer. Glicemia. UTI Neonatal."</text>
        </outputEntry>
        <outputEntry id="OutputEntry_1_4">
          <text>"Neonatos respondem a sepse com HIPOTERMIA, nao febre. Temperatura &lt;36C em RN &lt;28 dias tem VPP 40% para infeccao bacteriana grave. Nao esperar resultados - tratar empiricamente. Mortalidade de sepse neonatal sem tratamento: 50%."</text>
        </outputEntry>
      </rule>

      <!-- RULE 2: CRITICAL - Bulging fontanelle -->
      <rule id="Rule_Critical_BulgingFontanelle">
        <description>Bulging fontanelle indicates increased ICP</description>
        <inputEntry id="InputEntry_2_1">
          <text>&lt; 28</text>
        </inputEntry>
        <inputEntry id="InputEntry_2_2">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_2_3">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_2_4">
          <text>"abaulada"</text>
        </inputEntry>
        <outputEntry id="OutputEntry_2_1">
          <text>"Alerta"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_2_2">
          <text>"IMEDIATA"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_2_3">
          <text>"FONTANELA ABAULADA - hipertensao intracraniana. Suspeitar meningite, hemorragia intracraniana. Posicionar cabeca elevada 30 graus. Neuroimagem URGENTE (US transfontanelar ou TC). Nao fazer LCR se HIC. Avaliacao neurocirurgica se indicado."</text>
        </outputEntry>
        <outputEntry id="OutputEntry_2_4">
          <text>"Fontanela abaulada em neonato indica pressao intracraniana elevada. Causas: meningite bacteriana, hemorragia intraventricular (prematuros), hidrocefalia. Puncao lombar contraindicada se HIC - risco de herniacao."</text>
        </outputEntry>
      </rule>

      <!-- RULE 3: HIGH RISK - Not feeding well -->
      <rule id="Rule_HighRisk_PoorFeeding">
        <description>Poor feeding in neonate is a red flag</description>
        <inputEntry id="InputEntry_3_1">
          <text>&lt; 28</text>
        </inputEntry>
        <inputEntry id="InputEntry_3_2">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_3_3">
          <text>"recusando"</text>
        </inputEntry>
        <inputEntry id="InputEntry_3_4">
          <text>-</text>
        </inputEntry>
        <outputEntry id="OutputEntry_3_1">
          <text>"Alerta"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_3_2">
          <text>"URGENTE"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_3_3">
          <text>"NEONATO RECUSANDO ALIMENTACAO - sinal de alarme. Investigar sepse, doenca metabolica, cardiopatia. Glicemia imediata. Hemograma, PCR, eletrólitos. Avaliar ictericia. Considerar rastreio metabolico. Baixar limiar para antibiotico empirico."</text>
        </outputEntry>
        <outputEntry id="OutputEntry_3_4">
          <text>"Recusa alimentar em neonato e um dos sinais mais precoces e sensiveis de doença grave. 'Baby who won't feed' e emergencia ate prova contraria. Causas: sepse, cardiopatia, erros inatos do metabolismo, obstrucao intestinal."</text>
        </outputEntry>
      </rule>

      <!-- RULE 4: ATTENTION - Fever in neonate -->
      <rule id="Rule_Attention_NeonatalFever">
        <description>Any fever in neonate requires workup</description>
        <inputEntry id="InputEntry_4_1">
          <text>&lt; 28</text>
        </inputEntry>
        <inputEntry id="InputEntry_4_2">
          <text>&gt;= 38</text>
        </inputEntry>
        <inputEntry id="InputEntry_4_3">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_4_4">
          <text>-</text>
        </inputEntry>
        <outputEntry id="OutputEntry_4_1">
          <text>"Alerta"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_4_2">
          <text>"URGENTE"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_4_3">
          <text>"FEBRE EM NEONATO - workup completo obrigatorio. Hemoculturas, hemograma, sumario de urina, urocultura (cateterismo), LCR (se estavel). Rx torax se sintomas respiratorios. Antibiotico empirico apos culturas. Internacao obrigatoria."</text>
        </outputEntry>
        <outputEntry id="OutputEntry_4_4">
          <text>"Todo neonato &lt;28 dias com febre >=38C tem risco 10-15% de infeccao bacteriana grave (meningite, ITU, bacteremia). Protocolo de sepse neonatal obrigatorio. Nao dar alta sem workup completo e culturas negativas por 48h."</text>
        </outputEntry>
      </rule>

      <!-- RULE 5: ATTENTION - Sunken fontanelle (dehydration) -->
      <rule id="Rule_Attention_SunkenFontanelle">
        <description>Sunken fontanelle indicates dehydration</description>
        <inputEntry id="InputEntry_5_1">
          <text>&lt; 28</text>
        </inputEntry>
        <inputEntry id="InputEntry_5_2">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_5_3">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_5_4">
          <text>"deprimida"</text>
        </inputEntry>
        <outputEntry id="OutputEntry_5_1">
          <text>"Atencao"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_5_2">
          <text>"URGENTE"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_5_3">
          <text>"FONTANELA DEPRIMIDA - desidratacao. Pesar RN (comparar com peso nascimento). Avaliar mucosas, turgor. Calcular perda ponderal. Iniciar hidratacao (oral se leve, IV se moderada/grave). Investigar causa (vomitos, diarreia, ingesta inadequada)."</text>
        </outputEntry>
        <outputEntry id="OutputEntry_5_4">
          <text>"Fontanela deprimida e sinal confiavel de desidratacao em neonatos. Perda ponderal >10% do peso nascimento e significativa. Neonatos desidratam rapidamente devido a maior area de superficie corporal relativa."</text>
        </outputEntry>
      </rule>

      <!-- RULE 6: FALLBACK -->
      <rule id="Rule_Fallback_EWS_PEWS_007">
        <description>Neonato estavel ou paciente nao neonatal</description>
        <inputEntry id="InputEntry_F_1">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_F_2">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_F_3">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_F_4">
          <text>-</text>
        </inputEntry>
        <outputEntry id="OutputEntry_F_1">
          <text>"Revisar"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_F_2">
          <text>"ROTINA"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_F_3">
          <text>"Paciente >=28 dias ou dados incompletos. Para lactentes &gt;28 dias, usar regras PEWS padrao (001-006). Neonatos requerem avaliacao especializada. Sempre perguntar: 'o bebe parece bem?'"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_F_4">
          <text>"Esta regra e especifica para neonatos &lt;28 dias. Parâmetros neonatais diferem significativamente de lactentes maiores. Avaliacao inclui: fontanela, alimentacao, ictericia, temperatura, tono. 'Nao parece bem' e valido como alerta."</text>
        </outputEntry>
      </rule>

    </decisionTable>
  </decision>

  <dmndi:DMNDI>
    <dmndi:DMNDiagram id="DMNDiagram_EWS_PEWS_007">
      <dmndi:DMNShape id="DMNShape_Decision_EWS_PEWS_007" dmnElementRef="Decision_EWS_PEWS_007">
        <dc:Bounds height="80" width="180" x="160" y="100"/>
      </dmndi:DMNShape>
    </dmndi:DMNDiagram>
  </dmndi:DMNDI>

</definitions>
