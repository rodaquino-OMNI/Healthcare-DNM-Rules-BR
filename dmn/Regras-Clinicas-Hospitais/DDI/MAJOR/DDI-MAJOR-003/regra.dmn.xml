<?xml version="1.0" encoding="UTF-8"?>
<!-- DDI-MAJOR-003: Potassio + Poupadores de Potassio - Hipercalemia Severa -->
<definitions xmlns="https://www.omg.org/spec/DMN/20191111/MODEL/" id="DDI_MAJOR_003" name="DDI-MAJOR-003: K + Poupadores" namespace="http://camunda.org/schema/1.0/dmn">
  <decision id="ddi_major_003_decision" name="Potassio + Poupadores - Hipercalemia">
    <decisionTable id="ddi_major_003_table" hitPolicy="FIRST">
      <input id="input_medicamentos_ativos"><inputExpression typeRef="string"><text>medicamentosAtivos</text></inputExpression></input>
      <input id="input_medicamento_novo"><inputExpression typeRef="string"><text>medicamentoNovo</text></inputExpression></input>
      <input id="input_potassio_serico"><inputExpression typeRef="number"><text>potassioSerico</text></inputExpression></input>
      <output id="output_nivel_alerta" name="nivelAlerta" typeRef="string"><outputValues><text>"Alerta","Atencao","Informativo","OK"</text></outputValues></output>
      <output id="output_acao_requerida" name="acaoRequerida" typeRef="string" />
      <output id="output_justificativa" name="justificativaCientifica" typeRef="string" />

      <rule id="rule_k_espironolactona_alto">
        <inputEntry><text>list contains(medicamentosAtivos, "ESPIRONOLACTONA") or list contains(medicamentosAtivos, "AMILORIDA") or list contains(medicamentosAtivos, "TRIANTERENO")</text></inputEntry>
        <inputEntry><text>"CLORETO_DE_POTASSIO" or "KCL" or "SLOW_K"</text></inputEntry>
        <inputEntry><text>&gt; 5.0</text></inputEntry>
        <outputEntry><text>"Alerta"</text></outputEntry>
        <outputEntry><text>"HIPERCALEMIA IMINENTE. K >5.0 + poupador + suplemento = ALTO RISCO arritmia fatal. SUSPENDER suplemento de K. ECG urgente. Monitorar K a cada 6-12h. Se K >6.0 ou alteracoes ECG, tratar emergencialmente."</text></outputEntry>
        <outputEntry><text>"Combinacao comum mas perigosa. Hipercalemia severa pode causar fibrilacao ventricular."</text></outputEntry>
      </rule>
      <rule id="rule_k_ieca_bra">
        <inputEntry><text>list contains(medicamentosAtivos, "ENALAPRIL") or list contains(medicamentosAtivos, "LOSARTANA") or list contains(medicamentosAtivos, "ESPIRONOLACTONA")</text></inputEntry>
        <inputEntry><text>"CLORETO_DE_POTASSIO" or "KCL"</text></inputEntry>
        <inputEntry><text>[4.5..5.0]</text></inputEntry>
        <outputEntry><text>"Atencao"</text></outputEntry>
        <outputEntry><text>"Risco hipercalemia. IECA/BRA/poupadores reduzem excrecao de K. Monitorar K em 48-72h. Reavaliar necessidade de suplemento. Se K subir >5.5, suspender suplemento."</text></outputEntry>
        <outputEntry><text>"IECA/BRA aumentam K 0.5-1.0 mEq/L. Com suplemento, risco hipercalemia significativo."</text></outputEntry>
      </rule>
      <rule id="Rule_Fallback">
        <inputEntry><text>-</text></inputEntry>
        <inputEntry><text>-</text></inputEntry>
        <inputEntry><text>-</text></inputEntry>
        <outputEntry><text>"OK"</text></outputEntry>
        <outputEntry><text>""</text></outputEntry>
        <outputEntry><text>""</text></outputEntry>
      </rule>
    </decisionTable>
  </decision>
</definitions>
