<?xml version="1.0" encoding="UTF-8"?>
<!-- ============================================================================
     DDI-HEPATO-005: Valproato + Outros Antiepilepticos - Hepatotoxicidade

     EVIDENCIA CLINICA:
     - FDA Drug Safety Communication - Valproate
     - Dreifuss FE et al. Neurology. 1987;37:379-85
     - Bryant AE, Dreifuss FE. Neurology. 1996;46:465-9

     MECANISMO: Valproato causa hepatotoxicidade idiossincrÃ¡tica (1:10.000-1:50.000).
     Politerapia com outros antiepilepticos (fenobarbital, fenitoina, carbamazepina)
     aumenta risco por inducao CYP450 e formacao de metabolitos toxicos.

     INCIDENCIA: Hepatotoxicidade fatal 1:500 em <2 anos + politerapia
     ============================================================================ -->
<definitions xmlns="https://www.omg.org/spec/DMN/20191111/MODEL/" xmlns:dmndi="https://www.omg.org/spec/DMN/20191111/DMNDI/" xmlns:dc="http://www.omg.org/spec/DMN/20180521/DC/" xmlns:di="http://www.omg.org/spec/DMN/20180521/DI/" id="DDI_HEPATO_005" name="DDI-HEPATO-005: Valproato + Antiepilepticos" namespace="http://camunda.org/schema/1.0/dmn">
  <decision id="ddi_hepato_005_decision" name="Valproato + Outros Antiepilepticos - Hepatotoxicidade">
    <decisionTable id="ddi_hepato_005_table" hitPolicy="FIRST">
      <input id="input_medicamentos_ativos" label="Medicamentos Ativos">
        <inputExpression id="input_expr_medicamentos" typeRef="string">
          <text>medicamentosAtivos</text>
        </inputExpression>
      </input>
      <input id="input_medicamento_novo" label="Medicamento Novo">
        <inputExpression id="input_expr_novo" typeRef="string">
          <text>medicamentoNovo</text>
        </inputExpression>
      </input>
      <input id="input_idade" label="Idade (anos)">
        <inputExpression id="input_expr_idade" typeRef="number">
          <text>idadePaciente</text>
        </inputExpression>
      </input>

      <output id="output_nivel_alerta" name="nivelAlerta" typeRef="string">
        <outputValues><text>"Alerta","Atencao","Informativo","OK"</text></outputValues>
      </output>
      <output id="output_acao_requerida" name="acaoRequerida" typeRef="string" />
      <output id="output_justificativa" name="justificativaCientifica" typeRef="string" />

      <!-- Rule 1: Valproato + Indutor enzimatico + Crianca <2 anos -->
      <rule id="rule_valproato_crianca">
        <inputEntry id="ie_valproato_ativo">
          <text>list contains(medicamentosAtivos, "VALPROATO") or list contains(medicamentosAtivos, "ACIDO_VALPROICO") or list contains(medicamentosAtivos, "DIVALPROATO")</text>
        </inputEntry>
        <inputEntry id="ie_indutor_novo">
          <text>"FENOBARBITAL" or "FENITOINA" or "CARBAMAZEPINA" or "PRIMIDONA"</text>
        </inputEntry>
        <inputEntry id="ie_idade_crianca">
          <text>&lt; 2</text>
        </inputEntry>
        <outputEntry id="oe_alerta_crianca"><text>"Alerta"</text></outputEntry>
        <outputEntry id="oe_acao_crianca"><text>"ALTO RISCO hepatotoxicidade fatal (1:500). FDA Black Box:&lt; 2 anos + politerapia = maior risco. EVITAR politerapia se possivel. Se necessario, monitorar TGO/TGP, amonia, coagulograma mensalmente. Considerar monoterapia com valproato ou alternativa."</text></outputEntry>
        <outputEntry id="oe_just_crianca"><text>"Criancas&lt; 2 anos em politerapia: hepatotoxicidade fatal 1:500 vs 1:50.000 em adultos monoterapia. Dreifuss FE, Neurology 1987."</text></outputEntry>
      </rule>

      <!-- Rule 2: Valproato + Indutor + Adulto -->
      <rule id="rule_valproato_adulto_indutor">
        <inputEntry id="ie_valproato_ativo2">
          <text>list contains(medicamentosAtivos, "VALPROATO") or list contains(medicamentosAtivos, "ACIDO_VALPROICO")</text>
        </inputEntry>
        <inputEntry id="ie_indutor_novo2">
          <text>"FENOBARBITAL" or "FENITOINA" or "CARBAMAZEPINA"</text>
        </inputEntry>
        <inputEntry id="ie_idade_adulto">
          <text>&gt;= 2</text>
        </inputEntry>
        <outputEntry id="oe_atencao_adulto"><text>"Atencao"</text></outputEntry>
        <outputEntry id="oe_acao_adulto"><text>"Politerapia aumenta risco hepatotoxicidade. Monitorar TGO/TGP e amonia antes, aos 3 meses e depois semestral. Orientar sinais de alerta (letargia, vomitos, ictericia, edema). Dosar nivel valproato (indutores reduzem nivel)."</text></outputEntry>
        <outputEntry id="oe_just_adulto"><text>"Indutores CYP aumentam metabolitos toxicos do valproato (4-en-VPA). Bryant AE, Neurology 1996."</text></outputEntry>
      </rule>

      <!-- Rule 3: Valproato + Lamotrigina -->
      <rule id="rule_valproato_lamotrigina">
        <inputEntry id="ie_valproato_ativo3">
          <text>list contains(medicamentosAtivos, "VALPROATO") or list contains(medicamentosAtivos, "ACIDO_VALPROICO")</text>
        </inputEntry>
        <inputEntry id="ie_lamotrigina">
          <text>"LAMOTRIGINA"</text>
        </inputEntry>
        <inputEntry id="ie_idade_any">
          <text>-</text>
        </inputEntry>
        <outputEntry id="oe_atencao_lamo"><text>"Atencao"</text></outputEntry>
        <outputEntry id="oe_acao_lamo"><text>"Valproato DUPLICA nivel de lamotrigina (inibe glucuronidacao). Risco Stevens-Johnson aumentado. Iniciar lamotrigina com METADE da dose e titular lentamente (25mg a cada 2 semanas). Vigiar rash cutaneo."</text></outputEntry>
        <outputEntry id="oe_just_lamo"><text>"Interacao farmacocinetica importante. Valproato inibe UGT1A4, dobrando meia-vida da lamotrigina."</text></outputEntry>
      </rule>

      <!-- Fallback Rule -->
      <rule id="Rule_Fallback">
        <inputEntry id="ie_fallback1"><text>-</text></inputEntry>
        <inputEntry id="ie_fallback2"><text>-</text></inputEntry>
        <inputEntry id="ie_fallback3"><text>-</text></inputEntry>
        <outputEntry id="oe_fallback1"><text>"OK"</text></outputEntry>
        <outputEntry id="oe_fallback2"><text>""</text></outputEntry>
        <outputEntry id="oe_fallback3"><text>""</text></outputEntry>
      </rule>
    </decisionTable>
  </decision>
</definitions>
