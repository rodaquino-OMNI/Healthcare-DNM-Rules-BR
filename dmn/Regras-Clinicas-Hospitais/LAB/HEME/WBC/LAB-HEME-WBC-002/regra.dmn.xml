<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="https://www.omg.org/spec/DMN/20191111/MODEL/" xmlns:dmndi="https://www.omg.org/spec/DMN/20191111/DMNDI/" xmlns:dc="http://www.omg.org/spec/DMN/20180521/DC/" xmlns:biodi="http://bpmn.io/schema/dmn/biodi/2.0" id="definitions_LAB-HEME-WBC-002" name="LAB-HEME-WBC-002" namespace="http://camunda.org/schema/1.0/dmn">
  <decision id="decision_LAB_HEME_WBC_002" name="Leucocitose Critica">
    <decisionTable id="decisionTable_LAB_HEME_WBC_002" hitPolicy="FIRST">
      <input id="input_leucocitos" label="Leucocitos (/uL)">
        <inputExpression id="inputExpression_leucocitos" typeRef="number">
          <text>leucocitos</text>
        </inputExpression>
      </input>
      <input id="input_blastos" label="Blastos no Sangue Periferico (%)">
        <inputExpression id="inputExpression_blastos" typeRef="number">
          <text>blastosSanguePeriferico</text>
        </inputExpression>
      </input>

      <output id="output_nivelAlerta" label="Nivel de Alerta" name="nivelAlerta" typeRef="string">
        <outputValues id="outputValues_nivelAlerta">
          <text>"Alerta","Atencao","OK"</text>
        </outputValues>
      </output>
      <output id="output_urgencia" label="Urgencia" name="urgencia" typeRef="string">
        <outputValues id="outputValues_urgencia">
          <text>"IMEDIATA","ALTA","MEDIA","BAIXA"</text>
        </outputValues>
      </output>
      <output id="output_classificacao" label="Classificacao" name="classificacao" typeRef="string" />
      <output id="output_tendencia" label="Tendencia" name="tendencia" typeRef="string" />
      <output id="output_acaoRequerida" label="Acao Requerida" name="acaoRequerida" typeRef="string" />
      <output id="output_justificativa" label="Justificativa Cientifica" name="justificativaCientifica" typeRef="string" />

      <!-- Hyperleukocytosis with blasts: Leukostasis emergency -->
      <rule id="rule_001">
        <inputEntry id="inputEntry_001_1">
          <text>&gt; 100000</text>
        </inputEntry>
        <inputEntry id="inputEntry_001_2">
          <text>&gt; 0</text>
        </inputEntry>
        <outputEntry id="outputEntry_001_1">
          <text>"Alerta"</text>
        </outputEntry>
        <outputEntry id="outputEntry_001_2">
          <text>"IMEDIATA"</text>
        </outputEntry>
        <outputEntry id="outputEntry_001_3">
          <text>"HIPERLEUCOCITOSE_LEUCEMIA"</text>
        </outputEntry>
        <outputEntry id="outputEntry_001_4">
          <text>"CRITICO_LEUCOSTASE"</text>
        </outputEntry>
        <outputEntry id="outputEntry_001_5">
          <text>"EMERGENCIA HEMATOLOGICA: Hiperleucocitose com blastos - RISCO DE LEUCOSTASE. Sintomas pulmonares (dispneia, hipoxia) e neurologicos (confusao, AVC) sao emergencias. Hidratacao vigorosa + alopurinol/rasburicase (prevencao lise tumoral). EVITAR transfusao de hemacias (aumenta viscosidade). Leucaferese de urgencia se sintomatico. Quimioterapia citorredutora urgente. Hematologista IMEDIATO."</text>
        </outputEntry>
        <outputEntry id="outputEntry_001_6">
          <text>"Hiperleucocitose (&gt;100.000/uL) com blastos causa leucostase - obstrucao microvascular por celulas leucemicas. Afeta principalmente pulmoes e cerebro. Mortalidade precoce de 20-40% sem tratamento. Leucaferese reduz contagem rapidamente enquanto quimioterapia e iniciada."</text>
        </outputEntry>
      </rule>

      <!-- Extreme leukocytosis without blasts: May indicate severe infection -->
      <rule id="rule_002">
        <inputEntry id="inputEntry_002_1">
          <text>&gt; 50000</text>
        </inputEntry>
        <inputEntry id="inputEntry_002_2">
          <text>0</text>
        </inputEntry>
        <outputEntry id="outputEntry_002_1">
          <text>"Alerta"</text>
        </outputEntry>
        <outputEntry id="outputEntry_002_2">
          <text>"ALTA"</text>
        </outputEntry>
        <outputEntry id="outputEntry_002_3">
          <text>"REACAO_LEUCEMOIDE"</text>
        </outputEntry>
        <outputEntry id="outputEntry_002_4">
          <text>"MUITO_ALTO"</text>
        </outputEntry>
        <outputEntry id="outputEntry_002_5">
          <text>"Leucocitose extrema sem blastos (reacao leucemoide). Investigar infeccao grave (sepse, abscesso), medicamentos (G-CSF, corticoides), neoplasias solidas, doencas mieloproliferativas cronicas. Esfregaco de sangue periferico obrigatorio. Cultura e investigacao de foco infeccioso."</text>
        </outputEntry>
        <outputEntry id="outputEntry_002_6">
          <text>"Leucocitose &gt;50.000 sem blastos (reacao leucemoide) geralmente indica infeccao grave, uso de G-CSF, ou doenca mieloproliferativa cronica. Diferenciacao de leucemia requer esfregaco e citometria de fluxo se duvida."</text>
        </outputEntry>
      </rule>

      <!-- Any blast presence in peripheral blood -->
      <rule id="rule_003">
        <inputEntry id="inputEntry_003_1">
          <text>-</text>
        </inputEntry>
        <inputEntry id="inputEntry_003_2">
          <text>&gt; 5</text>
        </inputEntry>
        <outputEntry id="outputEntry_003_1">
          <text>"Alerta"</text>
        </outputEntry>
        <outputEntry id="outputEntry_003_2">
          <text>"ALTA"</text>
        </outputEntry>
        <outputEntry id="outputEntry_003_3">
          <text>"BLASTOS_PERIFERICO"</text>
        </outputEntry>
        <outputEntry id="outputEntry_003_4">
          <text>"SUSPEITA_LEUCEMIA"</text>
        </outputEntry>
        <outputEntry id="outputEntry_003_5">
          <text>"Blastos em sangue periferico &gt;5%. SUSPEITA DE LEUCEMIA AGUDA. Esfregaco de sangue periferico urgente. Citometria de fluxo. Mielograma indicado. Notificar hematologista. Investigar CIVD concomitante. Prevencao de sindrome de lise tumoral."</text>
        </outputEntry>
        <outputEntry id="outputEntry_003_6">
          <text>"Presenca de blastos &gt;5% em sangue periferico e altamente sugestiva de leucemia aguda ate prova contraria. Diagnostico diferencial inclui reacao leucoeritroblastica (metastases medulares) e mielodisplasia. Investigacao hematologica urgente e mandatoria."</text>
        </outputEntry>
      </rule>

      <!-- Fallback -->
      <rule id="rule_fallback">
        <inputEntry id="inputEntry_fallback_1">
          <text>-</text>
        </inputEntry>
        <inputEntry id="inputEntry_fallback_2">
          <text>-</text>
        </inputEntry>
        <outputEntry id="outputEntry_fallback_1">
          <text>"OK"</text>
        </outputEntry>
        <outputEntry id="outputEntry_fallback_2">
          <text>"BAIXA"</text>
        </outputEntry>
        <outputEntry id="outputEntry_fallback_3">
          <text>"FORA_CRITERIO"</text>
        </outputEntry>
        <outputEntry id="outputEntry_fallback_4">
          <text>"NAO_APLICAVEL"</text>
        </outputEntry>
        <outputEntry id="outputEntry_fallback_5">
          <text>"Leucocitos nao atendem criterio de leucocitose critica desta regra."</text>
        </outputEntry>
        <outputEntry id="outputEntry_fallback_6">
          <text>"Esta regra monitora leucocitose critica (&gt;50.000/uL) e presenca de blastos."</text>
        </outputEntry>
      </rule>
    </decisionTable>
  </decision>
</definitions>
