<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="https://www.omg.org/spec/DMN/20191111/MODEL/" xmlns:dmndi="https://www.omg.org/spec/DMN/20191111/DMNDI/" xmlns:dc="http://www.omg.org/spec/DMN/20180521/DC/" xmlns:biodi="http://bpmn.io/schema/dmn/biodi/2.0" id="definitions_LAB-HEME-PLT-002" name="LAB-HEME-PLT-002" namespace="http://camunda.org/schema/1.0/dmn">
  <decision id="decision_LAB_HEME_PLT_002" name="Trombocitose Critica">
    <decisionTable id="decisionTable_LAB_HEME_PLT_002" hitPolicy="FIRST">
      <input id="input_plaquetas" label="Plaquetas (/uL)">
        <inputExpression id="inputExpression_plaquetas" typeRef="number">
          <text>plaquetas</text>
        </inputExpression>
      </input>
      <input id="input_sintomas_tromboticos" label="Sintomas Tromboticos">
        <inputExpression id="inputExpression_trombose" typeRef="boolean">
          <text>sintomasTromboticos</text>
        </inputExpression>
      </input>

      <output id="output_nivelAlerta" label="Nivel de Alerta" name="nivelAlerta" typeRef="string">
        <outputValues id="outputValues_nivelAlerta">
          <text>"Alerta","Atencao","OK"</text>
        </outputValues>
      </output>
      <output id="output_urgencia" label="Urgencia" name="urgencia" typeRef="string">
        <outputValues id="outputValues_urgencia">
          <text>"IMEDIATA","ALTA","MEDIA","BAIXA"</text>
        </outputValues>
      </output>
      <output id="output_classificacao" label="Classificacao" name="classificacao" typeRef="string" />
      <output id="output_tendencia" label="Tendencia" name="tendencia" typeRef="string" />
      <output id="output_acaoRequerida" label="Acao Requerida" name="acaoRequerida" typeRef="string" />
      <output id="output_justificativa" label="Justificativa Cientifica" name="justificativaCientifica" typeRef="string" />

      <!-- Extreme thrombocytosis with thrombotic symptoms -->
      <rule id="rule_001">
        <inputEntry id="inputEntry_001_1">
          <text>&gt; 1000000</text>
        </inputEntry>
        <inputEntry id="inputEntry_001_2">
          <text>true</text>
        </inputEntry>
        <outputEntry id="outputEntry_001_1">
          <text>"Alerta"</text>
        </outputEntry>
        <outputEntry id="outputEntry_001_2">
          <text>"IMEDIATA"</text>
        </outputEntry>
        <outputEntry id="outputEntry_001_3">
          <text>"EXTREMA_COM_TROMBOSE"</text>
        </outputEntry>
        <outputEntry id="outputEntry_001_4">
          <text>"TROMBOTICO_ATIVO"</text>
        </outputEntry>
        <outputEntry id="outputEntry_001_5">
          <text>"EMERGENCIA: Trombocitose extrema com trombose. Plaquetaferese URGENTE para citorredução rapida. Anticoagulacao se trombose documentada (cuidado com risco de sangramento paradoxal). AAS baixa dose controverso se PLT &gt;1.000.000 (doenca de von Willebrand adquirida). Hematologista IMEDIATO. Iniciar hidroxiureia para controle a medio prazo."</text>
        </outputEntry>
        <outputEntry id="outputEntry_001_6">
          <text>"Trombocitose extrema (&gt;1.000.000/uL) com sintomas tromboticos e emergencia. Paradoxalmente, plaquetas muito elevadas podem causar sangramento por doenca de von Willebrand adquirida (consumo de multimeros de vWF). Plaquetaferese reduz contagem rapidamente."</text>
        </outputEntry>
      </rule>

      <!-- Extreme thrombocytosis without symptoms -->
      <rule id="rule_002">
        <inputEntry id="inputEntry_002_1">
          <text>&gt; 1000000</text>
        </inputEntry>
        <inputEntry id="inputEntry_002_2">
          <text>false</text>
        </inputEntry>
        <outputEntry id="outputEntry_002_1">
          <text>"Alerta"</text>
        </outputEntry>
        <outputEntry id="outputEntry_002_2">
          <text>"ALTA"</text>
        </outputEntry>
        <outputEntry id="outputEntry_002_3">
          <text>"EXTREMA_ASSINTOMATICA"</text>
        </outputEntry>
        <outputEntry id="outputEntry_002_4">
          <text>"PERIGOSAMENTE_ALTO"</text>
        </outputEntry>
        <outputEntry id="outputEntry_002_5">
          <text>"Trombocitose extrema assintomatica. Alto risco de trombose e sangramento paradoxal. Investigar neoplasia mieloproliferativa (JAK2, CALR, MPL). Esfregaco de sangue periferico. Hematologista para avaliacao. Considerar hidroxiureia para citorredução. EVITAR AAS se PLT &gt;1.000.000 (risco de vWD adquirida)."</text>
        </outputEntry>
        <outputEntry id="outputEntry_002_6">
          <text>"Trombocitose extrema geralmente indica neoplasia mieloproliferativa (trombocitemia essencial, policitemia vera, mielofibrose). Mutacoes JAK2 V617F presentes em 50-60% dos casos. Risco de transformacao para leucemia."</text>
        </outputEntry>
      </rule>

      <!-- Severe thrombocytosis: 600k-1M -->
      <rule id="rule_003">
        <inputEntry id="inputEntry_003_1">
          <text>[600000..1000000]</text>
        </inputEntry>
        <inputEntry id="inputEntry_003_2">
          <text>-</text>
        </inputEntry>
        <outputEntry id="outputEntry_003_1">
          <text>"Atencao"</text>
        </outputEntry>
        <outputEntry id="outputEntry_003_2">
          <text>"ALTA"</text>
        </outputEntry>
        <outputEntry id="outputEntry_003_3">
          <text>"SEVERA_ALTA"</text>
        </outputEntry>
        <outputEntry id="outputEntry_003_4">
          <text>"MUITO_ALTO"</text>
        </outputEntry>
        <outputEntry id="outputEntry_003_5">
          <text>"Trombocitose severa. Diferenciar reativa vs clonal. Causas reativas: infeccao, inflamacao, deficiencia de ferro, pos-esplenectomia, neoplasia. Se persistente ou sem causa reativa evidente, investigar neoplasia mieloproliferativa (JAK2, BCR-ABL, esfregaco)."</text>
        </outputEntry>
        <outputEntry id="outputEntry_003_6">
          <text>"Trombocitose 600.000-1.000.000 pode ser reativa (infeccao, inflamacao, ferropenia) ou clonal (neoplasia mieloproliferativa). Trombocitose reativa raramente excede 1.000.000 e nao requer tratamento especifico alem da causa base."</text>
        </outputEntry>
      </rule>

      <!-- Fallback -->
      <rule id="rule_fallback">
        <inputEntry id="inputEntry_fallback_1">
          <text>-</text>
        </inputEntry>
        <inputEntry id="inputEntry_fallback_2">
          <text>-</text>
        </inputEntry>
        <outputEntry id="outputEntry_fallback_1">
          <text>"OK"</text>
        </outputEntry>
        <outputEntry id="outputEntry_fallback_2">
          <text>"BAIXA"</text>
        </outputEntry>
        <outputEntry id="outputEntry_fallback_3">
          <text>"FORA_CRITERIO"</text>
        </outputEntry>
        <outputEntry id="outputEntry_fallback_4">
          <text>"NAO_APLICAVEL"</text>
        </outputEntry>
        <outputEntry id="outputEntry_fallback_5">
          <text>"Plaquetas nao atendem criterio de trombocitose critica desta regra."</text>
        </outputEntry>
        <outputEntry id="outputEntry_fallback_6">
          <text>"Esta regra monitora trombocitose critica com plaquetas &gt;600.000/uL."</text>
        </outputEntry>
      </rule>
    </decisionTable>
  </decision>
</definitions>
