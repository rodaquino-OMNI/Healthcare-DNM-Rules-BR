<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="https://www.omg.org/spec/DMN/20191111/MODEL/" xmlns:dmndi="https://www.omg.org/spec/DMN/20191111/DMNDI/" xmlns:dc="http://www.omg.org/spec/DMN/20180521/DC/" xmlns:biodi="http://bpmn.io/schema/dmn/biodi/2.0" id="definitions_LAB-RENAL-CR-001" name="LAB-RENAL-CR-001" namespace="http://camunda.org/schema/1.0/dmn">
  <decision id="decision_LAB_RENAL_CR_001" name="Creatinina Critica - Elevacao Aguda">
    <decisionTable id="decisionTable_LAB_RENAL_CR_001" hitPolicy="FIRST">
      <input id="input_creatinina" label="Creatinina (mg/dL)">
        <inputExpression id="inputExpression_creatinina" typeRef="number">
          <text>creatinina</text>
        </inputExpression>
      </input>
      <input id="input_creatinina_basal" label="Creatinina Basal (mg/dL)">
        <inputExpression id="inputExpression_cr_basal" typeRef="number">
          <text>creatininaBasal</text>
        </inputExpression>
      </input>

      <output id="output_nivelAlerta" label="Nivel de Alerta" name="nivelAlerta" typeRef="string">
        <outputValues id="outputValues_nivelAlerta">
          <text>"Alerta","Atencao","OK"</text>
        </outputValues>
      </output>
      <output id="output_urgencia" label="Urgencia" name="urgencia" typeRef="string">
        <outputValues id="outputValues_urgencia">
          <text>"IMEDIATA","ALTA","MEDIA","BAIXA"</text>
        </outputValues>
      </output>
      <output id="output_classificacao" label="Classificacao" name="classificacao" typeRef="string" />
      <output id="output_tendencia" label="Tendencia" name="tendencia" typeRef="string" />
      <output id="output_acaoRequerida" label="Acao Requerida" name="acaoRequerida" typeRef="string" />
      <output id="output_justificativa" label="Justificativa Cientifica" name="justificativaCientifica" typeRef="string" />

      <!-- Critical creatinine elevation: >10 mg/dL - Dialysis threshold -->
      <rule id="rule_001">
        <inputEntry id="inputEntry_001_1">
          <text>&gt; 10.0</text>
        </inputEntry>
        <inputEntry id="inputEntry_001_2">
          <text>-</text>
        </inputEntry>
        <outputEntry id="outputEntry_001_1">
          <text>"Alerta"</text>
        </outputEntry>
        <outputEntry id="outputEntry_001_2">
          <text>"IMEDIATA"</text>
        </outputEntry>
        <outputEntry id="outputEntry_001_3">
          <text>"CRITICO_DIALISE"</text>
        </outputEntry>
        <outputEntry id="outputEntry_001_4">
          <text>"FALENCIA_RENAL"</text>
        </outputEntry>
        <outputEntry id="outputEntry_001_5">
          <text>"EMERGENCIA: Insuficiencia renal severa. Avaliar indicacoes de dialise de urgencia: hipercalemia refrataria, acidose metabolica severa, sobrecarga volemica (EAP), uremia sintomatica (encefalopatia, pericardite). Potassio e bicarbonato URGENTES. Suspender nefrotoxicos. Acesso vascular se dialise indicada. Nefrologista IMEDIATO."</text>
        </outputEntry>
        <outputEntry id="outputEntry_001_6">
          <text>"Creatinina &gt;10 mg/dL indica TFG &lt;10 ml/min (ESKD). Indicacoes absolutas de dialise: AEIOU (Acidose, Eletrólitos/hipercalemia, Intoxicacao, Overload/sobrecarga, Uremia sintomatica). Mortalidade sem dialise e alta."</text>
        </outputEntry>
      </rule>

      <!-- Severe acute elevation: >3x baseline (AKI Stage 3 by creatinine) -->
      <rule id="rule_002">
        <inputEntry id="inputEntry_002_1">
          <text>&gt; 4.0</text>
        </inputEntry>
        <inputEntry id="inputEntry_002_2">
          <text>&lt; 1.5</text>
        </inputEntry>
        <outputEntry id="outputEntry_002_1">
          <text>"Alerta"</text>
        </outputEntry>
        <outputEntry id="outputEntry_002_2">
          <text>"IMEDIATA"</text>
        </outputEntry>
        <outputEntry id="outputEntry_002_3">
          <text>"AKI_ESTAGIO_3"</text>
        </outputEntry>
        <outputEntry id="outputEntry_002_4">
          <text>"DETERIORACAO_RAPIDA"</text>
        </outputEntry>
        <outputEntry id="outputEntry_002_5">
          <text>"IRA KDIGO estagio 3 (elevacao &gt;3x basal). Investigar causa urgentemente: pre-renal (hipovolemia, sepse), renal intrínseco (NTA, GN, NIA), pos-renal (obstrução). USG renal urgente. Suspender TODOS nefrotoxicos (AINEs, aminoglicosideos, contraste). Otimizar volemia. Considerar avaliacao nefrologica para possível dialise."</text>
        </outputEntry>
        <outputEntry id="outputEntry_002_6">
          <text>"AKI estagio 3 KDIGO (Cr &gt;3x basal ou &gt;4.0 mg/dL ou necessidade de TRS) tem mortalidade intra-hospitalar de 30-50%. Recuperacao renal incompleta e comum. Intervencao precoce melhora desfechos."</text>
        </outputEntry>
      </rule>

      <!-- Moderate elevation: 2-3x baseline (AKI Stage 2) -->
      <rule id="rule_003">
        <inputEntry id="inputEntry_003_1">
          <text>[2.5..4.0]</text>
        </inputEntry>
        <inputEntry id="inputEntry_003_2">
          <text>&lt; 1.3</text>
        </inputEntry>
        <outputEntry id="outputEntry_003_1">
          <text>"Alerta"</text>
        </outputEntry>
        <outputEntry id="outputEntry_003_2">
          <text>"ALTA"</text>
        </outputEntry>
        <outputEntry id="outputEntry_003_3">
          <text>"AKI_ESTAGIO_2"</text>
        </outputEntry>
        <outputEntry id="outputEntry_003_4">
          <text>"SUBINDO_RAPIDO"</text>
        </outputEntry>
        <outputEntry id="outputEntry_003_5">
          <text>"IRA KDIGO estagio 2 (elevacao 2-3x basal). Suspender nefrotoxicos. Otimizar volemia (evitar hipo e hipervolemia). Monitorar diurese (alvo &gt;0.5 ml/kg/h). Potassio e gasometria. Avaliar necessidade de ajuste de dose de medicamentos renais."</text>
        </outputEntry>
        <outputEntry id="outputEntry_003_6">
          <text>"AKI estagio 2 pode progredir rapidamente para estagio 3. Intervencao precoce com otimização hemodinamica e suspensao de nefrotoxicos pode prevenir progressao. Monitoramento frequente de funcao renal e mandatorio."</text>
        </outputEntry>
      </rule>

      <!-- High absolute creatinine without known baseline -->
      <rule id="rule_004">
        <inputEntry id="inputEntry_004_1">
          <text>&gt; 5.0</text>
        </inputEntry>
        <inputEntry id="inputEntry_004_2">
          <text>-</text>
        </inputEntry>
        <outputEntry id="outputEntry_004_1">
          <text>"Alerta"</text>
        </outputEntry>
        <outputEntry id="outputEntry_004_2">
          <text>"ALTA"</text>
        </outputEntry>
        <outputEntry id="outputEntry_004_3">
          <text>"IR_SEVERA"</text>
        </outputEntry>
        <outputEntry id="outputEntry_004_4">
          <text>"MUITO_ALTO"</text>
        </outputEntry>
        <outputEntry id="outputEntry_004_5">
          <text>"Creatinina severamente elevada. Diferenciar IRA vs DRC: tamanho renal ao USG, anemia, disturbios osseos, historico. Se IRA, investigar causa. Se DRC conhecida, avaliar agudizacao. Potassio, bicarbonato, hemograma. Nefrologista."</text>
        </outputEntry>
        <outputEntry id="outputEntry_004_6">
          <text>"Creatinina &gt;5 mg/dL indica TFG &lt;15 ml/min (DRC G5 ou IRA severa). Diferenciacao entre aguda e cronica orienta tratamento e prognostico. Rins pequenos sugerem cronicidade."</text>
        </outputEntry>
      </rule>

      <!-- Fallback -->
      <rule id="rule_fallback">
        <inputEntry id="inputEntry_fallback_1">
          <text>-</text>
        </inputEntry>
        <inputEntry id="inputEntry_fallback_2">
          <text>-</text>
        </inputEntry>
        <outputEntry id="outputEntry_fallback_1">
          <text>"OK"</text>
        </outputEntry>
        <outputEntry id="outputEntry_fallback_2">
          <text>"BAIXA"</text>
        </outputEntry>
        <outputEntry id="outputEntry_fallback_3">
          <text>"FORA_CRITERIO"</text>
        </outputEntry>
        <outputEntry id="outputEntry_fallback_4">
          <text>"NAO_APLICAVEL"</text>
        </outputEntry>
        <outputEntry id="outputEntry_fallback_5">
          <text>"Creatinina nao atende criterio critico desta regra."</text>
        </outputEntry>
        <outputEntry id="outputEntry_fallback_6">
          <text>"Esta regra monitora creatinina critica (&gt;4 mg/dL ou elevacao &gt;2x basal)."</text>
        </outputEntry>
      </rule>
    </decisionTable>
  </decision>
</definitions>
