<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="https://www.omg.org/spec/DMN/20191111/MODEL/" xmlns:dmndi="https://www.omg.org/spec/DMN/20191111/DMNDI/" xmlns:dc="http://www.omg.org/spec/DMN/20180521/DC/" xmlns:biodi="http://bpmn.io/schema/dmn/biodi/2.0" id="definitions_LAB-RENAL-CR-002" name="LAB-RENAL-CR-002" namespace="http://camunda.org/schema/1.0/dmn">
  <decision id="decision_LAB_RENAL_CR_002" name="Creatinina - Tendencia de Elevacao">
    <decisionTable id="decisionTable_LAB_RENAL_CR_002" hitPolicy="FIRST">
      <input id="input_creatinina" label="Creatinina Atual (mg/dL)">
        <inputExpression id="inputExpression_creatinina" typeRef="number">
          <text>creatininaAtual</text>
        </inputExpression>
      </input>
      <input id="input_creatinina_24h" label="Creatinina 24h Antes (mg/dL)">
        <inputExpression id="inputExpression_cr_24h" typeRef="number">
          <text>creatinina24h</text>
        </inputExpression>
      </input>
      <input id="input_diurese" label="Diurese nas Ultimas 6h (ml/kg/h)">
        <inputExpression id="inputExpression_diurese" typeRef="number">
          <text>diurese6h</text>
        </inputExpression>
      </input>

      <output id="output_nivelAlerta" label="Nivel de Alerta" name="nivelAlerta" typeRef="string">
        <outputValues id="outputValues_nivelAlerta">
          <text>"Alerta","Atencao","OK"</text>
        </outputValues>
      </output>
      <output id="output_urgencia" label="Urgencia" name="urgencia" typeRef="string">
        <outputValues id="outputValues_urgencia">
          <text>"IMEDIATA","ALTA","MEDIA","BAIXA"</text>
        </outputValues>
      </output>
      <output id="output_classificacao" label="Classificacao" name="classificacao" typeRef="string" />
      <output id="output_tendencia" label="Tendencia" name="tendencia" typeRef="string" />
      <output id="output_acaoRequerida" label="Acao Requerida" name="acaoRequerida" typeRef="string" />
      <output id="output_justificativa" label="Justificativa Cientifica" name="justificativaCientifica" typeRef="string" />

      <!-- Rapid rise with oliguria: AKI progressing -->
      <rule id="rule_001">
        <inputEntry id="inputEntry_001_1">
          <text>-</text>
        </inputEntry>
        <inputEntry id="inputEntry_001_2">
          <text>-</text>
        </inputEntry>
        <inputEntry id="inputEntry_001_3">
          <text>&lt; 0.3</text>
        </inputEntry>
        <outputEntry id="outputEntry_001_1">
          <text>"Alerta"</text>
        </outputEntry>
        <outputEntry id="outputEntry_001_2">
          <text>"IMEDIATA"</text>
        </outputEntry>
        <outputEntry id="outputEntry_001_3">
          <text>"OLIGURIA_SEVERA"</text>
        </outputEntry>
        <outputEntry id="outputEntry_001_4">
          <text>"CRITICO_ANURICO"</text>
        </outputEntry>
        <outputEntry id="outputEntry_001_5">
          <text>"EMERGENCIA: Oliguria severa (&lt;0.3 ml/kg/h por &gt;6h = AKI KDIGO 3 por diurese). Excluir obstrucao (sonda vesical, USG). Se pre-renal, desafio de volume com monitorizacao. Se ja euvolemico, considerar furosemida IV. Nefrologista URGENTE - dialise pode ser necessaria. Monitorar potassio."</text>
        </outputEntry>
        <outputEntry id="outputEntry_001_6">
          <text>"Oliguria &lt;0.3 ml/kg/h por &gt;6h define AKI KDIGO estagio 3 independente da creatinina. Predictor forte de necessidade de dialise e mortalidade. Intervencao imediata pode prevenir progressao para anuria."</text>
        </outputEntry>
      </rule>

      <!-- Rapid rise >0.5 mg/dL in 24h: Early AKI detection -->
      <rule id="rule_002">
        <inputEntry id="inputEntry_002_1">
          <text>&gt; 1.5</text>
        </inputEntry>
        <inputEntry id="inputEntry_002_2">
          <text>&lt; 1.0</text>
        </inputEntry>
        <inputEntry id="inputEntry_002_3">
          <text>-</text>
        </inputEntry>
        <outputEntry id="outputEntry_002_1">
          <text>"Alerta"</text>
        </outputEntry>
        <outputEntry id="outputEntry_002_2">
          <text>"ALTA"</text>
        </outputEntry>
        <outputEntry id="outputEntry_002_3">
          <text>"ELEVACAO_AGUDA"</text>
        </outputEntry>
        <outputEntry id="outputEntry_002_4">
          <text>"SUBINDO_RAPIDO"</text>
        </outputEntry>
        <outputEntry id="outputEntry_002_5">
          <text>"IRA em evolucao. Elevacao &gt;0.5 mg/dL em 24-48h sugere injuria aguda. Suspender TODOS nefrotoxicos AGORA. Revisar medicamentos recentes (AINEs, aminoglicosideos, IECA/BRA, contraste). Otimizar volemia. Investigar causa. Repetir creatinina em 12-24h."</text>
        </outputEntry>
        <outputEntry id="outputEntry_002_6">
          <text>"Elevacao de creatinina &gt;0.3 mg/dL em 48h ou &gt;0.5 mg/dL em menos tempo define AKI KDIGO estagio 1. Deteccao precoce e intervencao podem prevenir progressao. Creatinina e marcador tardio - injuria ja ocorreu."</text>
        </outputEntry>
      </rule>

      <!-- Moderate oliguria: <0.5 ml/kg/h -->
      <rule id="rule_003">
        <inputEntry id="inputEntry_003_1">
          <text>-</text>
        </inputEntry>
        <inputEntry id="inputEntry_003_2">
          <text>-</text>
        </inputEntry>
        <inputEntry id="inputEntry_003_3">
          <text>[0.3..0.5]</text>
        </inputEntry>
        <outputEntry id="outputEntry_003_1">
          <text>"Atencao"</text>
        </outputEntry>
        <outputEntry id="outputEntry_003_2">
          <text>"ALTA"</text>
        </outputEntry>
        <outputEntry id="outputEntry_003_3">
          <text>"OLIGURIA_MODERADA"</text>
        </outputEntry>
        <outputEntry id="outputEntry_003_4">
          <text>"BAIXO"</text>
        </outputEntry>
        <outputEntry id="outputEntry_003_5">
          <text>"Oliguria moderada (0.3-0.5 ml/kg/h = AKI KDIGO 2 por diurese). Avaliar status volemico. Se hipovolemico, ressuscitacao com cristaloide. Se euvolemico/hipervolemico, considerar diuretico de alca. Monitorar resposta. Excluir obstrucao."</text>
        </outputEntry>
        <outputEntry id="outputEntry_003_6">
          <text>"Diurese 0.3-0.5 ml/kg/h por &gt;6h define AKI KDIGO estagio 2. Intervencao neste ponto pode prevenir progressao para oliguria severa e necessidade de dialise."</text>
        </outputEntry>
      </rule>

      <!-- Rising trend: >0.3 mg/dL increase in 48h -->
      <rule id="rule_004">
        <inputEntry id="inputEntry_004_1">
          <text>-</text>
        </inputEntry>
        <inputEntry id="inputEntry_004_2">
          <text>-</text>
        </inputEntry>
        <inputEntry id="inputEntry_004_3">
          <text>[0.5..1.0]</text>
        </inputEntry>
        <outputEntry id="outputEntry_004_1">
          <text>"Atencao"</text>
        </outputEntry>
        <outputEntry id="outputEntry_004_2">
          <text>"MEDIA"</text>
        </outputEntry>
        <outputEntry id="outputEntry_004_3">
          <text>"DIURESE_BAIXA"</text>
        </outputEntry>
        <outputEntry id="outputEntry_004_4">
          <text>"DIMINUINDO"</text>
        </outputEntry>
        <outputEntry id="outputEntry_004_5">
          <text>"Diurese no limite inferior (&lt;1 ml/kg/h = AKI KDIGO 1 por diurese se &gt;6h). Monitorar tendencia. Otimizar volemia e perfusao. Evitar nefrotoxicos. Repetir avaliacao em 6h."</text>
        </outputEntry>
        <outputEntry id="outputEntry_004_6">
          <text>"Diurese &lt;0.5 ml/kg/h por 6-12h define AKI KDIGO estagio 1. Deteccao por diurese pode preceder elevacao de creatinina em horas a dias."</text>
        </outputEntry>
      </rule>

      <!-- Fallback -->
      <rule id="rule_fallback">
        <inputEntry id="inputEntry_fallback_1">
          <text>-</text>
        </inputEntry>
        <inputEntry id="inputEntry_fallback_2">
          <text>-</text>
        </inputEntry>
        <inputEntry id="inputEntry_fallback_3">
          <text>-</text>
        </inputEntry>
        <outputEntry id="outputEntry_fallback_1">
          <text>"OK"</text>
        </outputEntry>
        <outputEntry id="outputEntry_fallback_2">
          <text>"BAIXA"</text>
        </outputEntry>
        <outputEntry id="outputEntry_fallback_3">
          <text>"FORA_CRITERIO"</text>
        </outputEntry>
        <outputEntry id="outputEntry_fallback_4">
          <text>"NAO_APLICAVEL"</text>
        </outputEntry>
        <outputEntry id="outputEntry_fallback_5">
          <text>"Parametros nao atendem criterio de tendencia de IRA desta regra."</text>
        </outputEntry>
        <outputEntry id="outputEntry_fallback_6">
          <text>"Esta regra monitora tendencia de IRA por creatinina e diurese (KDIGO)."</text>
        </outputEntry>
      </rule>
    </decisionTable>
  </decision>
</definitions>
