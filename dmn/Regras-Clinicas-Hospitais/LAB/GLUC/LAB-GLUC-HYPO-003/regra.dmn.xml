<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="https://www.omg.org/spec/DMN/20191111/MODEL/" xmlns:dmndi="https://www.omg.org/spec/DMN/20191111/DMNDI/" xmlns:dc="http://www.omg.org/spec/DMN/20180521/DC/" xmlns:biodi="http://bpmn.io/schema/dmn/biodi/2.0" id="definitions_LAB-GLUC-HYPO-003" name="LAB-GLUC-HYPO-003" namespace="http://camunda.org/schema/1.0/dmn">
  <decision id="decision_LAB_GLUC_HYPO_003" name="Hipoglicemia Leve">
    <decisionTable id="decisionTable_LAB_GLUC_HYPO_003" hitPolicy="FIRST">
      <input id="input_glicemia" label="Glicemia (mg/dL)">
        <inputExpression id="inputExpression_glicemia" typeRef="number">
          <text>glicemia</text>
        </inputExpression>
      </input>

      <output id="output_nivelAlerta" label="Nível de Alerta" name="nivelAlerta" typeRef="string">
        <outputValues id="outputValues_nivelAlerta">
          <text>"Atencao","OK"</text>
        </outputValues>
      </output>
      <output id="output_urgencia" label="Urgência" name="urgencia" typeRef="string">
        <outputValues id="outputValues_urgencia">
          <text>"URGENTE","ROTINA"</text>
        </outputValues>
      </output>
      <output id="output_classificacao" label="Classificação" name="classificacao" typeRef="string" />
      <output id="output_tendencia" label="Tendência" name="tendencia" typeRef="string" />
      <output id="output_acaoRequerida" label="Ação Requerida" name="acaoRequerida" typeRef="string" />
      <output id="output_justificativa" label="Justificativa Científica" name="justificativaCientifica" typeRef="string" />

      <!-- Mild hypoglycemia: glucose 54-69 mg/dL -->
      <rule id="rule_001">
        <inputEntry id="inputEntry_001_1">
          <text>[54..70)</text>
        </inputEntry>
        <outputEntry id="outputEntry_001_1">
          <text>"Atencao"</text>
        </outputEntry>
        <outputEntry id="outputEntry_001_2">
          <text>"URGENTE"</text>
        </outputEntry>
        <outputEntry id="outputEntry_001_3">
          <text>"LEVE"</text>
        </outputEntry>
        <outputEntry id="outputEntry_001_4">
          <text>"BAIXO"</text>
        </outputEntry>
        <outputEntry id="outputEntry_001_5">
          <text>"Administrar 15g de carboidrato de ação rápida via oral. Verificar glicemia após 15 minutos. Revisar esquema de insulina e horário das refeições. Documentar episódio. Considerar ajuste terapêutico para prevenir recorrência."</text>
        </outputEntry>
        <outputEntry id="outputEntry_001_6">
          <text>"Hipoglicemia leve (54-69 mg/dL) ativa respostas contra-regulatórias (glucagon, cortisol, epinefrina). ADA 2024 define como clinicamente importante, requerendo tratamento imediato e revisão do esquema terapêutico para prevenir hipoglicemias mais severas."</text>
        </outputEntry>
      </rule>

      <!-- Fallback: Normal range (>=70 mg/dL) -->
      <rule id="rule_fallback">
        <inputEntry id="inputEntry_fallback_1">
          <text>-</text>
        </inputEntry>
        <outputEntry id="outputEntry_fallback_1">
          <text>"OK"</text>
        </outputEntry>
        <outputEntry id="outputEntry_fallback_2">
          <text>"ROTINA"</text>
        </outputEntry>
        <outputEntry id="outputEntry_fallback_3">
          <text>"ROTINA"</text>
        </outputEntry>
        <outputEntry id="outputEntry_fallback_4">
          <text>"NAO_APLICAVEL"</text>
        </outputEntry>
        <outputEntry id="outputEntry_fallback_5">
          <text>"Glicemia dentro da faixa normal (>=70 mg/dL). Manter monitoramento de rotina conforme protocolo institucional."</text>
        </outputEntry>
        <outputEntry id="outputEntry_fallback_6">
          <text>"Glicemia >=70 mg/dL é considerada dentro da faixa de segurança para a maioria dos pacientes. ADA 2024 define hipoglicemia como &lt;70 mg/dL em pacientes com diabetes."</text>
        </outputEntry>
      </rule>
    </decisionTable>
  </decision>
</definitions>
