<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="https://www.omg.org/spec/DMN/20191111/MODEL/" xmlns:dmndi="https://www.omg.org/spec/DMN/20191111/DMNDI/" xmlns:dc="http://www.omg.org/spec/DMN/20180521/DC/" xmlns:biodi="http://bpmn.io/schema/dmn/biodi/2.0" id="definitions_LAB-ELECTRO-NA-002" name="LAB-ELECTRO-NA-002" namespace="http://camunda.org/schema/1.0/dmn">
  <decision id="decision_LAB_ELECTRO_NA_002" name="Hipernatremia Critica">
    <decisionTable id="decisionTable_LAB_ELECTRO_NA_002" hitPolicy="FIRST">
      <input id="input_sodio" label="Sodio (mEq/L)">
        <inputExpression id="inputExpression_sodio" typeRef="number">
          <text>sodio</text>
        </inputExpression>
      </input>
      <input id="input_sodio_anterior" label="Sodio Anterior (mEq/L)">
        <inputExpression id="inputExpression_sodio_anterior" typeRef="number">
          <text>sodioAnterior</text>
        </inputExpression>
      </input>

      <output id="output_nivelAlerta" label="Nivel de Alerta" name="nivelAlerta" typeRef="string">
        <outputValues id="outputValues_nivelAlerta">
          <text>"Alerta","Atencao","OK"</text>
        </outputValues>
      </output>
      <output id="output_urgencia" label="Urgencia" name="urgencia" typeRef="string">
        <outputValues id="outputValues_urgencia">
          <text>"IMEDIATA","ALTA","MEDIA","BAIXA"</text>
        </outputValues>
      </output>
      <output id="output_classificacao" label="Classificacao" name="classificacao" typeRef="string" />
      <output id="output_tendencia" label="Tendencia" name="tendencia" typeRef="string" />
      <output id="output_acaoRequerida" label="Acao Requerida" name="acaoRequerida" typeRef="string" />
      <output id="output_justificativa" label="Justificativa Cientifica" name="justificativaCientifica" typeRef="string" />

      <!-- Critical hypernatremia: Na >160 mEq/L - Risk of severe dehydration and neurological damage -->
      <rule id="rule_001">
        <inputEntry id="inputEntry_001_1">
          <text>&gt; 160</text>
        </inputEntry>
        <inputEntry id="inputEntry_001_2">
          <text>-</text>
        </inputEntry>
        <outputEntry id="outputEntry_001_1">
          <text>"Alerta"</text>
        </outputEntry>
        <outputEntry id="outputEntry_001_2">
          <text>"IMEDIATA"</text>
        </outputEntry>
        <outputEntry id="outputEntry_001_3">
          <text>"CRITICO_ALTO"</text>
        </outputEntry>
        <outputEntry id="outputEntry_001_4">
          <text>"PERIGOSAMENTE_ALTO"</text>
        </outputEntry>
        <outputEntry id="outputEntry_001_5">
          <text>"EMERGENCIA: Hipernatremia severa. Avaliar status neurologico. Iniciar reposicao hidrica com solucao hipotonica (D5W ou NaCl 0.45%). Correcao gradual: max 10-12 mEq/L em 24h para evitar edema cerebral. Monitorar sodio a cada 2-4h. Investigar causa: diabetes insipidus, perdas insenssiveis, desidratacao. Notificar intensivista."</text>
        </outputEntry>
        <outputEntry id="outputEntry_001_6">
          <text>"Hipernatremia severa (&gt;160 mEq/L) causa desidratacao cerebral, hemorragia intracraniana, convulsoes e coma. Correcao rapida demais pode causar edema cerebral. Taxa maxima de correcao: 10-12 mEq/L em 24h. Mortalidade aumenta significativamente com Na &gt;160."</text>
        </outputEntry>
      </rule>

      <!-- Severe hypernatremia: 155-160 mEq/L -->
      <rule id="rule_002">
        <inputEntry id="inputEntry_002_1">
          <text>[155..160]</text>
        </inputEntry>
        <inputEntry id="inputEntry_002_2">
          <text>-</text>
        </inputEntry>
        <outputEntry id="outputEntry_002_1">
          <text>"Alerta"</text>
        </outputEntry>
        <outputEntry id="outputEntry_002_2">
          <text>"ALTA"</text>
        </outputEntry>
        <outputEntry id="outputEntry_002_3">
          <text>"SEVERO_ALTO"</text>
        </outputEntry>
        <outputEntry id="outputEntry_002_4">
          <text>"MUITO_ALTO"</text>
        </outputEntry>
        <outputEntry id="outputEntry_002_5">
          <text>"Avaliar hidratacao e status neurologico. Iniciar reposicao hidrica controlada. Investigar causas: acesso inadequado a agua, diabetes insipidus, perdas GI. Monitorar sodio a cada 4-6h. Calcular deficit de agua livre."</text>
        </outputEntry>
        <outputEntry id="outputEntry_002_6">
          <text>"Hipernatremia 155-160 mEq/L indica desidratacao significativa. Risco de alteracoes neurologicas permanentes se nao tratada. Correcao deve ser gradual para evitar edema cerebral iatrogeno."</text>
        </outputEntry>
      </rule>

      <!-- Rapid rise pattern (>12 mEq/L in 24h estimated) -->
      <rule id="rule_003">
        <inputEntry id="inputEntry_003_1">
          <text>&gt; 145</text>
        </inputEntry>
        <inputEntry id="inputEntry_003_2">
          <text>&lt; 133</text>
        </inputEntry>
        <outputEntry id="outputEntry_003_1">
          <text>"Alerta"</text>
        </outputEntry>
        <outputEntry id="outputEntry_003_2">
          <text>"ALTA"</text>
        </outputEntry>
        <outputEntry id="outputEntry_003_3">
          <text>"VARIACAO_RAPIDA"</text>
        </outputEntry>
        <outputEntry id="outputEntry_003_4">
          <text>"SUBINDO_RAPIDO"</text>
        </outputEntry>
        <outputEntry id="outputEntry_003_5">
          <text>"Variacao rapida de sodio detectada. Avaliar causa da elevacao rapida. Risco de desmielinizacao osmotica se sodio subiu muito rapido de hiponatremia. Considerar pausa na correcao ou administracao de agua livre."</text>
        </outputEntry>
        <outputEntry id="outputEntry_003_6">
          <text>"Elevacao rapida de sodio (&gt;12 mEq/L/24h) pode indicar correcao excessiva de hiponatremia ou desidratacao aguda. Ambas situacoes requerem atencao para prevenir sequelas neurologicas."</text>
        </outputEntry>
      </rule>

      <!-- Fallback -->
      <rule id="rule_fallback">
        <inputEntry id="inputEntry_fallback_1">
          <text>-</text>
        </inputEntry>
        <inputEntry id="inputEntry_fallback_2">
          <text>-</text>
        </inputEntry>
        <outputEntry id="outputEntry_fallback_1">
          <text>"OK"</text>
        </outputEntry>
        <outputEntry id="outputEntry_fallback_2">
          <text>"BAIXA"</text>
        </outputEntry>
        <outputEntry id="outputEntry_fallback_3">
          <text>"FORA_CRITERIO"</text>
        </outputEntry>
        <outputEntry id="outputEntry_fallback_4">
          <text>"NAO_APLICAVEL"</text>
        </outputEntry>
        <outputEntry id="outputEntry_fallback_5">
          <text>"Sodio nao atende criterio de hipernatremia critica desta regra."</text>
        </outputEntry>
        <outputEntry id="outputEntry_fallback_6">
          <text>"Esta regra monitora hipernatremia critica &gt;155 mEq/L e variacoes rapidas de sodio."</text>
        </outputEntry>
      </rule>
    </decisionTable>
  </decision>
</definitions>
