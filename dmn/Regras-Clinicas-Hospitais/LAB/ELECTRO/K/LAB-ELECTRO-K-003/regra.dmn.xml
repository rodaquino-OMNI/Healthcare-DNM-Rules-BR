<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="https://www.omg.org/spec/DMN/20191111/MODEL/" xmlns:dmndi="https://www.omg.org/spec/DMN/20191111/DMNDI/" xmlns:dc="http://www.omg.org/spec/DMN/20180521/DC/" xmlns:biodi="http://bpmn.io/schema/dmn/biodi/2.0" id="definitions_LAB-ELECTRO-K-003" name="LAB-ELECTRO-K-003" namespace="http://camunda.org/schema/1.0/dmn">
  <decision id="decision_LAB_ELECTRO_K_003" name="Potássio Alterado - Atenção">
    <decisionTable id="decisionTable_LAB_ELECTRO_K_003" hitPolicy="FIRST">
      <input id="input_potassio" label="Potássio (mEq/L)">
        <inputExpression id="inputExpression_potassio" typeRef="number">
          <text>potassio</text>
        </inputExpression>
      </input>

      <output id="output_nivelAlerta" label="Nível de Alerta" name="nivelAlerta" typeRef="string">
        <outputValues id="outputValues_nivelAlerta">
          <text>"Alerta","Atencao","OK"</text>
        </outputValues>
      </output>
      <output id="output_urgencia" label="Urgência" name="urgencia" typeRef="string">
        <outputValues id="outputValues_urgencia">
          <text>"IMEDIATA","ALTA","MEDIA","BAIXA"</text>
        </outputValues>
      </output>
      <output id="output_classificacao" label="Classificação" name="classificacao" typeRef="string" />
      <output id="output_tendencia" label="Tendência" name="tendencia" typeRef="string" />
      <output id="output_acaoRequerida" label="Ação Requerida" name="acaoRequerida" typeRef="string" />
      <output id="output_justificativa" label="Justificativa Científica" name="justificativaCientifica" typeRef="string" />

      <!-- Moderate hypokalemia: 2.5-3.4 mEq/L -->
      <rule id="rule_001">
        <inputEntry id="inputEntry_001_1">
          <text>[2.5..3.4]</text>
        </inputEntry>
        <outputEntry id="outputEntry_001_1">
          <text>"Atencao"</text>
        </outputEntry>
        <outputEntry id="outputEntry_001_2">
          <text>"ALTA"</text>
        </outputEntry>
        <outputEntry id="outputEntry_001_3">
          <text>"MODERADO_BAIXO"</text>
        </outputEntry>
        <outputEntry id="outputEntry_001_4">
          <text>"BAIXO"</text>
        </outputEntry>
        <outputEntry id="outputEntry_001_5">
          <text>"Reposição de potássio oral ou IV conforme protocolo. Investigar causas: diuréticos, diarreia, hiperaldosteronismo. Verificar magnésio (hipomagnesemia dificulta correção). Repetir dosagem em 24h. Avaliar necessidade de ECG se sintomas ou cardiopata."</text>
        </outputEntry>
        <outputEntry id="outputEntry_001_6">
          <text>"Hipocalemia moderada (2.5-3.4 mEq/L) aumenta risco de arritmias, especialmente em cardiopatas, pacientes em uso de digitálicos ou com hipomagnesemia concomitante. Reposição previne progressão para níveis críticos."</text>
        </outputEntry>
      </rule>

      <!-- Moderate hyperkalemia: 5.6-6.4 mEq/L -->
      <rule id="rule_002">
        <inputEntry id="inputEntry_002_1">
          <text>[5.6..6.4]</text>
        </inputEntry>
        <outputEntry id="outputEntry_002_1">
          <text>"Atencao"</text>
        </outputEntry>
        <outputEntry id="outputEntry_002_2">
          <text>"ALTA"</text>
        </outputEntry>
        <outputEntry id="outputEntry_002_3">
          <text>"MODERADO_ALTO"</text>
        </outputEntry>
        <outputEntry id="outputEntry_002_4">
          <text>"ALTO"</text>
        </outputEntry>
        <outputEntry id="outputEntry_002_5">
          <text>"ECG para avaliar alterações. Suspender fontes de K+: suplementos, IECAs, diuréticos poupadores. Avaliar função renal. Considerar resina trocadora ou diuréticos de alça. Repetir dosagem em 4-6h. Notificar se alterações ECG ou progressão."</text>
        </outputEntry>
        <outputEntry id="outputEntry_002_6">
          <text>"Hipercalemia moderada (5.6-6.4 mEq/L) pode causar alterações ECG iniciais (ondas T apiculadas, encurtamento QT) e pode progredir rapidamente para níveis críticos, especialmente em insuficiência renal ou uso de medicações que retêm potássio."</text>
        </outputEntry>
      </rule>

      <!-- Fallback -->
      <rule id="rule_fallback">
        <inputEntry id="inputEntry_fallback_1">
          <text>-</text>
        </inputEntry>
        <outputEntry id="outputEntry_fallback_1">
          <text>"OK"</text>
        </outputEntry>
        <outputEntry id="outputEntry_fallback_2">
          <text>"BAIXA"</text>
        </outputEntry>
        <outputEntry id="outputEntry_fallback_3">
          <text>"FORA_CRITERIO"</text>
        </outputEntry>
        <outputEntry id="outputEntry_fallback_4">
          <text>"NAO_APLICAVEL"</text>
        </outputEntry>
        <outputEntry id="outputEntry_fallback_5">
          <text>"Potássio não atende critério de alteração moderada desta regra."</text>
        </outputEntry>
        <outputEntry id="outputEntry_fallback_6">
          <text>"Esta regra monitora potássio moderadamente alterado (2.5-3.4 ou 5.6-6.4 mEq/L)."</text>
        </outputEntry>
      </rule>
    </decisionTable>
  </decision>
</definitions>
