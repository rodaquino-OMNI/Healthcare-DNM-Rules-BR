<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="https://www.omg.org/spec/DMN/20191111/MODEL/" xmlns:dmndi="https://www.omg.org/spec/DMN/20191111/DMNDI/" xmlns:dc="http://www.omg.org/spec/DMN/20180521/DC/" xmlns:biodi="http://bpmn.io/schema/dmn/biodi/2.0" id="definitions_LAB-CARDIAC-BNP-001" name="LAB-CARDIAC-BNP-001" namespace="http://camunda.org/schema/1.0/dmn">
  <decision id="decision_LAB_CARDIAC_BNP_001" name="BNP/NT-proBNP Elevado - Insuficiencia Cardiaca">
    <decisionTable id="decisionTable_LAB_CARDIAC_BNP_001" hitPolicy="FIRST">
      <input id="input_bnp" label="BNP (pg/mL) ou NT-proBNP (pg/mL)">
        <inputExpression id="inputExpression_bnp" typeRef="number">
          <text>peptideoNatriuretico</text>
        </inputExpression>
      </input>
      <input id="input_tipo_peptideo" label="Tipo de Peptideo">
        <inputExpression id="inputExpression_tipo" typeRef="string">
          <text>tipoPeptideo</text>
        </inputExpression>
      </input>
      <input id="input_dispneia" label="Dispneia Aguda">
        <inputExpression id="inputExpression_dispneia" typeRef="boolean">
          <text>dispneiaAguda</text>
        </inputExpression>
      </input>

      <output id="output_nivelAlerta" label="Nivel de Alerta" name="nivelAlerta" typeRef="string">
        <outputValues id="outputValues_nivelAlerta">
          <text>"Alerta","Atencao","OK"</text>
        </outputValues>
      </output>
      <output id="output_urgencia" label="Urgencia" name="urgencia" typeRef="string">
        <outputValues id="outputValues_urgencia">
          <text>"IMEDIATA","ALTA","MEDIA","BAIXA"</text>
        </outputValues>
      </output>
      <output id="output_classificacao" label="Classificacao" name="classificacao" typeRef="string" />
      <output id="output_tendencia" label="Tendencia" name="tendencia" typeRef="string" />
      <output id="output_acaoRequerida" label="Acao Requerida" name="acaoRequerida" typeRef="string" />
      <output id="output_justificativa" label="Justificativa Cientifica" name="justificativaCientifica" typeRef="string" />

      <!-- Critical BNP with acute dyspnea: Acute decompensated HF -->
      <rule id="rule_001">
        <inputEntry id="inputEntry_001_1">
          <text>&gt; 500</text>
        </inputEntry>
        <inputEntry id="inputEntry_001_2">
          <text>"BNP"</text>
        </inputEntry>
        <inputEntry id="inputEntry_001_3">
          <text>true</text>
        </inputEntry>
        <outputEntry id="outputEntry_001_1">
          <text>"Alerta"</text>
        </outputEntry>
        <outputEntry id="outputEntry_001_2">
          <text>"IMEDIATA"</text>
        </outputEntry>
        <outputEntry id="outputEntry_001_3">
          <text>"IC_DESCOMPENSADA_AGUDA"</text>
        </outputEntry>
        <outputEntry id="outputEntry_001_4">
          <text>"CONGESTAO_SEVERA"</text>
        </outputEntry>
        <outputEntry id="outputEntry_001_5">
          <text>"IC descompensada aguda muito provavel (BNP &gt;500 + dispneia). Diuretico de alca IV (furosemida 40-80mg). Oxigenio se hipoxia. VNI se necessario. Ecocardiograma urgente. Monitorar resposta diuretica. Identificar fator precipitante: isquemia, arritmia, infeccao, nao-adesao."</text>
        </outputEntry>
        <outputEntry id="outputEntry_001_6">
          <text>"BNP &gt;500 pg/mL em contexto de dispneia aguda tem VPP &gt;90% para IC descompensada. Niveis correlacionam com gravidade e prognostico. BNP guiado pode otimizar manejo."</text>
        </outputEntry>
      </rule>

      <!-- Critical NT-proBNP with acute dyspnea -->
      <rule id="rule_002">
        <inputEntry id="inputEntry_002_1">
          <text>&gt; 1800</text>
        </inputEntry>
        <inputEntry id="inputEntry_002_2">
          <text>"NT-proBNP"</text>
        </inputEntry>
        <inputEntry id="inputEntry_002_3">
          <text>true</text>
        </inputEntry>
        <outputEntry id="outputEntry_002_1">
          <text>"Alerta"</text>
        </outputEntry>
        <outputEntry id="outputEntry_002_2">
          <text>"IMEDIATA"</text>
        </outputEntry>
        <outputEntry id="outputEntry_002_3">
          <text>"IC_DESCOMPENSADA_AGUDA"</text>
        </outputEntry>
        <outputEntry id="outputEntry_002_4">
          <text>"CONGESTAO_SEVERA"</text>
        </outputEntry>
        <outputEntry id="outputEntry_002_5">
          <text>"IC descompensada aguda muito provavel (NT-proBNP &gt;1800 + dispneia). Mesmo manejo: diuretico IV, oxigenio, VNI se necessario. Ecocardiograma. Considerar corte ajustado para idade (&gt;50 anos: &gt;900, &gt;75 anos: &gt;1800)."</text>
        </outputEntry>
        <outputEntry id="outputEntry_002_6">
          <text>"NT-proBNP tem meia-vida mais longa que BNP (120 vs 20 min). Cortes ajustados por idade: &lt;50 anos &gt;450, 50-75 anos &gt;900, &gt;75 anos &gt;1800 pg/mL para diagnostico de IC aguda."</text>
        </outputEntry>
      </rule>

      <!-- Very high BNP without acute symptoms: Severe chronic HF or other -->
      <rule id="rule_003">
        <inputEntry id="inputEntry_003_1">
          <text>&gt; 1000</text>
        </inputEntry>
        <inputEntry id="inputEntry_003_2">
          <text>"BNP"</text>
        </inputEntry>
        <inputEntry id="inputEntry_003_3">
          <text>false</text>
        </inputEntry>
        <outputEntry id="outputEntry_003_1">
          <text>"Alerta"</text>
        </outputEntry>
        <outputEntry id="outputEntry_003_2">
          <text>"ALTA"</text>
        </outputEntry>
        <outputEntry id="outputEntry_003_3">
          <text>"IC_SEVERA_CRONICA"</text>
        </outputEntry>
        <outputEntry id="outputEntry_003_4">
          <text>"MUITO_ELEVADO"</text>
        </outputEntry>
        <outputEntry id="outputEntry_003_5">
          <text>"BNP muito elevado sem dispneia aguda. Pode indicar IC severa compensada ou outras causas: TEP, hipertensao pulmonar, DRC (clearance reduzido). Ecocardiograma para avaliacao estrutural e funcional. Otimizar terapia de IC."</text>
        </outputEntry>
        <outputEntry id="outputEntry_003_6">
          <text>"BNP &gt;1000 pg/mL indica doenca cardiaca estrutural significativa mesmo sem sintomas agudos. Prognostico adverso a longo prazo. Outras causas de elevacao: TEP, hipertensao pulmonar, sepse, DRC."</text>
        </outputEntry>
      </rule>

      <!-- Intermediate elevation: Gray zone -->
      <rule id="rule_004">
        <inputEntry id="inputEntry_004_1">
          <text>[100..500]</text>
        </inputEntry>
        <inputEntry id="inputEntry_004_2">
          <text>"BNP"</text>
        </inputEntry>
        <inputEntry id="inputEntry_004_3">
          <text>true</text>
        </inputEntry>
        <outputEntry id="outputEntry_004_1">
          <text>"Atencao"</text>
        </outputEntry>
        <outputEntry id="outputEntry_004_2">
          <text>"ALTA"</text>
        </outputEntry>
        <outputEntry id="outputEntry_004_3">
          <text>"ZONA_CINZA"</text>
        </outputEntry>
        <outputEntry id="outputEntry_004_4">
          <text>"INTERMEDIARIO"</text>
        </outputEntry>
        <outputEntry id="outputEntry_004_5">
          <text>"BNP em zona cinza (100-500). IC possivel mas nao definitivo. Considerar outros diagnosticos: DPOC, TEP, obesidade. Ecocardiograma para avaliacao. Se duvida, tratar empiricamente IC e observar resposta."</text>
        </outputEntry>
        <outputEntry id="outputEntry_004_6">
          <text>"BNP 100-500 pg/mL tem valor preditivo intermediario. Sensibilidade alta mas especificidade limitada. Integracao com clinica, ECG e ecocardiograma necessaria. Obesidade pode reduzir BNP (clearance aumentado)."</text>
        </outputEntry>
      </rule>

      <!-- Fallback -->
      <rule id="rule_fallback">
        <inputEntry id="inputEntry_fallback_1">
          <text>-</text>
        </inputEntry>
        <inputEntry id="inputEntry_fallback_2">
          <text>-</text>
        </inputEntry>
        <inputEntry id="inputEntry_fallback_3">
          <text>-</text>
        </inputEntry>
        <outputEntry id="outputEntry_fallback_1">
          <text>"OK"</text>
        </outputEntry>
        <outputEntry id="outputEntry_fallback_2">
          <text>"BAIXA"</text>
        </outputEntry>
        <outputEntry id="outputEntry_fallback_3">
          <text>"FORA_CRITERIO"</text>
        </outputEntry>
        <outputEntry id="outputEntry_fallback_4">
          <text>"NAO_APLICAVEL"</text>
        </outputEntry>
        <outputEntry id="outputEntry_fallback_5">
          <text>"Peptideo natriuretico nao atende criterio critico desta regra."</text>
        </outputEntry>
        <outputEntry id="outputEntry_fallback_6">
          <text>"Esta regra monitora BNP &gt;100 pg/mL ou NT-proBNP elevado para IC."</text>
        </outputEntry>
      </rule>
    </decisionTable>
  </decision>
</definitions>
