<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="https://www.omg.org/spec/DMN/20191111/MODEL/" xmlns:dmndi="https://www.omg.org/spec/DMN/20191111/DMNDI/" xmlns:dc="http://www.omg.org/spec/DMN/20180521/DC/" xmlns:biodi="http://bpmn.io/schema/dmn/biodi/2.0" id="definitions_LAB-CARDIAC-TNI-001" name="LAB-CARDIAC-TNI-001" namespace="http://camunda.org/schema/1.0/dmn">
  <decision id="decision_LAB_CARDIAC_TNI_001" name="Troponina Elevada - Injuria Miocardica">
    <decisionTable id="decisionTable_LAB_CARDIAC_TNI_001" hitPolicy="FIRST">
      <input id="input_troponina" label="Troponina I ou T (ng/mL)">
        <inputExpression id="inputExpression_troponina" typeRef="number">
          <text>troponina</text>
        </inputExpression>
      </input>
      <input id="input_dor_toracica" label="Dor Toracica Tipica">
        <inputExpression id="inputExpression_dor" typeRef="boolean">
          <text>dorToracicaTipica</text>
        </inputExpression>
      </input>
      <input id="input_alteracao_ecg" label="Alteracao Isquemica no ECG">
        <inputExpression id="inputExpression_ecg" typeRef="boolean">
          <text>alteracaoIsquemicaECG</text>
        </inputExpression>
      </input>

      <output id="output_nivelAlerta" label="Nivel de Alerta" name="nivelAlerta" typeRef="string">
        <outputValues id="outputValues_nivelAlerta">
          <text>"Alerta","Atencao","OK"</text>
        </outputValues>
      </output>
      <output id="output_urgencia" label="Urgencia" name="urgencia" typeRef="string">
        <outputValues id="outputValues_urgencia">
          <text>"IMEDIATA","ALTA","MEDIA","BAIXA"</text>
        </outputValues>
      </output>
      <output id="output_classificacao" label="Classificacao" name="classificacao" typeRef="string" />
      <output id="output_tendencia" label="Tendencia" name="tendencia" typeRef="string" />
      <output id="output_acaoRequerida" label="Acao Requerida" name="acaoRequerida" typeRef="string" />
      <output id="output_justificativa" label="Justificativa Cientifica" name="justificativaCientifica" typeRef="string" />

      <!-- STEMI equivalent: High troponin + symptoms + ECG changes -->
      <rule id="rule_001">
        <inputEntry id="inputEntry_001_1">
          <text>&gt; 0.5</text>
        </inputEntry>
        <inputEntry id="inputEntry_001_2">
          <text>true</text>
        </inputEntry>
        <inputEntry id="inputEntry_001_3">
          <text>true</text>
        </inputEntry>
        <outputEntry id="outputEntry_001_1">
          <text>"Alerta"</text>
        </outputEntry>
        <outputEntry id="outputEntry_001_2">
          <text>"IMEDIATA"</text>
        </outputEntry>
        <outputEntry id="outputEntry_001_3">
          <text>"IAMCSST_PROVAVEL"</text>
        </outputEntry>
        <outputEntry id="outputEntry_001_4">
          <text>"IAM_ATIVO"</text>
        </outputEntry>
        <outputEntry id="outputEntry_001_5">
          <text>"EMERGENCIA CARDIOLOGICA: IAM muito provavel. Se supra de ST: ativar CODIGO INFARTO. Cineangiocoronariografia URGENTE (alvo porta-balao &lt;90min ou porta-agulha &lt;30min para fibrinolise). AAS 300mg + clopidogrel 300-600mg. Heparina. Morfina se dor refrataria. Cardiologista IMEDIATO."</text>
        </outputEntry>
        <outputEntry id="outputEntry_001_6">
          <text>"Troponina elevada + dor toracica tipica + alteracao ECG isquemica constitui triade diagnostica de IAM. Cada minuto de atraso na reperfusao aumenta mortalidade. Meta: porta-balao &lt;90min em IAMCSST."</text>
        </outputEntry>
      </rule>

      <!-- NSTEMI: High troponin with symptoms -->
      <rule id="rule_002">
        <inputEntry id="inputEntry_002_1">
          <text>&gt; 0.1</text>
        </inputEntry>
        <inputEntry id="inputEntry_002_2">
          <text>true</text>
        </inputEntry>
        <inputEntry id="inputEntry_002_3">
          <text>-</text>
        </inputEntry>
        <outputEntry id="outputEntry_002_1">
          <text>"Alerta"</text>
        </outputEntry>
        <outputEntry id="outputEntry_002_2">
          <text>"IMEDIATA"</text>
        </outputEntry>
        <outputEntry id="outputEntry_002_3">
          <text>"IAMSSST"</text>
        </outputEntry>
        <outputEntry id="outputEntry_002_4">
          <text>"INJURIA_AGUDA"</text>
        </outputEntry>
        <outputEntry id="outputEntry_002_5">
          <text>"IAM sem supra de ST (IAMSSST). Estratificacao de risco (GRACE, TIMI). Anticoagulacao + dupla antiagregacao. Cinecoronariografia em &lt;24h se alto risco (GRACE &gt;140), &lt;72h se risco intermediario. UCO para monitoramento. Ecocardiograma."</text>
        </outputEntry>
        <outputEntry id="outputEntry_002_6">
          <text>"IAMSSST (troponina + sintomas sem supra ST) tem mortalidade significativa. Estratificacao de risco determina timing de estrategia invasiva. Alto risco (instabilidade, arritmias, IC) requer cateterismo imediato."</text>
        </outputEntry>
      </rule>

      <!-- Elevated troponin without typical symptoms: Type 2 MI or other causes -->
      <rule id="rule_003">
        <inputEntry id="inputEntry_003_1">
          <text>&gt; 0.04</text>
        </inputEntry>
        <inputEntry id="inputEntry_003_2">
          <text>false</text>
        </inputEntry>
        <inputEntry id="inputEntry_003_3">
          <text>-</text>
        </inputEntry>
        <outputEntry id="outputEntry_003_1">
          <text>"Alerta"</text>
        </outputEntry>
        <outputEntry id="outputEntry_003_2">
          <text>"ALTA"</text>
        </outputEntry>
        <outputEntry id="outputEntry_003_3">
          <text>"INJURIA_MIOCARDICA"</text>
        </outputEntry>
        <outputEntry id="outputEntry_003_4">
          <text>"ELEVADO"</text>
        </outputEntry>
        <outputEntry id="outputEntry_003_5">
          <text>"Troponina elevada sem sintomas tipicos. Considerar IAM tipo 2 (desbalanco oferta/demanda): sepse, anemia, taquiarritmia, hipotensao. Outras causas: miocardite, TEP, IC descompensada, DRC (clearance reduzido). ECG seriado. Investigar e tratar causa base."</text>
        </outputEntry>
        <outputEntry id="outputEntry_003_6">
          <text>"Troponina elevada sem contexto de SCA pode indicar IAM tipo 2 (injuria por desbalanco O2) ou injuria miocardica nao isquemica. Prognostico depende da causa. Troponina cronicamente elevada em DRC nao exclui evento agudo."</text>
        </outputEntry>
      </rule>

      <!-- Mildly elevated troponin: Serial testing needed -->
      <rule id="rule_004">
        <inputEntry id="inputEntry_004_1">
          <text>[0.01..0.04]</text>
        </inputEntry>
        <inputEntry id="inputEntry_004_2">
          <text>-</text>
        </inputEntry>
        <inputEntry id="inputEntry_004_3">
          <text>-</text>
        </inputEntry>
        <outputEntry id="outputEntry_004_1">
          <text>"Atencao"</text>
        </outputEntry>
        <outputEntry id="outputEntry_004_2">
          <text>"ALTA"</text>
        </outputEntry>
        <outputEntry id="outputEntry_004_3">
          <text>"TROPONINA_BORDERLINE"</text>
        </outputEntry>
        <outputEntry id="outputEntry_004_4">
          <text>"MONITORAR"</text>
        </outputEntry>
        <outputEntry id="outputEntry_004_5">
          <text>"Troponina levemente elevada. Necessita TROPONINA SERIADA (repetir em 3-6h). Variacao &gt;20% sugere evento agudo. ECG seriado. Manter em observacao. Se curva ascendente + clinica compativel: tratar como SCA."</text>
        </outputEntry>
        <outputEntry id="outputEntry_004_6">
          <text>"Troponinas de alta sensibilidade detectam elevacoes minimas. Cinetica da curva e fundamental: elevacao dinamica (&gt;20% em 3-6h) sugere evento agudo vs nivel cronicamente elevado (DRC, IC cronica)."</text>
        </outputEntry>
      </rule>

      <!-- Fallback -->
      <rule id="rule_fallback">
        <inputEntry id="inputEntry_fallback_1">
          <text>-</text>
        </inputEntry>
        <inputEntry id="inputEntry_fallback_2">
          <text>-</text>
        </inputEntry>
        <inputEntry id="inputEntry_fallback_3">
          <text>-</text>
        </inputEntry>
        <outputEntry id="outputEntry_fallback_1">
          <text>"OK"</text>
        </outputEntry>
        <outputEntry id="outputEntry_fallback_2">
          <text>"BAIXA"</text>
        </outputEntry>
        <outputEntry id="outputEntry_fallback_3">
          <text>"FORA_CRITERIO"</text>
        </outputEntry>
        <outputEntry id="outputEntry_fallback_4">
          <text>"NAO_APLICAVEL"</text>
        </outputEntry>
        <outputEntry id="outputEntry_fallback_5">
          <text>"Troponina nao atende criterio critico desta regra."</text>
        </outputEntry>
        <outputEntry id="outputEntry_fallback_6">
          <text>"Esta regra monitora troponina elevada &gt;0.01 ng/mL (limite superior da normalidade)."</text>
        </outputEntry>
      </rule>
    </decisionTable>
  </decision>
</definitions>
