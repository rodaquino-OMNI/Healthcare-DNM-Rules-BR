<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="https://www.omg.org/spec/DMN/20191111/MODEL/" xmlns:dmndi="https://www.omg.org/spec/DMN/20191111/DMNDI/" xmlns:dc="http://www.omg.org/spec/DMN/20180521/DC/" xmlns:biodi="http://bpmn.io/schema/dmn/biodi/2.0" id="definitions_LAB-CARDIAC-LAC-001" name="LAB-CARDIAC-LAC-001" namespace="http://camunda.org/schema/1.0/dmn">
  <decision id="decision_LAB_CARDIAC_LAC_001" name="Lactato Elevado - Hipoperfusao Tecidual">
    <decisionTable id="decisionTable_LAB_CARDIAC_LAC_001" hitPolicy="FIRST">
      <input id="input_lactato" label="Lactato (mmol/L)">
        <inputExpression id="inputExpression_lactato" typeRef="number">
          <text>lactato</text>
        </inputExpression>
      </input>
      <input id="input_pressao_arterial" label="Pressao Arterial Media (mmHg)">
        <inputExpression id="inputExpression_pam" typeRef="number">
          <text>pressaoArterialMedia</text>
        </inputExpression>
      </input>
      <input id="input_lactato_anterior" label="Lactato Anterior (mmol/L)">
        <inputExpression id="inputExpression_lactato_ant" typeRef="number">
          <text>lactatoAnterior</text>
        </inputExpression>
      </input>

      <output id="output_nivelAlerta" label="Nivel de Alerta" name="nivelAlerta" typeRef="string">
        <outputValues id="outputValues_nivelAlerta">
          <text>"Alerta","Atencao","OK"</text>
        </outputValues>
      </output>
      <output id="output_urgencia" label="Urgencia" name="urgencia" typeRef="string">
        <outputValues id="outputValues_urgencia">
          <text>"IMEDIATA","ALTA","MEDIA","BAIXA"</text>
        </outputValues>
      </output>
      <output id="output_classificacao" label="Classificacao" name="classificacao" typeRef="string" />
      <output id="output_tendencia" label="Tendencia" name="tendencia" typeRef="string" />
      <output id="output_acaoRequerida" label="Acao Requerida" name="acaoRequerida" typeRef="string" />
      <output id="output_justificativa" label="Justificativa Cientifica" name="justificativaCientifica" typeRef="string" />

      <!-- Severely elevated lactate with hypotension: Shock -->
      <rule id="rule_001">
        <inputEntry id="inputEntry_001_1">
          <text>&gt; 4.0</text>
        </inputEntry>
        <inputEntry id="inputEntry_001_2">
          <text>&lt; 65</text>
        </inputEntry>
        <inputEntry id="inputEntry_001_3">
          <text>-</text>
        </inputEntry>
        <outputEntry id="outputEntry_001_1">
          <text>"Alerta"</text>
        </outputEntry>
        <outputEntry id="outputEntry_001_2">
          <text>"IMEDIATA"</text>
        </outputEntry>
        <outputEntry id="outputEntry_001_3">
          <text>"CHOQUE"</text>
        </outputEntry>
        <outputEntry id="outputEntry_001_4">
          <text>"HIPOPERFUSAO_SEVERA"</text>
        </outputEntry>
        <outputEntry id="outputEntry_001_5">
          <text>"EMERGENCIA: Choque com hipoperfusao tecidual. Ressuscitacao hemodinamica IMEDIATA. Acesso venoso calibroso. Volume inicial 30ml/kg se hipovolemico. Se nao responde: vasopressor (noradrenalina alvo PAM &gt;65). Identificar e tratar causa: septico, cardiogenico, hemorragico, obstrutivo. UTI. Monitorar lactato a cada 2-4h - clearance &gt;10%/h e bom prognostico."</text>
        </outputEntry>
        <outputEntry id="outputEntry_001_6">
          <text>"Lactato &gt;4 mmol/L + hipotensao (PAM &lt;65) define choque com metabolismo anaerobio por hipoperfusao. Mortalidade &gt;40% se nao revertido. Clearance de lactato e marcador de resposta ao tratamento e prognostico."</text>
        </outputEntry>
      </rule>

      <!-- High lactate with normal BP: Cryptic shock or other cause -->
      <rule id="rule_002">
        <inputEntry id="inputEntry_002_1">
          <text>&gt; 4.0</text>
        </inputEntry>
        <inputEntry id="inputEntry_002_2">
          <text>&gt;= 65</text>
        </inputEntry>
        <inputEntry id="inputEntry_002_3">
          <text>-</text>
        </inputEntry>
        <outputEntry id="outputEntry_002_1">
          <text>"Alerta"</text>
        </outputEntry>
        <outputEntry id="outputEntry_002_2">
          <text>"ALTA"</text>
        </outputEntry>
        <outputEntry id="outputEntry_002_3">
          <text>"HIPERLACTATEMIA_SEVERA"</text>
        </outputEntry>
        <outputEntry id="outputEntry_002_4">
          <text>"CRITICO_COMPENSADO"</text>
        </outputEntry>
        <outputEntry id="outputEntry_002_5">
          <text>"Lactato &gt;4 com PA preservada: considerar choque criptico (hipoperfusao regional com PA mantida), convulsoes, uso de metformina/antiretrovirais, isquemia mesenterica, cetoacidose. Repetir lactato em 2-4h. Gasometria para avaliar acidose. Investigar ativamente."</text>
        </outputEntry>
        <outputEntry id="outputEntry_002_6">
          <text>"Lactato elevado com PA normal pode indicar choque criptico (hipoperfusao oculta), producao aumentada (convulsao, exercicio, catecolaminas) ou clearance reduzido (hepatopatia). Gasometria ajuda: acidose sugere hipoperfusao."</text>
        </outputEntry>
      </rule>

      <!-- Rising lactate trend: Early warning -->
      <rule id="rule_003">
        <inputEntry id="inputEntry_003_1">
          <text>[2.0..4.0]</text>
        </inputEntry>
        <inputEntry id="inputEntry_003_2">
          <text>-</text>
        </inputEntry>
        <inputEntry id="inputEntry_003_3">
          <text>&lt; 1.5</text>
        </inputEntry>
        <outputEntry id="outputEntry_003_1">
          <text>"Alerta"</text>
        </outputEntry>
        <outputEntry id="outputEntry_003_2">
          <text>"ALTA"</text>
        </outputEntry>
        <outputEntry id="outputEntry_003_3">
          <text>"LACTATO_SUBINDO"</text>
        </outputEntry>
        <outputEntry id="outputEntry_003_4">
          <text>"TENDENCIA_DETERIORACAO"</text>
        </outputEntry>
        <outputEntry id="outputEntry_003_5">
          <text>"Lactato em ascensao rapida - sinal de alerta precoce. Reavaliar hemodinamica: PA, FC, perfusao periferica, diurese. Se sepse: antibioticos e ressuscitacao. Otimizar oferta de O2. Repetir lactato em 2h. Meta: normalizacao ou queda &gt;10%/2h."</text>
        </outputEntry>
        <outputEntry id="outputEntry_003_6">
          <text>"Tendencia ascendente de lactato (duplicando ou mais) e sinal de alarme mesmo com valor absoluto intermediario. Indica deterioracao em curso. Intervencao precoce pode prevenir choque franco."</text>
        </outputEntry>
      </rule>

      <!-- Moderate elevation: Monitor -->
      <rule id="rule_004">
        <inputEntry id="inputEntry_004_1">
          <text>[2.0..4.0]</text>
        </inputEntry>
        <inputEntry id="inputEntry_004_2">
          <text>-</text>
        </inputEntry>
        <inputEntry id="inputEntry_004_3">
          <text>-</text>
        </inputEntry>
        <outputEntry id="outputEntry_004_1">
          <text>"Atencao"</text>
        </outputEntry>
        <outputEntry id="outputEntry_004_2">
          <text>"ALTA"</text>
        </outputEntry>
        <outputEntry id="outputEntry_004_3">
          <text>"HIPERLACTATEMIA_MODERADA"</text>
        </outputEntry>
        <outputEntry id="outputEntry_004_4">
          <text>"ELEVADO"</text>
        </outputEntry>
        <outputEntry id="outputEntry_004_5">
          <text>"Lactato moderadamente elevado. Avaliar perfusao clinicamente. Causas possiveis: hipoperfusao regional, sepse precoce, uso de adrenalina/catecolaminas, insuficiencia hepatica. Otimizar hemodinamica. Repetir lactato em 2-4h."</text>
        </outputEntry>
        <outputEntry id="outputEntry_004_6">
          <text>"Lactato 2-4 mmol/L indica stress metabolico. Em sepse, mesmo lactato 2-4 com PA normal (sepse sem choque) tem mortalidade de 20-30%. Surviving Sepsis recomenda monitorar e tentar normalizar."</text>
        </outputEntry>
      </rule>

      <!-- Fallback -->
      <rule id="rule_fallback">
        <inputEntry id="inputEntry_fallback_1">
          <text>-</text>
        </inputEntry>
        <inputEntry id="inputEntry_fallback_2">
          <text>-</text>
        </inputEntry>
        <inputEntry id="inputEntry_fallback_3">
          <text>-</text>
        </inputEntry>
        <outputEntry id="outputEntry_fallback_1">
          <text>"OK"</text>
        </outputEntry>
        <outputEntry id="outputEntry_fallback_2">
          <text>"BAIXA"</text>
        </outputEntry>
        <outputEntry id="outputEntry_fallback_3">
          <text>"FORA_CRITERIO"</text>
        </outputEntry>
        <outputEntry id="outputEntry_fallback_4">
          <text>"NAO_APLICAVEL"</text>
        </outputEntry>
        <outputEntry id="outputEntry_fallback_5">
          <text>"Lactato nao atende criterio critico desta regra."</text>
        </outputEntry>
        <outputEntry id="outputEntry_fallback_6">
          <text>"Esta regra monitora lactato &gt;2 mmol/L como marcador de hipoperfusao."</text>
        </outputEntry>
      </rule>
    </decisionTable>
  </decision>
</definitions>
