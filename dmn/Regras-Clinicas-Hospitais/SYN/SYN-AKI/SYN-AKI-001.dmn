<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="https://www.omg.org/spec/DMN/20191111/MODEL/"
             xmlns:dmndi="https://www.omg.org/spec/DMN/20191111/DMNDI/"
             xmlns:dc="http://www.omg.org/spec/DMN/20180521/DC/"
             id="Definitions_SYN_AKI_001"
             name="Deteccao de Lesao Renal Aguda - Creatinina"
             targetNamespace="http://camunda.org/schema/1.0/dmn">

  <!--
    SYN-AKI-001 - Deteccao de Lesao Renal Aguda (AKI) via Creatinina
    Versao: 1.0.0 (2026-02-06)
    Categoria: Alerta Clinico - Sindromes Criticas

    CRITERIOS KDIGO 2012 (Kidney Disease: Improving Global Outcomes):

    ESTAGIO 1 (Risco):
    - Creatinina 1.5-1.9x acima do basal OU
    - Aumento >= 0.3 mg/dL em 48 horas

    ESTAGIO 2 (Lesao):
    - Creatinina 2.0-2.9x acima do basal

    ESTAGIO 3 (Falencia):
    - Creatinina >= 3.0x acima do basal OU
    - Creatinina >= 4.0 mg/dL OU
    - Inicio de terapia renal substitutiva

    ACOES CLINICAS:
    - Estagio 1: Suspender nefrotoxicos, otimizar volemia
    - Estagio 2: Consulta nefrologia, monitorar a cada 12h
    - Estagio 3: Nefrologia urgente, preparar dialise

    REFERENCIAS:
    - KDIGO Clinical Practice Guideline for AKI (2012)
    - NICE Guideline NG148 (2019)
    - Sociedade Brasileira de Nefrologia
  -->

  <decision id="Decision_SYN_AKI_001" name="Deteccao AKI Creatinina">
    <decisionTable id="DecisionTable_SYN_AKI_001" hitPolicy="FIRST">

      <!-- INPUT 1: Creatinina Atual -->
      <input id="Input_1" label="Creatinina Atual (mg/dL)">
        <inputExpression id="InputExpression_1" typeRef="number">
          <text>creatininaAtual</text>
        </inputExpression>
      </input>

      <!-- INPUT 2: Creatinina Basal -->
      <input id="Input_2" label="Creatinina Basal (mg/dL)">
        <inputExpression id="InputExpression_2" typeRef="number">
          <text>creatininaBasal</text>
        </inputExpression>
      </input>

      <!-- INPUT 3: Variacao em 48h -->
      <input id="Input_3" label="Variacao Creatinina 48h (mg/dL)">
        <inputExpression id="InputExpression_3" typeRef="number">
          <text>variacaoCreatinina48h</text>
        </inputExpression>
      </input>

      <!-- INPUT 4: Dialise Iniciada -->
      <input id="Input_4" label="Dialise Iniciada">
        <inputExpression id="InputExpression_4" typeRef="boolean">
          <text>dialiseIniciada</text>
        </inputExpression>
      </input>

      <!-- OUTPUTS -->
      <output id="Output_1" label="Nivel Alerta" name="nivelAlerta" typeRef="string">
        <outputValues id="OutputValues_1">
          <text>"Alerta", "Atencao", "OK", "Revisar"</text>
        </outputValues>
      </output>

      <output id="Output_2" label="Classificacao Sindrome" name="classificacaoSindrome" typeRef="string"/>

      <output id="Output_3" label="Protocolo Ativado" name="protocoloAtivado" typeRef="boolean"/>

      <output id="Output_4" label="Acao Requerida" name="acaoRequerida" typeRef="string"/>

      <output id="Output_5" label="Urgencia" name="urgencia" typeRef="string">
        <outputValues id="OutputValues_5">
          <text>"CRITICA", "ALTA", "MEDIA", "BAIXA"</text>
        </outputValues>
      </output>

      <!-- RULE 1: AKI Estagio 3 - Dialise -->
      <rule id="Rule_AKI_Estagio3_Dialise">
        <description>AKI Estagio 3 KDIGO - Inicio de dialise</description>
        <inputEntry id="InputEntry_1_1">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_1_2">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_1_3">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_1_4">
          <text>true</text>
        </inputEntry>
        <outputEntry id="OutputEntry_1_1">
          <text>"Alerta"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_1_2">
          <text>"AKI_ESTAGIO_3_DIALISE"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_1_3">
          <text>true</text>
        </outputEntry>
        <outputEntry id="OutputEntry_1_4">
          <text>"AKI ESTAGIO 3 KDIGO - Dialise iniciada. Monitorar balanco hidrico rigoroso, eletroliticos a cada 6h, ajustar doses de medicamentos para funcao renal. Manter acompanhamento nefrologico intensivo."</text>
        </outputEntry>
        <outputEntry id="OutputEntry_1_5">
          <text>"CRITICA"</text>
        </outputEntry>
      </rule>

      <!-- RULE 2: AKI Estagio 3 - Cr >= 4.0 -->
      <rule id="Rule_AKI_Estagio3_Cr4">
        <description>AKI Estagio 3 KDIGO - Creatinina >= 4.0 mg/dL</description>
        <inputEntry id="InputEntry_2_1">
          <text>&gt;= 4.0</text>
        </inputEntry>
        <inputEntry id="InputEntry_2_2">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_2_3">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_2_4">
          <text>false</text>
        </inputEntry>
        <outputEntry id="OutputEntry_2_1">
          <text>"Alerta"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_2_2">
          <text>"AKI_ESTAGIO_3"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_2_3">
          <text>true</text>
        </outputEntry>
        <outputEntry id="OutputEntry_2_4">
          <text>"AKI ESTAGIO 3 KDIGO - Creatinina >= 4.0 mg/dL. SOLICITAR AVALIACAO NEFROLOGIA URGENTE. Avaliar indicacao de dialise: hipervolemia refrataria, hipercalemia, acidose grave, uremia sintomatica."</text>
        </outputEntry>
        <outputEntry id="OutputEntry_2_5">
          <text>"CRITICA"</text>
        </outputEntry>
      </rule>

      <!-- RULE 3: AKI Estagio 3 - Cr >= 3x basal -->
      <rule id="Rule_AKI_Estagio3_3xBasal">
        <description>AKI Estagio 3 KDIGO - Creatinina >= 3x basal</description>
        <inputEntry id="InputEntry_3_1">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_3_2">
          <text>&gt; 0</text>
        </inputEntry>
        <inputEntry id="InputEntry_3_3">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_3_4">
          <text>false</text>
        </inputEntry>
        <outputEntry id="OutputEntry_3_1">
          <text>"Alerta"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_3_2">
          <text>"AKI_ESTAGIO_3"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_3_3">
          <text>true</text>
        </outputEntry>
        <outputEntry id="OutputEntry_3_4">
          <text>"AKI ESTAGIO 3 KDIGO - Creatinina >= 3x basal. Avaliacao nefrologica urgente. Suspender TODOS nefrotoxicos (AINEs, aminoglicosideos, contraste). Preparar para possivel terapia renal substitutiva."</text>
        </outputEntry>
        <outputEntry id="OutputEntry_3_5">
          <text>"CRITICA"</text>
        </outputEntry>
      </rule>

      <!-- RULE 4: AKI Estagio 2 - Cr 2.0-2.9x basal -->
      <rule id="Rule_AKI_Estagio2">
        <description>AKI Estagio 2 KDIGO - Creatinina 2.0-2.9x basal</description>
        <inputEntry id="InputEntry_4_1">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_4_2">
          <text>&gt; 0</text>
        </inputEntry>
        <inputEntry id="InputEntry_4_3">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_4_4">
          <text>false</text>
        </inputEntry>
        <outputEntry id="OutputEntry_4_1">
          <text>"Alerta"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_4_2">
          <text>"AKI_ESTAGIO_2"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_4_3">
          <text>true</text>
        </outputEntry>
        <outputEntry id="OutputEntry_4_4">
          <text>"AKI ESTAGIO 2 KDIGO - Creatinina 2.0-2.9x basal. Solicitar parecer nefrologia. Monitorar creatinina a cada 12h. Suspender nefrotoxicos. Otimizar volemia. Avaliar causa (pre-renal, renal, pos-renal)."</text>
        </outputEntry>
        <outputEntry id="OutputEntry_4_5">
          <text>"ALTA"</text>
        </outputEntry>
      </rule>

      <!-- RULE 5: AKI Estagio 1 - Aumento >= 0.3 em 48h -->
      <rule id="Rule_AKI_Estagio1_Delta">
        <description>AKI Estagio 1 KDIGO - Aumento >= 0.3 mg/dL em 48h</description>
        <inputEntry id="InputEntry_5_1">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_5_2">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_5_3">
          <text>&gt;= 0.3</text>
        </inputEntry>
        <inputEntry id="InputEntry_5_4">
          <text>false</text>
        </inputEntry>
        <outputEntry id="OutputEntry_5_1">
          <text>"Atencao"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_5_2">
          <text>"AKI_ESTAGIO_1"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_5_3">
          <text>false</text>
        </outputEntry>
        <outputEntry id="OutputEntry_5_4">
          <text>"AKI ESTAGIO 1 KDIGO - Aumento creatinina >= 0.3 mg/dL em 48h. Revisar medicamentos nefrotoxicos. Otimizar hidratacao. Monitorar debito urinario. Repetir creatinina em 24h."</text>
        </outputEntry>
        <outputEntry id="OutputEntry_5_5">
          <text>"ALTA"</text>
        </outputEntry>
      </rule>

      <!-- RULE 6: AKI Estagio 1 - Cr 1.5-1.9x basal -->
      <rule id="Rule_AKI_Estagio1_Basal">
        <description>AKI Estagio 1 KDIGO - Creatinina 1.5-1.9x basal</description>
        <inputEntry id="InputEntry_6_1">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_6_2">
          <text>&gt; 0</text>
        </inputEntry>
        <inputEntry id="InputEntry_6_3">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_6_4">
          <text>false</text>
        </inputEntry>
        <outputEntry id="OutputEntry_6_1">
          <text>"Atencao"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_6_2">
          <text>"AKI_ESTAGIO_1"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_6_3">
          <text>false</text>
        </outputEntry>
        <outputEntry id="OutputEntry_6_4">
          <text>"AKI ESTAGIO 1 KDIGO - Creatinina 1.5-1.9x basal. Suspender AINEs e ajustar doses de medicamentos. Garantir perfusao renal adequada. Monitorar creatinina diariamente."</text>
        </outputEntry>
        <outputEntry id="OutputEntry_6_5">
          <text>"MEDIA"</text>
        </outputEntry>
      </rule>

      <!-- RULE 7: Funcao renal normal -->
      <rule id="Rule_Funcao_Renal_Normal">
        <description>Creatinina dentro dos limites normais</description>
        <inputEntry id="InputEntry_7_1">
          <text>&lt; 1.2</text>
        </inputEntry>
        <inputEntry id="InputEntry_7_2">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_7_3">
          <text>&lt; 0.3</text>
        </inputEntry>
        <inputEntry id="InputEntry_7_4">
          <text>false</text>
        </inputEntry>
        <outputEntry id="OutputEntry_7_1">
          <text>"OK"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_7_2">
          <text>"FUNCAO_RENAL_NORMAL"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_7_3">
          <text>false</text>
        </outputEntry>
        <outputEntry id="OutputEntry_7_4">
          <text>"Funcao renal dentro dos parametros normais. Manter hidratacao adequada e evitar nefrotoxicos desnecessarios."</text>
        </outputEntry>
        <outputEntry id="OutputEntry_7_5">
          <text>"BAIXA"</text>
        </outputEntry>
      </rule>

      <!-- FALLBACK -->
      <rule id="Rule_Fallback_SYN_AKI_001">
        <description>Dados insuficientes para avaliacao</description>
        <inputEntry id="InputEntry_F_1">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_F_2">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_F_3">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_F_4">
          <text>-</text>
        </inputEntry>
        <outputEntry id="OutputEntry_F_1">
          <text>"Revisar"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_F_2">
          <text>"DADOS_INCOMPLETOS"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_F_3">
          <text>false</text>
        </outputEntry>
        <outputEntry id="OutputEntry_F_4">
          <text>"Dados insuficientes para classificacao KDIGO. Verificar: creatinina atual, creatinina basal (ultimos 7-365 dias), variacao em 48h."</text>
        </outputEntry>
        <outputEntry id="OutputEntry_F_5">
          <text>"MEDIA"</text>
        </outputEntry>
      </rule>

    </decisionTable>
  </decision>

  <dmndi:DMNDI>
    <dmndi:DMNDiagram id="DMNDiagram_SYN_AKI_001">
      <dmndi:DMNShape id="DMNShape_Decision_SYN_AKI_001" dmnElementRef="Decision_SYN_AKI_001">
        <dc:Bounds height="80" width="180" x="160" y="100"/>
      </dmndi:DMNShape>
    </dmndi:DMNDiagram>
  </dmndi:DMNDI>

</definitions>
