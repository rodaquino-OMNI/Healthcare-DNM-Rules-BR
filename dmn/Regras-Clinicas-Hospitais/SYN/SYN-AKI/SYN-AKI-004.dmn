<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="https://www.omg.org/spec/DMN/20191111/MODEL/"
             xmlns:dmndi="https://www.omg.org/spec/DMN/20191111/DMNDI/"
             xmlns:dc="http://www.omg.org/spec/DMN/20180521/DC/"
             id="Definitions_SYN_AKI_004"
             name="Deteccao de AKI - Sindrome Cardiorrenal"
             targetNamespace="http://camunda.org/schema/1.0/dmn">

  <!--
    SYN-AKI-004 - Deteccao de Sindrome Cardiorrenal (SCR)
    Versao: 1.0.0 (2026-02-06)
    Categoria: Alerta Clinico - Sindromes Criticas

    CLASSIFICACAO DA SINDROME CARDIORRENAL:

    TIPO 1 (Aguda Cardiorrenal):
    - IC aguda causando AKI
    - Comum em SCA, ICC descompensada

    TIPO 2 (Cronica Cardiorrenal):
    - ICC cronica causando DRC progressiva

    TIPO 3 (Aguda Renocardica):
    - AKI causando disfuncao cardiaca aguda

    TIPO 4 (Cronica Renocardica):
    - DRC causando doenca cardiaca cronica

    TIPO 5 (Secundaria):
    - Condicao sistemica (sepse, amiloidose) afetando ambos

    MARCADORES CHAVE:
    - BNP/NT-proBNP elevados
    - Creatinina em ascensao
    - Congestao + oliguria

    REFERENCIAS:
    - ADQI Consensus on Cardiorenal Syndromes
    - ESC Heart Failure Guidelines 2021
    - KDIGO AKI Guidelines 2012
  -->

  <decision id="Decision_SYN_AKI_004" name="Deteccao Sindrome Cardiorrenal">
    <decisionTable id="DecisionTable_SYN_AKI_004" hitPolicy="FIRST">

      <!-- INPUT 1: BNP/NT-proBNP -->
      <input id="Input_1" label="NT-proBNP (pg/mL)">
        <inputExpression id="InputExpression_1" typeRef="number">
          <text>ntProBnp</text>
        </inputExpression>
      </input>

      <!-- INPUT 2: Creatinina -->
      <input id="Input_2" label="Creatinina (mg/dL)">
        <inputExpression id="InputExpression_2" typeRef="number">
          <text>creatinina</text>
        </inputExpression>
      </input>

      <!-- INPUT 3: Congestao Pulmonar -->
      <input id="Input_3" label="Congestao Pulmonar">
        <inputExpression id="InputExpression_3" typeRef="boolean">
          <text>congestaoPulmonar</text>
        </inputExpression>
      </input>

      <!-- INPUT 4: Fracao de Ejecao -->
      <input id="Input_4" label="Fracao Ejecao (%)">
        <inputExpression id="InputExpression_4" typeRef="number">
          <text>fracaoEjecao</text>
        </inputExpression>
      </input>

      <!-- OUTPUTS -->
      <output id="Output_1" label="Nivel Alerta" name="nivelAlerta" typeRef="string">
        <outputValues id="OutputValues_1">
          <text>"Alerta", "Atencao", "OK", "Revisar"</text>
        </outputValues>
      </output>

      <output id="Output_2" label="Classificacao Sindrome" name="classificacaoSindrome" typeRef="string"/>

      <output id="Output_3" label="Protocolo Ativado" name="protocoloAtivado" typeRef="boolean"/>

      <output id="Output_4" label="Acao Requerida" name="acaoRequerida" typeRef="string"/>

      <output id="Output_5" label="Urgencia" name="urgencia" typeRef="string">
        <outputValues id="OutputValues_5">
          <text>"CRITICA", "ALTA", "MEDIA", "BAIXA"</text>
        </outputValues>
      </output>

      <!-- RULE 1: SCR Tipo 1 - IC aguda com AKI grave -->
      <rule id="Rule_SCR_Tipo1_Grave">
        <description>Sindrome Cardiorrenal Tipo 1 - IC aguda com AKI</description>
        <inputEntry id="InputEntry_1_1">
          <text>&gt; 5000</text>
        </inputEntry>
        <inputEntry id="InputEntry_1_2">
          <text>&gt;= 3.0</text>
        </inputEntry>
        <inputEntry id="InputEntry_1_3">
          <text>true</text>
        </inputEntry>
        <inputEntry id="InputEntry_1_4">
          <text>&lt; 30</text>
        </inputEntry>
        <outputEntry id="OutputEntry_1_1">
          <text>"Alerta"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_1_2">
          <text>"SCR_TIPO1_GRAVE"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_1_3">
          <text>true</text>
        </outputEntry>
        <outputEntry id="OutputEntry_1_4">
          <text>"SINDROME CARDIORRENAL TIPO 1 GRAVE. IC descompensada com AKI severa. UTI cardiologica. Dobutamina se choque cardiogenico. Diuretico IV titulado (evitar hipovolemia). Considerar ultrafiltração se refratario."</text>
        </outputEntry>
        <outputEntry id="OutputEntry_1_5">
          <text>"CRITICA"</text>
        </outputEntry>
      </rule>

      <!-- RULE 2: SCR Tipo 1 - IC aguda com AKI moderada -->
      <rule id="Rule_SCR_Tipo1_Moderada">
        <description>Sindrome Cardiorrenal Tipo 1 - IC aguda com piora renal</description>
        <inputEntry id="InputEntry_2_1">
          <text>&gt; 2000</text>
        </inputEntry>
        <inputEntry id="InputEntry_2_2">
          <text>[1.5..3.0)</text>
        </inputEntry>
        <inputEntry id="InputEntry_2_3">
          <text>true</text>
        </inputEntry>
        <inputEntry id="InputEntry_2_4">
          <text>&lt; 40</text>
        </inputEntry>
        <outputEntry id="OutputEntry_2_1">
          <text>"Alerta"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_2_2">
          <text>"SCR_TIPO1_MODERADA"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_2_3">
          <text>true</text>
        </outputEntry>
        <outputEntry id="OutputEntry_2_4">
          <text>"Sindrome Cardiorrenal Tipo 1. IC descompensada com piora de funcao renal. Diuretico IV (furosemida bolus ou infusao continua). Monitorar peso diario, balanco hidrico, creatinina a cada 24h. Parecer cardiologia."</text>
        </outputEntry>
        <outputEntry id="OutputEntry_2_5">
          <text>"ALTA"</text>
        </outputEntry>
      </rule>

      <!-- RULE 3: SCR Tipo 3 - AKI causando IC -->
      <rule id="Rule_SCR_Tipo3">
        <description>Sindrome Cardiorrenal Tipo 3 - AKI primaria com IC secundaria</description>
        <inputEntry id="InputEntry_3_1">
          <text>&gt; 1000</text>
        </inputEntry>
        <inputEntry id="InputEntry_3_2">
          <text>&gt;= 4.0</text>
        </inputEntry>
        <inputEntry id="InputEntry_3_3">
          <text>true</text>
        </inputEntry>
        <inputEntry id="InputEntry_3_4">
          <text>-</text>
        </inputEntry>
        <outputEntry id="OutputEntry_3_1">
          <text>"Alerta"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_3_2">
          <text>"SCR_TIPO3"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_3_3">
          <text>true</text>
        </outputEntry>
        <outputEntry id="OutputEntry_3_4">
          <text>"Sindrome Cardiorrenal Tipo 3. AKI grave causando sobrecarga e disfuncao cardiaca. Priorizar tratamento renal. Restringir volume se hipervolemico. Avaliar dialise para controle volemica. ECG e troponina."</text>
        </outputEntry>
        <outputEntry id="OutputEntry_3_5">
          <text>"CRITICA"</text>
        </outputEntry>
      </rule>

      <!-- RULE 4: Congestao refrataria -->
      <rule id="Rule_Congestao_Refrataria">
        <description>Congestao pulmonar com oliguria - Dilema diuretico</description>
        <inputEntry id="InputEntry_4_1">
          <text>&gt; 1500</text>
        </inputEntry>
        <inputEntry id="InputEntry_4_2">
          <text>&gt; 1.5</text>
        </inputEntry>
        <inputEntry id="InputEntry_4_3">
          <text>true</text>
        </inputEntry>
        <inputEntry id="InputEntry_4_4">
          <text>-</text>
        </inputEntry>
        <outputEntry id="OutputEntry_4_1">
          <text>"Atencao"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_4_2">
          <text>"DILEMA_DIURETICO"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_4_3">
          <text>false</text>
        </outputEntry>
        <outputEntry id="OutputEntry_4_4">
          <text>"Congestao com piora de funcao renal - dilema diuretico. Estrategia: descongestao cuidadosa. Furosemida IV com monitoramento horario. Adicionar tiazidico se resistencia. Avaliar perfusao (lactato, saturacao venosa central)."</text>
        </outputEntry>
        <outputEntry id="OutputEntry_4_5">
          <text>"ALTA"</text>
        </outputEntry>
      </rule>

      <!-- RULE 5: Risco de SCR -->
      <rule id="Rule_Risco_SCR">
        <description>Fatores de risco para SCR presentes</description>
        <inputEntry id="InputEntry_5_1">
          <text>&gt; 900</text>
        </inputEntry>
        <inputEntry id="InputEntry_5_2">
          <text>[1.2..1.5)</text>
        </inputEntry>
        <inputEntry id="InputEntry_5_3">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_5_4">
          <text>&lt; 50</text>
        </inputEntry>
        <outputEntry id="OutputEntry_5_1">
          <text>"Atencao"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_5_2">
          <text>"RISCO_SCR"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_5_3">
          <text>false</text>
        </outputEntry>
        <outputEntry id="OutputEntry_5_4">
          <text>"Risco de Sindrome Cardiorrenal. BNP elevado com creatinina borderline. Monitorar funcao renal diariamente. Evitar nefrotoxicos. Otimizar tratamento de IC. Manter euvolemia."</text>
        </outputEntry>
        <outputEntry id="OutputEntry_5_5">
          <text>"MEDIA"</text>
        </outputEntry>
      </rule>

      <!-- RULE 6: Sem evidencia de SCR -->
      <rule id="Rule_Sem_SCR">
        <description>Sem evidencia de sindrome cardiorrenal</description>
        <inputEntry id="InputEntry_6_1">
          <text>&lt; 300</text>
        </inputEntry>
        <inputEntry id="InputEntry_6_2">
          <text>&lt; 1.2</text>
        </inputEntry>
        <inputEntry id="InputEntry_6_3">
          <text>false</text>
        </inputEntry>
        <inputEntry id="InputEntry_6_4">
          <text>&gt;= 50</text>
        </inputEntry>
        <outputEntry id="OutputEntry_6_1">
          <text>"OK"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_6_2">
          <text>"SEM_SCR"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_6_3">
          <text>false</text>
        </outputEntry>
        <outputEntry id="OutputEntry_6_4">
          <text>"Sem evidencia de sindrome cardiorrenal. BNP e creatinina normais. Manter monitoramento de rotina."</text>
        </outputEntry>
        <outputEntry id="OutputEntry_6_5">
          <text>"BAIXA"</text>
        </outputEntry>
      </rule>

      <!-- FALLBACK -->
      <rule id="Rule_Fallback_SYN_AKI_004">
        <description>Dados insuficientes para avaliacao</description>
        <inputEntry id="InputEntry_F_1">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_F_2">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_F_3">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_F_4">
          <text>-</text>
        </inputEntry>
        <outputEntry id="OutputEntry_F_1">
          <text>"Revisar"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_F_2">
          <text>"DADOS_INCOMPLETOS"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_F_3">
          <text>false</text>
        </outputEntry>
        <outputEntry id="OutputEntry_F_4">
          <text>"Dados insuficientes para avaliacao de SCR. Solicitar: BNP/NT-proBNP, creatinina, ecocardiograma, RX torax."</text>
        </outputEntry>
        <outputEntry id="OutputEntry_F_5">
          <text>"MEDIA"</text>
        </outputEntry>
      </rule>

    </decisionTable>
  </decision>

  <dmndi:DMNDI>
    <dmndi:DMNDiagram id="DMNDiagram_SYN_AKI_004">
      <dmndi:DMNShape id="DMNShape_Decision_SYN_AKI_004" dmnElementRef="Decision_SYN_AKI_004">
        <dc:Bounds height="80" width="180" x="160" y="100"/>
      </dmndi:DMNShape>
    </dmndi:DMNDiagram>
  </dmndi:DMNDI>

</definitions>
