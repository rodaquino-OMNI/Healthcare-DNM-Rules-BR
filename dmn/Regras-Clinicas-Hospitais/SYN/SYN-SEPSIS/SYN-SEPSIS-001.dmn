<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="https://www.omg.org/spec/DMN/20191111/MODEL/"
             xmlns:dmndi="https://www.omg.org/spec/DMN/20191111/DMNDI/"
             xmlns:dc="http://www.omg.org/spec/DMN/20180521/DC/"
             id="Definitions_SYN_SEPSIS_001"
             name="Deteccao de Sepse - qSOFA"
             targetNamespace="http://camunda.org/schema/1.0/dmn">

  <!--
    SYN-SEPSIS-001 - Deteccao de Sepse via qSOFA Score
    Versao: 1.0.0 (2026-02-06)
    Categoria: Alerta Clinico - Sindromes Criticas

    CRITERIOS qSOFA (Quick Sequential Organ Failure Assessment):
    - Frequencia Respiratoria >= 22/min → 1 ponto
    - Pressao Arterial Sistolica <= 100 mmHg → 1 ponto
    - Escala de Coma de Glasgow < 15 (alteracao mental) → 1 ponto

    Score >= 2 + suspeita de infeccao = SEPSE PROVAVEL (Sepsis-3 criteria)

    INDICACOES (Quando ALERTAR):
    - qSOFA score >= 2 pontos
    - Suspeita clinica de infeccao presente
    - Ativacao imediata do protocolo de sepse (bundle 1h)

    ACOES URGENTES (Mortalidade aumenta 7-8% por hora de atraso):
    - Coleta de hemoculturas (2 amostras)
    - Lactato serico
    - Antibiotico empirico em 1 hora
    - Ressuscitacao volemica se hipotensao

    REFERENCIAS:
    - Sepsis-3 Consensus Definitions (JAMA 2016)
    - Surviving Sepsis Campaign Guidelines 2021
    - ILAS (Instituto Latino-Americano de Sepse)
  -->

  <decision id="Decision_SYN_SEPSIS_001" name="Deteccao Sepse qSOFA">
    <decisionTable id="DecisionTable_SYN_SEPSIS_001" hitPolicy="FIRST">

      <!-- INPUT 1: Frequencia Respiratoria -->
      <input id="Input_1" label="Frequencia Respiratoria (rpm)">
        <inputExpression id="InputExpression_1" typeRef="number">
          <text>frequenciaRespiratoria</text>
        </inputExpression>
      </input>

      <!-- INPUT 2: Pressao Arterial Sistolica -->
      <input id="Input_2" label="Pressao Sistolica (mmHg)">
        <inputExpression id="InputExpression_2" typeRef="number">
          <text>pressaoSistolica</text>
        </inputExpression>
      </input>

      <!-- INPUT 3: Escala de Glasgow -->
      <input id="Input_3" label="Escala de Glasgow">
        <inputExpression id="InputExpression_3" typeRef="number">
          <text>escalaGlasgow</text>
        </inputExpression>
      </input>

      <!-- INPUT 4: Suspeita de Infeccao -->
      <input id="Input_4" label="Suspeita de Infeccao">
        <inputExpression id="InputExpression_4" typeRef="boolean">
          <text>suspeitaInfeccao</text>
        </inputExpression>
      </input>

      <!-- OUTPUTS -->
      <output id="Output_1" label="Nivel Alerta" name="nivelAlerta" typeRef="string">
        <outputValues id="OutputValues_1">
          <text>"Alerta", "Atencao", "OK", "Revisar"</text>
        </outputValues>
      </output>

      <output id="Output_2" label="Classificacao Sindrome" name="classificacaoSindrome" typeRef="string"/>

      <output id="Output_3" label="Protocolo Ativado" name="protocoloAtivado" typeRef="boolean"/>

      <output id="Output_4" label="Acao Requerida" name="acaoRequerida" typeRef="string"/>

      <output id="Output_5" label="Urgencia" name="urgencia" typeRef="string">
        <outputValues id="OutputValues_5">
          <text>"CRITICA", "ALTA", "MEDIA", "BAIXA"</text>
        </outputValues>
      </output>

      <!-- RULE 1: qSOFA >= 2 + suspeita infeccao = SEPSE -->
      <rule id="Rule_Sepse_qSOFA_2_Plus">
        <description>qSOFA score >= 2 pontos + suspeita de infeccao = Sepse provavel</description>
        <inputEntry id="InputEntry_1_1">
          <text>&gt;= 22</text>
        </inputEntry>
        <inputEntry id="InputEntry_1_2">
          <text>&lt;= 100</text>
        </inputEntry>
        <inputEntry id="InputEntry_1_3">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_1_4">
          <text>true</text>
        </inputEntry>
        <outputEntry id="OutputEntry_1_1">
          <text>"Alerta"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_1_2">
          <text>"SEPSE"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_1_3">
          <text>true</text>
        </outputEntry>
        <outputEntry id="OutputEntry_1_4">
          <text>"ACAO IMEDIATA: Acionar protocolo de sepse. Coletar hemoculturas (2 amostras), dosar lactato, iniciar antibiotico empirico em 1h. Avaliar necessidade de ressuscitacao volemica."</text>
        </outputEntry>
        <outputEntry id="OutputEntry_1_5">
          <text>"CRITICA"</text>
        </outputEntry>
      </rule>

      <!-- RULE 2: FR >= 22 + Glasgow < 15 + suspeita -->
      <rule id="Rule_Sepse_FR_Glasgow">
        <description>FR elevada + alteracao mental + suspeita = Sepse provavel</description>
        <inputEntry id="InputEntry_2_1">
          <text>&gt;= 22</text>
        </inputEntry>
        <inputEntry id="InputEntry_2_2">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_2_3">
          <text>&lt; 15</text>
        </inputEntry>
        <inputEntry id="InputEntry_2_4">
          <text>true</text>
        </inputEntry>
        <outputEntry id="OutputEntry_2_1">
          <text>"Alerta"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_2_2">
          <text>"SEPSE"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_2_3">
          <text>true</text>
        </outputEntry>
        <outputEntry id="OutputEntry_2_4">
          <text>"ACAO IMEDIATA: qSOFA >= 2 (FR + alteracao mental). Acionar protocolo de sepse completo."</text>
        </outputEntry>
        <outputEntry id="OutputEntry_2_5">
          <text>"CRITICA"</text>
        </outputEntry>
      </rule>

      <!-- RULE 3: PA baixa + Glasgow < 15 + suspeita -->
      <rule id="Rule_Sepse_PA_Glasgow">
        <description>Hipotensao + alteracao mental + suspeita = Sepse provavel</description>
        <inputEntry id="InputEntry_3_1">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_3_2">
          <text>&lt;= 100</text>
        </inputEntry>
        <inputEntry id="InputEntry_3_3">
          <text>&lt; 15</text>
        </inputEntry>
        <inputEntry id="InputEntry_3_4">
          <text>true</text>
        </inputEntry>
        <outputEntry id="OutputEntry_3_1">
          <text>"Alerta"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_3_2">
          <text>"SEPSE"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_3_3">
          <text>true</text>
        </outputEntry>
        <outputEntry id="OutputEntry_3_4">
          <text>"ACAO IMEDIATA: qSOFA >= 2 (hipotensao + alteracao mental). Priorizar ressuscitacao volemica e iniciar antibiotico."</text>
        </outputEntry>
        <outputEntry id="OutputEntry_3_5">
          <text>"CRITICA"</text>
        </outputEntry>
      </rule>

      <!-- RULE 4: qSOFA < 2, mas suspeita presente = Monitorar -->
      <rule id="Rule_Monitorar_qSOFA_1">
        <description>qSOFA = 1 ponto com suspeita de infeccao</description>
        <inputEntry id="InputEntry_4_1">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_4_2">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_4_3">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_4_4">
          <text>true</text>
        </inputEntry>
        <outputEntry id="OutputEntry_4_1">
          <text>"Atencao"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_4_2">
          <text>"RISCO_SEPSE"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_4_3">
          <text>false</text>
        </outputEntry>
        <outputEntry id="OutputEntry_4_4">
          <text>"Suspeita de infeccao presente. Monitorar sinais vitais a cada 1-2h. Considerar dosagem de lactato e hemoculturas se piora clinica."</text>
        </outputEntry>
        <outputEntry id="OutputEntry_4_5">
          <text>"ALTA"</text>
        </outputEntry>
      </rule>

      <!-- RULE 5: Sem suspeita de infeccao = OK -->
      <rule id="Rule_Sem_Infeccao">
        <description>Ausencia de suspeita de infeccao</description>
        <inputEntry id="InputEntry_5_1">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_5_2">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_5_3">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_5_4">
          <text>false</text>
        </inputEntry>
        <outputEntry id="OutputEntry_5_1">
          <text>"OK"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_5_2">
          <text>"SEM_SUSPEITA_INFECCAO"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_5_3">
          <text>false</text>
        </outputEntry>
        <outputEntry id="OutputEntry_5_4">
          <text>"Sinais vitais dentro dos limites. Sem suspeita de processo infeccioso. Continuar monitoramento de rotina."</text>
        </outputEntry>
        <outputEntry id="OutputEntry_5_5">
          <text>"BAIXA"</text>
        </outputEntry>
      </rule>

      <!-- FALLBACK -->
      <rule id="Rule_Fallback_SYN_SEPSIS_001">
        <description>Dados insuficientes para avaliacao</description>
        <inputEntry id="InputEntry_F_1">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_F_2">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_F_3">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_F_4">
          <text>-</text>
        </inputEntry>
        <outputEntry id="OutputEntry_F_1">
          <text>"Revisar"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_F_2">
          <text>"DADOS_INCOMPLETOS"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_F_3">
          <text>false</text>
        </outputEntry>
        <outputEntry id="OutputEntry_F_4">
          <text>"Dados insuficientes para calculo de qSOFA. Verificar: frequencia respiratoria, pressao arterial, escala de Glasgow, suspeita clinica de infeccao."</text>
        </outputEntry>
        <outputEntry id="OutputEntry_F_5">
          <text>"MEDIA"</text>
        </outputEntry>
      </rule>

    </decisionTable>
  </decision>

  <dmndi:DMNDI>
    <dmndi:DMNDiagram id="DMNDiagram_SYN_SEPSIS_001">
      <dmndi:DMNShape id="DMNShape_Decision_SYN_SEPSIS_001" dmnElementRef="Decision_SYN_SEPSIS_001">
        <dc:Bounds height="80" width="180" x="160" y="100"/>
      </dmndi:DMNShape>
    </dmndi:DMNDiagram>
  </dmndi:DMNDI>

</definitions>
