<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="https://www.omg.org/spec/DMN/20191111/MODEL/"
             xmlns:dmndi="https://www.omg.org/spec/DMN/20191111/DMNDI/"
             xmlns:dc="http://www.omg.org/spec/DMN/20180521/DC/"
             id="Definitions_SYN_SEPSIS_002"
             name="Deteccao de Sepse Grave - SIRS + Lactato"
             targetNamespace="http://camunda.org/schema/1.0/dmn">

  <!--
    SYN-SEPSIS-002 - Deteccao de Sepse Grave via SIRS + Lactato
    Versao: 1.0.0 (2026-02-06)

    CRITERIOS SIRS (Systemic Inflammatory Response Syndrome):
    - Temperatura >38°C ou <36°C → 1 ponto
    - Frequencia Cardiaca >90 bpm → 1 ponto
    - Frequencia Respiratoria >20/min ou PaCO2 <32 → 1 ponto
    - Leucocitos >12.000 ou <4.000 ou >10% bastonetes → 1 ponto

    SEPSE GRAVE: SIRS >= 2 + Lactato >= 4 mmol/L

    REFERENCIAS:
    - Surviving Sepsis Campaign 2021
    - ACCP/SCCM Consensus Conference
  -->

  <decision id="Decision_SYN_SEPSIS_002" name="Sepse Grave SIRS Lactato">
    <decisionTable id="DecisionTable_SYN_SEPSIS_002" hitPolicy="FIRST">

      <input id="Input_1" label="Temperatura Corporal (°C)">
        <inputExpression id="InputExpression_1" typeRef="number">
          <text>temperatura</text>
        </inputExpression>
      </input>

      <input id="Input_2" label="Frequencia Cardiaca (bpm)">
        <inputExpression id="InputExpression_2" typeRef="number">
          <text>frequenciaCardiaca</text>
        </inputExpression>
      </input>

      <input id="Input_3" label="Frequencia Respiratoria (rpm)">
        <inputExpression id="InputExpression_3" typeRef="number">
          <text>frequenciaRespiratoria</text>
        </inputExpression>
      </input>

      <input id="Input_4" label="Leucocitos (cel/mm³)">
        <inputExpression id="InputExpression_4" typeRef="number">
          <text>leucocitos</text>
        </inputExpression>
      </input>

      <input id="Input_5" label="Lactato Serico (mmol/L)">
        <inputExpression id="InputExpression_5" typeRef="number">
          <text>lactato</text>
        </inputExpression>
      </input>

      <output id="Output_1" label="Nivel Alerta" name="nivelAlerta" typeRef="string">
        <outputValues id="OutputValues_1">
          <text>"Alerta", "Atencao", "OK", "Revisar"</text>
        </outputValues>
      </output>

      <output id="Output_2" label="Classificacao Sindrome" name="classificacaoSindrome" typeRef="string"/>
      <output id="Output_3" label="Protocolo Ativado" name="protocoloAtivado" typeRef="boolean"/>
      <output id="Output_4" label="Acao Requerida" name="acaoRequerida" typeRef="string"/>
      <output id="Output_5" label="Urgencia" name="urgencia" typeRef="string">
        <outputValues id="OutputValues_5">
          <text>"CRITICA", "ALTA", "MEDIA", "BAIXA"</text>
        </outputValues>
      </output>

      <!-- RULE 1: SIRS completo + Lactato >= 4 = SEPSE GRAVE -->
      <rule id="Rule_Sepse_Grave_Completa">
        <description>SIRS >= 2 criterios + lactato >= 4 mmol/L = Sepse grave</description>
        <inputEntry id="InputEntry_1_1">
          <text>&gt; 38, &lt; 36</text>
        </inputEntry>
        <inputEntry id="InputEntry_1_2">
          <text>&gt; 90</text>
        </inputEntry>
        <inputEntry id="InputEntry_1_3">
          <text>&gt; 20</text>
        </inputEntry>
        <inputEntry id="InputEntry_1_4">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_1_5">
          <text>&gt;= 4</text>
        </inputEntry>
        <outputEntry id="OutputEntry_1_1">
          <text>"Alerta"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_1_2">
          <text>"SEPSE_GRAVE"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_1_3">
          <text>true</text>
        </outputEntry>
        <outputEntry id="OutputEntry_1_4">
          <text>"SEPSE GRAVE CONFIRMADA. SIRS >= 3 criterios + lactato >= 4 mmol/L. Acionar protocolo de sepse grave: antibiotico imediato, ressuscitacao volemica agressiva (30 mL/kg), considerar vasopressores."</text>
        </outputEntry>
        <outputEntry id="OutputEntry_1_5">
          <text>"CRITICA"</text>
        </outputEntry>
      </rule>

      <!-- RULE 2: SIRS 2 criterios + leucocitos alterados + lactato >= 4 -->
      <rule id="Rule_Sepse_Grave_Leucocitos">
        <description>SIRS com alteracao leucocitaria + lactato elevado</description>
        <inputEntry id="InputEntry_2_1">
          <text>&gt; 38, &lt; 36</text>
        </inputEntry>
        <inputEntry id="InputEntry_2_2">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_2_3">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_2_4">
          <text>&gt; 12000, &lt; 4000</text>
        </inputEntry>
        <inputEntry id="InputEntry_2_5">
          <text>&gt;= 4</text>
        </inputEntry>
        <outputEntry id="OutputEntry_2_1">
          <text>"Alerta"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_2_2">
          <text>"SEPSE_GRAVE"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_2_3">
          <text>true</text>
        </outputEntry>
        <outputEntry id="OutputEntry_2_4">
          <text>"SEPSE GRAVE. SIRS >= 2 (temperatura + leucocitos) + lactato >= 4. Iniciar bundle de sepse grave imediatamente."</text>
        </outputEntry>
        <outputEntry id="OutputEntry_2_5">
          <text>"CRITICA"</text>
        </outputEntry>
      </rule>

      <!-- RULE 3: SIRS >= 2 + lactato 2-3.9 = Atencao -->
      <rule id="Rule_Sepse_Lactato_Moderado">
        <description>SIRS positivo com lactato moderadamente elevado</description>
        <inputEntry id="InputEntry_3_1">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_3_2">
          <text>&gt; 90</text>
        </inputEntry>
        <inputEntry id="InputEntry_3_3">
          <text>&gt; 20</text>
        </inputEntry>
        <inputEntry id="InputEntry_3_4">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_3_5">
          <text>[2..3.9]</text>
        </inputEntry>
        <outputEntry id="OutputEntry_3_1">
          <text>"Atencao"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_3_2">
          <text>"SEPSE_MODERADA"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_3_3">
          <text>false</text>
        </outputEntry>
        <outputEntry id="OutputEntry_3_4">
          <text>"SIRS positivo com lactato 2-3.9 mmol/L. Iniciar ressuscitacao volemica. Reavaliar lactato em 2-4h. Considerar antibiotico se foco infeccioso identificado."</text>
        </outputEntry>
        <outputEntry id="OutputEntry_3_5">
          <text>"ALTA"</text>
        </outputEntry>
      </rule>

      <!-- RULE 4: SIRS >= 2 sem lactato = Solicitar lactato -->
      <rule id="Rule_SIRS_Sem_Lactato">
        <description>SIRS positivo sem dosagem de lactato</description>
        <inputEntry id="InputEntry_4_1">
          <text>&gt; 38, &lt; 36</text>
        </inputEntry>
        <inputEntry id="InputEntry_4_2">
          <text>&gt; 90</text>
        </inputEntry>
        <inputEntry id="InputEntry_4_3">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_4_4">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_4_5">
          <text>null</text>
        </inputEntry>
        <outputEntry id="OutputEntry_4_1">
          <text>"Atencao"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_4_2">
          <text>"SIRS_POSITIVO"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_4_3">
          <text>false</text>
        </outputEntry>
        <outputEntry id="OutputEntry_4_4">
          <text>"SIRS >= 2 criterios detectado. SOLICITAR LACTATO SERICO URGENTE para estratificacao de gravidade. Considerar inicio de antibiotico empirico."</text>
        </outputEntry>
        <outputEntry id="OutputEntry_4_5">
          <text>"ALTA"</text>
        </outputEntry>
      </rule>

      <!-- RULE 5: Lactato normal, SIRS < 2 = OK -->
      <rule id="Rule_Normal">
        <description>Sem criterios de SIRS ou lactato normal</description>
        <inputEntry id="InputEntry_5_1">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_5_2">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_5_3">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_5_4">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_5_5">
          <text>&lt; 2</text>
        </inputEntry>
        <outputEntry id="OutputEntry_5_1">
          <text>"OK"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_5_2">
          <text>"SEM_SIRS"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_5_3">
          <text>false</text>
        </outputEntry>
        <outputEntry id="OutputEntry_5_4">
          <text>"Lactato dentro da normalidade. Sem criterios de SIRS. Continuar monitoramento de rotina."</text>
        </outputEntry>
        <outputEntry id="OutputEntry_5_5">
          <text>"BAIXA"</text>
        </outputEntry>
      </rule>

      <!-- FALLBACK -->
      <rule id="Rule_Fallback_SYN_SEPSIS_002">
        <description>Dados insuficientes para avaliacao</description>
        <inputEntry id="InputEntry_F_1">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_F_2">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_F_3">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_F_4">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_F_5">
          <text>-</text>
        </inputEntry>
        <outputEntry id="OutputEntry_F_1">
          <text>"Revisar"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_F_2">
          <text>"DADOS_INCOMPLETOS"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_F_3">
          <text>false</text>
        </outputEntry>
        <outputEntry id="OutputEntry_F_4">
          <text>"Dados insuficientes para avaliacao de SIRS. Verificar: temperatura, frequencia cardiaca, frequencia respiratoria, leucocitos, lactato serico."</text>
        </outputEntry>
        <outputEntry id="OutputEntry_F_5">
          <text>"MEDIA"</text>
        </outputEntry>
      </rule>

    </decisionTable>
  </decision>

  <dmndi:DMNDI>
    <dmndi:DMNDiagram id="DMNDiagram_SYN_SEPSIS_002">
      <dmndi:DMNShape id="DMNShape_Decision_SYN_SEPSIS_002" dmnElementRef="Decision_SYN_SEPSIS_002">
        <dc:Bounds height="80" width="180" x="160" y="100"/>
      </dmndi:DMNShape>
    </dmndi:DMNDiagram>
  </dmndi:DMNDI>

</definitions>
