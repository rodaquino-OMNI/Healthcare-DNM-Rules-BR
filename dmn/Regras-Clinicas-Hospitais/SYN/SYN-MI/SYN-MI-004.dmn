<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="https://www.omg.org/spec/DMN/20191111/MODEL/"
             xmlns:dmndi="https://www.omg.org/spec/DMN/20191111/DMNDI/"
             xmlns:dc="http://www.omg.org/spec/DMN/20180521/DC/"
             id="Definitions_SYN_MI_004"
             name="Complicacoes Mecanicas do IAM"
             targetNamespace="http://camunda.org/schema/1.0/dmn">

  <!--
    SYN-MI-004 - Deteccao de Complicacoes Mecanicas do IAM
    Versao: 1.0.0 (2026-02-06)
    Categoria: Alerta Clinico - Sindromes Criticas

    COMPLICACOES MECANICAS DO IAM (geralmente 3-7 dias pos-IAM):

    1. RUPTURA DE PAREDE LIVRE:
    - Dissociacao eletromecanica (DEM)
    - Hemopericardio → tamponamento
    - Mortalidade > 90% sem cirurgia imediata

    2. RUPTURA DE SEPTO INTERVENTRICULAR (CIV):
    - Sopro holosistolico novo + frêmito
    - Deterioracao rapida
    - ECO mostra shunt esquerda-direita

    3. RUPTURA DE MUSCULO PAPILAR / INSUFICIENCIA MITRAL AGUDA:
    - Sopro novo de regurgitacao mitral
    - Edema pulmonar agudo subito
    - Mais comum no IAM inferior

    4. ANEURISMA DE VE:
    - Elevacao ST persistente (> 2 semanas)
    - Risco de tromboembolismo e arritmias
    - Pode complicar com ruptura tardia

    SINAIS DE ALERTA:
    - Hipotensao subita pos-IAM
    - Sopro cardiaco novo
    - Deterioracao rapida inexplicada
    - DEM/AESP

    REFERENCIAS:
    - ESC STEMI Guidelines 2023
    - Mechanical Complications of MI Review
    - Cirurgia Cardiovascular de Emergencia
  -->

  <decision id="Decision_SYN_MI_004" name="Complicacoes Mecanicas IAM">
    <decisionTable id="DecisionTable_SYN_MI_004" hitPolicy="FIRST">

      <!-- INPUT 1: Dias pos-IAM -->
      <input id="Input_1" label="Dias pos-IAM">
        <inputExpression id="InputExpression_1" typeRef="number">
          <text>diasPosIAM</text>
        </inputExpression>
      </input>

      <!-- INPUT 2: Sopro Cardiaco Novo -->
      <input id="Input_2" label="Sopro Cardiaco Novo">
        <inputExpression id="InputExpression_2" typeRef="boolean">
          <text>soproCardiacoNovo</text>
        </inputExpression>
      </input>

      <!-- INPUT 3: Deterioracao Hemodinamica Subita -->
      <input id="Input_3" label="Deterioracao Hemodinamica Subita">
        <inputExpression id="InputExpression_3" typeRef="boolean">
          <text>deterioracaoSubita</text>
        </inputExpression>
      </input>

      <!-- INPUT 4: Achado ECO -->
      <input id="Input_4" label="Achado Ecocardiografico">
        <inputExpression id="InputExpression_4" typeRef="string">
          <text>achadoEco</text>
        </inputExpression>
      </input>

      <!-- OUTPUTS -->
      <output id="Output_1" label="Nivel Alerta" name="nivelAlerta" typeRef="string">
        <outputValues id="OutputValues_1">
          <text>"Alerta", "Atencao", "OK", "Revisar"</text>
        </outputValues>
      </output>

      <output id="Output_2" label="Classificacao Sindrome" name="classificacaoSindrome" typeRef="string"/>

      <output id="Output_3" label="Protocolo Ativado" name="protocoloAtivado" typeRef="boolean"/>

      <output id="Output_4" label="Acao Requerida" name="acaoRequerida" typeRef="string"/>

      <output id="Output_5" label="Urgencia" name="urgencia" typeRef="string">
        <outputValues id="OutputValues_5">
          <text>"CRITICA", "ALTA", "MEDIA", "BAIXA"</text>
        </outputValues>
      </output>

      <!-- RULE 1: Ruptura de Parede Livre - Tamponamento -->
      <rule id="Rule_Ruptura_Parede_Livre">
        <description>Ruptura de parede livre VE - tamponamento cardiaco</description>
        <inputEntry id="InputEntry_1_1">
          <text>[1..14]</text>
        </inputEntry>
        <inputEntry id="InputEntry_1_2">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_1_3">
          <text>true</text>
        </inputEntry>
        <inputEntry id="InputEntry_1_4">
          <text>"DERRAME_PERICARDICO"</text>
        </inputEntry>
        <outputEntry id="OutputEntry_1_1">
          <text>"Alerta"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_1_2">
          <text>"RUPTURA_PAREDE_LIVRE"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_1_3">
          <text>true</text>
        </outputEntry>
        <outputEntry id="OutputEntry_1_4">
          <text>"RUPTURA DE PAREDE LIVRE SUSPEITA - EMERGENCIA CIRURGICA! Tamponamento cardiaco. Pericardiocentese de emergencia se instavel. CIRURGIA CARDIACA IMEDIATA. Mortalidade > 90% sem intervencao. Preparar sala de cirurgia."</text>
        </outputEntry>
        <outputEntry id="OutputEntry_1_5">
          <text>"CRITICA"</text>
        </outputEntry>
      </rule>

      <!-- RULE 2: CIV pos-IAM -->
      <rule id="Rule_CIV_PosIAM">
        <description>Comunicacao Interventricular pos-IAM</description>
        <inputEntry id="InputEntry_2_1">
          <text>[1..14]</text>
        </inputEntry>
        <inputEntry id="InputEntry_2_2">
          <text>true</text>
        </inputEntry>
        <inputEntry id="InputEntry_2_3">
          <text>true</text>
        </inputEntry>
        <inputEntry id="InputEntry_2_4">
          <text>"CIV"</text>
        </inputEntry>
        <outputEntry id="OutputEntry_2_1">
          <text>"Alerta"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_2_2">
          <text>"CIV_POS_IAM"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_2_3">
          <text>true</text>
        </outputEntry>
        <outputEntry id="OutputEntry_2_4">
          <text>"CIV POS-IAM - EMERGENCIA CIRURGICA! Sopro holosistolico + fremito + shunt ao ECO. Suporte com BIA e inotripicos. CIRURGIA em ate 24h ou antes se choque refratario. Mortalidade alta mesmo com cirurgia (40-60%)."</text>
        </outputEntry>
        <outputEntry id="OutputEntry_2_5">
          <text>"CRITICA"</text>
        </outputEntry>
      </rule>

      <!-- RULE 3: Insuficiencia Mitral Aguda -->
      <rule id="Rule_IM_Aguda">
        <description>Insuficiencia Mitral Aguda por ruptura de papilar</description>
        <inputEntry id="InputEntry_3_1">
          <text>[1..14]</text>
        </inputEntry>
        <inputEntry id="InputEntry_3_2">
          <text>true</text>
        </inputEntry>
        <inputEntry id="InputEntry_3_3">
          <text>true</text>
        </inputEntry>
        <inputEntry id="InputEntry_3_4">
          <text>"IM_GRAVE"</text>
        </inputEntry>
        <outputEntry id="OutputEntry_3_1">
          <text>"Alerta"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_3_2">
          <text>"RUPTURA_MUSCULO_PAPILAR"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_3_3">
          <text>true</text>
        </outputEntry>
        <outputEntry id="OutputEntry_3_4">
          <text>"RUPTURA DE MUSCULO PAPILAR - IM AGUDA GRAVE. Edema pulmonar fulminante. BIA para estabilizacao. Vasodilatadores se PA permitir. CIRURGIA DE EMERGENCIA - troca ou reparo valvar. Mais comum no IAM inferior."</text>
        </outputEntry>
        <outputEntry id="OutputEntry_3_5">
          <text>"CRITICA"</text>
        </outputEntry>
      </rule>

      <!-- RULE 4: Aneurisma VE pos-IAM -->
      <rule id="Rule_Aneurisma_VE">
        <description>Aneurisma de VE pos-IAM</description>
        <inputEntry id="InputEntry_4_1">
          <text>&gt; 14</text>
        </inputEntry>
        <inputEntry id="InputEntry_4_2">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_4_3">
          <text>false</text>
        </inputEntry>
        <inputEntry id="InputEntry_4_4">
          <text>"ANEURISMA_VE"</text>
        </inputEntry>
        <outputEntry id="OutputEntry_4_1">
          <text>"Atencao"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_4_2">
          <text>"ANEURISMA_VE_POS_IAM"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_4_3">
          <text>false</text>
        </outputEntry>
        <outputEntry id="OutputEntry_4_4">
          <text>"Aneurisma de VE pos-IAM. Anticoagulacao se trombo intracavitario. Risco de arritmias ventriculares e ICC. Considerar resseccao cirurgica se IC refrataria ou arritmias incontrolaveis. Monitorar para ruptura tardia."</text>
        </outputEntry>
        <outputEntry id="OutputEntry_4_5">
          <text>"ALTA"</text>
        </outputEntry>
      </rule>

      <!-- RULE 5: Sopro novo a esclarecer -->
      <rule id="Rule_Sopro_Novo">
        <description>Sopro cardiaco novo pos-IAM - ECO urgente</description>
        <inputEntry id="InputEntry_5_1">
          <text>[1..14]</text>
        </inputEntry>
        <inputEntry id="InputEntry_5_2">
          <text>true</text>
        </inputEntry>
        <inputEntry id="InputEntry_5_3">
          <text>false</text>
        </inputEntry>
        <inputEntry id="InputEntry_5_4">
          <text>-</text>
        </inputEntry>
        <outputEntry id="OutputEntry_5_1">
          <text>"Alerta"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_5_2">
          <text>"SOPRO_NOVO_POS_IAM"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_5_3">
          <text>true</text>
        </outputEntry>
        <outputEntry id="OutputEntry_5_4">
          <text>"SOPRO CARDIACO NOVO pos-IAM - ALERTA para complicacao mecanica. ECO URGENTE a beira leito. Diferenciar: CIV vs IM aguda vs pericardite. Preparar para possivel intervencao cirurgica de emergencia."</text>
        </outputEntry>
        <outputEntry id="OutputEntry_5_5">
          <text>"ALTA"</text>
        </outputEntry>
      </rule>

      <!-- RULE 6: Pos-IAM estavel -->
      <rule id="Rule_PosIAM_Estavel">
        <description>Pos-IAM sem evidencia de complicacoes mecanicas</description>
        <inputEntry id="InputEntry_6_1">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_6_2">
          <text>false</text>
        </inputEntry>
        <inputEntry id="InputEntry_6_3">
          <text>false</text>
        </inputEntry>
        <inputEntry id="InputEntry_6_4">
          <text>"NORMAL"</text>
        </inputEntry>
        <outputEntry id="OutputEntry_6_1">
          <text>"OK"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_6_2">
          <text>"POS_IAM_SEM_COMPLICACAO"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_6_3">
          <text>false</text>
        </outputEntry>
        <outputEntry id="OutputEntry_6_4">
          <text>"Pos-IAM sem evidencia de complicacoes mecanicas. Manter vigilancia clinica. Alertar para sinais de alarme: sopro novo, hipotensao subita, deterioracao inexplicada."</text>
        </outputEntry>
        <outputEntry id="OutputEntry_6_5">
          <text>"BAIXA"</text>
        </outputEntry>
      </rule>

      <!-- FALLBACK -->
      <rule id="Rule_Fallback_SYN_MI_004">
        <description>Dados insuficientes para avaliacao</description>
        <inputEntry id="InputEntry_F_1">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_F_2">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_F_3">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_F_4">
          <text>-</text>
        </inputEntry>
        <outputEntry id="OutputEntry_F_1">
          <text>"Revisar"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_F_2">
          <text>"DADOS_INCOMPLETOS"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_F_3">
          <text>false</text>
        </outputEntry>
        <outputEntry id="OutputEntry_F_4">
          <text>"Dados insuficientes para avaliacao de complicacoes mecanicas. Verificar: dias pos-IAM, exame cardiaco (sopros), estabilidade hemodinamica, ECO recente."</text>
        </outputEntry>
        <outputEntry id="OutputEntry_F_5">
          <text>"MEDIA"</text>
        </outputEntry>
      </rule>

    </decisionTable>
  </decision>

  <dmndi:DMNDI>
    <dmndi:DMNDiagram id="DMNDiagram_SYN_MI_004">
      <dmndi:DMNShape id="DMNShape_Decision_SYN_MI_004" dmnElementRef="Decision_SYN_MI_004">
        <dc:Bounds height="80" width="180" x="160" y="100"/>
      </dmndi:DMNShape>
    </dmndi:DMNDiagram>
  </dmndi:DMNDI>

</definitions>
