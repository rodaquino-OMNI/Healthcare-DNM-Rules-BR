<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="https://www.omg.org/spec/DMN/20191111/MODEL/"
             xmlns:dmndi="https://www.omg.org/spec/DMN/20191111/DMNDI/"
             xmlns:dc="http://www.omg.org/spec/DMN/20180521/DC/"
             id="Definitions_SYN_DKA_005"
             name="Edema Cerebral na CAD"
             targetNamespace="http://camunda.org/schema/1.0/dmn">

  <!--
    SYN-DKA-005 - Deteccao de Edema Cerebral na CAD
    Versao: 1.0.0 (2026-02-06)
    Categoria: Alerta Clinico - Sindromes Criticas

    EDEMA CEREBRAL NA CAD:

    EPIDEMIOLOGIA:
    - Mais comum em CRIANCAS (0.5-1% dos casos)
    - Pode ocorrer em adultos (raro)
    - Mortalidade 20-40%, sequelas neurologicas em 20-25%

    FATORES DE RISCO:
    - Hidratacao muito rapida
    - Uso de bicarbonato
    - Queda rapida da glicose (> 100 mg/dL/h)
    - Queda rapida da osmolaridade
    - Primeiro episodio de CAD
    - Pacientes jovens

    SINAIS DE ALERTA (geralmente 4-12h apos inicio do tratamento):
    - Cefaleia intensa
    - Alteracao do nivel de consciencia
    - Convulsoes
    - Alteracoes pupilares
    - Postura de decorticacao/descerebração
    - Papiledema
    - Triade de Cushing (bradicardia, hipertensao, respiracao irregular)

    TRATAMENTO:
    - Reduzir taxa de hidratacao em 50%
    - Manitol 0.5-1 g/kg IV em 20 min (pode repetir em 30min)
    - OU Salina hipertonica 3% 2.5-5 mL/kg em 10-15 min
    - Elevar cabeceira 30 graus
    - TC de cranio URGENTE
    - Considerar intubacao se GCS < 8

    REFERENCIAS:
    - ISPAD Clinical Practice Consensus Guidelines 2022
    - ADA Pediatric DKA Guidelines
    - Wolfsdorf J et al. Pediatric Diabetes 2018
  -->

  <decision id="Decision_SYN_DKA_005" name="Edema Cerebral CAD">
    <decisionTable id="DecisionTable_SYN_DKA_005" hitPolicy="FIRST">

      <!-- INPUT 1: Nivel de Consciencia (Glasgow) -->
      <input id="Input_1" label="Escala de Glasgow">
        <inputExpression id="InputExpression_1" typeRef="number">
          <text>escalaGlasgow</text>
        </inputExpression>
      </input>

      <!-- INPUT 2: Cefaleia Intensa -->
      <input id="Input_2" label="Cefaleia Intensa">
        <inputExpression id="InputExpression_2" typeRef="boolean">
          <text>cefaleiaIntensa</text>
        </inputExpression>
      </input>

      <!-- INPUT 3: Alteracoes Pupilares -->
      <input id="Input_3" label="Alteracoes Pupilares">
        <inputExpression id="InputExpression_3" typeRef="boolean">
          <text>alteracoesPupilares</text>
        </inputExpression>
      </input>

      <!-- INPUT 4: Horas de Tratamento -->
      <input id="Input_4" label="Horas de Tratamento CAD">
        <inputExpression id="InputExpression_4" typeRef="number">
          <text>horasTratamentoCAD</text>
        </inputExpression>
      </input>

      <!-- OUTPUTS -->
      <output id="Output_1" label="Nivel Alerta" name="nivelAlerta" typeRef="string">
        <outputValues id="OutputValues_1">
          <text>"Alerta", "Atencao", "OK", "Revisar"</text>
        </outputValues>
      </output>

      <output id="Output_2" label="Classificacao Sindrome" name="classificacaoSindrome" typeRef="string"/>

      <output id="Output_3" label="Protocolo Ativado" name="protocoloAtivado" typeRef="boolean"/>

      <output id="Output_4" label="Acao Requerida" name="acaoRequerida" typeRef="string"/>

      <output id="Output_5" label="Urgencia" name="urgencia" typeRef="string">
        <outputValues id="OutputValues_5">
          <text>"CRITICA", "ALTA", "MEDIA", "BAIXA"</text>
        </outputValues>
      </output>

      <!-- RULE 1: Edema Cerebral Confirmado - Coma + Alteracoes Pupilares -->
      <rule id="Rule_Edema_Cerebral_Confirmado">
        <description>Edema cerebral confirmado - emergencia neurologica</description>
        <inputEntry id="InputEntry_1_1">
          <text>&lt; 8</text>
        </inputEntry>
        <inputEntry id="InputEntry_1_2">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_1_3">
          <text>true</text>
        </inputEntry>
        <inputEntry id="InputEntry_1_4">
          <text>[2..24]</text>
        </inputEntry>
        <outputEntry id="OutputEntry_1_1">
          <text>"Alerta"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_1_2">
          <text>"EDEMA_CEREBRAL_CAD"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_1_3">
          <text>true</text>
        </outputEntry>
        <outputEntry id="OutputEntry_1_4">
          <text>"EDEMA CEREBRAL - EMERGENCIA! MANITOL 0.5-1 g/kg IV em 20 min (pode repetir em 30min). Reduzir taxa de hidratacao em 50%. Elevar cabeceira 30 graus. INTUBACAO se GCS < 8. TC cranio URGENTE. Neurocirurgia de alerta."</text>
        </outputEntry>
        <outputEntry id="OutputEntry_1_5">
          <text>"CRITICA"</text>
        </outputEntry>
      </rule>

      <!-- RULE 2: Edema Cerebral Provavel -->
      <rule id="Rule_Edema_Cerebral_Provavel">
        <description>Edema cerebral provavel - deterioracao neurologica</description>
        <inputEntry id="InputEntry_2_1">
          <text>[8..12]</text>
        </inputEntry>
        <inputEntry id="InputEntry_2_2">
          <text>true</text>
        </inputEntry>
        <inputEntry id="InputEntry_2_3">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_2_4">
          <text>[2..24]</text>
        </inputEntry>
        <outputEntry id="OutputEntry_2_1">
          <text>"Alerta"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_2_2">
          <text>"EDEMA_CEREBRAL_PROVAVEL"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_2_3">
          <text>true</text>
        </outputEntry>
        <outputEntry id="OutputEntry_2_4">
          <text>"EDEMA CEREBRAL PROVAVEL - Glasgow reduzido + cefaleia. Reduzir taxa de hidratacao em 30%. Preparar manitol. TC cranio. Monitorar nivel de consciencia a cada 15-30 min. Avaliacao neurologica urgente."</text>
        </outputEntry>
        <outputEntry id="OutputEntry_2_5">
          <text>"CRITICA"</text>
        </outputEntry>
      </rule>

      <!-- RULE 3: Sinais de Alerta para Edema Cerebral -->
      <rule id="Rule_Sinais_Alerta_Edema">
        <description>Sinais de alerta para edema cerebral</description>
        <inputEntry id="InputEntry_3_1">
          <text>[12..14]</text>
        </inputEntry>
        <inputEntry id="InputEntry_3_2">
          <text>true</text>
        </inputEntry>
        <inputEntry id="InputEntry_3_3">
          <text>false</text>
        </inputEntry>
        <inputEntry id="InputEntry_3_4">
          <text>[2..24]</text>
        </inputEntry>
        <outputEntry id="OutputEntry_3_1">
          <text>"Alerta"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_3_2">
          <text>"ALERTA_EDEMA_CEREBRAL"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_3_3">
          <text>true</text>
        </outputEntry>
        <outputEntry id="OutputEntry_3_4">
          <text>"SINAIS DE ALERTA PARA EDEMA CEREBRAL. Cefaleia intensa em tratamento de CAD e um RED FLAG. Reduzir taxa de hidratacao. Monitorar Glasgow a cada 30 min. Verificar velocidade de queda da glicemia (meta < 50-100 mg/dL/h)."</text>
        </outputEntry>
        <outputEntry id="OutputEntry_3_5">
          <text>"ALTA"</text>
        </outputEntry>
      </rule>

      <!-- RULE 4: Prevencao de Edema - Tratamento inicial -->
      <rule id="Rule_Prevencao_Inicial">
        <description>Prevencao de edema cerebral na fase inicial</description>
        <inputEntry id="InputEntry_4_1">
          <text>&gt;= 14</text>
        </inputEntry>
        <inputEntry id="InputEntry_4_2">
          <text>false</text>
        </inputEntry>
        <inputEntry id="InputEntry_4_3">
          <text>false</text>
        </inputEntry>
        <inputEntry id="InputEntry_4_4">
          <text>&lt; 4</text>
        </inputEntry>
        <outputEntry id="OutputEntry_4_1">
          <text>"Atencao"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_4_2">
          <text>"PREVENCAO_EDEMA"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_4_3">
          <text>false</text>
        </outputEntry>
        <outputEntry id="OutputEntry_4_4">
          <text>"Fase inicial do tratamento de CAD. Prevencao de edema cerebral: nao baixar glicemia > 50-100 mg/dL/h, evitar bicarbonato em pediatria, nao hidratar muito rapido, monitorar nivel de consciencia regularmente."</text>
        </outputEntry>
        <outputEntry id="OutputEntry_4_5">
          <text>"MEDIA"</text>
        </outputEntry>
      </rule>

      <!-- RULE 5: Neurologico normal durante tratamento -->
      <rule id="Rule_Neuro_Normal">
        <description>Status neurologico normal durante tratamento</description>
        <inputEntry id="InputEntry_5_1">
          <text>15</text>
        </inputEntry>
        <inputEntry id="InputEntry_5_2">
          <text>false</text>
        </inputEntry>
        <inputEntry id="InputEntry_5_3">
          <text>false</text>
        </inputEntry>
        <inputEntry id="InputEntry_5_4">
          <text>-</text>
        </inputEntry>
        <outputEntry id="OutputEntry_5_1">
          <text>"OK"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_5_2">
          <text>"NEURO_NORMAL"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_5_3">
          <text>false</text>
        </outputEntry>
        <outputEntry id="OutputEntry_5_4">
          <text>"Status neurologico normal. Manter vigilancia clinica. Registrar Glasgow a cada 1-2h. Alertar para cefaleia, confusao, irritabilidade, ou qualquer deterioracao neurologica."</text>
        </outputEntry>
        <outputEntry id="OutputEntry_5_5">
          <text>"BAIXA"</text>
        </outputEntry>
      </rule>

      <!-- FALLBACK -->
      <rule id="Rule_Fallback_SYN_DKA_005">
        <description>Dados insuficientes para avaliacao</description>
        <inputEntry id="InputEntry_F_1">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_F_2">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_F_3">
          <text>-</text>
        </inputEntry>
        <inputEntry id="InputEntry_F_4">
          <text>-</text>
        </inputEntry>
        <outputEntry id="OutputEntry_F_1">
          <text>"Revisar"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_F_2">
          <text>"DADOS_INCOMPLETOS"</text>
        </outputEntry>
        <outputEntry id="OutputEntry_F_3">
          <text>false</text>
        </outputEntry>
        <outputEntry id="OutputEntry_F_4">
          <text>"Dados insuficientes para avaliacao de edema cerebral. Verificar: nivel de consciencia (Glasgow), cefaleia, pupilas, tempo de tratamento de CAD."</text>
        </outputEntry>
        <outputEntry id="OutputEntry_F_5">
          <text>"MEDIA"</text>
        </outputEntry>
      </rule>

    </decisionTable>
  </decision>

  <dmndi:DMNDI>
    <dmndi:DMNDiagram id="DMNDiagram_SYN_DKA_005">
      <dmndi:DMNShape id="DMNShape_Decision_SYN_DKA_005" dmnElementRef="Decision_SYN_DKA_005">
        <dc:Bounds height="80" width="180" x="160" y="100"/>
      </dmndi:DMNShape>
    </dmndi:DMNDiagram>
  </dmndi:DMNDI>

</definitions>
